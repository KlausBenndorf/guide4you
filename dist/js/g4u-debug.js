(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("jQuery"), require("ol"));
	else if(typeof define === 'function' && define.amd)
		define("g4u", ["jQuery", "ol"], factory);
	else if(typeof exports === 'object')
		exports["g4u"] = factory(require("jQuery"), require("ol"));
	else
		root["g4u"] = factory(root["jQuery"], root["ol"]);
})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 748);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(4);
var core = __webpack_require__(38);
var hide = __webpack_require__(23);
var redefine = __webpack_require__(24);
var ctx = __webpack_require__(32);
var PROTOTYPE = 'prototype';

var $export = function (type, name, source) {
  var IS_FORCED = type & $export.F;
  var IS_GLOBAL = type & $export.G;
  var IS_STATIC = type & $export.S;
  var IS_PROTO = type & $export.P;
  var IS_BIND = type & $export.B;
  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE];
  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});
  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});
  var key, own, out, exp;
  if (IS_GLOBAL) source = name;
  for (key in source) {
    // contains in native
    own = !IS_FORCED && target && target[key] !== undefined;
    // export native or passed
    out = (own ? target : source)[key];
    // bind timers to global for call from export context
    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;
    // extend global
    if (target) redefine(target, key, out, type & $export.U);
    // export
    if (exports[key] != out) hide(exports, key, exp);
    if (IS_PROTO && expProto[key] != out) expProto[key] = out;
  }
};
global.core = core;
// type bitmap
$export.F = 1;   // forced
$export.G = 2;   // global
$export.S = 4;   // static
$export.P = 8;   // proto
$export.B = 16;  // bind
$export.W = 32;  // wrap
$export.U = 64;  // safe
$export.R = 128; // real proto method for `library`
module.exports = $export;


/***/ }),
/* 1 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_1__;

/***/ }),
/* 2 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_2__;

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(7);
module.exports = function (it) {
  if (!isObject(it)) throw TypeError(it + ' is not an object!');
  return it;
};


/***/ }),
/* 4 */
/***/ (function(module, exports) {

// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
var global = module.exports = typeof window != 'undefined' && window.Math == Math
  ? window : typeof self != 'undefined' && self.Math == Math ? self
  // eslint-disable-next-line no-new-func
  : Function('return this')();
if (typeof __g == 'number') __g = global; // eslint-disable-line no-undef


/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; /**
                                                                                                                                                                                                                                                                               * @module utilities
                                                                                                                                                                                                                                                                               * Helper and misc functions
                                                                                                                                                                                                                                                                               */

exports.even = even;
exports.odd = odd;
exports.checkFor = checkFor;
exports.asObject = asObject;
exports.getConfig = getConfig;
exports.asyncImageLoad = asyncImageLoad;
exports.finishAllImages = finishAllImages;
exports.offset = offset;
exports.recursiveSelect = recursiveSelect;
exports.showInteractionActivity = showInteractionActivity;
exports.urlDirname = urlDirname;
exports.urlNormalize = urlNormalize;
exports.urlJoin = urlJoin;
exports.urlRelative = urlRelative;
exports.urlIsAbsolute = urlIsAbsolute;
exports.mixin = mixin;
exports.mixinAsClass = mixinAsClass;
exports.html2Text = html2Text;

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

__webpack_require__(63);

__webpack_require__(63);

__webpack_require__(63);

__webpack_require__(63);

var _Debug = __webpack_require__(15);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * Checks whether an argument can be interpreted as an even integer
 * @param   {Object}  value A value of any type
 * @returns {Boolean} True when value is numeric, parses as an integer (no matter if decimal, octal or sexadecimal)
 */
function even(value) {
  if (_jquery2.default.isNumeric(value)) {
    var valueAsInteger = parseInt(value);
    if (value === valueAsInteger && valueAsInteger % 2 === 0) {
      return true;
    }
  }
  return false;
}

/**
 * Checks whether an argument can be interpreted as an even integer
 * @param   {Object}  value A value of any type
 * @returns {Boolean} True when value is numeric, parses as an integer (no matter if decimal, octal or sexadecimal)
 */
function odd(value) {
  if (_jquery2.default.isNumeric(value)) {
    var valueAsInteger = parseInt(value);
    if (value === valueAsInteger && valueAsInteger % 2 === 1) {
      return true;
    }
  }
  return false;
}

/**
 * Check for a label in a configuration object
 * @param   {Object}  configurationObject a configuration object
 * @param   {String}  label               a label to check for
 * @returns {boolean} true if label present and true, false otherwise
 */
function checkFor(configurationObject, label) {
  return label in configurationObject && configurationObject[label];
}

/**
 * return argument as object (if it is no object the value is {})
 * @returns {Object}
 */
function asObject(argument) {
  return (typeof argument === 'undefined' ? 'undefined' : _typeof(argument)) === 'object' ? argument : {};
}

/**
 * Gets the subconfig or an empty object
 * @param {object} config
 * @param {string} name
 * @returns {object}
 */
function getConfig(config, name) {
  if (name in config && config[name]) {
    if (_typeof(config[name]) !== 'object') {
      return {};
    } else {
      return config[name];
    }
  }
}

// //////////////////////////////////////////////////////////////////////////////////////// //
//                      async image load                                                    //
// //////////////////////////////////////////////////////////////////////////////////////// //

/**
 * @param {HTMLImageElement} image
 * @param {URL} origUrl
 * @param {string} [finalUrl]
 * @returns {Promise}
 */
function asyncImageLoad(image, origUrl, finalUrl) {
  if (!finalUrl) {
    finalUrl = origUrl.finalize();
  }
  return new Promise(function (resolve, reject) {
    image.addEventListener('load', resolve);
    image.addEventListener('error', reject);
    if (!origUrl.username || !origUrl.password) {
      image.src = finalUrl;
    } else {
      var xhr = new XMLHttpRequest(); // eslint-disable-line no-undef
      // xhr.open('GET', url, true, username, password)
      xhr.open('GET', finalUrl, true);
      xhr.responseType = 'blob';
      xhr.withCredentials = true;

      xhr.setRequestHeader(origUrl.useProxy ? 'X-Proxy-Forward-Authorization' : 'Authorization', 'Basic ' + btoa(origUrl.username + ':' + origUrl.password)); // eslint-disable-line no-undef

      xhr.addEventListener('load', function (e) {
        if (this.status === 200) {
          var urlCreator = window.URL || window.webkitURL;
          image.src = urlCreator.createObjectURL(this.response);
        } else {
          reject(e);
        }
      });

      xhr.send();
    }
  });
}

// //////////////////////////////////////////////////////////////////////////////////////// //
//                      finish all ajax requests then continue                              //
// //////////////////////////////////////////////////////////////////////////////////////// //

/**
 * finishs loading all images contained in the given jQuery object.
 * @param {jQuery} $object
 * @returns {Promise}
 */
function finishAllImages($object) {
  var imagePromises = [];

  var $images = recursiveSelect($object, 'img');

  $images.each(function () {
    var image = this;

    if (!image.complete) {
      imagePromises.push(new Promise(function (resolve) {
        (0, _jquery2.default)(image).on('load', resolve);
        (0, _jquery2.default)(image).on('error', resolve);
      }));
    }
  });

  return Promise.all(imagePromises);
}

/**
 * calculates the distance between one and another jQuery element
 * @param {jQuery} $one
 * @param {jQuery} $other
 * @returns {{top: number, left: number}}
 */
function offset($one, $other) {
  var oneOff = $one.offset();
  var otherOff = $other.offset();
  return { top: oneOff.top - otherOff.top, left: oneOff.left - otherOff.left };
}

// //////////////////////////////////////////////////////////////////////////////////////////
//                                   jQuery Extensions                                    //
// //////////////////////////////////////////////////////////////////////////////////////////

/**
 * selects all matching elements and child elements
 * @param {jQuery} $elem
 * @param {string} query
 * @returns {jQuery}
 */
function recursiveSelect($elem, query) {
  return $elem.filter(query).add($elem.find(query));
}

// //////////////////////////////////////////////////////////////////////////////////////// //
//                                Structural Functions                                      //
// //////////////////////////////////////////////////////////////////////////////////////// //

function showInteractionActivity(map) {
  _Debug.Debug.info('superseding interactions:');
  var k = void 0,
      i = void 0;
  var total = void 0;
  var amountActive = void 0;

  for (k in map.supersedingInteractions_) {
    total = map.supersedingInteractions_[k].length;
    amountActive = 0;
    for (i = 0; i < total; i++) {
      if (map.supersedingInteractions_[k][i].getActive()) {
        amountActive += 1;
      }
    }

    _Debug.Debug.info('  ' + k + ': total: ' + total + ' active: ' + amountActive);
  }

  _Debug.Debug.info('default interactions:');

  for (k in map.defaultInteractions_) {
    total = map.defaultInteractions_[k].length;
    amountActive = 0;
    for (i = 0; i < total; i++) {
      if (map.defaultInteractions_[k][i].getActive()) {
        amountActive += 1;
      }
    }

    _Debug.Debug.info('  ' + k + ': total: ' + total + ' active: ' + amountActive);
  }
}

// //////////////////////////////////////////////////////////////////////////////////////// //
//                                     URL Functions                                        //
// //////////////////////////////////////////////////////////////////////////////////////// //

// the functions are designed to mimic the behaviour of the node path module.
// differences: dirURLs will end in /'s
// the are in no way complete and don't claim to be complete
// NOTE: another way to solve this would be using String.split instead of regular expressions

/**
 * A function that tries to get the dir url of an url
 * @param {string} url
 * @returns {string}
 */
function urlDirname(url) {
  return url.replace(/\/([^/]*)(\?.*)?$/, '/');
}

/**
 * A function that normalizes a url
 * @param {string} url
 * @returns {string}
 */
function urlNormalize(url) {
  if (url.match(/^\.\//)) {
    return urlNormalize(url.replace(/^\.\//, ''));
  } else {
    return url;
  }
}

/**
 * A function that adds urls
 * @param {string} urlRoot
 * @param {string} urlExt
 * @returns {string}
 */
function urlJoin(urlRoot, urlExt) {
  var normPathRoot = urlDirname(urlNormalize(urlRoot));
  var normPathExt = urlNormalize(urlExt);

  var lastPart = /[^/]+\/$/;
  var leadingDoubleDots = /^\.\.\//;

  while (normPathRoot.match(lastPart) && normPathExt.match(leadingDoubleDots)) {
    normPathRoot = normPathRoot.replace(lastPart, '');
    normPathExt = normPathExt.replace(leadingDoubleDots, '');
  }

  return normPathRoot + normPathExt;
}

/**
 * A function that tries to get the relative url between to urles
 * @param {string} source
 * @param {string} target
 * @returns {string}
 */
function urlRelative(source, target) {
  var sourceNorm = urlDirname(urlNormalize(source));
  var targetNorm = urlNormalize(target);

  var urlRelative = '';

  var firstPart = /^\/?((\/\/)|[^/])+\//;

  var firstSourcePart = void 0;
  var firstTargetPart = void 0;

  while (sourceNorm.match(firstPart) && targetNorm.match(firstPart)) {
    firstSourcePart = sourceNorm.match(firstPart)[0];
    firstTargetPart = targetNorm.match(firstPart)[0];

    if (firstSourcePart.toUpperCase() !== firstTargetPart.toUpperCase()) {
      break;
    }

    sourceNorm = sourceNorm.replace(firstPart, '');
    targetNorm = targetNorm.replace(firstPart, '');
  }

  while (sourceNorm.match(firstPart)) {
    firstSourcePart = sourceNorm.match(firstPart)[0];
    sourceNorm = sourceNorm.replace(firstPart, '');
    urlRelative += '../';
  }

  return urlRelative + targetNorm;
}

/**
 * @param {string} url
 * @returns {boolean}
 */
function urlIsAbsolute(url) {
  return !!url.match(/^\/|.*:\/\//);
}

// //////////////////////////////////////////////////////////////////////////////////////// //
//                                         Other                                            //
// //////////////////////////////////////////////////////////////////////////////////////// //

function getPropertyNamesAndDescriptions(obj) {
  var props = {};

  do {
    Object.getOwnPropertyNames(obj).forEach(function (prop) {
      if (!props.hasOwnProperty(prop)) {
        props[prop] = Object.getOwnPropertyDescriptor(obj, prop);
      }
    });
    obj = Object.getPrototypeOf(obj);
  } while (obj !== Object.prototype);

  return props;
}

/**
 * This creates a new class which inherits from the base class and mixes in every method (except any method named
 * 'initialize') from the mixin class. The mixin class may not overwrite any existing method. If it has a method called
 * 'initialize' this will be remembered and called after the constructor of the base class has finished
 * @param baseClass
 * @param mixinClasses
 * @returns {class}
 */
function mixin(baseClass, mixinClasses) {
  if (!Array.isArray(mixinClasses)) {
    mixinClasses = [mixinClasses];
  }
  var initializes = mixinClasses.map(function (mC) {
    return mC.prototype.initialize;
  });

  var mixed = function (_baseClass) {
    _inherits(mixed, _baseClass);

    function mixed(options) {
      _classCallCheck(this, mixed);

      var _this = _possibleConstructorReturn(this, (mixed.__proto__ || Object.getPrototypeOf(mixed)).call(this, options));

      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = initializes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var initialize = _step.value;

          if (initialize) {
            initialize.call(_this, options);
          }
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }

      return _this;
    }

    return mixed;
  }(baseClass);

  var _iteratorNormalCompletion2 = true;
  var _didIteratorError2 = false;
  var _iteratorError2 = undefined;

  try {
    for (var _iterator2 = mixinClasses[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
      var mixinClass = _step2.value;

      var propsAndDescriptions = getPropertyNamesAndDescriptions(mixinClass.prototype);

      for (var name in propsAndDescriptions) {
        if (name !== 'constructor' && name !== 'initialize') {
          if (name in mixed.prototype) {
            throw new Error('mixins should not overwrite methods');
          }
          Object.defineProperty(mixed.prototype, name, propsAndDescriptions[name]);
        }
      }
    }
  } catch (err) {
    _didIteratorError2 = true;
    _iteratorError2 = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion2 && _iterator2.return) {
        _iterator2.return();
      }
    } finally {
      if (_didIteratorError2) {
        throw _iteratorError2;
      }
    }
  }

  return mixed;
}

/**
 * This returns a mixin as a normal class.
 * @param mixinClass
 * @returns {class}
 */
function mixinAsClass(mixinClass) {
  var initialize = mixinClass.prototype.initialize;

  var m = function (_mixinClass) {
    _inherits(m, _mixinClass);

    function m(options) {
      _classCallCheck(this, m);

      var _this2 = _possibleConstructorReturn(this, (m.__proto__ || Object.getPrototypeOf(m)).call(this, options));

      if (initialize) {
        initialize.call(_this2, options);
      }
      return _this2;
    }

    return m;
  }(mixinClass);

  return m;
}

var $p = (0, _jquery2.default)('<p>');

/**
 * Takes a string with HTML and returns the containing resulting text.
 * @param stringWithHTML string with encoded HTML entities
 * @returns {string}
 */
function html2Text(stringWithHTML) {
  return $p.html(stringWithHTML).text();
}

/***/ }),
/* 6 */
/***/ (function(module, exports) {

module.exports = function (exec) {
  try {
    return !!exec();
  } catch (e) {
    return true;
  }
};


/***/ }),
/* 7 */
/***/ (function(module, exports) {

module.exports = function (it) {
  return typeof it === 'object' ? it !== null : typeof it === 'function';
};


/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

var baseMatches = __webpack_require__(586),
    baseMatchesProperty = __webpack_require__(587),
    identity = __webpack_require__(79),
    isArray = __webpack_require__(10),
    property = __webpack_require__(697);

/**
 * The base implementation of `_.iteratee`.
 *
 * @private
 * @param {*} [value=_.identity] The value to convert to an iteratee.
 * @returns {Function} Returns the iteratee.
 */
function baseIteratee(value) {
  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.
  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.
  if (typeof value == 'function') {
    return value;
  }
  if (value == null) {
    return identity;
  }
  if (typeof value == 'object') {
    return isArray(value)
      ? baseMatchesProperty(value[0], value[1])
      : baseMatches(value);
  }
  return property(value);
}

module.exports = baseIteratee;


/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

var store = __webpack_require__(107)('wks');
var uid = __webpack_require__(62);
var Symbol = __webpack_require__(4).Symbol;
var USE_SYMBOL = typeof Symbol == 'function';

var $exports = module.exports = function (name) {
  return store[name] || (store[name] =
    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));
};

$exports.store = store;


/***/ }),
/* 10 */
/***/ (function(module, exports) {

/**
 * Checks if `value` is classified as an `Array` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an array, else `false`.
 * @example
 *
 * _.isArray([1, 2, 3]);
 * // => true
 *
 * _.isArray(document.body.children);
 * // => false
 *
 * _.isArray('abc');
 * // => false
 *
 * _.isArray(_.noop);
 * // => false
 */
var isArray = Array.isArray;

module.exports = isArray;


/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
/**
 * Globals
 */

/**
 * Descriptive identifiers for some keyCodes
 * @type {object.<string, number>}
 */
var keyCodes = exports.keyCodes = {
  ESCAPE: 27,
  TAB: 9,
  ARROW_DOWN: 40,
  ARROW_UP: 38,
  ENTER: 13,
  SHIFT: 16,
  CTRL: 17
};

/**
 * Names of globally used cssClasses are stored here
 * @type {object.<string, string>}
 */
var cssClasses = exports.cssClasses = {
  mousedown: 'g4u-mouse-down',
  clickable: 'g4u-clickable',
  crosshair: 'g4u-crosshair',
  hidden: 'g4u-hidden',
  arrow: 'g4u-arrow',
  mobile: 'g4u-mobile',
  desktop: 'g4u-desktop',
  move: 'g4u-move',
  active: 'g4u-active',
  mainButton: 'g4u-control-mainbutton',
  hasTooltip: 'g4u-has-tooltip',
  upperCase: 'g4u-uppercase',
  collapsed: 'g4u-collapsed'
};

/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

// Thank's IE8 for his funny defineProperty
module.exports = !__webpack_require__(6)(function () {
  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;
});


/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

var anObject = __webpack_require__(3);
var IE8_DOM_DEFINE = __webpack_require__(199);
var toPrimitive = __webpack_require__(42);
var dP = Object.defineProperty;

exports.f = __webpack_require__(12) ? Object.defineProperty : function defineProperty(O, P, Attributes) {
  anObject(O);
  P = toPrimitive(P, true);
  anObject(Attributes);
  if (IE8_DOM_DEFINE) try {
    return dP(O, P, Attributes);
  } catch (e) { /* empty */ }
  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');
  if ('value' in Attributes) O[P] = Attributes.value;
  return O;
};


/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

// 7.1.15 ToLength
var toInteger = __webpack_require__(41);
var min = Math.min;
module.exports = function (it) {
  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991
};


/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * This class provides different debug behaviour based on the SWITCH_DEBUG build flag
 */
var Debug = exports.Debug = function () {
  function Debug() {
    _classCallCheck(this, Debug);
  }

  _createClass(Debug, null, [{
    key: 'tryOrThrow',

    /**
     * if in release mode all thrown errors in the callback are catched and the program is continued
     * @param {function} cb
     */
    value: function tryOrThrow(cb) {
      if (true) {
        // eslint-disable-line
        cb();
      } else if (SWITCH_DEBUG === 'PRODUCTION') {
        // eslint-disable-line
        try {
          cb();
        } catch (e) {
          this.error(e);
        }
      }
    }

    /**
     * Prints an info note if in debug mode
     * @param {string} msg
     */

  }, {
    key: 'info',
    value: function info(msg) {
      if (true) {
        // eslint-disable-line
        console.log(msg); // eslint-disable-line
      }
    }

    /**
     * prints a warning
     * @param {string} msg
     */

  }, {
    key: 'warn',
    value: function warn(msg) {
      console.warn(msg); // eslint-disable-line
    }

    /**
     * prints an error
     * @param {string} msg
     */

  }, {
    key: 'error',
    value: function error(msg) {
      console.error(msg); // eslint-disable-line
    }

    /**
     * a default error handler for .catch functions
     * @param {string} message
     */

  }, {
    key: 'defaultErrorHandler',
    value: function defaultErrorHandler(message) {
      Debug.error(message);
      if (message.stack) {
        Debug.error(message.stack);
      }
    }
  }]);

  return Debug;
}();

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

// 7.1.13 ToObject(argument)
var defined = __webpack_require__(39);
module.exports = function (it) {
  return Object(defined(it));
};


/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

var identity = __webpack_require__(79),
    overRest = __webpack_require__(254),
    setToString = __webpack_require__(256);

/**
 * The base implementation of `_.rest` which doesn't validate or coerce arguments.
 *
 * @private
 * @param {Function} func The function to apply a rest parameter to.
 * @param {number} [start=func.length-1] The start position of the rest parameter.
 * @returns {Function} Returns the new function.
 */
function baseRest(func, start) {
  return setToString(overRest(func, start, identity), func + '');
}

module.exports = baseRest;


/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

var toFinite = __webpack_require__(728);

/**
 * Converts `value` to an integer.
 *
 * **Note:** This method is loosely based on
 * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to convert.
 * @returns {number} Returns the converted integer.
 * @example
 *
 * _.toInteger(3.2);
 * // => 3
 *
 * _.toInteger(Number.MIN_VALUE);
 * // => 0
 *
 * _.toInteger(Infinity);
 * // => 1.7976931348623157e+308
 *
 * _.toInteger('3.2');
 * // => 3
 */
function toInteger(value) {
  var result = toFinite(value),
      remainder = result % 1;

  return result === result ? (remainder ? result - remainder : result) : 0;
}

module.exports = toInteger;


/***/ }),
/* 19 */
/***/ (function(module, exports) {

module.exports = function (it) {
  if (typeof it != 'function') throw TypeError(it + ' is not a function!');
  return it;
};


/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

var arrayPush = __webpack_require__(162),
    isFlattenable = __webpack_require__(618);

/**
 * The base implementation of `_.flatten` with support for restricting flattening.
 *
 * @private
 * @param {Array} array The array to flatten.
 * @param {number} depth The maximum recursion depth.
 * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.
 * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.
 * @param {Array} [result=[]] The initial result value.
 * @returns {Array} Returns the new flattened array.
 */
function baseFlatten(array, depth, predicate, isStrict, result) {
  var index = -1,
      length = array.length;

  predicate || (predicate = isFlattenable);
  result || (result = []);

  while (++index < length) {
    var value = array[index];
    if (depth > 0 && predicate(value)) {
      if (depth > 1) {
        // Recursively flatten arrays (susceptible to call stack limits).
        baseFlatten(value, depth - 1, predicate, isStrict, result);
      } else {
        arrayPush(result, value);
      }
    } else if (!isStrict) {
      result[result.length] = value;
    }
  }
  return result;
}

module.exports = baseFlatten;


/***/ }),
/* 21 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Control = undefined;

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _utilities = __webpack_require__(5);

var _ControlLogicMixin = __webpack_require__(182);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * @typedef {object} g4uControlOptions
 * @property {string} [controlType] the type of the control. If not given the name of the control is used
 * @property {number} [importance] how important the control is on the map. the higher this value is, the longer it
 *    will be kept on the map if the viewport gets smaller.
 * @property {string} [activeGroup] if controls are in the same active group only one of them can be active at the same
 *    time
 * @property {string} [className]
 * @property {HTMLElement} element
 * @property {L10N} localiser the localiser to use by the control.
 * @property {string} controlName the name of the control.
 * @property {boolean} [singleButton=false] if the control only consists of one button
 * @property {String|HTMLElement|jQuery} [target]
 * @property {Localizable} [title] not used by every control
 * @property {Localizable} [tipLabel] not used by every control
 * @property {Float} [float]
 * @property {boolean} [windowed=false] whether the control resides inside a window or not
 */

/**
 * This is a customized ol.control.Control class, all logic is in the ol.control.ControlLogic
 * @class Control
 * @extends {ControlLogicMixin}
 * @extends {ol.control.Control}
 */

var Control = exports.Control = (0, _utilities.mixin)(_openlayers2.default.control.Control, _ControlLogicMixin.ControlLogicMixin);

/***/ }),
/* 22 */
/***/ (function(module, exports) {

var hasOwnProperty = {}.hasOwnProperty;
module.exports = function (it, key) {
  return hasOwnProperty.call(it, key);
};


/***/ }),
/* 23 */
/***/ (function(module, exports, __webpack_require__) {

var dP = __webpack_require__(13);
var createDesc = __webpack_require__(58);
module.exports = __webpack_require__(12) ? function (object, key, value) {
  return dP.f(object, key, createDesc(1, value));
} : function (object, key, value) {
  object[key] = value;
  return object;
};


/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(4);
var hide = __webpack_require__(23);
var has = __webpack_require__(22);
var SRC = __webpack_require__(62)('src');
var TO_STRING = 'toString';
var $toString = Function[TO_STRING];
var TPL = ('' + $toString).split(TO_STRING);

__webpack_require__(38).inspectSource = function (it) {
  return $toString.call(it);
};

(module.exports = function (O, key, val, safe) {
  var isFunction = typeof val == 'function';
  if (isFunction) has(val, 'name') || hide(val, 'name', key);
  if (O[key] === val) return;
  if (isFunction) has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));
  if (O === global) {
    O[key] = val;
  } else if (!safe) {
    delete O[key];
    hide(O, key, val);
  } else if (O[key]) {
    O[key] = val;
  } else {
    hide(O, key, val);
  }
// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative
})(Function.prototype, TO_STRING, function toString() {
  return typeof this == 'function' && this[SRC] || $toString.call(this);
});


/***/ }),
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
var fails = __webpack_require__(6);
var defined = __webpack_require__(39);
var quot = /"/g;
// B.2.3.2.1 CreateHTML(string, tag, attribute, value)
var createHTML = function (string, tag, attribute, value) {
  var S = String(defined(string));
  var p1 = '<' + tag;
  if (attribute !== '') p1 += ' ' + attribute + '="' + String(value).replace(quot, '&quot;') + '"';
  return p1 + '>' + S + '</' + tag + '>';
};
module.exports = function (NAME, exec) {
  var O = {};
  O[NAME] = exec(createHTML);
  $export($export.P + $export.F * fails(function () {
    var test = ''[NAME]('"');
    return test !== test.toLowerCase() || test.split('"').length > 3;
  }), 'String', O);
};


/***/ }),
/* 26 */
/***/ (function(module, exports, __webpack_require__) {

// to indexed object, toObject with fallback for non-array-like ES3 strings
var IObject = __webpack_require__(85);
var defined = __webpack_require__(39);
module.exports = function (it) {
  return IObject(defined(it));
};


/***/ }),
/* 27 */
/***/ (function(module, exports) {

/**
 * A specialized version of `_.map` for arrays without support for iteratee
 * shorthands.
 *
 * @private
 * @param {Array} [array] The array to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array} Returns the new mapped array.
 */
function arrayMap(array, iteratee) {
  var index = -1,
      length = array == null ? 0 : array.length,
      result = Array(length);

  while (++index < length) {
    result[index] = iteratee(array[index], index, array);
  }
  return result;
}

module.exports = arrayMap;


/***/ }),
/* 28 */
/***/ (function(module, exports, __webpack_require__) {

var pIE = __webpack_require__(86);
var createDesc = __webpack_require__(58);
var toIObject = __webpack_require__(26);
var toPrimitive = __webpack_require__(42);
var has = __webpack_require__(22);
var IE8_DOM_DEFINE = __webpack_require__(199);
var gOPD = Object.getOwnPropertyDescriptor;

exports.f = __webpack_require__(12) ? gOPD : function getOwnPropertyDescriptor(O, P) {
  O = toIObject(O);
  P = toPrimitive(P, true);
  if (IE8_DOM_DEFINE) try {
    return gOPD(O, P);
  } catch (e) { /* empty */ }
  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);
};


/***/ }),
/* 29 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)
var has = __webpack_require__(22);
var toObject = __webpack_require__(16);
var IE_PROTO = __webpack_require__(148)('IE_PROTO');
var ObjectProto = Object.prototype;

module.exports = Object.getPrototypeOf || function (O) {
  O = toObject(O);
  if (has(O, IE_PROTO)) return O[IE_PROTO];
  if (typeof O.constructor == 'function' && O instanceof O.constructor) {
    return O.constructor.prototype;
  } return O instanceof Object ? ObjectProto : null;
};


/***/ }),
/* 30 */
/***/ (function(module, exports, __webpack_require__) {

var isArrayLike = __webpack_require__(47),
    isObjectLike = __webpack_require__(71);

/**
 * This method is like `_.isArrayLike` except that it also checks if `value`
 * is an object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an array-like object,
 *  else `false`.
 * @example
 *
 * _.isArrayLikeObject([1, 2, 3]);
 * // => true
 *
 * _.isArrayLikeObject(document.body.children);
 * // => true
 *
 * _.isArrayLikeObject('abc');
 * // => false
 *
 * _.isArrayLikeObject(_.noop);
 * // => false
 */
function isArrayLikeObject(value) {
  return isObjectLike(value) && isArrayLike(value);
}

module.exports = isArrayLikeObject;


/***/ }),
/* 31 */
/***/ (function(module, exports) {

var toString = {}.toString;

module.exports = function (it) {
  return toString.call(it).slice(8, -1);
};


/***/ }),
/* 32 */
/***/ (function(module, exports, __webpack_require__) {

// optional / simple context binding
var aFunction = __webpack_require__(19);
module.exports = function (fn, that, length) {
  aFunction(fn);
  if (that === undefined) return fn;
  switch (length) {
    case 1: return function (a) {
      return fn.call(that, a);
    };
    case 2: return function (a, b) {
      return fn.call(that, a, b);
    };
    case 3: return function (a, b, c) {
      return fn.call(that, a, b, c);
    };
  }
  return function (/* ...args */) {
    return fn.apply(that, arguments);
  };
};


/***/ }),
/* 33 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__(6);

module.exports = function (method, arg) {
  return !!method && fails(function () {
    // eslint-disable-next-line no-useless-call
    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);
  });
};


/***/ }),
/* 34 */
/***/ (function(module, exports) {

/**
 * Gets the last element of `array`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Array
 * @param {Array} array The array to query.
 * @returns {*} Returns the last element of `array`.
 * @example
 *
 * _.last([1, 2, 3]);
 * // => 3
 */
function last(array) {
  var length = array == null ? 0 : array.length;
  return length ? array[length - 1] : undefined;
}

module.exports = last;


/***/ }),
/* 35 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getInFront = getInFront;
exports.addTooltip = addTooltip;

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _globals = __webpack_require__(11);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * This function gets an $element inside a $context in fornt of all of them
 * @param {jQuery} $element
 * @param {jQuery} $context
 */
/**
 * @module html
 * html helper functions
 */

function getInFront($element, $context) {
  var highest = 0;

  $context = $context || (0, _jquery2.default)(document);

  var foundAbsolute = false;

  $element.parents().each(function (i, el) {
    if (!(0, _jquery2.default)(el).is($context)) {
      if ((0, _jquery2.default)(el).css('position') === 'absolute') {
        foundAbsolute = true;
        getInFront((0, _jquery2.default)(el), $context);
        getInFront($element, (0, _jquery2.default)(el));
      }
    }
  });

  if (!foundAbsolute) {
    $context.find('*:visible').not(function (i, el) {
      return el !== $element[0] && (0, _jquery2.default)(el).parents().is($element);
    }).each(function () {
      var current = parseInt((0, _jquery2.default)(this).css('z-index'), 10);
      if (current && highest < current) {
        highest = current;
      }
    });

    $element.css('z-index', highest + 1);
  }
}

/**
 * @param {jQuery} $element
 * @param {string} text
 */
function addTooltip($element, text) {
  $element.addClass(_globals.cssClasses.hasTooltip).append((0, _jquery2.default)('<span role="tooltip">').html(text));
}

/***/ }),
/* 36 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; /**
                                                                                                                                                                                                                                                                               * @module utilitiesObject
                                                                                                                                                                                                                                                                               * Helper- and Miscfunctions (object related)
                                                                                                                                                                                                                                                                               */

exports.copy = copy;
exports.copyDeep = copyDeep;
exports.merge = merge;
exports.mergeDeep = mergeDeep;
exports.mergeWithDefaults = mergeWithDefaults;
exports.take = take;

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// //////////////////////////////////////////////////////////////////////////////////////// //
//                                     Object Copying                                       //
// //////////////////////////////////////////////////////////////////////////////////////// //

/**
 * Copy an object
 * @param {Object} object
 * @returns {Object}
 */
function copy(object) {
  if (_jquery2.default.isArray(object)) {
    return _jquery2.default.extend([], object);
  } else if (_jquery2.default.isPlainObject(object)) {
    return _jquery2.default.extend({}, object);
  } else {
    return object;
  }
}

/**
 * Deep copy an object
 * @param {Object} object
 * @returns {Object}
 */
function copyDeep(object) {
  if (_jquery2.default.isArray(object)) {
    return _jquery2.default.extend(true, [], object);
  } else if (_jquery2.default.isPlainObject(object)) {
    return _jquery2.default.extend(true, {}, object);
  } else {
    return object;
  }
}

// //////////////////////////////////////////////////////////////////////////////////////// //
//                                    Object Merging                                        //
// //////////////////////////////////////////////////////////////////////////////////////// //

/**
 * A simple object merge function. merges all keys of obj2 to obj1.
 * @param {Object} obj1 the object which will be merged into
 * @param {Object} obj2 the object that will be merged into obj1
 * @returns {Object}
 */
function merge(obj1, obj2) {
  return _jquery2.default.extend(obj1, obj2);
}

/**
 * A simple reverse object merge function. merges all keys of obj2 to obj1.
 * @param {Object} obj1 the object which will be merged into
 * @param {Object} obj2 the object that will be merged into obj1
 * @returns {Object}
 */
function mergeDeep(obj1, obj2) {
  return _jquery2.default.extend(true, obj1, obj2);
}

/**
 * basically adds all properties (key, value - pairs) from defaults to config whichs keys aren't keys of config.
 *      (except for keys with 'Element' in their name)
 * if the value is an object (on the left side, config) it is called recursively
 * if the value is an array (on the left side, config) it is called with the key value+'Element' for each element
 *      of the array
 * @param {Object} config the config which should be mergeed with defaults
 * @param {Object} defaults the defaults to be merged with config
 * @returns {Object} the altered config
 */
function mergeWithDefaults(config, defaults) {
  if ((typeof defaults === 'undefined' ? 'undefined' : _typeof(defaults)) === 'object' && (typeof config === 'undefined' ? 'undefined' : _typeof(config)) === 'object') {
    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
      for (var _iterator = Object.keys(defaults)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
        var k = _step.value;

        if (!(k in config) && k.search('Element') < 0) {
          config[k] = defaults[k];
          // order of this branches is important because typeof Array equals object
        } else if (config[k] instanceof Array) {
          // if both arrays have the same length, it assumed that every element of the array in default is
          //      the default for every element in the array in config
          if (config[k].length === defaults[k].length) {
            for (var i = 0; i < config[k].length; i += 1) {
              mergeWithDefaults(config[k][i], defaults[k][i]);
            }
          } else {
            // if there exists a key with the name k+'Element' then it is the default for every element of
            //      the configuration
            if (k + 'Element' in defaults) {
              for (var _i = 0; _i < config[k].length; _i += 1) {
                mergeWithDefaults(config[k][_i], defaults[k + 'Element']);
              }
            }
          }
        } else if (_typeof(config[k]) === 'object') {
          mergeWithDefaults(config[k], defaults[k]);
        } else if (_typeof(config[k]) !== 'object' && _typeof(defaults[k]) === 'object' && config[k]) {
          config[k] = {};
          mergeWithDefaults(config[k], defaults[k]);
        }
      }
    } catch (err) {
      _didIteratorError = true;
      _iteratorError = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion && _iterator.return) {
          _iterator.return();
        }
      } finally {
        if (_didIteratorError) {
          throw _iteratorError;
        }
      }
    }
  } else {
    if (!config) {
      config = defaults;
    }
  }
  return config;
}

/**
 * Removes a property from an object and returns its value
 * @param {Object} object
 * @param {String} prop
 * @returns {*}
 */
function take(object, prop) {
  if (object.hasOwnProperty(prop)) {
    var tmp = object[prop];
    delete object[prop];
    return tmp;
  }
}

/***/ }),
/* 37 */
/***/ (function(module, exports, __webpack_require__) {

// 0 -> Array#forEach
// 1 -> Array#map
// 2 -> Array#filter
// 3 -> Array#some
// 4 -> Array#every
// 5 -> Array#find
// 6 -> Array#findIndex
var ctx = __webpack_require__(32);
var IObject = __webpack_require__(85);
var toObject = __webpack_require__(16);
var toLength = __webpack_require__(14);
var asc = __webpack_require__(133);
module.exports = function (TYPE, $create) {
  var IS_MAP = TYPE == 1;
  var IS_FILTER = TYPE == 2;
  var IS_SOME = TYPE == 3;
  var IS_EVERY = TYPE == 4;
  var IS_FIND_INDEX = TYPE == 6;
  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;
  var create = $create || asc;
  return function ($this, callbackfn, that) {
    var O = toObject($this);
    var self = IObject(O);
    var f = ctx(callbackfn, that, 3);
    var length = toLength(self.length);
    var index = 0;
    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;
    var val, res;
    for (;length > index; index++) if (NO_HOLES || index in self) {
      val = self[index];
      res = f(val, index, O);
      if (TYPE) {
        if (IS_MAP) result[index] = res;   // map
        else if (res) switch (TYPE) {
          case 3: return true;             // some
          case 5: return val;              // find
          case 6: return index;            // findIndex
          case 2: result.push(val);        // filter
        } else if (IS_EVERY) return false; // every
      }
    }
    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;
  };
};


/***/ }),
/* 38 */
/***/ (function(module, exports) {

var core = module.exports = { version: '2.5.0' };
if (typeof __e == 'number') __e = core; // eslint-disable-line no-undef


/***/ }),
/* 39 */
/***/ (function(module, exports) {

// 7.2.1 RequireObjectCoercible(argument)
module.exports = function (it) {
  if (it == undefined) throw TypeError("Can't call method on  " + it);
  return it;
};


/***/ }),
/* 40 */
/***/ (function(module, exports, __webpack_require__) {

// most Object methods by ES6 should accept primitives
var $export = __webpack_require__(0);
var core = __webpack_require__(38);
var fails = __webpack_require__(6);
module.exports = function (KEY, exec) {
  var fn = (core.Object || {})[KEY] || Object[KEY];
  var exp = {};
  exp[KEY] = exec(fn);
  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);
};


/***/ }),
/* 41 */
/***/ (function(module, exports) {

// 7.1.4 ToInteger
var ceil = Math.ceil;
var floor = Math.floor;
module.exports = function (it) {
  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);
};


/***/ }),
/* 42 */
/***/ (function(module, exports, __webpack_require__) {

// 7.1.1 ToPrimitive(input [, PreferredType])
var isObject = __webpack_require__(7);
// instead of the ES6 spec version, we didn't implement @@toPrimitive case
// and the second argument - flag - preferred type is a string
module.exports = function (it, S) {
  if (!isObject(it)) return it;
  var fn, val;
  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;
  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;
  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;
  throw TypeError("Can't convert object to primitive value");
};


/***/ }),
/* 43 */
/***/ (function(module, exports) {

/**
 * The base implementation of `_.slice` without an iteratee call guard.
 *
 * @private
 * @param {Array} array The array to slice.
 * @param {number} [start=0] The start position.
 * @param {number} [end=array.length] The end position.
 * @returns {Array} Returns the slice of `array`.
 */
function baseSlice(array, start, end) {
  var index = -1,
      length = array.length;

  if (start < 0) {
    start = -start > length ? 0 : (length + start);
  }
  end = end > length ? length : end;
  if (end < 0) {
    end += length;
  }
  length = start > end ? 0 : ((end - start) >>> 0);
  start >>>= 0;

  var result = Array(length);
  while (++index < length) {
    result[index] = array[index + start];
  }
  return result;
}

module.exports = baseSlice;


/***/ }),
/* 44 */
/***/ (function(module, exports, __webpack_require__) {

var Map = __webpack_require__(219);
var $export = __webpack_require__(0);
var shared = __webpack_require__(107)('metadata');
var store = shared.store || (shared.store = new (__webpack_require__(222))());

var getOrCreateMetadataMap = function (target, targetKey, create) {
  var targetMetadata = store.get(target);
  if (!targetMetadata) {
    if (!create) return undefined;
    store.set(target, targetMetadata = new Map());
  }
  var keyMetadata = targetMetadata.get(targetKey);
  if (!keyMetadata) {
    if (!create) return undefined;
    targetMetadata.set(targetKey, keyMetadata = new Map());
  } return keyMetadata;
};
var ordinaryHasOwnMetadata = function (MetadataKey, O, P) {
  var metadataMap = getOrCreateMetadataMap(O, P, false);
  return metadataMap === undefined ? false : metadataMap.has(MetadataKey);
};
var ordinaryGetOwnMetadata = function (MetadataKey, O, P) {
  var metadataMap = getOrCreateMetadataMap(O, P, false);
  return metadataMap === undefined ? undefined : metadataMap.get(MetadataKey);
};
var ordinaryDefineOwnMetadata = function (MetadataKey, MetadataValue, O, P) {
  getOrCreateMetadataMap(O, P, true).set(MetadataKey, MetadataValue);
};
var ordinaryOwnMetadataKeys = function (target, targetKey) {
  var metadataMap = getOrCreateMetadataMap(target, targetKey, false);
  var keys = [];
  if (metadataMap) metadataMap.forEach(function (_, key) { keys.push(key); });
  return keys;
};
var toMetaKey = function (it) {
  return it === undefined || typeof it == 'symbol' ? it : String(it);
};
var exp = function (O) {
  $export($export.S, 'Reflect', O);
};

module.exports = {
  store: store,
  map: getOrCreateMetadataMap,
  has: ordinaryHasOwnMetadata,
  get: ordinaryGetOwnMetadata,
  set: ordinaryDefineOwnMetadata,
  keys: ordinaryOwnMetadataKeys,
  key: toMetaKey,
  exp: exp
};


/***/ }),
/* 45 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

if (__webpack_require__(12)) {
  var LIBRARY = __webpack_require__(55);
  var global = __webpack_require__(4);
  var fails = __webpack_require__(6);
  var $export = __webpack_require__(0);
  var $typed = __webpack_require__(109);
  var $buffer = __webpack_require__(154);
  var ctx = __webpack_require__(32);
  var anInstance = __webpack_require__(53);
  var propertyDesc = __webpack_require__(58);
  var hide = __webpack_require__(23);
  var redefineAll = __webpack_require__(59);
  var toInteger = __webpack_require__(41);
  var toLength = __webpack_require__(14);
  var toIndex = __webpack_require__(217);
  var toAbsoluteIndex = __webpack_require__(61);
  var toPrimitive = __webpack_require__(42);
  var has = __webpack_require__(22);
  var classof = __webpack_require__(84);
  var isObject = __webpack_require__(7);
  var toObject = __webpack_require__(16);
  var isArrayIter = __webpack_require__(140);
  var create = __webpack_require__(56);
  var getPrototypeOf = __webpack_require__(29);
  var gOPN = __webpack_require__(57).f;
  var getIterFn = __webpack_require__(156);
  var uid = __webpack_require__(62);
  var wks = __webpack_require__(9);
  var createArrayMethod = __webpack_require__(37);
  var createArrayIncludes = __webpack_require__(95);
  var speciesConstructor = __webpack_require__(108);
  var ArrayIterators = __webpack_require__(157);
  var Iterators = __webpack_require__(74);
  var $iterDetect = __webpack_require__(102);
  var setSpecies = __webpack_require__(60);
  var arrayFill = __webpack_require__(132);
  var arrayCopyWithin = __webpack_require__(191);
  var $DP = __webpack_require__(13);
  var $GOPD = __webpack_require__(28);
  var dP = $DP.f;
  var gOPD = $GOPD.f;
  var RangeError = global.RangeError;
  var TypeError = global.TypeError;
  var Uint8Array = global.Uint8Array;
  var ARRAY_BUFFER = 'ArrayBuffer';
  var SHARED_BUFFER = 'Shared' + ARRAY_BUFFER;
  var BYTES_PER_ELEMENT = 'BYTES_PER_ELEMENT';
  var PROTOTYPE = 'prototype';
  var ArrayProto = Array[PROTOTYPE];
  var $ArrayBuffer = $buffer.ArrayBuffer;
  var $DataView = $buffer.DataView;
  var arrayForEach = createArrayMethod(0);
  var arrayFilter = createArrayMethod(2);
  var arraySome = createArrayMethod(3);
  var arrayEvery = createArrayMethod(4);
  var arrayFind = createArrayMethod(5);
  var arrayFindIndex = createArrayMethod(6);
  var arrayIncludes = createArrayIncludes(true);
  var arrayIndexOf = createArrayIncludes(false);
  var arrayValues = ArrayIterators.values;
  var arrayKeys = ArrayIterators.keys;
  var arrayEntries = ArrayIterators.entries;
  var arrayLastIndexOf = ArrayProto.lastIndexOf;
  var arrayReduce = ArrayProto.reduce;
  var arrayReduceRight = ArrayProto.reduceRight;
  var arrayJoin = ArrayProto.join;
  var arraySort = ArrayProto.sort;
  var arraySlice = ArrayProto.slice;
  var arrayToString = ArrayProto.toString;
  var arrayToLocaleString = ArrayProto.toLocaleString;
  var ITERATOR = wks('iterator');
  var TAG = wks('toStringTag');
  var TYPED_CONSTRUCTOR = uid('typed_constructor');
  var DEF_CONSTRUCTOR = uid('def_constructor');
  var ALL_CONSTRUCTORS = $typed.CONSTR;
  var TYPED_ARRAY = $typed.TYPED;
  var VIEW = $typed.VIEW;
  var WRONG_LENGTH = 'Wrong length!';

  var $map = createArrayMethod(1, function (O, length) {
    return allocate(speciesConstructor(O, O[DEF_CONSTRUCTOR]), length);
  });

  var LITTLE_ENDIAN = fails(function () {
    // eslint-disable-next-line no-undef
    return new Uint8Array(new Uint16Array([1]).buffer)[0] === 1;
  });

  var FORCED_SET = !!Uint8Array && !!Uint8Array[PROTOTYPE].set && fails(function () {
    new Uint8Array(1).set({});
  });

  var toOffset = function (it, BYTES) {
    var offset = toInteger(it);
    if (offset < 0 || offset % BYTES) throw RangeError('Wrong offset!');
    return offset;
  };

  var validate = function (it) {
    if (isObject(it) && TYPED_ARRAY in it) return it;
    throw TypeError(it + ' is not a typed array!');
  };

  var allocate = function (C, length) {
    if (!(isObject(C) && TYPED_CONSTRUCTOR in C)) {
      throw TypeError('It is not a typed array constructor!');
    } return new C(length);
  };

  var speciesFromList = function (O, list) {
    return fromList(speciesConstructor(O, O[DEF_CONSTRUCTOR]), list);
  };

  var fromList = function (C, list) {
    var index = 0;
    var length = list.length;
    var result = allocate(C, length);
    while (length > index) result[index] = list[index++];
    return result;
  };

  var addGetter = function (it, key, internal) {
    dP(it, key, { get: function () { return this._d[internal]; } });
  };

  var $from = function from(source /* , mapfn, thisArg */) {
    var O = toObject(source);
    var aLen = arguments.length;
    var mapfn = aLen > 1 ? arguments[1] : undefined;
    var mapping = mapfn !== undefined;
    var iterFn = getIterFn(O);
    var i, length, values, result, step, iterator;
    if (iterFn != undefined && !isArrayIter(iterFn)) {
      for (iterator = iterFn.call(O), values = [], i = 0; !(step = iterator.next()).done; i++) {
        values.push(step.value);
      } O = values;
    }
    if (mapping && aLen > 2) mapfn = ctx(mapfn, arguments[2], 2);
    for (i = 0, length = toLength(O.length), result = allocate(this, length); length > i; i++) {
      result[i] = mapping ? mapfn(O[i], i) : O[i];
    }
    return result;
  };

  var $of = function of(/* ...items */) {
    var index = 0;
    var length = arguments.length;
    var result = allocate(this, length);
    while (length > index) result[index] = arguments[index++];
    return result;
  };

  // iOS Safari 6.x fails here
  var TO_LOCALE_BUG = !!Uint8Array && fails(function () { arrayToLocaleString.call(new Uint8Array(1)); });

  var $toLocaleString = function toLocaleString() {
    return arrayToLocaleString.apply(TO_LOCALE_BUG ? arraySlice.call(validate(this)) : validate(this), arguments);
  };

  var proto = {
    copyWithin: function copyWithin(target, start /* , end */) {
      return arrayCopyWithin.call(validate(this), target, start, arguments.length > 2 ? arguments[2] : undefined);
    },
    every: function every(callbackfn /* , thisArg */) {
      return arrayEvery(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    },
    fill: function fill(value /* , start, end */) { // eslint-disable-line no-unused-vars
      return arrayFill.apply(validate(this), arguments);
    },
    filter: function filter(callbackfn /* , thisArg */) {
      return speciesFromList(this, arrayFilter(validate(this), callbackfn,
        arguments.length > 1 ? arguments[1] : undefined));
    },
    find: function find(predicate /* , thisArg */) {
      return arrayFind(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);
    },
    findIndex: function findIndex(predicate /* , thisArg */) {
      return arrayFindIndex(validate(this), predicate, arguments.length > 1 ? arguments[1] : undefined);
    },
    forEach: function forEach(callbackfn /* , thisArg */) {
      arrayForEach(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    },
    indexOf: function indexOf(searchElement /* , fromIndex */) {
      return arrayIndexOf(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);
    },
    includes: function includes(searchElement /* , fromIndex */) {
      return arrayIncludes(validate(this), searchElement, arguments.length > 1 ? arguments[1] : undefined);
    },
    join: function join(separator) { // eslint-disable-line no-unused-vars
      return arrayJoin.apply(validate(this), arguments);
    },
    lastIndexOf: function lastIndexOf(searchElement /* , fromIndex */) { // eslint-disable-line no-unused-vars
      return arrayLastIndexOf.apply(validate(this), arguments);
    },
    map: function map(mapfn /* , thisArg */) {
      return $map(validate(this), mapfn, arguments.length > 1 ? arguments[1] : undefined);
    },
    reduce: function reduce(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars
      return arrayReduce.apply(validate(this), arguments);
    },
    reduceRight: function reduceRight(callbackfn /* , initialValue */) { // eslint-disable-line no-unused-vars
      return arrayReduceRight.apply(validate(this), arguments);
    },
    reverse: function reverse() {
      var that = this;
      var length = validate(that).length;
      var middle = Math.floor(length / 2);
      var index = 0;
      var value;
      while (index < middle) {
        value = that[index];
        that[index++] = that[--length];
        that[length] = value;
      } return that;
    },
    some: function some(callbackfn /* , thisArg */) {
      return arraySome(validate(this), callbackfn, arguments.length > 1 ? arguments[1] : undefined);
    },
    sort: function sort(comparefn) {
      return arraySort.call(validate(this), comparefn);
    },
    subarray: function subarray(begin, end) {
      var O = validate(this);
      var length = O.length;
      var $begin = toAbsoluteIndex(begin, length);
      return new (speciesConstructor(O, O[DEF_CONSTRUCTOR]))(
        O.buffer,
        O.byteOffset + $begin * O.BYTES_PER_ELEMENT,
        toLength((end === undefined ? length : toAbsoluteIndex(end, length)) - $begin)
      );
    }
  };

  var $slice = function slice(start, end) {
    return speciesFromList(this, arraySlice.call(validate(this), start, end));
  };

  var $set = function set(arrayLike /* , offset */) {
    validate(this);
    var offset = toOffset(arguments[1], 1);
    var length = this.length;
    var src = toObject(arrayLike);
    var len = toLength(src.length);
    var index = 0;
    if (len + offset > length) throw RangeError(WRONG_LENGTH);
    while (index < len) this[offset + index] = src[index++];
  };

  var $iterators = {
    entries: function entries() {
      return arrayEntries.call(validate(this));
    },
    keys: function keys() {
      return arrayKeys.call(validate(this));
    },
    values: function values() {
      return arrayValues.call(validate(this));
    }
  };

  var isTAIndex = function (target, key) {
    return isObject(target)
      && target[TYPED_ARRAY]
      && typeof key != 'symbol'
      && key in target
      && String(+key) == String(key);
  };
  var $getDesc = function getOwnPropertyDescriptor(target, key) {
    return isTAIndex(target, key = toPrimitive(key, true))
      ? propertyDesc(2, target[key])
      : gOPD(target, key);
  };
  var $setDesc = function defineProperty(target, key, desc) {
    if (isTAIndex(target, key = toPrimitive(key, true))
      && isObject(desc)
      && has(desc, 'value')
      && !has(desc, 'get')
      && !has(desc, 'set')
      // TODO: add validation descriptor w/o calling accessors
      && !desc.configurable
      && (!has(desc, 'writable') || desc.writable)
      && (!has(desc, 'enumerable') || desc.enumerable)
    ) {
      target[key] = desc.value;
      return target;
    } return dP(target, key, desc);
  };

  if (!ALL_CONSTRUCTORS) {
    $GOPD.f = $getDesc;
    $DP.f = $setDesc;
  }

  $export($export.S + $export.F * !ALL_CONSTRUCTORS, 'Object', {
    getOwnPropertyDescriptor: $getDesc,
    defineProperty: $setDesc
  });

  if (fails(function () { arrayToString.call({}); })) {
    arrayToString = arrayToLocaleString = function toString() {
      return arrayJoin.call(this);
    };
  }

  var $TypedArrayPrototype$ = redefineAll({}, proto);
  redefineAll($TypedArrayPrototype$, $iterators);
  hide($TypedArrayPrototype$, ITERATOR, $iterators.values);
  redefineAll($TypedArrayPrototype$, {
    slice: $slice,
    set: $set,
    constructor: function () { /* noop */ },
    toString: arrayToString,
    toLocaleString: $toLocaleString
  });
  addGetter($TypedArrayPrototype$, 'buffer', 'b');
  addGetter($TypedArrayPrototype$, 'byteOffset', 'o');
  addGetter($TypedArrayPrototype$, 'byteLength', 'l');
  addGetter($TypedArrayPrototype$, 'length', 'e');
  dP($TypedArrayPrototype$, TAG, {
    get: function () { return this[TYPED_ARRAY]; }
  });

  // eslint-disable-next-line max-statements
  module.exports = function (KEY, BYTES, wrapper, CLAMPED) {
    CLAMPED = !!CLAMPED;
    var NAME = KEY + (CLAMPED ? 'Clamped' : '') + 'Array';
    var GETTER = 'get' + KEY;
    var SETTER = 'set' + KEY;
    var TypedArray = global[NAME];
    var Base = TypedArray || {};
    var TAC = TypedArray && getPrototypeOf(TypedArray);
    var FORCED = !TypedArray || !$typed.ABV;
    var O = {};
    var TypedArrayPrototype = TypedArray && TypedArray[PROTOTYPE];
    var getter = function (that, index) {
      var data = that._d;
      return data.v[GETTER](index * BYTES + data.o, LITTLE_ENDIAN);
    };
    var setter = function (that, index, value) {
      var data = that._d;
      if (CLAMPED) value = (value = Math.round(value)) < 0 ? 0 : value > 0xff ? 0xff : value & 0xff;
      data.v[SETTER](index * BYTES + data.o, value, LITTLE_ENDIAN);
    };
    var addElement = function (that, index) {
      dP(that, index, {
        get: function () {
          return getter(this, index);
        },
        set: function (value) {
          return setter(this, index, value);
        },
        enumerable: true
      });
    };
    if (FORCED) {
      TypedArray = wrapper(function (that, data, $offset, $length) {
        anInstance(that, TypedArray, NAME, '_d');
        var index = 0;
        var offset = 0;
        var buffer, byteLength, length, klass;
        if (!isObject(data)) {
          length = toIndex(data);
          byteLength = length * BYTES;
          buffer = new $ArrayBuffer(byteLength);
        } else if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {
          buffer = data;
          offset = toOffset($offset, BYTES);
          var $len = data.byteLength;
          if ($length === undefined) {
            if ($len % BYTES) throw RangeError(WRONG_LENGTH);
            byteLength = $len - offset;
            if (byteLength < 0) throw RangeError(WRONG_LENGTH);
          } else {
            byteLength = toLength($length) * BYTES;
            if (byteLength + offset > $len) throw RangeError(WRONG_LENGTH);
          }
          length = byteLength / BYTES;
        } else if (TYPED_ARRAY in data) {
          return fromList(TypedArray, data);
        } else {
          return $from.call(TypedArray, data);
        }
        hide(that, '_d', {
          b: buffer,
          o: offset,
          l: byteLength,
          e: length,
          v: new $DataView(buffer)
        });
        while (index < length) addElement(that, index++);
      });
      TypedArrayPrototype = TypedArray[PROTOTYPE] = create($TypedArrayPrototype$);
      hide(TypedArrayPrototype, 'constructor', TypedArray);
    } else if (!fails(function () {
      TypedArray(1);
    }) || !fails(function () {
      new TypedArray(-1); // eslint-disable-line no-new
    }) || !$iterDetect(function (iter) {
      new TypedArray(); // eslint-disable-line no-new
      new TypedArray(null); // eslint-disable-line no-new
      new TypedArray(1.5); // eslint-disable-line no-new
      new TypedArray(iter); // eslint-disable-line no-new
    }, true)) {
      TypedArray = wrapper(function (that, data, $offset, $length) {
        anInstance(that, TypedArray, NAME);
        var klass;
        // `ws` module bug, temporarily remove validation length for Uint8Array
        // https://github.com/websockets/ws/pull/645
        if (!isObject(data)) return new Base(toIndex(data));
        if (data instanceof $ArrayBuffer || (klass = classof(data)) == ARRAY_BUFFER || klass == SHARED_BUFFER) {
          return $length !== undefined
            ? new Base(data, toOffset($offset, BYTES), $length)
            : $offset !== undefined
              ? new Base(data, toOffset($offset, BYTES))
              : new Base(data);
        }
        if (TYPED_ARRAY in data) return fromList(TypedArray, data);
        return $from.call(TypedArray, data);
      });
      arrayForEach(TAC !== Function.prototype ? gOPN(Base).concat(gOPN(TAC)) : gOPN(Base), function (key) {
        if (!(key in TypedArray)) hide(TypedArray, key, Base[key]);
      });
      TypedArray[PROTOTYPE] = TypedArrayPrototype;
      if (!LIBRARY) TypedArrayPrototype.constructor = TypedArray;
    }
    var $nativeIterator = TypedArrayPrototype[ITERATOR];
    var CORRECT_ITER_NAME = !!$nativeIterator
      && ($nativeIterator.name == 'values' || $nativeIterator.name == undefined);
    var $iterator = $iterators.values;
    hide(TypedArray, TYPED_CONSTRUCTOR, true);
    hide(TypedArrayPrototype, TYPED_ARRAY, NAME);
    hide(TypedArrayPrototype, VIEW, true);
    hide(TypedArrayPrototype, DEF_CONSTRUCTOR, TypedArray);

    if (CLAMPED ? new TypedArray(1)[TAG] != NAME : !(TAG in TypedArrayPrototype)) {
      dP(TypedArrayPrototype, TAG, {
        get: function () { return NAME; }
      });
    }

    O[NAME] = TypedArray;

    $export($export.G + $export.W + $export.F * (TypedArray != Base), O);

    $export($export.S, NAME, {
      BYTES_PER_ELEMENT: BYTES
    });

    $export($export.S + $export.F * fails(function () { Base.of.call(TypedArray, 1); }), NAME, {
      from: $from,
      of: $of
    });

    if (!(BYTES_PER_ELEMENT in TypedArrayPrototype)) hide(TypedArrayPrototype, BYTES_PER_ELEMENT, BYTES);

    $export($export.P, NAME, proto);

    setSpecies(NAME);

    $export($export.P + $export.F * FORCED_SET, NAME, { set: $set });

    $export($export.P + $export.F * !CORRECT_ITER_NAME, NAME, $iterators);

    if (!LIBRARY && TypedArrayPrototype.toString != arrayToString) TypedArrayPrototype.toString = arrayToString;

    $export($export.P + $export.F * fails(function () {
      new TypedArray(1).slice();
    }), NAME, { slice: $slice });

    $export($export.P + $export.F * (fails(function () {
      return [1, 2].toLocaleString() != new TypedArray([1, 2]).toLocaleString();
    }) || !fails(function () {
      TypedArrayPrototype.toLocaleString.call([1, 2]);
    })), NAME, { toLocaleString: $toLocaleString });

    Iterators[NAME] = CORRECT_ITER_NAME ? $nativeIterator : $iterator;
    if (!LIBRARY && !CORRECT_ITER_NAME) hide(TypedArrayPrototype, ITERATOR, $iterator);
  };
} else module.exports = function () { /* empty */ };


/***/ }),
/* 46 */
/***/ (function(module, exports, __webpack_require__) {

var freeGlobal = __webpack_require__(250);

/** Detect free variable `self`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

module.exports = root;


/***/ }),
/* 47 */
/***/ (function(module, exports, __webpack_require__) {

var isFunction = __webpack_require__(265),
    isLength = __webpack_require__(175);

/**
 * Checks if `value` is array-like. A value is considered array-like if it's
 * not a function and has a `value.length` that's an integer greater than or
 * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
 * @example
 *
 * _.isArrayLike([1, 2, 3]);
 * // => true
 *
 * _.isArrayLike(document.body.children);
 * // => true
 *
 * _.isArrayLike('abc');
 * // => true
 *
 * _.isArrayLike(_.noop);
 * // => false
 */
function isArrayLike(value) {
  return value != null && isLength(value.length) && !isFunction(value);
}

module.exports = isArrayLike;


/***/ }),
/* 48 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ListenerOrganizerMixin = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var DOMListener = function () {
  function DOMListener(element) {
    _classCallCheck(this, DOMListener);

    this.element = element;
  }

  _createClass(DOMListener, [{
    key: 'on',
    value: function on(event, listener, useCapture) {
      this.event = event;
      this.listener = listener;
      this.useCapture = useCapture;
      this.element.addEventListener(event, listener, useCapture);
    }
  }, {
    key: 'once',
    value: function once(event, listener, useCapture) {
      var that = this;
      this.on(event, function () {
        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }

        listener.apply(this, args);
        that.detach();
      }, useCapture);
    }
  }, {
    key: 'detach',
    value: function detach() {
      this.element.removeEventListener(this.event, this.listener, this.useCapture);
    }
  }], [{
    key: 'usable',
    value: function usable(element) {
      return !!element.addEventListener;
      // thanks to internet explorer we can't use the following line
      // return element instanceof EventTarget
    }
  }, {
    key: 'create',
    value: function create(element) {
      return new DOMListener(element);
    }
  }]);

  return DOMListener;
}();

var JQueryListener = function () {
  function JQueryListener(element) {
    _classCallCheck(this, JQueryListener);

    this.element = element;
  }

  _createClass(JQueryListener, [{
    key: 'on',
    value: function on(event, listener) {
      this.event = event;
      this.listener = listener;
      this.element.on(event, listener);
    }
  }, {
    key: 'once',
    value: function once(event, listener) {
      this.event = event;
      this.listener = listener;
      this.element.one(event, listener);
    }
  }, {
    key: 'detach',
    value: function detach() {
      this.element.off(this.event, this.listener);
    }
  }], [{
    key: 'usable',
    value: function usable(element) {
      return element instanceof _jquery2.default;
    }
  }, {
    key: 'create',
    value: function create(element) {
      return new JQueryListener(element);
    }
  }]);

  return JQueryListener;
}();

var OLListener = function () {
  function OLListener(element) {
    _classCallCheck(this, OLListener);

    this.element = element;
  }

  _createClass(OLListener, [{
    key: 'on',
    value: function on(event, listener) {
      this.event = event;
      this.key_ = this.element.on(event, listener);
    }
  }, {
    key: 'once',
    value: function once(event, listener) {
      this.event = event;
      this.key_ = this.element.once(event, listener);
    }
  }, {
    key: 'detach',
    value: function detach() {
      _openlayers2.default.Observable.unByKey(this.key_);
    }
  }], [{
    key: 'usable',
    value: function usable(element) {
      return element instanceof _openlayers2.default.Observable;
    }
  }, {
    key: 'create',
    value: function create(element) {
      return new OLListener(element);
    }
  }]);

  return OLListener;
}();

var ListenerOrganizerMixin = exports.ListenerOrganizerMixin = function () {
  function ListenerOrganizerMixin() {
    _classCallCheck(this, ListenerOrganizerMixin);
  }

  _createClass(ListenerOrganizerMixin, [{
    key: 'initialize',
    value: function initialize() {
      this.organizedListeners_ = [];
    }
  }, {
    key: 'listenAt',
    value: function listenAt(elements) {
      var _this = this;

      elements = Array.isArray(elements) ? elements : [elements];
      var returnObj = {
        on: function on(event, listener, useCapture) {
          var _iteratorNormalCompletion = true;
          var _didIteratorError = false;
          var _iteratorError = undefined;

          try {
            for (var _iterator = elements[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
              var element = _step.value;

              var tListener = ListenerOrganizerMixin.getTypeListener(element);
              tListener.on(event, listener, useCapture);
              _this.organizedListeners_.push(tListener);
            }
          } catch (err) {
            _didIteratorError = true;
            _iteratorError = err;
          } finally {
            try {
              if (!_iteratorNormalCompletion && _iterator.return) {
                _iterator.return();
              }
            } finally {
              if (_didIteratorError) {
                throw _iteratorError;
              }
            }
          }

          return returnObj;
        },
        once: function once(event, listener, useCapture) {
          var _iteratorNormalCompletion2 = true;
          var _didIteratorError2 = false;
          var _iteratorError2 = undefined;

          try {
            for (var _iterator2 = elements[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
              var element = _step2.value;

              var tListener = ListenerOrganizerMixin.getTypeListener(element);
              tListener.once(event, listener, useCapture);
              _this.organizedListeners_.push(tListener);
            }
          } catch (err) {
            _didIteratorError2 = true;
            _iteratorError2 = err;
          } finally {
            try {
              if (!_iteratorNormalCompletion2 && _iterator2.return) {
                _iterator2.return();
              }
            } finally {
              if (_didIteratorError2) {
                throw _iteratorError2;
              }
            }
          }

          return returnObj;
        }
      };
      return returnObj;
    }
  }, {
    key: 'detachFrom',
    value: function detachFrom(element, event) {
      var listeners = this.organizedListeners_.filter(function (l) {
        return l.element === element;
      });
      if (event) {
        listeners = listeners.filter(function (l) {
          return l.event === event;
        });
      }
      var _iteratorNormalCompletion3 = true;
      var _didIteratorError3 = false;
      var _iteratorError3 = undefined;

      try {
        for (var _iterator3 = listeners[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
          var listener = _step3.value;

          listener.detach();
          this.organizedListeners_.splice(this.organizedListeners_.indexOf(listener), 1);
        }
      } catch (err) {
        _didIteratorError3 = true;
        _iteratorError3 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion3 && _iterator3.return) {
            _iterator3.return();
          }
        } finally {
          if (_didIteratorError3) {
            throw _iteratorError3;
          }
        }
      }
    }
  }, {
    key: 'detachAllListeners',
    value: function detachAllListeners() {
      var _iteratorNormalCompletion4 = true;
      var _didIteratorError4 = false;
      var _iteratorError4 = undefined;

      try {
        for (var _iterator4 = this.organizedListeners_[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
          var listener = _step4.value;

          listener.detach();
        }
      } catch (err) {
        _didIteratorError4 = true;
        _iteratorError4 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion4 && _iterator4.return) {
            _iterator4.return();
          }
        } finally {
          if (_didIteratorError4) {
            throw _iteratorError4;
          }
        }
      }

      this.organizedListeners_ = [];
    }
  }], [{
    key: 'getTypeListener',
    value: function getTypeListener(element) {
      var _arr = [DOMListener, JQueryListener, OLListener];

      for (var _i = 0; _i < _arr.length; _i++) {
        var TypeListener = _arr[_i];
        if (TypeListener.usable(element)) {
          return TypeListener.create(element);
        }
      }
    }
  }]);

  return ListenerOrganizerMixin;
}();

/***/ }),
/* 49 */
/***/ (function(module, exports, __webpack_require__) {

// 22.1.3.31 Array.prototype[@@unscopables]
var UNSCOPABLES = __webpack_require__(9)('unscopables');
var ArrayProto = Array.prototype;
if (ArrayProto[UNSCOPABLES] == undefined) __webpack_require__(23)(ArrayProto, UNSCOPABLES, {});
module.exports = function (key) {
  ArrayProto[UNSCOPABLES][key] = true;
};


/***/ }),
/* 50 */
/***/ (function(module, exports, __webpack_require__) {

var META = __webpack_require__(62)('meta');
var isObject = __webpack_require__(7);
var has = __webpack_require__(22);
var setDesc = __webpack_require__(13).f;
var id = 0;
var isExtensible = Object.isExtensible || function () {
  return true;
};
var FREEZE = !__webpack_require__(6)(function () {
  return isExtensible(Object.preventExtensions({}));
});
var setMeta = function (it) {
  setDesc(it, META, { value: {
    i: 'O' + ++id, // object ID
    w: {}          // weak collections IDs
  } });
};
var fastKey = function (it, create) {
  // return primitive with prefix
  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;
  if (!has(it, META)) {
    // can't set metadata to uncaught frozen object
    if (!isExtensible(it)) return 'F';
    // not necessary to add metadata
    if (!create) return 'E';
    // add missing metadata
    setMeta(it);
  // return object ID
  } return it[META].i;
};
var getWeak = function (it, create) {
  if (!has(it, META)) {
    // can't set metadata to uncaught frozen object
    if (!isExtensible(it)) return true;
    // not necessary to add metadata
    if (!create) return false;
    // add missing metadata
    setMeta(it);
  // return hash weak collections IDs
  } return it[META].w;
};
// add metadata on freeze-family methods calling
var onFreeze = function (it) {
  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);
  return it;
};
var meta = module.exports = {
  KEY: META,
  NEED: false,
  fastKey: fastKey,
  getWeak: getWeak,
  onFreeze: onFreeze
};


/***/ }),
/* 51 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.14 / 15.2.3.14 Object.keys(O)
var $keys = __webpack_require__(209);
var enumBugKeys = __webpack_require__(136);

module.exports = Object.keys || function keys(O) {
  return $keys(O, enumBugKeys);
};


/***/ }),
/* 52 */
/***/ (function(module, exports, __webpack_require__) {

var baseForOwn = __webpack_require__(574),
    createBaseEach = __webpack_require__(245);

/**
 * The base implementation of `_.forEach` without support for iteratee shorthands.
 *
 * @private
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array|Object} Returns `collection`.
 */
var baseEach = createBaseEach(baseForOwn);

module.exports = baseEach;


/***/ }),
/* 53 */
/***/ (function(module, exports) {

module.exports = function (it, Constructor, name, forbiddenField) {
  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {
    throw TypeError(name + ': incorrect invocation!');
  } return it;
};


/***/ }),
/* 54 */
/***/ (function(module, exports, __webpack_require__) {

var ctx = __webpack_require__(32);
var call = __webpack_require__(201);
var isArrayIter = __webpack_require__(140);
var anObject = __webpack_require__(3);
var toLength = __webpack_require__(14);
var getIterFn = __webpack_require__(156);
var BREAK = {};
var RETURN = {};
var exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {
  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);
  var f = ctx(fn, that, entries ? 2 : 1);
  var index = 0;
  var length, step, iterator, result;
  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');
  // fast case for arrays with default iterator
  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {
    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);
    if (result === BREAK || result === RETURN) return result;
  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {
    result = call(iterator, f, step.value, entries);
    if (result === BREAK || result === RETURN) return result;
  }
};
exports.BREAK = BREAK;
exports.RETURN = RETURN;


/***/ }),
/* 55 */
/***/ (function(module, exports) {

module.exports = false;


/***/ }),
/* 56 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])
var anObject = __webpack_require__(3);
var dPs = __webpack_require__(207);
var enumBugKeys = __webpack_require__(136);
var IE_PROTO = __webpack_require__(148)('IE_PROTO');
var Empty = function () { /* empty */ };
var PROTOTYPE = 'prototype';

// Create object with fake `null` prototype: use iframe Object with cleared prototype
var createDict = function () {
  // Thrash, waste and sodomy: IE GC bug
  var iframe = __webpack_require__(135)('iframe');
  var i = enumBugKeys.length;
  var lt = '<';
  var gt = '>';
  var iframeDocument;
  iframe.style.display = 'none';
  __webpack_require__(138).appendChild(iframe);
  iframe.src = 'javascript:'; // eslint-disable-line no-script-url
  // createDict = iframe.contentWindow.Object;
  // html.removeChild(iframe);
  iframeDocument = iframe.contentWindow.document;
  iframeDocument.open();
  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);
  iframeDocument.close();
  createDict = iframeDocument.F;
  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];
  return createDict();
};

module.exports = Object.create || function create(O, Properties) {
  var result;
  if (O !== null) {
    Empty[PROTOTYPE] = anObject(O);
    result = new Empty();
    Empty[PROTOTYPE] = null;
    // add "__proto__" for Object.getPrototypeOf polyfill
    result[IE_PROTO] = O;
  } else result = createDict();
  return Properties === undefined ? result : dPs(result, Properties);
};


/***/ }),
/* 57 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)
var $keys = __webpack_require__(209);
var hiddenKeys = __webpack_require__(136).concat('length', 'prototype');

exports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {
  return $keys(O, hiddenKeys);
};


/***/ }),
/* 58 */
/***/ (function(module, exports) {

module.exports = function (bitmap, value) {
  return {
    enumerable: !(bitmap & 1),
    configurable: !(bitmap & 2),
    writable: !(bitmap & 4),
    value: value
  };
};


/***/ }),
/* 59 */
/***/ (function(module, exports, __webpack_require__) {

var redefine = __webpack_require__(24);
module.exports = function (target, src, safe) {
  for (var key in src) redefine(target, key, src[key], safe);
  return target;
};


/***/ }),
/* 60 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(4);
var dP = __webpack_require__(13);
var DESCRIPTORS = __webpack_require__(12);
var SPECIES = __webpack_require__(9)('species');

module.exports = function (KEY) {
  var C = global[KEY];
  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {
    configurable: true,
    get: function () { return this; }
  });
};


/***/ }),
/* 61 */
/***/ (function(module, exports, __webpack_require__) {

var toInteger = __webpack_require__(41);
var max = Math.max;
var min = Math.min;
module.exports = function (index, length) {
  index = toInteger(index);
  return index < 0 ? max(index + length, 0) : min(index, length);
};


/***/ }),
/* 62 */
/***/ (function(module, exports) {

var id = 0;
var px = Math.random();
module.exports = function (key) {
  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));
};


/***/ }),
/* 63 */
/***/ (function(module, exports) {



/***/ }),
/* 64 */
/***/ (function(module, exports) {

/**
 * A specialized version of `_.filter` for arrays without support for
 * iteratee shorthands.
 *
 * @private
 * @param {Array} [array] The array to iterate over.
 * @param {Function} predicate The function invoked per iteration.
 * @returns {Array} Returns the new filtered array.
 */
function arrayFilter(array, predicate) {
  var index = -1,
      length = array == null ? 0 : array.length,
      resIndex = 0,
      result = [];

  while (++index < length) {
    var value = array[index];
    if (predicate(value, index, array)) {
      result[resIndex++] = value;
    }
  }
  return result;
}

module.exports = arrayFilter;


/***/ }),
/* 65 */
/***/ (function(module, exports, __webpack_require__) {

var SetCache = __webpack_require__(111),
    arrayIncludes = __webpack_require__(160),
    arrayIncludesWith = __webpack_require__(161),
    cacheHas = __webpack_require__(119),
    createSet = __webpack_require__(602),
    setToArray = __webpack_require__(172);

/** Used as the size to enable large array optimizations. */
var LARGE_ARRAY_SIZE = 200;

/**
 * The base implementation of `_.uniqBy` without support for iteratee shorthands.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {Function} [iteratee] The iteratee invoked per element.
 * @param {Function} [comparator] The comparator invoked per element.
 * @returns {Array} Returns the new duplicate free array.
 */
function baseUniq(array, iteratee, comparator) {
  var index = -1,
      includes = arrayIncludes,
      length = array.length,
      isCommon = true,
      result = [],
      seen = result;

  if (comparator) {
    isCommon = false;
    includes = arrayIncludesWith;
  }
  else if (length >= LARGE_ARRAY_SIZE) {
    var set = iteratee ? null : createSet(array);
    if (set) {
      return setToArray(set);
    }
    isCommon = false;
    includes = cacheHas;
    seen = new SetCache;
  }
  else {
    seen = iteratee ? [] : result;
  }
  outer:
  while (++index < length) {
    var value = array[index],
        computed = iteratee ? iteratee(value) : value;

    value = (comparator || value !== 0) ? value : 0;
    if (isCommon && computed === computed) {
      var seenIndex = seen.length;
      while (seenIndex--) {
        if (seen[seenIndex] === computed) {
          continue outer;
        }
      }
      if (iteratee) {
        seen.push(computed);
      }
      result.push(value);
    }
    else if (!includes(seen, computed, comparator)) {
      if (seen !== result) {
        seen.push(computed);
      }
      result.push(value);
    }
  }
  return result;
}

module.exports = baseUniq;


/***/ }),
/* 66 */
/***/ (function(module, exports, __webpack_require__) {

var baseIsNative = __webpack_require__(584),
    getValue = __webpack_require__(610);

/**
 * Gets the native function at `key` of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {string} key The key of the method to get.
 * @returns {*} Returns the function if it's native, else `undefined`.
 */
function getNative(object, key) {
  var value = getValue(object, key);
  return baseIsNative(value) ? value : undefined;
}

module.exports = getNative;


/***/ }),
/* 67 */
/***/ (function(module, exports) {

/** Used as references for various `Number` constants. */
var MAX_SAFE_INTEGER = 9007199254740991;

/** Used to detect unsigned integer values. */
var reIsUint = /^(?:0|[1-9]\d*)$/;

/**
 * Checks if `value` is a valid array-like index.
 *
 * @private
 * @param {*} value The value to check.
 * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
 * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
 */
function isIndex(value, length) {
  length = length == null ? MAX_SAFE_INTEGER : length;
  return !!length &&
    (typeof value == 'number' || reIsUint.test(value)) &&
    (value > -1 && value % 1 == 0 && value < length);
}

module.exports = isIndex;


/***/ }),
/* 68 */
/***/ (function(module, exports, __webpack_require__) {

var eq = __webpack_require__(70),
    isArrayLike = __webpack_require__(47),
    isIndex = __webpack_require__(67),
    isObject = __webpack_require__(80);

/**
 * Checks if the given arguments are from an iteratee call.
 *
 * @private
 * @param {*} value The potential iteratee value argument.
 * @param {*} index The potential iteratee index or key argument.
 * @param {*} object The potential iteratee object argument.
 * @returns {boolean} Returns `true` if the arguments are from an iteratee call,
 *  else `false`.
 */
function isIterateeCall(value, index, object) {
  if (!isObject(object)) {
    return false;
  }
  var type = typeof index;
  if (type == 'number'
        ? (isArrayLike(object) && isIndex(index, object.length))
        : (type == 'string' && index in object)
      ) {
    return eq(object[index], value);
  }
  return false;
}

module.exports = isIterateeCall;


/***/ }),
/* 69 */
/***/ (function(module, exports, __webpack_require__) {

var isSymbol = __webpack_require__(72);

/** Used as references for various `Number` constants. */
var INFINITY = 1 / 0;

/**
 * Converts `value` to a string key if it's not a string or symbol.
 *
 * @private
 * @param {*} value The value to inspect.
 * @returns {string|symbol} Returns the key.
 */
function toKey(value) {
  if (typeof value == 'string' || isSymbol(value)) {
    return value;
  }
  var result = (value + '');
  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;
}

module.exports = toKey;


/***/ }),
/* 70 */
/***/ (function(module, exports) {

/**
 * Performs a
 * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * comparison between two values to determine if they are equivalent.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to compare.
 * @param {*} other The other value to compare.
 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
 * @example
 *
 * var object = { 'a': 1 };
 * var other = { 'a': 1 };
 *
 * _.eq(object, object);
 * // => true
 *
 * _.eq(object, other);
 * // => false
 *
 * _.eq('a', 'a');
 * // => true
 *
 * _.eq('a', Object('a'));
 * // => false
 *
 * _.eq(NaN, NaN);
 * // => true
 */
function eq(value, other) {
  return value === other || (value !== value && other !== other);
}

module.exports = eq;


/***/ }),
/* 71 */
/***/ (function(module, exports) {

/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return value != null && typeof value == 'object';
}

module.exports = isObjectLike;


/***/ }),
/* 72 */
/***/ (function(module, exports, __webpack_require__) {

var baseGetTag = __webpack_require__(78),
    isObjectLike = __webpack_require__(71);

/** `Object#toString` result references. */
var symbolTag = '[object Symbol]';

/**
 * Checks if `value` is classified as a `Symbol` primitive or object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
 * @example
 *
 * _.isSymbol(Symbol.iterator);
 * // => true
 *
 * _.isSymbol('abc');
 * // => false
 */
function isSymbol(value) {
  return typeof value == 'symbol' ||
    (isObjectLike(value) && baseGetTag(value) == symbolTag);
}

module.exports = isSymbol;


/***/ }),
/* 73 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.GroupLayer = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _ProvideMapMixin = __webpack_require__(83);

var _utilities = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * This Class is a Wrap around {ol.layer.Group} providing some extra functionality. This class is normally used for a
 * category of layers containing them.
 */
var GroupLayer = exports.GroupLayer = function (_mixin) {
  _inherits(GroupLayer, _mixin);

  /**
   * @param {object} [options={}]
   */
  function GroupLayer() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, GroupLayer);

    var _this = _possibleConstructorReturn(this, (GroupLayer.__proto__ || Object.getPrototypeOf(GroupLayer)).call(this, options));

    var listenerKeys = new WeakMap();

    _this.getLayers().on('add', /** ol.CollectionEvent */function (e) {
      var layer = e.element;
      if (layer.provideMap) {
        layer.provideMap(_this.getProvidedMap());
      }
      listenerKeys.set(layer, layer.on(['change:visible', 'change:childVisible'], function () {
        _this.dispatchEvent({
          type: 'change:childVisible',
          child: layer
        });
      }));
    });

    _this.getLayers().on('remove', /** ol.CollectionEvent */function (e) {
      var layer = e.element;
      if (layer.provideMap) {
        layer.provideMap(null);
      }
      _openlayers2.default.Observable.unByKey(listenerKeys.get(layer));
      listenerKeys.delete(layer);
    });
    return _this;
  }

  /**
   * The provideMap methods of all contained children are called recursively
   * @param {G4UMap} map
   */


  _createClass(GroupLayer, [{
    key: 'provideMap',
    value: function provideMap(map) {
      _get(GroupLayer.prototype.__proto__ || Object.getPrototypeOf(GroupLayer.prototype), 'provideMap', this).call(this, map);

      this.getLayers().forEach(function (layer) {
        if (layer.provideMap) {
          layer.provideMap(map);
        }
      });
    }

    /**
     * calls callback for every terminal, non-group Layer
     * @param {Function} callback
     */

  }, {
    key: 'recursiveForEach',
    value: function recursiveForEach(callback) {
      var _this2 = this;

      this.getLayers().forEach(function (layer) {
        callback(layer, _this2);
        if (layer.recursiveForEach) {
          layer.recursiveForEach(callback);
        }
      });
    }

    /**
     * Attachs a listener to each layer and to each newly added listener and removes the listener if the layer gets
     * removed.
     * @param eventType
     * @param listener
     */

  }, {
    key: 'forEachOn',
    value: function forEachOn(eventType, listener) {
      var _this3 = this;

      this.recursiveForEach(function (layer) {
        layer.on(eventType, listener);
        if (layer instanceof GroupLayer) {
          _this3.getLayers().on('add', function (e) {
            e.element.on(eventType, listener);
          });
          _this3.getLayers().on('remove', function (e) {
            e.element.un(eventType, listener);
          });
        }
      });
    }

    /**
     * Checks how many children are visible. Doesn't check visibility of the group layer
     * @returns {number}
     */

  }, {
    key: 'countChildrenVisible',
    value: function countChildrenVisible() {
      var array = this.getLayersArray();
      var count = 0;

      for (var i = 0, ii = array.length; i < ii; i++) {
        if (array[i] instanceof GroupLayer) {
          count += array[i].countChildrenVisible();
        } else if (array[i].getVisible()) {
          count += 1;
        }
      }
      return count;
    }
  }, {
    key: 'countChildren',
    value: function countChildren() {
      var array = this.getLayersArray();
      var count = 0;

      for (var i = 0, ii = array.length; i < ii; i++) {
        if (array[i] instanceof GroupLayer) {
          count += array[i].countChildren();
        } else {
          count += 1;
        }
      }
      return count;
    }

    /**
     * Returns the layers inside as an array.
     * @returns {ol.layer.Base[]}
     */

  }, {
    key: 'getLayersArray',
    value: function getLayersArray() {
      return this.getLayers().getArray();
    }

    /**
     * Returns the number of direct child layers
     * @returns {number}
     */

  }, {
    key: 'getLength',
    value: function getLength() {
      return this.getLayers().getLength();
    }

    /**
     * checks if the given layer is a child of the grouplayer
     * @param {ol.layer.Base} layer
     * @returns {boolean}
     */

  }, {
    key: 'isParentOf',
    value: function isParentOf(layer) {
      var found = false;
      this.recursiveForEach(function (childLayer) {
        if (layer === childLayer) {
          found = true;
        }
      });
      return found;
    }

    /**
     * Returns all ids of all contained layers and its own.
     * @returns {number[]}
     */

  }, {
    key: 'getIds',
    value: function getIds() {
      var ids = this.get('id') !== undefined ? [this.get('id')] : [];

      var array = this.getLayersArray();

      for (var i = 0, ii = array.length; i < ii; i++) {
        if (array[i].getIds) {
          ids = ids.concat(array[i].getIds());
        } else {
          ids.push(array[i].get('id'));
        }
      }

      return ids;
    }

    /**
     * Returns all attributions of all visible layers.
     * @returns {number[]}
     */

  }, {
    key: 'getAttributions',
    value: function getAttributions() {
      var attributions = [];

      this.recursiveForEach(function (layer) {
        if (layer.getVisible()) {
          if (layer.getSource) {
            var atts = layer.getSource().getAttributions();
            if (atts) {
              attributions = attributions.concat(atts);
            }
          }
        }
      });

      return attributions;
    }

    /**
     * Remove layer by id
     * @param {string|number} id
     */

  }, {
    key: 'removeLayerById',
    value: function removeLayerById(id) {
      var layers = this.getLayers();
      for (var i = 0; i < layers.getLength(); i++) {
        if (layers.item(i).get('id') === id) {
          return layers.removeAt(i);
        } else if (layers.item(i).removeLayerById) {
          var res = layers.item(i).removeLayerById(id);
          if (res) {
            return res;
          }
        }
      }
    }

    /**
     * Find layer with callback
     * @param {Function} cb
     */

  }, {
    key: 'findLayer',
    value: function findLayer(cb) {
      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = this.getLayersArray()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var layer = _step.value;

          if (cb(layer)) {
            return layer;
          } else if (layer.findLayer) {
            var res = layer.findLayer(cb);
            if (res) {
              return res;
            }
          }
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }
    }

    /**
     * Get layer by id
     * @param {string|number} id
     */

  }, {
    key: 'getLayerById',
    value: function getLayerById(id) {
      var _iteratorNormalCompletion2 = true;
      var _didIteratorError2 = false;
      var _iteratorError2 = undefined;

      try {
        for (var _iterator2 = this.getLayersArray()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
          var layer = _step2.value;

          if (layer.get('id') === id) {
            return layer;
          } else if (layer.getLayerById) {
            var res = layer.getLayerById(id);
            if (res) {
              return res;
            }
          }
        }
      } catch (err) {
        _didIteratorError2 = true;
        _iteratorError2 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion2 && _iterator2.return) {
            _iterator2.return();
          }
        } finally {
          if (_didIteratorError2) {
            throw _iteratorError2;
          }
        }
      }
    }

    /**
     * removes layer
     * @param {ol.layer.Base} layer
     */

  }, {
    key: 'removeLayer',
    value: function removeLayer(layer) {
      var found = this.getLayers().remove(layer);
      if (!found) {
        this.getLayers().forEach(function (subLayer) {
          if (!found && subLayer.removeLayer) {
            found = subLayer.removeLayer(layer);
          }
        });
      }
      return found;
    }

    /**
     * gives an object with ids as keys and visibility as value
     * @returns {Object.<string|number,boolean>}
     */

  }, {
    key: 'getIdsVisibilities',
    value: function getIdsVisibilities() {
      var visibilities = {};
      this.recursiveForEach(function (layer) {
        if (layer.get('id')) {
          visibilities[layer.get('id')] = layer.getVisible();
        }
      });
      return visibilities;
    }

    /**
     * Sets the visibility of the layers to the given visibility
     * @param {Object.<string|number,boolean>} visibilities
     */

  }, {
    key: 'setIdsVisibilities',
    value: function setIdsVisibilities(visibilities) {
      this.recursiveForEach(function (layer) {
        if (layer.get('id')) {
          layer.setVisible(visibilities[layer.get('id')]);
        }
      });
    }

    /**
     * Checks if the group contains the layer
     * @param {ol.layer.Layer} layer
     * @returns {boolean}
     */

  }, {
    key: 'containsLayer',
    value: function containsLayer(layer) {
      return this.getLayers().getArray().some(function (subLayer) {
        if (subLayer === layer) {
          return true;
        }
        if (subLayer.containsLayer) {
          return subLayer.containsLayer(layer);
        }
      });
    }
  }]);

  return GroupLayer;
}((0, _utilities.mixin)(_openlayers2.default.layer.Group, _ProvideMapMixin.ProvideMapMixin));

/***/ }),
/* 74 */
/***/ (function(module, exports) {

module.exports = {};


/***/ }),
/* 75 */
/***/ (function(module, exports, __webpack_require__) {

var def = __webpack_require__(13).f;
var has = __webpack_require__(22);
var TAG = __webpack_require__(9)('toStringTag');

module.exports = function (it, tag, stat) {
  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });
};


/***/ }),
/* 76 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
var defined = __webpack_require__(39);
var fails = __webpack_require__(6);
var spaces = __webpack_require__(152);
var space = '[' + spaces + ']';
var non = '\u200b\u0085';
var ltrim = RegExp('^' + space + space + '*');
var rtrim = RegExp(space + space + '*$');

var exporter = function (KEY, exec, ALIAS) {
  var exp = {};
  var FORCE = fails(function () {
    return !!spaces[KEY]() || non[KEY]() != non;
  });
  var fn = exp[KEY] = FORCE ? exec(trim) : spaces[KEY];
  if (ALIAS) exp[ALIAS] = fn;
  $export($export.P + $export.F * FORCE, 'String', exp);
};

// 1 -> String#trimLeft
// 2 -> String#trimRight
// 3 -> String#trim
var trim = exporter.trim = function (string, TYPE) {
  string = String(defined(string));
  if (TYPE & 1) string = string.replace(ltrim, '');
  if (TYPE & 2) string = string.replace(rtrim, '');
  return string;
};

module.exports = exporter;


/***/ }),
/* 77 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(7);
module.exports = function (it, TYPE) {
  if (!isObject(it) || it._t !== TYPE) throw TypeError('Incompatible receiver, ' + TYPE + ' required!');
  return it;
};


/***/ }),
/* 78 */
/***/ (function(module, exports, __webpack_require__) {

var Symbol = __webpack_require__(87),
    getRawTag = __webpack_require__(608),
    objectToString = __webpack_require__(636);

/** `Object#toString` result references. */
var nullTag = '[object Null]',
    undefinedTag = '[object Undefined]';

/** Built-in value references. */
var symToStringTag = Symbol ? Symbol.toStringTag : undefined;

/**
 * The base implementation of `getTag` without fallbacks for buggy environments.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the `toStringTag`.
 */
function baseGetTag(value) {
  if (value == null) {
    return value === undefined ? undefinedTag : nullTag;
  }
  return (symToStringTag && symToStringTag in Object(value))
    ? getRawTag(value)
    : objectToString(value);
}

module.exports = baseGetTag;


/***/ }),
/* 79 */
/***/ (function(module, exports) {

/**
 * This method returns the first argument it receives.
 *
 * @static
 * @since 0.1.0
 * @memberOf _
 * @category Util
 * @param {*} value Any value.
 * @returns {*} Returns `value`.
 * @example
 *
 * var object = { 'a': 1 };
 *
 * console.log(_.identity(object) === object);
 * // => true
 */
function identity(value) {
  return value;
}

module.exports = identity;


/***/ }),
/* 80 */
/***/ (function(module, exports) {

/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return value != null && (type == 'object' || type == 'function');
}

module.exports = isObject;


/***/ }),
/* 81 */
/***/ (function(module, exports, __webpack_require__) {

var arrayLikeKeys = __webpack_require__(563),
    baseKeys = __webpack_require__(234),
    isArrayLike = __webpack_require__(47);

/**
 * Creates an array of the own enumerable property names of `object`.
 *
 * **Note:** Non-object values are coerced to objects. See the
 * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)
 * for more details.
 *
 * @static
 * @since 0.1.0
 * @memberOf _
 * @category Object
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.keys(new Foo);
 * // => ['a', 'b'] (iteration order is not guaranteed)
 *
 * _.keys('hi');
 * // => ['0', '1']
 */
function keys(object) {
  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);
}

module.exports = keys;


/***/ }),
/* 82 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var ActivatableMixin = exports.ActivatableMixin = function () {
  function ActivatableMixin() {
    _classCallCheck(this, ActivatableMixin);
  }

  _createClass(ActivatableMixin, [{
    key: 'initialize',

    /**
     * @param {object} options
     * @param {boolean} options.active
     */
    value: function initialize() {
      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      /**
       * @type {boolean}
       * @private
       */
      this.activate_ = options.active === true;

      /**
       * @type {boolean}
       * @private
       */
      this.active_ = false;
    }
  }, {
    key: 'activateOnMapChange',
    value: function activateOnMapChange() {
      this.setActive(this.activate_);
    }

    /**
     * @param {boolean} active
     */

  }, {
    key: 'setActive',
    value: function setActive(active) {
      var oldValue = this.active_;
      if (oldValue !== active) {
        this.active_ = active;
        var changeEvent = {
          type: 'change:active',
          oldValue: oldValue
        };
        this.dispatchEvent(changeEvent);
      }
    }

    /**
     * @returns {boolean}
     */

  }, {
    key: 'getActive',
    value: function getActive() {
      return this.active_;
    }
  }]);

  return ActivatableMixin;
}();

/***/ }),
/* 83 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var ProvideMapMixin = exports.ProvideMapMixin = function () {
  function ProvideMapMixin() {
    _classCallCheck(this, ProvideMapMixin);
  }

  _createClass(ProvideMapMixin, [{
    key: "provideMap",

    /**
     * @param {G4UMap} map
     */
    value: function provideMap(map) {
      /**
       * @type {G4UMap|undefined}
       * @private
       */
      this.providedMap_ = map;
    }

    /**
     * @returns {G4UMap|undefined}
     */

  }, {
    key: "getProvidedMap",
    value: function getProvidedMap() {
      return this.providedMap_;
    }
  }]);

  return ProvideMapMixin;
}();

/***/ }),
/* 84 */
/***/ (function(module, exports, __webpack_require__) {

// getting tag from 19.1.3.6 Object.prototype.toString()
var cof = __webpack_require__(31);
var TAG = __webpack_require__(9)('toStringTag');
// ES3 wrong here
var ARG = cof(function () { return arguments; }()) == 'Arguments';

// fallback for IE11 Script Access Denied error
var tryGet = function (it, key) {
  try {
    return it[key];
  } catch (e) { /* empty */ }
};

module.exports = function (it) {
  var O, T, B;
  return it === undefined ? 'Undefined' : it === null ? 'Null'
    // @@toStringTag case
    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T
    // builtinTag case
    : ARG ? cof(O)
    // ES3 arguments fallback
    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;
};


/***/ }),
/* 85 */
/***/ (function(module, exports, __webpack_require__) {

// fallback for non-array-like ES3 and non-enumerable old V8 strings
var cof = __webpack_require__(31);
// eslint-disable-next-line no-prototype-builtins
module.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {
  return cof(it) == 'String' ? it.split('') : Object(it);
};


/***/ }),
/* 86 */
/***/ (function(module, exports) {

exports.f = {}.propertyIsEnumerable;


/***/ }),
/* 87 */
/***/ (function(module, exports, __webpack_require__) {

var root = __webpack_require__(46);

/** Built-in value references. */
var Symbol = root.Symbol;

module.exports = Symbol;


/***/ }),
/* 88 */
/***/ (function(module, exports, __webpack_require__) {

var SetCache = __webpack_require__(111),
    arrayIncludes = __webpack_require__(160),
    arrayIncludesWith = __webpack_require__(161),
    arrayMap = __webpack_require__(27),
    baseUnary = __webpack_require__(89),
    cacheHas = __webpack_require__(119);

/** Used as the size to enable large array optimizations. */
var LARGE_ARRAY_SIZE = 200;

/**
 * The base implementation of methods like `_.difference` without support
 * for excluding multiple arrays or iteratee shorthands.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {Array} values The values to exclude.
 * @param {Function} [iteratee] The iteratee invoked per element.
 * @param {Function} [comparator] The comparator invoked per element.
 * @returns {Array} Returns the new array of filtered values.
 */
function baseDifference(array, values, iteratee, comparator) {
  var index = -1,
      includes = arrayIncludes,
      isCommon = true,
      length = array.length,
      result = [],
      valuesLength = values.length;

  if (!length) {
    return result;
  }
  if (iteratee) {
    values = arrayMap(values, baseUnary(iteratee));
  }
  if (comparator) {
    includes = arrayIncludesWith;
    isCommon = false;
  }
  else if (values.length >= LARGE_ARRAY_SIZE) {
    includes = cacheHas;
    isCommon = false;
    values = new SetCache(values);
  }
  outer:
  while (++index < length) {
    var value = array[index],
        computed = iteratee == null ? value : iteratee(value);

    value = (comparator || value !== 0) ? value : 0;
    if (isCommon && computed === computed) {
      var valuesIndex = valuesLength;
      while (valuesIndex--) {
        if (values[valuesIndex] === computed) {
          continue outer;
        }
      }
      result.push(value);
    }
    else if (!includes(values, computed, comparator)) {
      result.push(value);
    }
  }
  return result;
}

module.exports = baseDifference;


/***/ }),
/* 89 */
/***/ (function(module, exports) {

/**
 * The base implementation of `_.unary` without support for storing metadata.
 *
 * @private
 * @param {Function} func The function to cap arguments for.
 * @returns {Function} Returns the new capped function.
 */
function baseUnary(func) {
  return function(value) {
    return func(value);
  };
}

module.exports = baseUnary;


/***/ }),
/* 90 */
/***/ (function(module, exports, __webpack_require__) {

var isArray = __webpack_require__(10),
    isKey = __webpack_require__(171),
    stringToPath = __webpack_require__(649),
    toString = __webpack_require__(731);

/**
 * Casts `value` to a path array if it's not one.
 *
 * @private
 * @param {*} value The value to inspect.
 * @param {Object} [object] The object to query keys on.
 * @returns {Array} Returns the cast property path array.
 */
function castPath(value, object) {
  if (isArray(value)) {
    return value;
  }
  return isKey(value, object) ? [value] : stringToPath(toString(value));
}

module.exports = castPath;


/***/ }),
/* 91 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.URL = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _Debug = __webpack_require__(15);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * @typedef {object} URLConfig
 * @property {Localizable} url
 * @property {boolean} [useProxy]
 * @property {string} [proxy]
 * @property {boolean} [cache=true]
 * @property {string} [username] only implemented for wms at the moment
 * @property {string} [password] only implemented for wms at the moment
 */

/**
 * @typedef {URLConfig|Localizable|URL} URLLike
 */

var URL = exports.URL = function () {
  /**
   * @param {URLLike} urlLike
   * @param {G4UMap|null} map
   */
  function URL(urlLike, map) {
    _classCallCheck(this, URL);

    if (_jquery2.default.type(urlLike) === 'string' || !urlLike.hasOwnProperty('url')) {
      /**
       * @type {string}
       */
      this.url = urlLike;
      /**
       * @type {boolean}
       */
      this.useProxy = false;
      /**
       * @type {boolean}
       */
      this.cache = true;
      this.params = [];
      this.expand = [];
    } else {
      /**
       * @type {Localizable}
       */
      this.url = urlLike.url;
      /**
       * @type {boolean}
       */
      this.useProxy = urlLike.useProxy;
      /**
       * @type {string}
       */
      this.proxy = urlLike.proxy;
      /**
       * @type {boolean}
       */
      this.cache = urlLike.cache === undefined ? true : urlLike.cache;
      /**
       * @type {string}
       */
      this.username = urlLike.username;
      /**
       * @type {string}
       */
      this.password = urlLike.password;
      if (urlLike.params) {
        this.params = urlLike.params.slice(0);
      } else {
        this.params = [];
      }
      if (urlLike.expand) {
        this.expand = urlLike.expand.slice(0);
      } else {
        this.expand = [];
      }

      /**
       * @type {string}
       */
      this.globalProxy = urlLike.globalProxy;
      /**
       * {L10N}
       */
      this.localiser = urlLike.localiser;
    }

    if (map) {
      this.extractParamsFromMap(map);
    }
  }

  /**
   * @param {G4UMap} map
   */


  _createClass(URL, [{
    key: 'extractParamsFromMap',
    value: function extractParamsFromMap(map) {
      /**
       * @type {string}
       */
      this.globalProxy = this.globalProxy || map.get('proxy');
      /**
       * {L10N}
       */
      this.localiser = this.localiser || map.get('localiser');
    }

    /**
     * @param {object} config
     * @param {string} paramName
     * @param {string} [defaultValue]
     * @param {G4UMap} [map]
     * @returns {URL}
     */

  }, {
    key: 'clone',


    /**
     * @returns {URL}
     */
    value: function clone() {
      return new URL(this);
    }

    /**
     * @returns {string}
     */

  }, {
    key: 'finalize',
    value: function finalize() {
      var url = this;
      if (!this.cache) {
        url = this.clone().addParam(Math.random().toString(36).substring(7));
      }

      var urlAsString = this.localiser ? this.localiser.selectL10N(url.url) : url.url;

      if (url.params.length) {
        if (urlAsString.search(/\?/) === -1) {
          urlAsString += '?';
        } else {
          urlAsString += '&';
        }
        urlAsString += url.params.join('&');
      }

      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = url.expand[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var expand = _step.value;

          urlAsString = URL.expandTemplate_(urlAsString, expand);
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }

      if (url.useProxy === true || url.useProxy === undefined && !!url.proxy) {
        var proxy = url.proxy || this.globalProxy;
        if (!proxy) {
          throw new Error('No proxy configured. Either configure a local or global proxy if you want to use the option' + ' useProxy.');
        }

        return URL.expandTemplate_(proxy, { paramName: 'url', paramValue: URL.encodeTemplate_(urlAsString), required: true });
      } else {
        return urlAsString;
      }
    }

    /*
    * this function will add an parameter to the url
    * @param {string} param
    * @returns {URL)
    */

  }, {
    key: 'addParam',
    value: function addParam(param) {
      this.params.push(param);
      return this;
    }

    /**
     * replaces a param enclosed in {} in a (url) template with a value. If the value is an array it will take any string
     * not containing a '}' after the paramName to join the array, default ','.
     * @param {string} template an (url) template
     * @param {object} expand
     * @param {string} expand.paramName the parameter that will be replaced (given without {}) f.e. 'example' will
     *    replace any occurancy of '{example}' (after the word 'example' there might be given a string join an
     *    array value i.e. '{example+}')
     * @param {string|string[]|number} expand.paramValue the value(s) which will be inserted
     * @param {boolean} expand.required
     * @returns {string} the expanded string
     */

  }, {
    key: 'expandTemplate',


    /**
     * expand the target template. automatically encodes the value
     * @param {string} paramName
     * @param paramValue
     * @param {boolean} [required=true]
     * @returns {URL}
     */
    value: function expandTemplate(paramName, paramValue) {
      var required = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;

      var index = this.expand.findIndex(function (e) {
        return e.paramName === paramName;
      });
      if (index >= 0) {
        this.expand.splice(index, 1);
      }
      var encode = function encode(val) {
        if (_jquery2.default.type(val) === 'string') {
          return encodeURIComponent(val);
        } else if (_jquery2.default.type(paramValue) === 'array') {
          return val.map(function (v) {
            return encode(v);
          });
        } else {
          return val;
        }
      };
      paramValue = encode(paramValue);
      this.expand.push({ paramName: paramName, paramValue: paramValue, required: required });
      return this;
    }

    /**
     * @param {string} otherUrl
     * @returns {URL}
     */

  }, {
    key: 'useProxyFor',
    value: function useProxyFor(otherUrl) {
      return new URL({
        useProxy: this.useProxy,
        proxy: this.proxy,
        url: otherUrl
      });
    }

    /**
     * this function takes an (url) template and encodes everything except for the templated elements.
     * @param {string} template an (url) template
     * @returns {string} the encoded (url) template
     */

  }], [{
    key: 'extractFromConfig',
    value: function extractFromConfig(config, paramName, defaultValue, map) {
      if (!config.hasOwnProperty(paramName)) {
        return null;
      }
      if (config.hasOwnProperty('useProxy') || config.hasOwnProperty('proxy') || config.hasOwnProperty('cache')) {
        _Debug.Debug.warn('Using the parameters \'useProxy\' \'proxy\' \'cache\' directly inside a config object is considered' + ' deprecated. Please use a URLConfig object');
        return new URL({
          url: config[paramName] || defaultValue,
          useProxy: config.useProxy,
          proxy: config.proxy,
          cache: config.cache
        }, map);
      } else if (_jquery2.default.isPlainObject(config[paramName]) && !config[paramName].hasOwnProperty('url')) {
        _Debug.Debug.warn('The url config object is missing an "url" parameter. The software is assuming the' + ' parameter is a Localizable.');
        return new URL({
          url: config[paramName]
        }, map);
      } else {
        return new URL(config[paramName], map);
      }
    }
  }, {
    key: 'expandTemplate_',
    value: function expandTemplate_(template, expand) {
      var regexp = new RegExp('{' + expand.paramName + '([^}]*)}');
      var match = template.match(regexp);
      if (match) {
        if (_jquery2.default.type(expand.paramValue) === 'string') {
          return template.replace(regexp, expand.paramValue);
        } else if (_jquery2.default.type(expand.paramValue) === 'array') {
          var joinString = match[1] || ',';
          return template.replace(regexp, expand.paramValue.join(joinString));
        } else if (_jquery2.default.type(expand.paramValue) === 'number') {
          var valReg = new RegExp('(?::|,)([^,])', 'g');
          var nextMatch = valReg.exec(match[1]);
          for (var i = 0; i < expand.paramValue; i++) {
            nextMatch = valReg.exec(match[1]);
          }
          return template.replace(regexp, nextMatch[1]);
        }
      } else if (expand.required) {
        throw new Error('required parameter ' + expand.paramName + ' (enclosed in {}) not found in string ' + template);
      } else {
        return template;
      }
    }
  }, {
    key: 'encodeTemplate_',
    value: function encodeTemplate_(template) {
      var parts = template.split('}');

      var encodedTemplate = '';

      var i = void 0;
      for (i = 0; i < parts.length - 1; i += 1) {
        var partedParts = parts[i].split('{');
        encodedTemplate += encodeURIComponent(partedParts[0]) + '{' + partedParts[1] + '}';
      }

      encodedTemplate += encodeURIComponent(parts[i]);

      return encodedTemplate;
    }
  }]);

  return URL;
}();

/***/ }),
/* 92 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.RewireMixin = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _ControlLogicMixin2 = __webpack_require__(182);

var _globals = __webpack_require__(11);

var _utilities = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * This class does all generic rewiring including catching the target and restyling the tooltips
 * It is important to provide a className in the control because else it will not be possible to find the control in
 * the ol-viewport
 */
var RewireMixin = exports.RewireMixin = function (_ControlLogicMixin) {
  _inherits(RewireMixin, _ControlLogicMixin);

  function RewireMixin() {
    _classCallCheck(this, RewireMixin);

    return _possibleConstructorReturn(this, (RewireMixin.__proto__ || Object.getPrototypeOf(RewireMixin)).apply(this, arguments));
  }

  _createClass(RewireMixin, [{
    key: 'initialize',

    /**
     * @param {g4uControlOptions} [options={}]
     */
    value: function initialize() {
      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      options.singleButton = false;

      _get(RewireMixin.prototype.__proto__ || Object.getPrototypeOf(RewireMixin.prototype), 'initialize', this).call(this, options);

      this.rewire();
    }

    /**
     * This function tweaks the control a little bit
     */

  }, {
    key: 'rewire',
    value: function rewire() {
      (0, _utilities.recursiveSelect)(this.get$Element(), 'button[title]').each(function () {
        var title = (0, _jquery2.default)(this).attr('title');
        (0, _jquery2.default)(this).addClass(_globals.cssClasses.hasTooltip).removeAttr('title').append('<span role=\'tooltip\'>' + title + '</span>');
      });
    }
  }]);

  return RewireMixin;
}(_ControlLogicMixin2.ControlLogicMixin);

/***/ }),
/* 93 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Window = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _utilities = __webpack_require__(5);

var _html = __webpack_require__(35);

var _globals = __webpack_require__(11);

var _iscroll = __webpack_require__(553);

var _iscroll2 = _interopRequireDefault(_iscroll);

__webpack_require__(545);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {object} WindowOptions
 * @property {boolean} [draggable=false]
 * @property {string} [id] an html id for the outer window element
 * @property {string} [className] an alternative html class name to use instead of 'g4u-window', not recommended
 * @property {G4UMap} [map] the map the window should be shown on. The viewport will be set as the context of the window
 * @property {jQuery} [$context] context the window is shown in
 * @property {boolean} [visible=false] the visibility of the window on start up
 * @property {boolean} [fixedPosition=false] if the window is movable or not
 */

/**
 * A HTML Window
 */
var Window = exports.Window = function (_ol$Object) {
  _inherits(Window, _ol$Object);

  /**
   * @param {WindowOptions} options
   */
  function Window() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, Window);

    /**
     * @type {string}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (Window.__proto__ || Object.getPrototypeOf(Window)).call(this));

    _this.className_ = options.hasOwnProperty('className') ? options.className : 'g4u-window';

    /**
     * @type {string}
     * @private
     */
    _this.classNameBody_ = _this.className_ + '-content';

    /**
     * @type {string}
     * @private
     */
    _this.classNameButtonClose_ = _this.className_ + '-button-close';

    /**
     * @type {jQuery}
     * @private
     */
    _this.$element_ = (0, _jquery2.default)('<div>').addClass(_this.className_).on('click', function (e) {
      return e.stopPropagation();
    });

    /**
     * @type {jQuery}
     * @private
     */
    _this.$positionWrapper_ = (0, _jquery2.default)('<div>').addClass(_this.className_ + '-inner-position');

    /**
     * @type {jQuery}
     * @private
     */
    _this.$scrollWrapper_ = (0, _jquery2.default)('<div>').addClass(_this.className_ + '-scroll-wrap');

    /**
     * @type {jQuery}
     * @private
     */
    _this.$body_ = (0, _jquery2.default)('<div>').addClass(_this.classNameBody_);

    /**
     * @type {jQuery}
     * @private
     */
    _this.$button_ = (0, _jquery2.default)('<button>').addClass(_this.classNameButtonClose_);

    _this.$element_.append(_this.$button_).append(_this.$positionWrapper_.append(_this.$scrollWrapper_.append(_this.$body_))).addClass(_globals.cssClasses.hidden);

    if (options.hasOwnProperty('id')) {
      _this.$element_.attr('id', options.id);
    }

    _this.$button_.on('click', function () {
      return _this.setVisible(false);
    });

    /**
     * @type {boolean}
     * @private
     */
    _this.draggable_ = options.hasOwnProperty('draggable') ? options.draggable : true;

    /**
     * @type {boolean}
     * @private
     */
    _this.fixedPosition_ = options.fixedPosition === true;

    /**
     * @type {G4UMap}
     * @private
     */
    _this.map_ = options.map;

    /**
     * @type {jQuery}
     * @private
     */
    _this.$context_ = (0, _jquery2.default)(_this.map_.getTarget());
    var initialDraggable = _this.draggable_;

    _this.map_.asSoonAs('ready', true, function () {
      _this.map_.on('resize', function () {
        return _this.updateSize(true);
      });

      var onChangeMobile = function onChangeMobile() {
        if (_this.map_.get('mobile')) {
          _this.draggable_ = false;
          _this.setIScrollEnabled_(true);
        } else {
          _this.draggable_ = initialDraggable;
          _this.setIScrollEnabled_(false);
        }
        _this.updateSize();
      };

      onChangeMobile();
      _this.map_.on('change:mobile', onChangeMobile);
    });

    _this.makeWindowDraggable_();

    // get window in front if clicked

    _this.$element_.on('mousedown', function () {
      _this.getInFront();
    });

    /**
     * @type {boolean}
     * @private
     */
    _this.visible_ = false;
    _this.setVisible(options.hasOwnProperty('visible') ? options.visible : false);

    /**
     * @type {boolean}
     * @private
     */
    _this.shieldActivated_ = false;
    return _this;
  }

  /**
   * Makes the Window draggable
   * @private
   */


  _createClass(Window, [{
    key: 'makeWindowDraggable_',
    value: function makeWindowDraggable_() {
      var _this2 = this;

      var clickPosX = 0;
      var clickPosY = 0;

      var preventClick = false;
      var moving = false;

      this.$context_.on('mousemove', function (e) {
        if (moving) {
          if (e.clientY - clickPosY !== _this2.$element_.offset().top || e.clientX - clickPosX !== _this2.$element_.offset().left) {
            preventClick = true;
            _this2.$element_.css('position', 'absolute');
            _this2.$element_.offset({ top: e.clientY - clickPosY, left: e.clientX - clickPosX });
            e.stopPropagation();
          }
        }
      });

      this.$button_.on('mousedown', function (e) {
        if (!(0, _jquery2.default)(e.target).is('input, textarea') && _this2.draggable_) {
          clickPosX = e.clientX - _this2.$element_.offset().left;
          clickPosY = e.clientY - _this2.$element_.offset().top;
          moving = true;
        }
      });

      this.$element_.get(0).addEventListener('click', function (e) {
        if (preventClick && _this2.draggable_) {
          preventClick = false;
          e.preventDefault();
          e.stopPropagation();
        }
      }, true);

      this.$context_.on('mouseup', function () {
        moving = false;
      });
    }

    /**
     * Enables/Disables the iscroll needed for mobile scrolling
     * @param {boolean} scrollable
     * @private
     */

  }, {
    key: 'setIScrollEnabled_',
    value: function setIScrollEnabled_(scrollable) {
      if (scrollable) {
        if (!this.scroll_) {
          this.scroll_ = new _iscroll2.default(this.$scrollWrapper_.get(0), {
            mouseWheel: true,
            scrollbars: true,
            momentum: false,
            interactiveScrollbars: true,
            // bounce: true,
            click: true,
            keyBindings: true,
            disablePointer: true,
            disableTouch: false,
            disableMouse: true,
            eventPassthrough: false
          });
        }
      } else {
        if (this.scroll_) {
          this.scroll_.scrollTo(0, 0, 0);
          this.scroll_.destroy();
          this.$body_.removeAttr('style');
        }
        this.scroll_ = null;
      }
    }

    /**
     * Moves the window in front of all other elements inside its context
     */

  }, {
    key: 'getInFront',
    value: function getInFront() {
      (0, _html.getInFront)(this.$element_, this.$context_);
    }

    /**
     * @param {boolean} visible
     */

  }, {
    key: 'setVisible',
    value: function setVisible(visible) {
      var _this3 = this;

      var popHistory = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

      var oldValue = this.visible_;
      if (oldValue !== visible) {
        if (visible) {
          this.$element_.removeClass(_globals.cssClasses.hidden);
          if (this.map_.get('mobile')) {
            this.map_.get('shield').setActive(true);
            this.map_.get('shield').add$OnTop(this.$element_, {
              findParentWindow: false
            });
            this.shieldActivated_ = true;
            this.map_.get('history').push(function () {
              return _this3.setVisible(false, false);
            });
          } else if (!this.map_.get('shield').getActive()) {
            this.getInFront();
          }
        } else {
          if (this.shieldActivated_) {
            if (popHistory) {
              this.map_.get('history').pop();
            } else {
              this.map_.get('shield').setActive(false);
              this.map_.get('shield').remove$OnTop(this.$element_);
              this.shieldActivated_ = false;
            }
          }
          this.$element_.addClass(_globals.cssClasses.hidden);
          this.$element_.css('top', '');
          this.$element_.css('left', '');
        }
        this.visible_ = visible;
        this.updateSize(true);
        this.dispatchEvent({ type: 'change:visible', oldValue: oldValue, newValue: visible });
      }
    }

    /**
     * @returns {boolean}
     */

  }, {
    key: 'getVisible',
    value: function getVisible() {
      return this.visible_;
    }

    /**
     * @returns {jQuery}
     */

  }, {
    key: 'get$Body',
    value: function get$Body() {
      return this.$body_;
    }

    /**
     * @returns {jQuery}
     */

  }, {
    key: 'get$Element',
    value: function get$Element() {
      return this.$element_;
    }

    /**
     * Fixes width and height depending on the current content on the popup.
     * needs to be called when the window is visible.
     * @param {boolean} [initialize=false]
     */

  }, {
    key: 'updateSize',
    value: function updateSize() {
      var initialize = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;

      var margin = 0;

      if (this.getVisible()) {
        if (!this.map_.get('mobile')) {
          // desktop
          margin = 50;

          var maxWidth = this.$context_.innerWidth() - 2 * margin;
          var maxHeight = this.$context_.innerHeight() - 2 * margin;

          // storing values
          var position = this.$element_.css('position');
          var top = this.$element_.css('top');
          var left = this.$element_.css('left');

          // reset position to get default value
          this.$element_.css('position', '');

          // resetting all directly setted values
          this.$element_.css('top', '');
          this.$element_.css('left', '');
          this.$element_.css('width', '');
          this.$element_.css('height', '');

          this.get$Body().css('max-height', '');

          // position element so it can be measured
          this.$element_.css('position', 'fixed');
          this.$element_.css('top', '0px');
          this.$element_.css('left', '0px');

          // clearing fixed size and height

          this.$element_.css('width', 'auto');
          this.$element_.css('height', 'auto');

          // calculate width & height

          var calcWidth = this.$element_.outerWidth();
          var calcHeight = this.$element_.outerHeight();

          var width = Math.min(calcWidth, maxWidth);
          var height = Math.min(calcHeight, maxHeight);

          this.$element_.css('width', width);
          this.$element_.css('height', height);

          // setting max-height for the scroll bar
          // i assume here there is no margin and no padding on the parent element
          var padding = parseInt(this.get$Body().css('padding-top').split('px')[0]) + parseInt(this.get$Body().css('padding-bottom').split('px')[0]);
          this.get$Body().css('max-height', this.get$Element().innerHeight() - this.$button_.outerHeight() - padding);

          this.$element_.css('position', position);

          if (initialize && !this.fixedPosition_) {
            // getting initial values
            top = this.$element_.css('top');
            left = this.$element_.css('left');

            // initialize_ at top middle
            var off = (0, _utilities.offset)(this.$context_, this.$element_);

            var sideDist = (this.$context_.width() - width) / 2;
            var topDist = margin;

            var topPixel = top === 'auto' ? 0 : parseInt(top);
            var leftPixel = left === 'auto' ? 0 : parseInt(left);

            this.$element_.css('top', topPixel + off.top + topDist);
            this.$element_.css('left', leftPixel + off.left + sideDist);
          } else {
            // move back to old position
            this.$element_.css('top', top);
            this.$element_.css('left', left);
          }
        } else {
          // mobile
          margin = 10;

          var _maxWidth = this.$context_.innerWidth() - 2 * margin;
          var _maxHeight = this.$context_.innerHeight() - 2 * margin;

          this.get$Body().css('max-height', '');
          this.$element_.css('width', _maxWidth);
          this.$element_.css('height', _maxHeight);

          var contextOff = this.$context_.offset();

          this.$element_.css('left', margin + contextOff.left);
          this.$element_.css('top', margin + contextOff.top);
        }

        if (this.get$Body().children(':not(.' + _globals.cssClasses.hidden + ')').length === 0) {
          this.$element_.addClass(_globals.cssClasses.hidden);
        }

        if (this.scroll_) {
          this.scroll_.refresh();
        }
      }
    }
  }]);

  return Window;
}(_openlayers2.default.Object);

/***/ }),
/* 94 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.VectorLayer = undefined;

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _LayerLoadProcessCountMixin = __webpack_require__(130);

var _utilities = __webpack_require__(5);

var _ProvideMapMixin = __webpack_require__(83);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {object} VectorLayerOptions
 * @property {string[]} [mutators=[]] list of mutators (changes featurepopup content) to use for this layer.
 */

var VectorLayer = exports.VectorLayer = function (_mixin) {
  _inherits(VectorLayer, _mixin);

  function VectorLayer() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, VectorLayer);

    var _this = _possibleConstructorReturn(this, (VectorLayer.__proto__ || Object.getPrototypeOf(VectorLayer)).call(this, options));

    _this.on('change:visible', function () {
      if (_this.getSource().setRefreshing) {
        _this.getSource().setRefreshing(_this.getVisible());
      }
    });

    // saving text mutators
    _this.set('mutators', options.mutators || []);
    return _this;
  }

  return VectorLayer;
}((0, _utilities.mixin)((0, _utilities.mixin)(_openlayers2.default.layer.Vector, _ProvideMapMixin.ProvideMapMixin), _LayerLoadProcessCountMixin.LayerLoadProcessCountMixin));

/***/ }),
/* 95 */
/***/ (function(module, exports, __webpack_require__) {

// false -> Array#indexOf
// true  -> Array#includes
var toIObject = __webpack_require__(26);
var toLength = __webpack_require__(14);
var toAbsoluteIndex = __webpack_require__(61);
module.exports = function (IS_INCLUDES) {
  return function ($this, el, fromIndex) {
    var O = toIObject($this);
    var length = toLength(O.length);
    var index = toAbsoluteIndex(fromIndex, length);
    var value;
    // Array#includes uses SameValueZero equality algorithm
    // eslint-disable-next-line no-self-compare
    if (IS_INCLUDES && el != el) while (length > index) {
      value = O[index++];
      // eslint-disable-next-line no-self-compare
      if (value != value) return true;
    // Array#indexOf ignores holes, Array#includes - not
    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {
      if (O[index] === el) return IS_INCLUDES || index || 0;
    } return !IS_INCLUDES && -1;
  };
};


/***/ }),
/* 96 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(4);
var $export = __webpack_require__(0);
var redefine = __webpack_require__(24);
var redefineAll = __webpack_require__(59);
var meta = __webpack_require__(50);
var forOf = __webpack_require__(54);
var anInstance = __webpack_require__(53);
var isObject = __webpack_require__(7);
var fails = __webpack_require__(6);
var $iterDetect = __webpack_require__(102);
var setToStringTag = __webpack_require__(75);
var inheritIfRequired = __webpack_require__(139);

module.exports = function (NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {
  var Base = global[NAME];
  var C = Base;
  var ADDER = IS_MAP ? 'set' : 'add';
  var proto = C && C.prototype;
  var O = {};
  var fixMethod = function (KEY) {
    var fn = proto[KEY];
    redefine(proto, KEY,
      KEY == 'delete' ? function (a) {
        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);
      } : KEY == 'has' ? function has(a) {
        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);
      } : KEY == 'get' ? function get(a) {
        return IS_WEAK && !isObject(a) ? undefined : fn.call(this, a === 0 ? 0 : a);
      } : KEY == 'add' ? function add(a) { fn.call(this, a === 0 ? 0 : a); return this; }
        : function set(a, b) { fn.call(this, a === 0 ? 0 : a, b); return this; }
    );
  };
  if (typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function () {
    new C().entries().next();
  }))) {
    // create collection constructor
    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);
    redefineAll(C.prototype, methods);
    meta.NEED = true;
  } else {
    var instance = new C();
    // early implementations not supports chaining
    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;
    // V8 ~  Chromium 40- weak-collections throws on primitives, but should return false
    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });
    // most early implementations doesn't supports iterables, most modern - not close it correctly
    var ACCEPT_ITERABLES = $iterDetect(function (iter) { new C(iter); }); // eslint-disable-line no-new
    // for early implementations -0 and +0 not the same
    var BUGGY_ZERO = !IS_WEAK && fails(function () {
      // V8 ~ Chromium 42- fails only with 5+ elements
      var $instance = new C();
      var index = 5;
      while (index--) $instance[ADDER](index, index);
      return !$instance.has(-0);
    });
    if (!ACCEPT_ITERABLES) {
      C = wrapper(function (target, iterable) {
        anInstance(target, C, NAME);
        var that = inheritIfRequired(new Base(), target, C);
        if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);
        return that;
      });
      C.prototype = proto;
      proto.constructor = C;
    }
    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {
      fixMethod('delete');
      fixMethod('has');
      IS_MAP && fixMethod('get');
    }
    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);
    // weak collections should not contains .clear method
    if (IS_WEAK && proto.clear) delete proto.clear;
  }

  setToStringTag(C, NAME);

  O[NAME] = C;
  $export($export.G + $export.W + $export.F * (C != Base), O);

  if (!IS_WEAK) common.setStrong(C, NAME, IS_MAP);

  return C;
};


/***/ }),
/* 97 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var hide = __webpack_require__(23);
var redefine = __webpack_require__(24);
var fails = __webpack_require__(6);
var defined = __webpack_require__(39);
var wks = __webpack_require__(9);

module.exports = function (KEY, length, exec) {
  var SYMBOL = wks(KEY);
  var fns = exec(defined, SYMBOL, ''[KEY]);
  var strfn = fns[0];
  var rxfn = fns[1];
  if (fails(function () {
    var O = {};
    O[SYMBOL] = function () { return 7; };
    return ''[KEY](O) != 7;
  })) {
    redefine(String.prototype, KEY, strfn);
    hide(RegExp.prototype, SYMBOL, length == 2
      // 21.2.5.8 RegExp.prototype[@@replace](string, replaceValue)
      // 21.2.5.11 RegExp.prototype[@@split](string, limit)
      ? function (string, arg) { return rxfn.call(string, this, arg); }
      // 21.2.5.6 RegExp.prototype[@@match](string)
      // 21.2.5.9 RegExp.prototype[@@search](string)
      : function (string) { return rxfn.call(string, this); }
    );
  }
};


/***/ }),
/* 98 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 21.2.5.3 get RegExp.prototype.flags
var anObject = __webpack_require__(3);
module.exports = function () {
  var that = anObject(this);
  var result = '';
  if (that.global) result += 'g';
  if (that.ignoreCase) result += 'i';
  if (that.multiline) result += 'm';
  if (that.unicode) result += 'u';
  if (that.sticky) result += 'y';
  return result;
};


/***/ }),
/* 99 */
/***/ (function(module, exports) {

// fast apply, http://jsperf.lnkit.com/fast-apply/5
module.exports = function (fn, args, that) {
  var un = that === undefined;
  switch (args.length) {
    case 0: return un ? fn()
                      : fn.call(that);
    case 1: return un ? fn(args[0])
                      : fn.call(that, args[0]);
    case 2: return un ? fn(args[0], args[1])
                      : fn.call(that, args[0], args[1]);
    case 3: return un ? fn(args[0], args[1], args[2])
                      : fn.call(that, args[0], args[1], args[2]);
    case 4: return un ? fn(args[0], args[1], args[2], args[3])
                      : fn.call(that, args[0], args[1], args[2], args[3]);
  } return fn.apply(that, args);
};


/***/ }),
/* 100 */
/***/ (function(module, exports, __webpack_require__) {

// 7.2.2 IsArray(argument)
var cof = __webpack_require__(31);
module.exports = Array.isArray || function isArray(arg) {
  return cof(arg) == 'Array';
};


/***/ }),
/* 101 */
/***/ (function(module, exports, __webpack_require__) {

// 7.2.8 IsRegExp(argument)
var isObject = __webpack_require__(7);
var cof = __webpack_require__(31);
var MATCH = __webpack_require__(9)('match');
module.exports = function (it) {
  var isRegExp;
  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');
};


/***/ }),
/* 102 */
/***/ (function(module, exports, __webpack_require__) {

var ITERATOR = __webpack_require__(9)('iterator');
var SAFE_CLOSING = false;

try {
  var riter = [7][ITERATOR]();
  riter['return'] = function () { SAFE_CLOSING = true; };
  // eslint-disable-next-line no-throw-literal
  Array.from(riter, function () { throw 2; });
} catch (e) { /* empty */ }

module.exports = function (exec, skipClosing) {
  if (!skipClosing && !SAFE_CLOSING) return false;
  var safe = false;
  try {
    var arr = [7];
    var iter = arr[ITERATOR]();
    iter.next = function () { return { done: safe = true }; };
    arr[ITERATOR] = function () { return iter; };
    exec(arr);
  } catch (e) { /* empty */ }
  return safe;
};


/***/ }),
/* 103 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// Forced replacement prototype accessors methods
module.exports = __webpack_require__(55) || !__webpack_require__(6)(function () {
  var K = Math.random();
  // In FF throws only define methods
  // eslint-disable-next-line no-undef, no-useless-call
  __defineSetter__.call(null, K, function () { /* empty */ });
  delete __webpack_require__(4)[K];
});


/***/ }),
/* 104 */
/***/ (function(module, exports) {

exports.f = Object.getOwnPropertySymbols;


/***/ }),
/* 105 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://tc39.github.io/proposal-setmap-offrom/
var $export = __webpack_require__(0);
var aFunction = __webpack_require__(19);
var ctx = __webpack_require__(32);
var forOf = __webpack_require__(54);

module.exports = function (COLLECTION) {
  $export($export.S, COLLECTION, { from: function from(source /* , mapFn, thisArg */) {
    var mapFn = arguments[1];
    var mapping, A, n, cb;
    aFunction(this);
    mapping = mapFn !== undefined;
    if (mapping) aFunction(mapFn);
    if (source == undefined) return new this();
    A = [];
    if (mapping) {
      n = 0;
      cb = ctx(mapFn, arguments[2], 2);
      forOf(source, false, function (nextItem) {
        A.push(cb(nextItem, n++));
      });
    } else {
      forOf(source, false, A.push, A);
    }
    return new this(A);
  } });
};


/***/ }),
/* 106 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://tc39.github.io/proposal-setmap-offrom/
var $export = __webpack_require__(0);

module.exports = function (COLLECTION) {
  $export($export.S, COLLECTION, { of: function of() {
    var length = arguments.length;
    var A = Array(length);
    while (length--) A[length] = arguments[length];
    return new this(A);
  } });
};


/***/ }),
/* 107 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(4);
var SHARED = '__core-js_shared__';
var store = global[SHARED] || (global[SHARED] = {});
module.exports = function (key) {
  return store[key] || (store[key] = {});
};


/***/ }),
/* 108 */
/***/ (function(module, exports, __webpack_require__) {

// 7.3.20 SpeciesConstructor(O, defaultConstructor)
var anObject = __webpack_require__(3);
var aFunction = __webpack_require__(19);
var SPECIES = __webpack_require__(9)('species');
module.exports = function (O, D) {
  var C = anObject(O).constructor;
  var S;
  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);
};


/***/ }),
/* 109 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(4);
var hide = __webpack_require__(23);
var uid = __webpack_require__(62);
var TYPED = uid('typed_array');
var VIEW = uid('view');
var ABV = !!(global.ArrayBuffer && global.DataView);
var CONSTR = ABV;
var i = 0;
var l = 9;
var Typed;

var TypedArrayConstructors = (
  'Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array'
).split(',');

while (i < l) {
  if (Typed = global[TypedArrayConstructors[i++]]) {
    hide(Typed.prototype, TYPED, true);
    hide(Typed.prototype, VIEW, true);
  } else CONSTR = false;
}

module.exports = {
  ABV: ABV,
  CONSTR: CONSTR,
  TYPED: TYPED,
  VIEW: VIEW
};


/***/ }),
/* 110 */
/***/ (function(module, exports, __webpack_require__) {

var listCacheClear = __webpack_require__(622),
    listCacheDelete = __webpack_require__(623),
    listCacheGet = __webpack_require__(624),
    listCacheHas = __webpack_require__(625),
    listCacheSet = __webpack_require__(626);

/**
 * Creates an list cache object.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function ListCache(entries) {
  var index = -1,
      length = entries == null ? 0 : entries.length;

  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

// Add methods to `ListCache`.
ListCache.prototype.clear = listCacheClear;
ListCache.prototype['delete'] = listCacheDelete;
ListCache.prototype.get = listCacheGet;
ListCache.prototype.has = listCacheHas;
ListCache.prototype.set = listCacheSet;

module.exports = ListCache;


/***/ }),
/* 111 */
/***/ (function(module, exports, __webpack_require__) {

var MapCache = __webpack_require__(159),
    setCacheAdd = __webpack_require__(638),
    setCacheHas = __webpack_require__(639);

/**
 *
 * Creates an array cache object to store unique values.
 *
 * @private
 * @constructor
 * @param {Array} [values] The values to cache.
 */
function SetCache(values) {
  var index = -1,
      length = values == null ? 0 : values.length;

  this.__data__ = new MapCache;
  while (++index < length) {
    this.add(values[index]);
  }
}

// Add methods to `SetCache`.
SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;
SetCache.prototype.has = setCacheHas;

module.exports = SetCache;


/***/ }),
/* 112 */
/***/ (function(module, exports) {

/**
 * A faster alternative to `Function#apply`, this function invokes `func`
 * with the `this` binding of `thisArg` and the arguments of `args`.
 *
 * @private
 * @param {Function} func The function to invoke.
 * @param {*} thisArg The `this` binding of `func`.
 * @param {Array} args The arguments to invoke `func` with.
 * @returns {*} Returns the result of `func`.
 */
function apply(func, thisArg, args) {
  switch (args.length) {
    case 0: return func.call(thisArg);
    case 1: return func.call(thisArg, args[0]);
    case 2: return func.call(thisArg, args[0], args[1]);
    case 3: return func.call(thisArg, args[0], args[1], args[2]);
  }
  return func.apply(thisArg, args);
}

module.exports = apply;


/***/ }),
/* 113 */
/***/ (function(module, exports, __webpack_require__) {

var eq = __webpack_require__(70);

/**
 * Gets the index at which the `key` is found in `array` of key-value pairs.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {*} key The key to search for.
 * @returns {number} Returns the index of the matched value, else `-1`.
 */
function assocIndexOf(array, key) {
  var length = array.length;
  while (length--) {
    if (eq(array[length][0], key)) {
      return length;
    }
  }
  return -1;
}

module.exports = assocIndexOf;


/***/ }),
/* 114 */
/***/ (function(module, exports, __webpack_require__) {

var defineProperty = __webpack_require__(248);

/**
 * The base implementation of `assignValue` and `assignMergeValue` without
 * value checks.
 *
 * @private
 * @param {Object} object The object to modify.
 * @param {string} key The key of the property to assign.
 * @param {*} value The value to assign.
 */
function baseAssignValue(object, key, value) {
  if (key == '__proto__' && defineProperty) {
    defineProperty(object, key, {
      'configurable': true,
      'enumerable': true,
      'value': value,
      'writable': true
    });
  } else {
    object[key] = value;
  }
}

module.exports = baseAssignValue;


/***/ }),
/* 115 */
/***/ (function(module, exports) {

/**
 * The base implementation of `_.findIndex` and `_.findLastIndex` without
 * support for iteratee shorthands.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {Function} predicate The function invoked per iteration.
 * @param {number} fromIndex The index to search from.
 * @param {boolean} [fromRight] Specify iterating from right to left.
 * @returns {number} Returns the index of the matched value, else `-1`.
 */
function baseFindIndex(array, predicate, fromIndex, fromRight) {
  var length = array.length,
      index = fromIndex + (fromRight ? 1 : -1);

  while ((fromRight ? index-- : ++index < length)) {
    if (predicate(array[index], index, array)) {
      return index;
    }
  }
  return -1;
}

module.exports = baseFindIndex;


/***/ }),
/* 116 */
/***/ (function(module, exports, __webpack_require__) {

var baseFindIndex = __webpack_require__(115),
    baseIsNaN = __webpack_require__(233),
    strictIndexOf = __webpack_require__(646);

/**
 * The base implementation of `_.indexOf` without `fromIndex` bounds checks.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {*} value The value to search for.
 * @param {number} fromIndex The index to search from.
 * @returns {number} Returns the index of the matched value, else `-1`.
 */
function baseIndexOf(array, value, fromIndex) {
  return value === value
    ? strictIndexOf(array, value, fromIndex)
    : baseFindIndex(array, baseIsNaN, fromIndex);
}

module.exports = baseIndexOf;


/***/ }),
/* 117 */
/***/ (function(module, exports, __webpack_require__) {

var baseSortedIndexBy = __webpack_require__(168),
    identity = __webpack_require__(79),
    isSymbol = __webpack_require__(72);

/** Used as references for the maximum length and index of an array. */
var MAX_ARRAY_LENGTH = 4294967295,
    HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;

/**
 * The base implementation of `_.sortedIndex` and `_.sortedLastIndex` which
 * performs a binary search of `array` to determine the index at which `value`
 * should be inserted into `array` in order to maintain its sort order.
 *
 * @private
 * @param {Array} array The sorted array to inspect.
 * @param {*} value The value to evaluate.
 * @param {boolean} [retHighest] Specify returning the highest qualified index.
 * @returns {number} Returns the index at which `value` should be inserted
 *  into `array`.
 */
function baseSortedIndex(array, value, retHighest) {
  var low = 0,
      high = array == null ? low : array.length;

  if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {
    while (low < high) {
      var mid = (low + high) >>> 1,
          computed = array[mid];

      if (computed !== null && !isSymbol(computed) &&
          (retHighest ? (computed <= value) : (computed < value))) {
        low = mid + 1;
      } else {
        high = mid;
      }
    }
    return high;
  }
  return baseSortedIndexBy(array, value, identity, retHighest);
}

module.exports = baseSortedIndex;


/***/ }),
/* 118 */
/***/ (function(module, exports, __webpack_require__) {

var baseSlice = __webpack_require__(43);

/**
 * The base implementation of methods like `_.dropWhile` and `_.takeWhile`
 * without support for iteratee shorthands.
 *
 * @private
 * @param {Array} array The array to query.
 * @param {Function} predicate The function invoked per iteration.
 * @param {boolean} [isDrop] Specify dropping elements instead of taking them.
 * @param {boolean} [fromRight] Specify iterating from right to left.
 * @returns {Array} Returns the slice of `array`.
 */
function baseWhile(array, predicate, isDrop, fromRight) {
  var length = array.length,
      index = fromRight ? length : -1;

  while ((fromRight ? index-- : ++index < length) &&
    predicate(array[index], index, array)) {}

  return isDrop
    ? baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 : length))
    : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ? length : index));
}

module.exports = baseWhile;


/***/ }),
/* 119 */
/***/ (function(module, exports) {

/**
 * Checks if a `cache` value for `key` exists.
 *
 * @private
 * @param {Object} cache The cache to query.
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function cacheHas(cache, key) {
  return cache.has(key);
}

module.exports = cacheHas;


/***/ }),
/* 120 */
/***/ (function(module, exports) {

/**
 * Copies the values of `source` to `array`.
 *
 * @private
 * @param {Array} source The array to copy values from.
 * @param {Array} [array=[]] The array to copy values to.
 * @returns {Array} Returns `array`.
 */
function copyArray(source, array) {
  var index = -1,
      length = source.length;

  array || (array = Array(length));
  while (++index < length) {
    array[index] = source[index];
  }
  return array;
}

module.exports = copyArray;


/***/ }),
/* 121 */
/***/ (function(module, exports, __webpack_require__) {

var arrayAggregator = __webpack_require__(559),
    baseAggregator = __webpack_require__(569),
    baseIteratee = __webpack_require__(8),
    isArray = __webpack_require__(10);

/**
 * Creates a function like `_.groupBy`.
 *
 * @private
 * @param {Function} setter The function to set accumulator values.
 * @param {Function} [initializer] The accumulator object initializer.
 * @returns {Function} Returns the new aggregator function.
 */
function createAggregator(setter, initializer) {
  return function(collection, iteratee) {
    var func = isArray(collection) ? arrayAggregator : baseAggregator,
        accumulator = initializer ? initializer() : {};

    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);
  };
}

module.exports = createAggregator;


/***/ }),
/* 122 */
/***/ (function(module, exports, __webpack_require__) {

var isKeyable = __webpack_require__(619);

/**
 * Gets the data for `map`.
 *
 * @private
 * @param {Object} map The map to query.
 * @param {string} key The reference key.
 * @returns {*} Returns the map data.
 */
function getMapData(map, key) {
  var data = map.__data__;
  return isKeyable(key)
    ? data[typeof key == 'string' ? 'string' : 'hash']
    : data.map;
}

module.exports = getMapData;


/***/ }),
/* 123 */
/***/ (function(module, exports, __webpack_require__) {

var getNative = __webpack_require__(66);

/* Built-in method references that are verified to be native. */
var nativeCreate = getNative(Object, 'create');

module.exports = nativeCreate;


/***/ }),
/* 124 */
/***/ (function(module, exports, __webpack_require__) {

var baseRandom = __webpack_require__(238);

/**
 * A specialized version of `_.shuffle` which mutates and sets the size of `array`.
 *
 * @private
 * @param {Array} array The array to shuffle.
 * @param {number} [size=array.length] The size of `array`.
 * @returns {Array} Returns `array`.
 */
function shuffleSelf(array, size) {
  var index = -1,
      length = array.length,
      lastIndex = length - 1;

  size = size === undefined ? length : size;
  while (++index < size) {
    var rand = baseRandom(index, lastIndex),
        value = array[rand];

    array[rand] = array[index];
    array[index] = value;
  }
  array.length = size;
  return array;
}

module.exports = shuffleSelf;


/***/ }),
/* 125 */
/***/ (function(module, exports, __webpack_require__) {

var arrayMap = __webpack_require__(27),
    baseIteratee = __webpack_require__(8),
    baseMap = __webpack_require__(235),
    isArray = __webpack_require__(10);

/**
 * Creates an array of values by running each element in `collection` thru
 * `iteratee`. The iteratee is invoked with three arguments:
 * (value, index|key, collection).
 *
 * Many lodash methods are guarded to work as iteratees for methods like
 * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.
 *
 * The guarded methods are:
 * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,
 * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,
 * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,
 * `template`, `trim`, `trimEnd`, `trimStart`, and `words`
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} [iteratee=_.identity] The function invoked per iteration.
 * @returns {Array} Returns the new mapped array.
 * @example
 *
 * function square(n) {
 *   return n * n;
 * }
 *
 * _.map([4, 8], square);
 * // => [16, 64]
 *
 * _.map({ 'a': 4, 'b': 8 }, square);
 * // => [16, 64] (iteration order is not guaranteed)
 *
 * var users = [
 *   { 'user': 'barney' },
 *   { 'user': 'fred' }
 * ];
 *
 * // The `_.property` iteratee shorthand.
 * _.map(users, 'user');
 * // => ['barney', 'fred']
 */
function map(collection, iteratee) {
  var func = isArray(collection) ? arrayMap : baseMap;
  return func(collection, baseIteratee(iteratee, 3));
}

module.exports = map;


/***/ }),
/* 126 */
/***/ (function(module, exports, __webpack_require__) {

var baseValues = __webpack_require__(599),
    keys = __webpack_require__(81);

/**
 * Creates an array of the own enumerable string keyed property values of `object`.
 *
 * **Note:** Non-object values are coerced to objects.
 *
 * @static
 * @since 0.1.0
 * @memberOf _
 * @category Object
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property values.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.values(new Foo);
 * // => [1, 2] (iteration order is not guaranteed)
 *
 * _.values('hi');
 * // => ['h', 'i']
 */
function values(object) {
  return object == null ? [] : baseValues(object, keys(object));
}

module.exports = values;


/***/ }),
/* 127 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.G4UMap = undefined;

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _stripJsonComments = __webpack_require__(177);

var _stripJsonComments2 = _interopRequireDefault(_stripJsonComments);

var _MapConfigurator = __webpack_require__(286);

__webpack_require__(317);

var _L10N = __webpack_require__(277);

var _utilitiesObject = __webpack_require__(36);

var _globals = __webpack_require__(11);

var _defaultconfig = __webpack_require__(305);

var _Debug = __webpack_require__(15);

__webpack_require__(534);

var _moduleRegistration = __webpack_require__(188);

var _PopupModifierManager = __webpack_require__(280);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {object} G4UMapOptions
 * @property {L10N} [localiser]
 * @property {object.<string, PopupModifier>} [popupModifiers]
 */

/**
 * Definition of the map-object
 * Main task of the constructor is to load and read out the configuration.
 * Uses the functions makeMapLayers, makeMapUI to create the map.
 *
 * Custom properties accessible via method .get('propertyName')
 *
 * @fires 'resize'
 * @fires 'userActionTracking'
 * @fires 'beforeConfigLoad'
 * @fires 'afterConfigLoad'
 * @fires 'afterConfiguring'
 * @fires 'change:ready'
 * @fires 'change:ready:ui'
 * @fires 'change:ready:layers'
 */
var G4UMap = exports.G4UMap = function (_ol$Map) {
  _inherits(G4UMap, _ol$Map);

  /**
   * @param {HTMLElement|jQuery|string} target element or id of an element
   * @param {MapConfig|string} configOrFileName
   * @param {LayerConfig|string} layerConfigOrFileName
   * @param {G4UMapOptions} [options={}]
   */
  function G4UMap(target, configOrFileName, layerConfigOrFileName) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

    _classCallCheck(this, G4UMap);

    var config = {};
    var layerConfig = {};

    // //////////////////////////////////////////////////////////////////////////////////////// //
    //                     Call of the Parents Class Constructor                                //
    // //////////////////////////////////////////////////////////////////////////////////////// //

    var _this = _possibleConstructorReturn(this, (G4UMap.__proto__ || Object.getPrototypeOf(G4UMap)).call(this, {
      controls: [],
      interactions: [],
      view: null
    }));

    _this.set('guide4youVersion', 'v2.5.0'); // eslint-disable-line

    /**
     * @type {Map.<string, ol.interaction.Interaction[]>}
     * @private
     */
    _this.defaultInteractions_ = new Map();

    /**
     * @type {Map.<string, ol.interaction.Interaction[]>}
     * @private
     */
    _this.supersedingInteractions_ = new Map();

    /**
     * @type {Module[]}
     * @private
     */
    _this.modules_ = [];

    _this.addModules((0, _moduleRegistration.getRegisteredModules)());

    _this.set('ready', false);

    _this.on(['change:ready', 'change:ready:ui', 'change:ready:layers'], /** ol.ObjectEvent */function (e) {
      if (_this.get(e.key)) {
        _this.dispatchEvent(e.key);
      }
    });

    // popupModifiers

    var popupModifiers = new _PopupModifierManager.PopupModifierManager();
    _this.set('popupModifiers', popupModifiers);

    if (options.popupModifiers) {
      _this.on('change:featurePopup', function () {
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = Object.keys(options.popupModifiers)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var name = _step.value;

            var popupModifier = options.popupModifiers[name];
            popupModifier.setMap(_this);
            popupModifiers.register(name, popupModifier);
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator.return) {
              _iterator.return();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      });
    }

    // Setting the target of the map

    if (typeof target === 'string' && target[0] !== '#') {
      _this.setTarget((0, _jquery2.default)('#' + target).get(0));
    } else {
      _this.setTarget((0, _jquery2.default)(target).get(0));
    }

    // set the display mode to desktop initially to render overviewmpa correctly
    (0, _jquery2.default)(_this.getTarget()).children().addClass(_globals.cssClasses.desktop);

    // check type of mapConfig
    if ((typeof configOrFileName === 'undefined' ? 'undefined' : _typeof(configOrFileName)) === 'object') {
      config = configOrFileName;
    } else if (typeof configOrFileName === 'string') {
      _this.set('configFileName', configOrFileName);
      _this.set('defaultLayerConfigFileName', layerConfigOrFileName);
    } else {
      throw new Error('Unrecognised type for parameter configOrFileName!');
    }

    // check type of layerConfig
    if ((typeof layerConfigOrFileName === 'undefined' ? 'undefined' : _typeof(layerConfigOrFileName)) === 'object') {
      layerConfig = layerConfigOrFileName;
    } else if (typeof layerConfigOrFileName === 'string') {
      _this.set('layerConfigFileName', layerConfigOrFileName);
    } else {
      throw new Error('Unrecognised type for parameter layerConfigOrFileName!');
    }

    // //////////////////////////////////////////////////////////////////////////////////////////
    //                            Load config files if needed                                 //
    // //////////////////////////////////////////////////////////////////////////////////////////

    _this.dispatchEvent('beforeConfigLoad');

    _this.set('mapConfigReady', false);
    _this.set('layerConfigReady', false);

    function loadConfigFile(fileName) {
      return _jquery2.default.ajax({
        url: fileName,
        dataType: 'text'
      }).then(function (data) {
        try {
          return JSON.parse((0, _stripJsonComments2.default)(data));
        } catch (err) {
          _Debug.Debug.error('The config file ' + fileName + ' couldn\'t be parsed.');
          _Debug.Debug.error(err);
        }
      }).fail(function (err) {
        _Debug.Debug.error('The config file ' + fileName + ' couldn\'t be loaded.');
        _Debug.Debug.error(err);
      });
    }

    var filesToLoad = [];

    var configFileName = _this.get('configFileName');
    if (configFileName) {
      filesToLoad.push(loadConfigFile(configFileName).then(function (data) {
        config = data;
      }));
    }

    var layerConfigFileName = _this.get('layerConfigFileName');
    if (layerConfigFileName) {
      filesToLoad.push(loadConfigFile(layerConfigFileName).then(function (data) {
        layerConfig = data;
      }));
    }

    // wait for all promises in filesToLoad to resolve
    Promise.all(filesToLoad).then(function () {
      _this.set('mapConfigReady', true);
      _this.set('layerConfigReady', true);

      // Merging the custom config with the default config
      config = (0, _utilitiesObject.mergeWithDefaults)(config, _defaultconfig.defaults.config);

      _this.set('mapConfig', config);
      _this.set('layerConfig', layerConfig);

      var loading = 0;

      // issue reload of mapConfig if the name was changed
      _this.on('change:configFileName', /** ol.ObjectEvent */function (e) {
        _this.set('ready', false);
        loading++;

        _this.oldMapConfigs_ = _this.oldMapConfigs_ || {};
        _this.oldMapConfigs_[e.oldValue] = _this.get('mapConfig');

        if (_this.oldMapConfigs_.hasOwnProperty(_this.get('configFileName'))) {
          _this.set('mapConfig', _this.oldMapConfigs_[_this.get('configFileName')]);
        } else {
          _this.set('mapConfigReady', false);
          loadConfigFile(_this.get('configFileName')).then(function (data) {
            _this.set('mapConfigReady', true);
            _this.set('mapConfig', data);
          }).always(function () {
            loading--;
            if (loading === 0) {
              _this.set('ready', true);
            }
          });
        }
      });

      // issue reload of layerConfig if the name was changed
      _this.on('change:layerConfigFileName', /** ol.ObjectEvent */function (e) {
        _this.set('ready', false);
        loading++;

        _this.oldLayerConfigs_ = _this.oldLayerConfigs_ || {};
        _this.oldLayerConfigs_[e.oldValue] = _this.get('layerConfig');

        if (_this.oldLayerConfigs_.hasOwnProperty(_this.get('layerConfigFileName'))) {
          _this.set('layerConfig', _this.oldLayerConfigs_[_this.get('layerConfigFileName')]);
        } else {
          _this.set('layerConfigReady', false);
          loadConfigFile(_this.get('layerConfigFileName')).then(function (data) {
            _this.set('layerConfigReady', true);
            _this.set('layerConfig', data);
          }).always(function () {
            loading--;
            if (loading === 0) {
              _this.set('ready', true);
            }
          });
        }
      });

      _this.set('proxy', config.proxy);

      // //////////////////////////////////////////////////////////////////////////////////////// //
      //                                     Localization                                         //
      // //////////////////////////////////////////////////////////////////////////////////////// //

      var asyncLanguageFilePromise = void 0;

      if (!options.localiser) {
        var localiserOptions = {};

        if (config.hasOwnProperty('languageSettings')) {
          var l10nconf = config.languageSettings;

          localiserOptions.currentLanguage = l10nconf.currentLanguage;

          if (l10nconf.hasOwnProperty('defaultLanguage')) {
            localiserOptions.defaultLanguage = l10nconf.defaultLanguage;
          }

          if (l10nconf.hasOwnProperty('languageFile')) {
            localiserOptions.languageFile = l10nconf.languageFile;
          }

          if (l10nconf.hasOwnProperty('availableLanguages')) {
            localiserOptions.availableLanguages = l10nconf.availableLanguages;
          }
        }

        var localiser = new _L10N.L10N(localiserOptions);
        _this.set('localiser', localiser);

        asyncLanguageFilePromise = localiser.ajaxGetLanguageFile();
      } else {
        _this.set('localiser', options.localiser);
      }

      _this.asSoonAs('ready', true, function () {
        _this.get('localiser').on('change:language', function () {
          var visibilities = _this.getLayerGroup().getIdsVisibilities();

          _this.get('configurator').configureLayers();
          _this.get('configurator').configureUI();

          _this.getLayerGroup().setIdsVisibilities(visibilities);
        });
      });

      _this.dispatchEvent('afterConfigLoad');

      return asyncLanguageFilePromise;
    }).then(function () {
      // //////////////////////////////////////////////////////////////////////////////////////// //
      //                                    Configurator                                          //
      // //////////////////////////////////////////////////////////////////////////////////////// //

      _this.set('configurator', new _MapConfigurator.MapConfigurator(_this));

      _this.dispatchEvent('afterConfiguring');

      if (_this.get('ready:ui') && _this.get('ready:layers')) {
        _this.set('ready', true);
      }

      _this.on(['change:ready:ui', 'change:ready:layers'], /** ol.ObjectEvent */function (e) {
        if (!_this.get(e.key)) {
          _this.set('ready', false);
        }

        if (_this.get('ready:ui') && _this.get('ready:layers')) {
          _this.set('ready', true);
        }
      });
    }).catch(_Debug.Debug.defaultErrorHandler);
    return _this;
  }

  /**
   * Searches all controls of the specified name
   * @param {string} name
   * @returns {Control[]}
   */


  _createClass(G4UMap, [{
    key: 'getControlsByName',
    value: function getControlsByName(name) {
      return this.controlsByName[name] || [];
    }

    /**
     * @param {Module} module
     */

  }, {
    key: 'addModule',
    value: function addModule(module) {
      module.setMap(this);
      this.modules_.push(module);
    }

    /**
     * @param {Module[]} modules
     */

  }, {
    key: 'addModules',
    value: function addModules(modules) {
      var _iteratorNormalCompletion2 = true;
      var _didIteratorError2 = false;
      var _iteratorError2 = undefined;

      try {
        for (var _iterator2 = modules[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
          var module = _step2.value;

          this.addModule(module);
        }
      } catch (err) {
        _didIteratorError2 = true;
        _iteratorError2 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion2 && _iterator2.return) {
            _iterator2.return();
          }
        } finally {
          if (_didIteratorError2) {
            throw _iteratorError2;
          }
        }
      }
    }

    /**
     * The listener is called once immediately after the next postrender event
     * @param listener
     */

  }, {
    key: 'afterPostrender',
    value: function afterPostrender(listener) {
      this.once('postrender', function () {
        return setTimeout(listener, 0);
      });
    }

    /**
     * @returns {Module[]}
     */

  }, {
    key: 'getModules',
    value: function getModules() {
      return this.modules_;
    }

    /**
     * @param {ol.interaction.Interaction} interaction
     */

  }, {
    key: 'removeInteraction',
    value: function removeInteraction(interaction) {
      var index = void 0;

      this.defaultInteractions_.forEach(function (interactions) {
        index = interactions.indexOf(interaction);
        if (index > -1) {
          interactions.splice(index, 1);
        }
      });

      this.supersedingInteractions_.forEach(function (interactions) {
        index = interactions.indexOf(interaction);
        if (index > -1) {
          interactions.splice(index, 1);
        }
      });

      _get(G4UMap.prototype.__proto__ || Object.getPrototypeOf(G4UMap.prototype), 'removeInteraction', this).call(this, interaction);
    }

    /**
     * Remove all interactions
     */

  }, {
    key: 'removeInteractions',
    value: function removeInteractions() {
      while (this.getInteractions() && this.getInteractions().getLength()) {
        var _iteratorNormalCompletion3 = true;
        var _didIteratorError3 = false;
        var _iteratorError3 = undefined;

        try {
          for (var _iterator3 = this.getInteractions().getArray()[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
            var interaction = _step3.value;

            this.removeInteraction(interaction);
          }
        } catch (err) {
          _didIteratorError3 = true;
          _iteratorError3 = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion3 && _iterator3.return) {
              _iterator3.return();
            }
          } finally {
            if (_didIteratorError3) {
              throw _iteratorError3;
            }
          }
        }
      }
    }

    /**
     * overwrite base method to notify developer about differing api
     */

  }, {
    key: 'addInteraction',
    value: function addInteraction() {
      throw new Error('Use addDefaultInteraction or addSupersedingInteraction');
    }

    /**
     * Add an interaction that should be active by default (i.e. in the normal state of the map)
     * @param {string} eventTypes a list of space separated eventtypes this interaction reacts on
     * @param {ol.interaction.Interaction} interaction
     */

  }, {
    key: 'addDefaultInteraction',
    value: function addDefaultInteraction(eventTypes, interaction) {
      var _iteratorNormalCompletion4 = true;
      var _didIteratorError4 = false;
      var _iteratorError4 = undefined;

      try {
        for (var _iterator4 = eventTypes.split(' ')[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
          var eventtype = _step4.value;

          if (this.defaultInteractions_.has(eventtype)) {
            this.defaultInteractions_.get(eventtype).push(interaction);
          } else {
            this.defaultInteractions_.set(eventtype, [interaction]);
          }
        }
      } catch (err) {
        _didIteratorError4 = true;
        _iteratorError4 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion4 && _iterator4.return) {
            _iterator4.return();
          }
        } finally {
          if (_didIteratorError4) {
            throw _iteratorError4;
          }
        }
      }

      _get(G4UMap.prototype.__proto__ || Object.getPrototypeOf(G4UMap.prototype), 'addInteraction', this).call(this, interaction);
    }

    /**
     * This deactivates all interactions which use a given event type
     * @param {string} eventType
     */

  }, {
    key: 'deactivateInteractions',
    value: function deactivateInteractions(eventType) {
      var _iteratorNormalCompletion5 = true;
      var _didIteratorError5 = false;
      var _iteratorError5 = undefined;

      try {
        for (var _iterator5 = this.defaultInteractions_.get(eventType)[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {
          var defInteraction = _step5.value;

          defInteraction.setActive(false);
        }
      } catch (err) {
        _didIteratorError5 = true;
        _iteratorError5 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion5 && _iterator5.return) {
            _iterator5.return();
          }
        } finally {
          if (_didIteratorError5) {
            throw _iteratorError5;
          }
        }
      }

      var _iteratorNormalCompletion6 = true;
      var _didIteratorError6 = false;
      var _iteratorError6 = undefined;

      try {
        for (var _iterator6 = this.supersedingInteractions_.get(eventType)[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {
          var supInteraction = _step6.value;

          supInteraction.setActive(false);
        }
      } catch (err) {
        _didIteratorError6 = true;
        _iteratorError6 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion6 && _iterator6.return) {
            _iterator6.return();
          }
        } finally {
          if (_didIteratorError6) {
            throw _iteratorError6;
          }
        }
      }
    }

    /**
     * Reactivates all default interactions which use a specified event type
     * @param {string} eventType
     */

  }, {
    key: 'activateInteractions',
    value: function activateInteractions(eventType) {
      var _iteratorNormalCompletion7 = true;
      var _didIteratorError7 = false;
      var _iteratorError7 = undefined;

      try {
        for (var _iterator7 = this.getDefaultInteractions(eventType)[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {
          var defInteraction = _step7.value;

          defInteraction.setActive(true);
        }
      } catch (err) {
        _didIteratorError7 = true;
        _iteratorError7 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion7 && _iterator7.return) {
            _iterator7.return();
          }
        } finally {
          if (_didIteratorError7) {
            throw _iteratorError7;
          }
        }
      }
    }

    /**
     * Gets all interactions which use the specified event type
     * @param {string} eventType
     * @returns {ol.interaction.Interaction[]}
     */

  }, {
    key: 'getDefaultInteractions',
    value: function getDefaultInteractions(eventType) {
      return this.defaultInteractions_.get(eventType);
    }

    /**
     * This adds an interaction to the map which prohibits other interactions which use the same eventtype to be active
     * at the same time. When the superseding interaction is activated all affected ones get deactivated and vice versa
     * @param {string} eventTypes a list of space separated eventtypes this interaction reacts on
     * @param {ol.interaction.Interaction} interaction
     */

  }, {
    key: 'addSupersedingInteraction',
    value: function addSupersedingInteraction(eventTypes, interaction) {
      var _this2 = this;

      var eventTypes_ = eventTypes.split(' ');

      var onActivation = function onActivation() {
        // deactivation of all other interactions with the same eventtypes

        var _iteratorNormalCompletion8 = true;
        var _didIteratorError8 = false;
        var _iteratorError8 = undefined;

        try {
          for (var _iterator8 = eventTypes_[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {
            var eventType = _step8.value;
            var _iteratorNormalCompletion9 = true;
            var _didIteratorError9 = false;
            var _iteratorError9 = undefined;

            try {
              for (var _iterator9 = _this2.supersedingInteractions_.get(eventType)[Symbol.iterator](), _step9; !(_iteratorNormalCompletion9 = (_step9 = _iterator9.next()).done); _iteratorNormalCompletion9 = true) {
                var supersedingInteraction = _step9.value;

                if (interaction !== supersedingInteraction) {
                  supersedingInteraction.setActive(false);
                }
              }
            } catch (err) {
              _didIteratorError9 = true;
              _iteratorError9 = err;
            } finally {
              try {
                if (!_iteratorNormalCompletion9 && _iterator9.return) {
                  _iterator9.return();
                }
              } finally {
                if (_didIteratorError9) {
                  throw _iteratorError9;
                }
              }
            }

            if (_this2.defaultInteractions_.get(eventType)) {
              var _iteratorNormalCompletion10 = true;
              var _didIteratorError10 = false;
              var _iteratorError10 = undefined;

              try {
                for (var _iterator10 = _this2.defaultInteractions_.get(eventType)[Symbol.iterator](), _step10; !(_iteratorNormalCompletion10 = (_step10 = _iterator10.next()).done); _iteratorNormalCompletion10 = true) {
                  var defaultInteraction = _step10.value;

                  defaultInteraction.setActive(false);
                }
              } catch (err) {
                _didIteratorError10 = true;
                _iteratorError10 = err;
              } finally {
                try {
                  if (!_iteratorNormalCompletion10 && _iterator10.return) {
                    _iterator10.return();
                  }
                } finally {
                  if (_didIteratorError10) {
                    throw _iteratorError10;
                  }
                }
              }
            }
          }
        } catch (err) {
          _didIteratorError8 = true;
          _iteratorError8 = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion8 && _iterator8.return) {
              _iterator8.return();
            }
          } finally {
            if (_didIteratorError8) {
              throw _iteratorError8;
            }
          }
        }
      };

      var onDeactivation = function onDeactivation() {
        // reactivation of the default interactions
        // NOTE: if a superseding turned off another superseding interactions it won't reactivate it
        var _iteratorNormalCompletion11 = true;
        var _didIteratorError11 = false;
        var _iteratorError11 = undefined;

        try {
          for (var _iterator11 = eventTypes_[Symbol.iterator](), _step11; !(_iteratorNormalCompletion11 = (_step11 = _iterator11.next()).done); _iteratorNormalCompletion11 = true) {
            var eventType = _step11.value;

            if (_this2.defaultInteractions_.get(eventType)) {
              var _iteratorNormalCompletion12 = true;
              var _didIteratorError12 = false;
              var _iteratorError12 = undefined;

              try {
                for (var _iterator12 = _this2.defaultInteractions_.get(eventType)[Symbol.iterator](), _step12; !(_iteratorNormalCompletion12 = (_step12 = _iterator12.next()).done); _iteratorNormalCompletion12 = true) {
                  var defaultInteraction = _step12.value;

                  defaultInteraction.setActive(true);
                }
              } catch (err) {
                _didIteratorError12 = true;
                _iteratorError12 = err;
              } finally {
                try {
                  if (!_iteratorNormalCompletion12 && _iterator12.return) {
                    _iterator12.return();
                  }
                } finally {
                  if (_didIteratorError12) {
                    throw _iteratorError12;
                  }
                }
              }
            }
          }
        } catch (err) {
          _didIteratorError11 = true;
          _iteratorError11 = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion11 && _iterator11.return) {
              _iterator11.return();
            }
          } finally {
            if (_didIteratorError11) {
              throw _iteratorError11;
            }
          }
        }
      };

      var _iteratorNormalCompletion13 = true;
      var _didIteratorError13 = false;
      var _iteratorError13 = undefined;

      try {
        for (var _iterator13 = eventTypes_[Symbol.iterator](), _step13; !(_iteratorNormalCompletion13 = (_step13 = _iterator13.next()).done); _iteratorNormalCompletion13 = true) {
          var eventType = _step13.value;

          if (this.supersedingInteractions_.has(eventType)) {
            this.supersedingInteractions_.get(eventType).push(interaction);
          } else {
            this.supersedingInteractions_.set(eventType, [interaction]);
          }
        }
      } catch (err) {
        _didIteratorError13 = true;
        _iteratorError13 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion13 && _iterator13.return) {
            _iterator13.return();
          }
        } finally {
          if (_didIteratorError13) {
            throw _iteratorError13;
          }
        }
      }

      if (interaction.getActive()) {
        onActivation();
      }

      interaction.on('change:active', /** ol.ObjectEvent */function (e) {
        if (e.oldValue !== interaction.getActive()) {
          if (interaction.getActive()) {
            _this2.activating_ = true;
            onActivation();
            _this2.activating_ = false;
          } else {
            if (_this2.interactionDecativationTimeout_) {
              clearTimeout(_this2.interactionDecativationTimeout_);
            }

            if (!_this2.activating_) {
              _this2.interactionDecativationTimeout_ = setTimeout(onDeactivation, 500);
            }
          }
        }
      });

      _get(G4UMap.prototype.__proto__ || Object.getPrototypeOf(G4UMap.prototype), 'addInteraction', this).call(this, interaction);
    }

    /**
     * @param {GroupLayer} groupLayer
     */

  }, {
    key: 'setLayerGroup',
    value: function setLayerGroup(groupLayer) {
      groupLayer.provideMap(this);
      _get(G4UMap.prototype.__proto__ || Object.getPrototypeOf(G4UMap.prototype), 'setLayerGroup', this).call(this, groupLayer);
    }

    /**
     * Remove all controls
     */

  }, {
    key: 'removeControls',
    value: function removeControls() {
      var _this3 = this;

      var controls = this.getControls();

      if (controls) {
        // its neccessary to loop, problem caused by the nesting?
        while (controls.getLength() > 0) {
          controls.forEach(function (control) {
            return _this3.removeControl(control);
          });
          controls = this.getControls();
        }
      }
    }
  }]);

  return G4UMap;
}(_openlayers2.default.Map);

/***/ }),
/* 128 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ComposedControl = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _Window = __webpack_require__(93);

var _Control2 = __webpack_require__(21);

var _globals = __webpack_require__(11);

__webpack_require__(543);

__webpack_require__(530);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {g4uControlOptions} ComposedControlOptions
 * @property {string} [containerClassName]
 */

/**
 * This is a class ComposedControl which provides some functionality for controls which are composed out of several
 * other controls. It makes use of the composite pattern.
 */

var ComposedControl = exports.ComposedControl = function (_Control) {
  _inherits(ComposedControl, _Control);

  /**
   * @param {ComposedControlOptions} [options={}]
   */
  function ComposedControl() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, ComposedControl);

    var $container = (0, _jquery2.default)('<div>');

    if (options.hasOwnProperty('element')) {
      (0, _jquery2.default)(options.element).append($container);
    } else {
      options.element = $container.get(0);
    }

    options.singleButton = false;

    /**
     * @type {Control[]}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (ComposedControl.__proto__ || Object.getPrototypeOf(ComposedControl)).call(this, options));

    _this.controls_ = [];

    /**
     * @type {jQuery}
     * @private
     */
    _this.$container_ = $container;

    if (options.hasOwnProperty('containerClassName')) {
      _this.$container_.addClass(options.containerClassName);
    }

    /**
     * @type {string}
     * @private
     */
    _this.classNameItem_ = _this.getClassName() + '-item';
    /**
     * @type {string}
     * @private
     */
    _this.classNameItemFirst_ = _this.classNameItem_ + '-first';
    /**
     * @type {string}
     * @private
     */
    _this.classNameItemLast_ = _this.classNameItem_ + '-last';
    return _this;
  }

  /**
   * @returns {Control[]}
   */


  _createClass(ComposedControl, [{
    key: 'getControls',
    value: function getControls() {
      return this.controls_;
    }

    /**
     * @returns {jQuery}
     */

  }, {
    key: 'get$Container',
    value: function get$Container() {
      return this.$container_;
    }

    /**
     * @param {Control} control
     * @private
     */

  }, {
    key: 'setWindowForControl_',
    value: function setWindowForControl_(control) {
      var aWindow = new _Window.Window({ $context: (0, _jquery2.default)(this.getMap().getViewport()) });
      control.setWindow(aWindow, true);
    }

    /**
     * This method adds some helping css classes to the items
     * @param {jQuery} $item
     * @returns {jQuery}
     * @private
     */

  }, {
    key: 'addClasses_',
    value: function addClasses_($item) {
      $item.addClass(this.classNameItemLast_);

      if (this.$container_.children().length === 0) {
        $item.addClass(this.classNameItemFirst_);
      } else {
        this.$container_.children(':last-child').removeClass(this.classNameItemLast_);
      }

      return $item;
    }

    /**
     *
     * @param {Control} control
     * @param {Object} options
     * @param {Boolean} [options.claim=true] if claim is set to false the control won't add anything to the container
     * @param {Boolean} [options.wrap=true] if wrap is set to true a span will be put arround the element
     *    if set to false the element of the control will be inserted directly
     * @param {Boolean} [options.cssPosition=true] if this is set to true the wrap or the element will get css classes
     *    indicating its position inside the container
     * @param {HTMLElement} [options.element] if this is set it will be put inside the container instead calling
     *    control.set$Target()
     */

  }, {
    key: 'addControl',
    value: function addControl(control) {
      var _this2 = this;

      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      var map = this.getMap();
      if (map) {
        map.addControl(control);
      } else {
        throw new Error('composed controls needs to be added to the map before they can get any controls');
      }

      if (control.setWindow) {
        this.setWindowForControl_(control);
      }

      if (!options.hasOwnProperty('claim') || !options.claim) {
        if (!options.hasOwnProperty('wrap') || options.wrap) {
          var $wrap = (0, _jquery2.default)('<div>');

          if (options.hasOwnProperty('element')) {
            $wrap.append((0, _jquery2.default)(options.element));
          } else {
            control.set$Target($wrap);
          }

          $wrap.addClass(this.classNameItem_);

          if (!options.hasOwnProperty('cssPosition') || options.cssPosition) {
            this.addClasses_($wrap);
          }

          if (!control.getVisible()) {
            $wrap.addClass(_globals.cssClasses.hidden);
          }

          control.on('change:visible', function () {
            $wrap.toggleClass(_globals.cssClasses.hidden, !control.getVisible());
          });

          this.$container_.append($wrap);
        } else {
          (0, _jquery2.default)(options.element).addClass(this.classNameItem_);

          if (!options.hasOwnProperty('cssPosition') || options.cssPosition) {
            this.addClasses_((0, _jquery2.default)(options.element));
          }

          if (options.hasOwnProperty('element')) {
            this.$container_.append((0, _jquery2.default)(options.element));
          } else {
            control.set$Target(this.$container_);
          }
        }
      }

      control.on('change:visible', function () {
        return _this2.updateVisibility();
      });
      control.on('change', function (e) {
        return _this2.dispatchEvent(e);
      });
      control.on('change:size', function (e) {
        return _this2.dispatchEvent(e);
      });

      this.controls_.push(control);

      this.changed();
      this.updateVisibility();
    }

    /**
     * @param {Control} control
     */

  }, {
    key: 'removeControl',
    value: function removeControl(control) {
      if (control.get$Element().hasClass(this.classNameItem_)) {
        control.get$Element().remove();
      } else if (control.get$Element().parent().hasClass(this.classNameItem_)) {
        control.get$Element().parent().remove();
      }

      this.controls_.splice(this.controls_.indexOf(control), 1);
      this.getMap().removeControl(control);

      this.changed();
    }

    /**
     * @param {G4UMap} map
     */

  }, {
    key: 'setMap',
    value: function setMap(map) {
      var _this3 = this;

      if (this.getMap()) {
        this.controls_.forEach(function (control) {
          _this3.getMap().removeControl(control);
        });

        this.controls_ = [];
      }

      _get(ComposedControl.prototype.__proto__ || Object.getPrototypeOf(ComposedControl.prototype), 'setMap', this).call(this, map);
    }
  }, {
    key: 'updateVisibility',
    value: function updateVisibility() {
      this.setVisible(this.controls_.some(function (c) {
        return c.getVisible();
      }));
    }
  }]);

  return ComposedControl;
}(_Control2.Control);

/***/ }),
/* 129 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.BaseLayerMixin = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GroupLayer = __webpack_require__(73);

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * @typedef {object} BaseLayerMixinOptions
 * @property {GroupLayer} groupLayer the group this baseLayer belongs to
 */

/**
 * This mixin provides baselayer functionality to any layer
 */
var BaseLayerMixin = exports.BaseLayerMixin = function () {
  function BaseLayerMixin() {
    _classCallCheck(this, BaseLayerMixin);
  }

  _createClass(BaseLayerMixin, [{
    key: 'initialize',

    /**
     * @param {BaseLayerMixinOptions} options
     */
    value: function initialize(options) {
      /**
       * @type {GroupLayer}
       * @private
       */
      this.groupLayer_ = options.groupLayer;

      this.on('change:available', this.onChangeAvailable.bind(this));
      this.on('change:visible', this.onChangeVisible.bind(this));

      this.isBaseLayer = true;
    }

    /**
     * This method sets the next available layer visible if this layer gets unavailable and was the visible baselayer
     */

  }, {
    key: 'onChangeAvailable',
    value: function onChangeAvailable() {
      if (!this.get('available') && this.getVisible()) {
        this.groupLayer_.recursiveForEach(function (layer) {
          if (!(layer instanceof _GroupLayer.GroupLayer) && layer.get('available')) {
            layer.setVisible(true);
          }
        });
      }
    }

    /**
     * This method sets all other baselayers not visible if set true.
     */

  }, {
    key: 'onChangeVisible',
    value: function onChangeVisible() {
      var _this = this;

      if (this.getVisible()) {
        this.groupLayer_.recursiveForEach(function (layer) {
          if (!(layer instanceof _GroupLayer.GroupLayer) && layer !== _this) {
            layer.setVisible(false);
          }
        });
      } else {
        var found = false;
        this.groupLayer_.recursiveForEach(function (layer) {
          if (!(layer instanceof _GroupLayer.GroupLayer) && layer.getVisible()) {
            found = true;
          }
        });

        if (!found) {
          this.setVisible(true);
        }
      }
    }
  }]);

  return BaseLayerMixin;
}();

/***/ }),
/* 130 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * A mixin to keep track the amount of load processes a source is currently waiting for
 */

var LayerLoadProcessCountMixin = exports.LayerLoadProcessCountMixin = function () {
  function LayerLoadProcessCountMixin() {
    _classCallCheck(this, LayerLoadProcessCountMixin);
  }

  _createClass(LayerLoadProcessCountMixin, [{
    key: 'initialize',
    value: function initialize() {
      var _this = this;

      this.debounceLoadComplete_ = 40;

      this.isLoading_ = false;

      /**
       * @type {number}
       * @private
       */
      this.loadProcessCount_ = 0;

      if (this.getSource()) {
        this.registerCounters_();
      }

      this.on('change:source', function () {
        return _this.registerCounters_();
      });
    }
  }, {
    key: 'registerCounters_',
    value: function registerCounters_() {
      var _this2 = this;

      var loadingPrecise = false;

      this.getSource().on(['vectorloadstart', 'tileloadstart', 'imageloadstart'], function () {
        _this2.loadProcessCount_ += 1;
        if (!_this2.isLoading_) {
          _this2.isLoading_ = true;
          _this2.dispatchEvent('loadcountstart');
        }
        loadingPrecise = true;
      });

      this.getSource().on(['vectorloadend', 'vectorloaderror', 'tileloadend', 'tileloaderror', 'imageloadend', 'imageloaderror'], function () {
        _this2.loadProcessCount_ -= 1;
        if (_this2.loadProcessCount_ === 0) {
          loadingPrecise = false;
          _this2.getProvidedMap().afterPostrender(function () {
            if (!loadingPrecise) {
              _this2.isLoading_ = false;
              _this2.dispatchEvent('loadcountend');
            }
          });
        }
      });
    }
  }, {
    key: 'isLoading',
    value: function isLoading() {
      return this.isLoading_;
    }
  }]);

  return LayerLoadProcessCountMixin;
}();

/***/ }),
/* 131 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SourceServerVector = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _utilitiesObject = __webpack_require__(36);

var _Debug = __webpack_require__(15);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {olx.source.VectorOptions} SourceServerVectorOptions
 * @property {string} type the format to use
 * @property {URLLike} url
 * @property {StyleLike} [defaultStyle] a default style to fallback to
 * @property {boolean} [extractStyles=true] if styles should get extracted from the KML
 * @property {string} [loadingStrategy='ALL'] Either 'BBOX' or 'ALL' (Synonym: 'FIXED').
 *    If BBOX the given url has to contain the parameters {bboxleft}, {bboxbottom}, {bboxright}, {bboxtop}.
 * @property {number} [bboxRatio=1] If set the bbox loading strategy will increase the load extent by this factor
 * @property {ol.ProjectionLike} [bboxProjection] coordinates will be inserted into the url in this format. defaults to
 *    the interfaceProjection
 * @property {boolean} [cache=] true, false for dataType 'script' and 'jsonp'
 * @property {number} [refresh] if set the layer will refresh itself in the specified time (in ms)
 * @property {L10N} localiser
 * @property {boolean} localised
 * @property {Styling} styling
 */

/**
 * A custom Source class handling Vector Sources.
 *
 * Let you set the loading loadingStrategy, if a proxy is used and you should specify in which format it comes in.
 *
 * **IMPORTANT:** You can't set the projection of the source! This is **always** determined by the data received. If you
 * set projection here you force the source to assume that this is the projection of the view.
 *
 * This class defines a custom loader function which makes it possible to use different loading strategies.
 */
var SourceServerVector = exports.SourceServerVector = function (_ol$source$Vector) {
  _inherits(SourceServerVector, _ol$source$Vector);

  /**
   * @param {SourceServerVectorOptions} [options={}]
   */
  function SourceServerVector() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, SourceServerVector);

    var parentOptions = (0, _utilitiesObject.copy)(options);

    var urlTemplate = (0, _utilitiesObject.take)(options, 'url');

    var type = (0, _utilitiesObject.take)(options, 'type') || '';

    parentOptions.loader = function () {
      return _this.loader.apply(_this, arguments);
    };

    var loadingStrategy = options.loadingStrategy || 'ALL';

    if (loadingStrategy === 'BBOX') {
      var bboxRatio = options.bboxRatio || 1;

      if (bboxRatio < 1) {
        throw new Error('The bboxRatio should not be smaller than 1');
      }

      var lastScaledExtent = [0, 0, 0, 0];

      parentOptions.strategy = function (extent) {
        if (_openlayers2.default.extent.containsExtent(lastScaledExtent, extent)) {
          return [extent];
        } else {
          var deltaX = (extent[2] - extent[0]) / 2 * (bboxRatio - 1);
          var deltaY = (extent[3] - extent[1]) / 2 * (bboxRatio - 1);

          lastScaledExtent = [extent[0] - deltaX, extent[1] - deltaY, extent[2] + deltaX, extent[3] + deltaY];

          return [lastScaledExtent];
        }
      };
    } else {
      parentOptions.strategy = _openlayers2.default.loadingstrategy.all;
    }

    /**
     * @type {L10N}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (SourceServerVector.__proto__ || Object.getPrototypeOf(SourceServerVector)).call(this, parentOptions));

    _this.localiser_ = options.localiser;

    _this.localised_ = options.localised || false;

    /**
     * @type {string}
     * @private
     */
    _this.loadingStrategy_ = loadingStrategy;

    /**
     * @type {URL}
     * @protected
     */
    _this.urlTemplate = urlTemplate;

    /**
     * @type {string}
     * @private
     */
    _this.type_ = type;

    var formatOptions = {};

    if (options.hasOwnProperty('defaultStyle')) {
      formatOptions.defaultStyle = options.defaultStyle;
    }

    if (options.hasOwnProperty('extractStyles')) {
      formatOptions.extractStyles = options.extractStyles;
    }

    switch (_this.type_) {
      case 'KML':
        formatOptions.showPointNames = false;
        _this.format_ = new _openlayers2.default.format.KML(formatOptions);
        _this.dataType_ = 'text xml'; // for $.ajax (GET-request)
        break;
      case 'GeoJSON':
        _this.format_ = new _openlayers2.default.format.GeoJSON(formatOptions);
        _this.dataType_ = 'text json'; // for $.ajax (GET-request)
        break;
      default:
        throw new Error(_this.type_ + ' is not supported by SourceServerVector!');
    }

    /**
     * @type {number}
     * @private
     */
    _this.refresh_ = 0;

    if (options.hasOwnProperty('refresh')) {
      _this.setRefresh(options.refresh);
    }

    _this.refreshTimeoutId_ = null;

    /**
     * indicates if the source needs to be emptied
     * @type {boolean}
     * @private
     */
    _this.doClear_ = false;

    /**
     * @type {ol.ProjectionLike}
     * @private
     */
    _this.bboxProjection_ = options.bboxProjection;
    return _this;
  }

  /**
   * This method returns a promise which is triggered after the loader successfully loaded a source.
   * @param {ol.Extent} extent
   * @param {number} resolution
   * @param {ol.ProjectionLike} projection
   */


  _createClass(SourceServerVector, [{
    key: 'loader',
    value: function loader(extent, resolution, projection) {
      var _this2 = this;

      // Problem with BBOX: if features are already in the layer, they shouldn't be added. Not trivial

      var url = this.urlTemplate.clone();

      if (this.loadingStrategy_ === 'BBOX') {
        var transformedExtent = _openlayers2.default.proj.transformExtent(extent, projection, this.bboxProjection_);

        url.expandTemplate('bboxleft', transformedExtent[0].toString()).expandTemplate('bboxbottom', transformedExtent[1].toString()).expandTemplate('bboxright', transformedExtent[2].toString()).expandTemplate('bboxtop', transformedExtent[3].toString()).expandTemplate('resolution', resolution.toString(), false);
      }

      if (this.refresh_) {
        if (this.refreshTimeoutId_) {
          clearTimeout(this.refreshTimeoutId_);
        }
        this.refreshTimeoutId_ = setTimeout(function () {
          _this2.doClear_ = true; // clears the source
          _this2.loader(extent, resolution, projection); // calls the loader recursively
        }, this.refresh_);
      }

      if (this.localised_) {
        url.cache = false;
      }

      var finalUrl = url.finalize();

      _jquery2.default.ajax({
        url: finalUrl,
        dataType: this.dataType_,
        beforeSend: function beforeSend() {
          return _this2.dispatchEvent('vectorloadstart');
        },
        success: function success(response) {
          // processing urls in the xml-Data (e.g. for images)
          if (url.useProxy && /xml$/.test(_this2.dataType_)) {
            response = _this2.addProxyToHrefTags(response);
          }

          if (_this2.doClear_) {
            _this2.clear();
            _this2.doClear_ = false;
          }

          var features = _this2.format_.readFeatures(response, { featureProjection: projection });

          _this2.addFeatures(features);

          _this2.dispatchEvent('vectorloadend');
        },
        error: function error() {
          _Debug.Debug.error('Getting Feature resource failed with url ' + finalUrl);
          _this2.dispatchEvent('vectorloaderror');
        },
        headers: this.localiser_ ? {
          'Accept-Language': this.localiser_.getCurrentLang()
        } : {}
      });
    }

    /**
     * This sets the refresh rate. A value of 0 or smaller turns refresh off.
     * @param {number} refresh
     */

  }, {
    key: 'setRefresh',
    value: function setRefresh(refresh) {
      this.refresh_ = refresh > 0 ? refresh : 0;
    }

    /**
     * makes all urls in href-tags inside of a xmlDocument use the proxy address.
     * this function needs to extended with all Tags which could contain urls
     * @param {HTMLElement} text an xml-Document
     * @returns {HTMLElement} the xmlDocument
     */

  }, {
    key: 'addProxyToHrefTags',
    value: function addProxyToHrefTags(text) {
      var hrefTags = text.getElementsByTagName('href'); // not working in IE11

      var i = void 0,
          ii = void 0;
      for (i = 0, ii = hrefTags.length; i < ii; i++) {
        if (hrefTags[i].textContent) {
          hrefTags[i].textContent = this.urlTemplate.useProxyFor(hrefTags[i].textContent.trim()).finalize();
        } else if (hrefTags[i].innerHTML) {
          hrefTags[i].innerHTML = this.urlTemplate.useProxyFor(hrefTags[i].innerHTML.trim()).finalize();
        } else {
          throw new Error("Can't prepend proxy inside KML (textContent and innerHTML missing)");
        }
      }

      return text;
    }

    /**
     * @returns {URL}
     */

  }, {
    key: 'getUrlTemplate',
    value: function getUrlTemplate() {
      return this.urlTemplate;
    }

    /**
     * @param {URL} urlTemplate
     */

  }, {
    key: 'setUrlTemplate',
    value: function setUrlTemplate(urlTemplate) {
      this.urlTemplate = urlTemplate;
    }
  }]);

  return SourceServerVector;
}(_openlayers2.default.source.Vector);

/***/ }),
/* 132 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)

var toObject = __webpack_require__(16);
var toAbsoluteIndex = __webpack_require__(61);
var toLength = __webpack_require__(14);
module.exports = function fill(value /* , start = 0, end = @length */) {
  var O = toObject(this);
  var length = toLength(O.length);
  var aLen = arguments.length;
  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);
  var end = aLen > 2 ? arguments[2] : undefined;
  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);
  while (endPos > index) O[index++] = value;
  return O;
};


/***/ }),
/* 133 */
/***/ (function(module, exports, __webpack_require__) {

// 9.4.2.3 ArraySpeciesCreate(originalArray, length)
var speciesConstructor = __webpack_require__(321);

module.exports = function (original, length) {
  return new (speciesConstructor(original))(length);
};


/***/ }),
/* 134 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $defineProperty = __webpack_require__(13);
var createDesc = __webpack_require__(58);

module.exports = function (object, index, value) {
  if (index in object) $defineProperty.f(object, index, createDesc(0, value));
  else object[index] = value;
};


/***/ }),
/* 135 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(7);
var document = __webpack_require__(4).document;
// typeof document.createElement is 'object' in old IE
var is = isObject(document) && isObject(document.createElement);
module.exports = function (it) {
  return is ? document.createElement(it) : {};
};


/***/ }),
/* 136 */
/***/ (function(module, exports) {

// IE 8- don't enum bug keys
module.exports = (
  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'
).split(',');


/***/ }),
/* 137 */
/***/ (function(module, exports, __webpack_require__) {

var MATCH = __webpack_require__(9)('match');
module.exports = function (KEY) {
  var re = /./;
  try {
    '/./'[KEY](re);
  } catch (e) {
    try {
      re[MATCH] = false;
      return !'/./'[KEY](re);
    } catch (f) { /* empty */ }
  } return true;
};


/***/ }),
/* 138 */
/***/ (function(module, exports, __webpack_require__) {

var document = __webpack_require__(4).document;
module.exports = document && document.documentElement;


/***/ }),
/* 139 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(7);
var setPrototypeOf = __webpack_require__(147).set;
module.exports = function (that, target, C) {
  var S = target.constructor;
  var P;
  if (S !== C && typeof S == 'function' && (P = S.prototype) !== C.prototype && isObject(P) && setPrototypeOf) {
    setPrototypeOf(that, P);
  } return that;
};


/***/ }),
/* 140 */
/***/ (function(module, exports, __webpack_require__) {

// check on default Array iterator
var Iterators = __webpack_require__(74);
var ITERATOR = __webpack_require__(9)('iterator');
var ArrayProto = Array.prototype;

module.exports = function (it) {
  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);
};


/***/ }),
/* 141 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var create = __webpack_require__(56);
var descriptor = __webpack_require__(58);
var setToStringTag = __webpack_require__(75);
var IteratorPrototype = {};

// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()
__webpack_require__(23)(IteratorPrototype, __webpack_require__(9)('iterator'), function () { return this; });

module.exports = function (Constructor, NAME, next) {
  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });
  setToStringTag(Constructor, NAME + ' Iterator');
};


/***/ }),
/* 142 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var LIBRARY = __webpack_require__(55);
var $export = __webpack_require__(0);
var redefine = __webpack_require__(24);
var hide = __webpack_require__(23);
var has = __webpack_require__(22);
var Iterators = __webpack_require__(74);
var $iterCreate = __webpack_require__(141);
var setToStringTag = __webpack_require__(75);
var getPrototypeOf = __webpack_require__(29);
var ITERATOR = __webpack_require__(9)('iterator');
var BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`
var FF_ITERATOR = '@@iterator';
var KEYS = 'keys';
var VALUES = 'values';

var returnThis = function () { return this; };

module.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {
  $iterCreate(Constructor, NAME, next);
  var getMethod = function (kind) {
    if (!BUGGY && kind in proto) return proto[kind];
    switch (kind) {
      case KEYS: return function keys() { return new Constructor(this, kind); };
      case VALUES: return function values() { return new Constructor(this, kind); };
    } return function entries() { return new Constructor(this, kind); };
  };
  var TAG = NAME + ' Iterator';
  var DEF_VALUES = DEFAULT == VALUES;
  var VALUES_BUG = false;
  var proto = Base.prototype;
  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];
  var $default = $native || getMethod(DEFAULT);
  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;
  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;
  var methods, key, IteratorPrototype;
  // Fix native
  if ($anyNative) {
    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));
    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {
      // Set @@toStringTag to native iterators
      setToStringTag(IteratorPrototype, TAG, true);
      // fix for some old engines
      if (!LIBRARY && !has(IteratorPrototype, ITERATOR)) hide(IteratorPrototype, ITERATOR, returnThis);
    }
  }
  // fix Array#{values, @@iterator}.name in V8 / FF
  if (DEF_VALUES && $native && $native.name !== VALUES) {
    VALUES_BUG = true;
    $default = function values() { return $native.call(this); };
  }
  // Define iterator
  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {
    hide(proto, ITERATOR, $default);
  }
  // Plug for library
  Iterators[NAME] = $default;
  Iterators[TAG] = returnThis;
  if (DEFAULT) {
    methods = {
      values: DEF_VALUES ? $default : getMethod(VALUES),
      keys: IS_SET ? $default : getMethod(KEYS),
      entries: $entries
    };
    if (FORCED) for (key in methods) {
      if (!(key in proto)) redefine(proto, key, methods[key]);
    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);
  }
  return methods;
};


/***/ }),
/* 143 */
/***/ (function(module, exports) {

// 20.2.2.14 Math.expm1(x)
var $expm1 = Math.expm1;
module.exports = (!$expm1
  // Old FF bug
  || $expm1(10) > 22025.465794806719 || $expm1(10) < 22025.4657948067165168
  // Tor Browser bug
  || $expm1(-2e-17) != -2e-17
) ? function expm1(x) {
  return (x = +x) == 0 ? x : x > -1e-6 && x < 1e-6 ? x + x * x / 2 : Math.exp(x) - 1;
} : $expm1;


/***/ }),
/* 144 */
/***/ (function(module, exports) {

// 20.2.2.28 Math.sign(x)
module.exports = Math.sign || function sign(x) {
  // eslint-disable-next-line no-self-compare
  return (x = +x) == 0 || x != x ? x : x < 0 ? -1 : 1;
};


/***/ }),
/* 145 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(4);
var macrotask = __webpack_require__(153).set;
var Observer = global.MutationObserver || global.WebKitMutationObserver;
var process = global.process;
var Promise = global.Promise;
var isNode = __webpack_require__(31)(process) == 'process';

module.exports = function () {
  var head, last, notify;

  var flush = function () {
    var parent, fn;
    if (isNode && (parent = process.domain)) parent.exit();
    while (head) {
      fn = head.fn;
      head = head.next;
      try {
        fn();
      } catch (e) {
        if (head) notify();
        else last = undefined;
        throw e;
      }
    } last = undefined;
    if (parent) parent.enter();
  };

  // Node.js
  if (isNode) {
    notify = function () {
      process.nextTick(flush);
    };
  // browsers with MutationObserver
  } else if (Observer) {
    var toggle = true;
    var node = document.createTextNode('');
    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new
    notify = function () {
      node.data = toggle = !toggle;
    };
  // environments with maybe non-completely correct, but existent Promise
  } else if (Promise && Promise.resolve) {
    var promise = Promise.resolve();
    notify = function () {
      promise.then(flush);
    };
  // for other environments - macrotask based on:
  // - setImmediate
  // - MessageChannel
  // - window.postMessag
  // - onreadystatechange
  // - setTimeout
  } else {
    notify = function () {
      // strange IE + webpack dev server bug - use .call(global)
      macrotask.call(global, flush);
    };
  }

  return function (fn) {
    var task = { fn: fn, next: undefined };
    if (last) last.next = task;
    if (!head) {
      head = task;
      notify();
    } last = task;
  };
};


/***/ }),
/* 146 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 25.4.1.5 NewPromiseCapability(C)
var aFunction = __webpack_require__(19);

function PromiseCapability(C) {
  var resolve, reject;
  this.promise = new C(function ($$resolve, $$reject) {
    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');
    resolve = $$resolve;
    reject = $$reject;
  });
  this.resolve = aFunction(resolve);
  this.reject = aFunction(reject);
}

module.exports.f = function (C) {
  return new PromiseCapability(C);
};


/***/ }),
/* 147 */
/***/ (function(module, exports, __webpack_require__) {

// Works with __proto__ only. Old v8 can't work with null proto objects.
/* eslint-disable no-proto */
var isObject = __webpack_require__(7);
var anObject = __webpack_require__(3);
var check = function (O, proto) {
  anObject(O);
  if (!isObject(proto) && proto !== null) throw TypeError(proto + ": can't set as prototype!");
};
module.exports = {
  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line
    function (test, buggy, set) {
      try {
        set = __webpack_require__(32)(Function.call, __webpack_require__(28).f(Object.prototype, '__proto__').set, 2);
        set(test, []);
        buggy = !(test instanceof Array);
      } catch (e) { buggy = true; }
      return function setPrototypeOf(O, proto) {
        check(O, proto);
        if (buggy) O.__proto__ = proto;
        else set(O, proto);
        return O;
      };
    }({}, false) : undefined),
  check: check
};


/***/ }),
/* 148 */
/***/ (function(module, exports, __webpack_require__) {

var shared = __webpack_require__(107)('keys');
var uid = __webpack_require__(62);
module.exports = function (key) {
  return shared[key] || (shared[key] = uid(key));
};


/***/ }),
/* 149 */
/***/ (function(module, exports, __webpack_require__) {

var toInteger = __webpack_require__(41);
var defined = __webpack_require__(39);
// true  -> String#at
// false -> String#codePointAt
module.exports = function (TO_STRING) {
  return function (that, pos) {
    var s = String(defined(that));
    var i = toInteger(pos);
    var l = s.length;
    var a, b;
    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;
    a = s.charCodeAt(i);
    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff
      ? TO_STRING ? s.charAt(i) : a
      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;
  };
};


/***/ }),
/* 150 */
/***/ (function(module, exports, __webpack_require__) {

// helper for String#{startsWith, endsWith, includes}
var isRegExp = __webpack_require__(101);
var defined = __webpack_require__(39);

module.exports = function (that, searchString, NAME) {
  if (isRegExp(searchString)) throw TypeError('String#' + NAME + " doesn't accept regex!");
  return String(defined(that));
};


/***/ }),
/* 151 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toInteger = __webpack_require__(41);
var defined = __webpack_require__(39);

module.exports = function repeat(count) {
  var str = String(defined(this));
  var res = '';
  var n = toInteger(count);
  if (n < 0 || n == Infinity) throw RangeError("Count can't be negative");
  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) res += str;
  return res;
};


/***/ }),
/* 152 */
/***/ (function(module, exports) {

module.exports = '\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003' +
  '\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF';


/***/ }),
/* 153 */
/***/ (function(module, exports, __webpack_require__) {

var ctx = __webpack_require__(32);
var invoke = __webpack_require__(99);
var html = __webpack_require__(138);
var cel = __webpack_require__(135);
var global = __webpack_require__(4);
var process = global.process;
var setTask = global.setImmediate;
var clearTask = global.clearImmediate;
var MessageChannel = global.MessageChannel;
var Dispatch = global.Dispatch;
var counter = 0;
var queue = {};
var ONREADYSTATECHANGE = 'onreadystatechange';
var defer, channel, port;
var run = function () {
  var id = +this;
  // eslint-disable-next-line no-prototype-builtins
  if (queue.hasOwnProperty(id)) {
    var fn = queue[id];
    delete queue[id];
    fn();
  }
};
var listener = function (event) {
  run.call(event.data);
};
// Node.js 0.9+ & IE10+ has setImmediate, otherwise:
if (!setTask || !clearTask) {
  setTask = function setImmediate(fn) {
    var args = [];
    var i = 1;
    while (arguments.length > i) args.push(arguments[i++]);
    queue[++counter] = function () {
      // eslint-disable-next-line no-new-func
      invoke(typeof fn == 'function' ? fn : Function(fn), args);
    };
    defer(counter);
    return counter;
  };
  clearTask = function clearImmediate(id) {
    delete queue[id];
  };
  // Node.js 0.8-
  if (__webpack_require__(31)(process) == 'process') {
    defer = function (id) {
      process.nextTick(ctx(run, id, 1));
    };
  // Sphere (JS game engine) Dispatch API
  } else if (Dispatch && Dispatch.now) {
    defer = function (id) {
      Dispatch.now(ctx(run, id, 1));
    };
  // Browsers with MessageChannel, includes WebWorkers
  } else if (MessageChannel) {
    channel = new MessageChannel();
    port = channel.port2;
    channel.port1.onmessage = listener;
    defer = ctx(port.postMessage, port, 1);
  // Browsers with postMessage, skip WebWorkers
  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'
  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {
    defer = function (id) {
      global.postMessage(id + '', '*');
    };
    global.addEventListener('message', listener, false);
  // IE8-
  } else if (ONREADYSTATECHANGE in cel('script')) {
    defer = function (id) {
      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {
        html.removeChild(this);
        run.call(id);
      };
    };
  // Rest old browsers
  } else {
    defer = function (id) {
      setTimeout(ctx(run, id, 1), 0);
    };
  }
}
module.exports = {
  set: setTask,
  clear: clearTask
};


/***/ }),
/* 154 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(4);
var DESCRIPTORS = __webpack_require__(12);
var LIBRARY = __webpack_require__(55);
var $typed = __webpack_require__(109);
var hide = __webpack_require__(23);
var redefineAll = __webpack_require__(59);
var fails = __webpack_require__(6);
var anInstance = __webpack_require__(53);
var toInteger = __webpack_require__(41);
var toLength = __webpack_require__(14);
var toIndex = __webpack_require__(217);
var gOPN = __webpack_require__(57).f;
var dP = __webpack_require__(13).f;
var arrayFill = __webpack_require__(132);
var setToStringTag = __webpack_require__(75);
var ARRAY_BUFFER = 'ArrayBuffer';
var DATA_VIEW = 'DataView';
var PROTOTYPE = 'prototype';
var WRONG_LENGTH = 'Wrong length!';
var WRONG_INDEX = 'Wrong index!';
var $ArrayBuffer = global[ARRAY_BUFFER];
var $DataView = global[DATA_VIEW];
var Math = global.Math;
var RangeError = global.RangeError;
// eslint-disable-next-line no-shadow-restricted-names
var Infinity = global.Infinity;
var BaseBuffer = $ArrayBuffer;
var abs = Math.abs;
var pow = Math.pow;
var floor = Math.floor;
var log = Math.log;
var LN2 = Math.LN2;
var BUFFER = 'buffer';
var BYTE_LENGTH = 'byteLength';
var BYTE_OFFSET = 'byteOffset';
var $BUFFER = DESCRIPTORS ? '_b' : BUFFER;
var $LENGTH = DESCRIPTORS ? '_l' : BYTE_LENGTH;
var $OFFSET = DESCRIPTORS ? '_o' : BYTE_OFFSET;

// IEEE754 conversions based on https://github.com/feross/ieee754
function packIEEE754(value, mLen, nBytes) {
  var buffer = Array(nBytes);
  var eLen = nBytes * 8 - mLen - 1;
  var eMax = (1 << eLen) - 1;
  var eBias = eMax >> 1;
  var rt = mLen === 23 ? pow(2, -24) - pow(2, -77) : 0;
  var i = 0;
  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;
  var e, m, c;
  value = abs(value);
  // eslint-disable-next-line no-self-compare
  if (value != value || value === Infinity) {
    // eslint-disable-next-line no-self-compare
    m = value != value ? 1 : 0;
    e = eMax;
  } else {
    e = floor(log(value) / LN2);
    if (value * (c = pow(2, -e)) < 1) {
      e--;
      c *= 2;
    }
    if (e + eBias >= 1) {
      value += rt / c;
    } else {
      value += rt * pow(2, 1 - eBias);
    }
    if (value * c >= 2) {
      e++;
      c /= 2;
    }
    if (e + eBias >= eMax) {
      m = 0;
      e = eMax;
    } else if (e + eBias >= 1) {
      m = (value * c - 1) * pow(2, mLen);
      e = e + eBias;
    } else {
      m = value * pow(2, eBias - 1) * pow(2, mLen);
      e = 0;
    }
  }
  for (; mLen >= 8; buffer[i++] = m & 255, m /= 256, mLen -= 8);
  e = e << mLen | m;
  eLen += mLen;
  for (; eLen > 0; buffer[i++] = e & 255, e /= 256, eLen -= 8);
  buffer[--i] |= s * 128;
  return buffer;
}
function unpackIEEE754(buffer, mLen, nBytes) {
  var eLen = nBytes * 8 - mLen - 1;
  var eMax = (1 << eLen) - 1;
  var eBias = eMax >> 1;
  var nBits = eLen - 7;
  var i = nBytes - 1;
  var s = buffer[i--];
  var e = s & 127;
  var m;
  s >>= 7;
  for (; nBits > 0; e = e * 256 + buffer[i], i--, nBits -= 8);
  m = e & (1 << -nBits) - 1;
  e >>= -nBits;
  nBits += mLen;
  for (; nBits > 0; m = m * 256 + buffer[i], i--, nBits -= 8);
  if (e === 0) {
    e = 1 - eBias;
  } else if (e === eMax) {
    return m ? NaN : s ? -Infinity : Infinity;
  } else {
    m = m + pow(2, mLen);
    e = e - eBias;
  } return (s ? -1 : 1) * m * pow(2, e - mLen);
}

function unpackI32(bytes) {
  return bytes[3] << 24 | bytes[2] << 16 | bytes[1] << 8 | bytes[0];
}
function packI8(it) {
  return [it & 0xff];
}
function packI16(it) {
  return [it & 0xff, it >> 8 & 0xff];
}
function packI32(it) {
  return [it & 0xff, it >> 8 & 0xff, it >> 16 & 0xff, it >> 24 & 0xff];
}
function packF64(it) {
  return packIEEE754(it, 52, 8);
}
function packF32(it) {
  return packIEEE754(it, 23, 4);
}

function addGetter(C, key, internal) {
  dP(C[PROTOTYPE], key, { get: function () { return this[internal]; } });
}

function get(view, bytes, index, isLittleEndian) {
  var numIndex = +index;
  var intIndex = toIndex(numIndex);
  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);
  var store = view[$BUFFER]._b;
  var start = intIndex + view[$OFFSET];
  var pack = store.slice(start, start + bytes);
  return isLittleEndian ? pack : pack.reverse();
}
function set(view, bytes, index, conversion, value, isLittleEndian) {
  var numIndex = +index;
  var intIndex = toIndex(numIndex);
  if (intIndex + bytes > view[$LENGTH]) throw RangeError(WRONG_INDEX);
  var store = view[$BUFFER]._b;
  var start = intIndex + view[$OFFSET];
  var pack = conversion(+value);
  for (var i = 0; i < bytes; i++) store[start + i] = pack[isLittleEndian ? i : bytes - i - 1];
}

if (!$typed.ABV) {
  $ArrayBuffer = function ArrayBuffer(length) {
    anInstance(this, $ArrayBuffer, ARRAY_BUFFER);
    var byteLength = toIndex(length);
    this._b = arrayFill.call(Array(byteLength), 0);
    this[$LENGTH] = byteLength;
  };

  $DataView = function DataView(buffer, byteOffset, byteLength) {
    anInstance(this, $DataView, DATA_VIEW);
    anInstance(buffer, $ArrayBuffer, DATA_VIEW);
    var bufferLength = buffer[$LENGTH];
    var offset = toInteger(byteOffset);
    if (offset < 0 || offset > bufferLength) throw RangeError('Wrong offset!');
    byteLength = byteLength === undefined ? bufferLength - offset : toLength(byteLength);
    if (offset + byteLength > bufferLength) throw RangeError(WRONG_LENGTH);
    this[$BUFFER] = buffer;
    this[$OFFSET] = offset;
    this[$LENGTH] = byteLength;
  };

  if (DESCRIPTORS) {
    addGetter($ArrayBuffer, BYTE_LENGTH, '_l');
    addGetter($DataView, BUFFER, '_b');
    addGetter($DataView, BYTE_LENGTH, '_l');
    addGetter($DataView, BYTE_OFFSET, '_o');
  }

  redefineAll($DataView[PROTOTYPE], {
    getInt8: function getInt8(byteOffset) {
      return get(this, 1, byteOffset)[0] << 24 >> 24;
    },
    getUint8: function getUint8(byteOffset) {
      return get(this, 1, byteOffset)[0];
    },
    getInt16: function getInt16(byteOffset /* , littleEndian */) {
      var bytes = get(this, 2, byteOffset, arguments[1]);
      return (bytes[1] << 8 | bytes[0]) << 16 >> 16;
    },
    getUint16: function getUint16(byteOffset /* , littleEndian */) {
      var bytes = get(this, 2, byteOffset, arguments[1]);
      return bytes[1] << 8 | bytes[0];
    },
    getInt32: function getInt32(byteOffset /* , littleEndian */) {
      return unpackI32(get(this, 4, byteOffset, arguments[1]));
    },
    getUint32: function getUint32(byteOffset /* , littleEndian */) {
      return unpackI32(get(this, 4, byteOffset, arguments[1])) >>> 0;
    },
    getFloat32: function getFloat32(byteOffset /* , littleEndian */) {
      return unpackIEEE754(get(this, 4, byteOffset, arguments[1]), 23, 4);
    },
    getFloat64: function getFloat64(byteOffset /* , littleEndian */) {
      return unpackIEEE754(get(this, 8, byteOffset, arguments[1]), 52, 8);
    },
    setInt8: function setInt8(byteOffset, value) {
      set(this, 1, byteOffset, packI8, value);
    },
    setUint8: function setUint8(byteOffset, value) {
      set(this, 1, byteOffset, packI8, value);
    },
    setInt16: function setInt16(byteOffset, value /* , littleEndian */) {
      set(this, 2, byteOffset, packI16, value, arguments[2]);
    },
    setUint16: function setUint16(byteOffset, value /* , littleEndian */) {
      set(this, 2, byteOffset, packI16, value, arguments[2]);
    },
    setInt32: function setInt32(byteOffset, value /* , littleEndian */) {
      set(this, 4, byteOffset, packI32, value, arguments[2]);
    },
    setUint32: function setUint32(byteOffset, value /* , littleEndian */) {
      set(this, 4, byteOffset, packI32, value, arguments[2]);
    },
    setFloat32: function setFloat32(byteOffset, value /* , littleEndian */) {
      set(this, 4, byteOffset, packF32, value, arguments[2]);
    },
    setFloat64: function setFloat64(byteOffset, value /* , littleEndian */) {
      set(this, 8, byteOffset, packF64, value, arguments[2]);
    }
  });
} else {
  if (!fails(function () {
    $ArrayBuffer(1);
  }) || !fails(function () {
    new $ArrayBuffer(-1); // eslint-disable-line no-new
  }) || fails(function () {
    new $ArrayBuffer(); // eslint-disable-line no-new
    new $ArrayBuffer(1.5); // eslint-disable-line no-new
    new $ArrayBuffer(NaN); // eslint-disable-line no-new
    return $ArrayBuffer.name != ARRAY_BUFFER;
  })) {
    $ArrayBuffer = function ArrayBuffer(length) {
      anInstance(this, $ArrayBuffer);
      return new BaseBuffer(toIndex(length));
    };
    var ArrayBufferProto = $ArrayBuffer[PROTOTYPE] = BaseBuffer[PROTOTYPE];
    for (var keys = gOPN(BaseBuffer), j = 0, key; keys.length > j;) {
      if (!((key = keys[j++]) in $ArrayBuffer)) hide($ArrayBuffer, key, BaseBuffer[key]);
    }
    if (!LIBRARY) ArrayBufferProto.constructor = $ArrayBuffer;
  }
  // iOS Safari 7.x bug
  var view = new $DataView(new $ArrayBuffer(2));
  var $setInt8 = $DataView[PROTOTYPE].setInt8;
  view.setInt8(0, 2147483648);
  view.setInt8(1, 2147483649);
  if (view.getInt8(0) || !view.getInt8(1)) redefineAll($DataView[PROTOTYPE], {
    setInt8: function setInt8(byteOffset, value) {
      $setInt8.call(this, byteOffset, value << 24 >> 24);
    },
    setUint8: function setUint8(byteOffset, value) {
      $setInt8.call(this, byteOffset, value << 24 >> 24);
    }
  }, true);
}
setToStringTag($ArrayBuffer, ARRAY_BUFFER);
setToStringTag($DataView, DATA_VIEW);
hide($DataView[PROTOTYPE], $typed.VIEW, true);
exports[ARRAY_BUFFER] = $ArrayBuffer;
exports[DATA_VIEW] = $DataView;


/***/ }),
/* 155 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(4);
var core = __webpack_require__(38);
var LIBRARY = __webpack_require__(55);
var wksExt = __webpack_require__(218);
var defineProperty = __webpack_require__(13).f;
module.exports = function (name) {
  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});
  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });
};


/***/ }),
/* 156 */
/***/ (function(module, exports, __webpack_require__) {

var classof = __webpack_require__(84);
var ITERATOR = __webpack_require__(9)('iterator');
var Iterators = __webpack_require__(74);
module.exports = __webpack_require__(38).getIteratorMethod = function (it) {
  if (it != undefined) return it[ITERATOR]
    || it['@@iterator']
    || Iterators[classof(it)];
};


/***/ }),
/* 157 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var addToUnscopables = __webpack_require__(49);
var step = __webpack_require__(202);
var Iterators = __webpack_require__(74);
var toIObject = __webpack_require__(26);

// 22.1.3.4 Array.prototype.entries()
// 22.1.3.13 Array.prototype.keys()
// 22.1.3.29 Array.prototype.values()
// 22.1.3.30 Array.prototype[@@iterator]()
module.exports = __webpack_require__(142)(Array, 'Array', function (iterated, kind) {
  this._t = toIObject(iterated); // target
  this._i = 0;                   // next index
  this._k = kind;                // kind
// 22.1.5.2.1 %ArrayIteratorPrototype%.next()
}, function () {
  var O = this._t;
  var kind = this._k;
  var index = this._i++;
  if (!O || index >= O.length) {
    this._t = undefined;
    return step(1);
  }
  if (kind == 'keys') return step(0, index);
  if (kind == 'values') return step(0, O[index]);
  return step(0, [index, O[index]]);
}, 'values');

// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)
Iterators.Arguments = Iterators.Array;

addToUnscopables('keys');
addToUnscopables('values');
addToUnscopables('entries');


/***/ }),
/* 158 */
/***/ (function(module, exports, __webpack_require__) {

var getNative = __webpack_require__(66),
    root = __webpack_require__(46);

/* Built-in method references that are verified to be native. */
var Map = getNative(root, 'Map');

module.exports = Map;


/***/ }),
/* 159 */
/***/ (function(module, exports, __webpack_require__) {

var mapCacheClear = __webpack_require__(627),
    mapCacheDelete = __webpack_require__(628),
    mapCacheGet = __webpack_require__(629),
    mapCacheHas = __webpack_require__(630),
    mapCacheSet = __webpack_require__(631);

/**
 * Creates a map cache object to store key-value pairs.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function MapCache(entries) {
  var index = -1,
      length = entries == null ? 0 : entries.length;

  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

// Add methods to `MapCache`.
MapCache.prototype.clear = mapCacheClear;
MapCache.prototype['delete'] = mapCacheDelete;
MapCache.prototype.get = mapCacheGet;
MapCache.prototype.has = mapCacheHas;
MapCache.prototype.set = mapCacheSet;

module.exports = MapCache;


/***/ }),
/* 160 */
/***/ (function(module, exports, __webpack_require__) {

var baseIndexOf = __webpack_require__(116);

/**
 * A specialized version of `_.includes` for arrays without support for
 * specifying an index to search from.
 *
 * @private
 * @param {Array} [array] The array to inspect.
 * @param {*} target The value to search for.
 * @returns {boolean} Returns `true` if `target` is found, else `false`.
 */
function arrayIncludes(array, value) {
  var length = array == null ? 0 : array.length;
  return !!length && baseIndexOf(array, value, 0) > -1;
}

module.exports = arrayIncludes;


/***/ }),
/* 161 */
/***/ (function(module, exports) {

/**
 * This function is like `arrayIncludes` except that it accepts a comparator.
 *
 * @private
 * @param {Array} [array] The array to inspect.
 * @param {*} target The value to search for.
 * @param {Function} comparator The comparator invoked per element.
 * @returns {boolean} Returns `true` if `target` is found, else `false`.
 */
function arrayIncludesWith(array, value, comparator) {
  var index = -1,
      length = array == null ? 0 : array.length;

  while (++index < length) {
    if (comparator(value, array[index])) {
      return true;
    }
  }
  return false;
}

module.exports = arrayIncludesWith;


/***/ }),
/* 162 */
/***/ (function(module, exports) {

/**
 * Appends the elements of `values` to `array`.
 *
 * @private
 * @param {Array} array The array to modify.
 * @param {Array} values The values to append.
 * @returns {Array} Returns `array`.
 */
function arrayPush(array, values) {
  var index = -1,
      length = values.length,
      offset = array.length;

  while (++index < length) {
    array[offset + index] = values[index];
  }
  return array;
}

module.exports = arrayPush;


/***/ }),
/* 163 */
/***/ (function(module, exports) {

/**
 * The base implementation of `_.clamp` which doesn't coerce arguments.
 *
 * @private
 * @param {number} number The number to clamp.
 * @param {number} [lower] The lower bound.
 * @param {number} upper The upper bound.
 * @returns {number} Returns the clamped number.
 */
function baseClamp(number, lower, upper) {
  if (number === number) {
    if (upper !== undefined) {
      number = number <= upper ? number : upper;
    }
    if (lower !== undefined) {
      number = number >= lower ? number : lower;
    }
  }
  return number;
}

module.exports = baseClamp;


/***/ }),
/* 164 */
/***/ (function(module, exports, __webpack_require__) {

var castPath = __webpack_require__(90),
    toKey = __webpack_require__(69);

/**
 * The base implementation of `_.get` without support for default values.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {Array|string} path The path of the property to get.
 * @returns {*} Returns the resolved value.
 */
function baseGet(object, path) {
  path = castPath(path, object);

  var index = 0,
      length = path.length;

  while (object != null && index < length) {
    object = object[toKey(path[index++])];
  }
  return (index && index == length) ? object : undefined;
}

module.exports = baseGet;


/***/ }),
/* 165 */
/***/ (function(module, exports, __webpack_require__) {

var SetCache = __webpack_require__(111),
    arrayIncludes = __webpack_require__(160),
    arrayIncludesWith = __webpack_require__(161),
    arrayMap = __webpack_require__(27),
    baseUnary = __webpack_require__(89),
    cacheHas = __webpack_require__(119);

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMin = Math.min;

/**
 * The base implementation of methods like `_.intersection`, without support
 * for iteratee shorthands, that accepts an array of arrays to inspect.
 *
 * @private
 * @param {Array} arrays The arrays to inspect.
 * @param {Function} [iteratee] The iteratee invoked per element.
 * @param {Function} [comparator] The comparator invoked per element.
 * @returns {Array} Returns the new array of shared values.
 */
function baseIntersection(arrays, iteratee, comparator) {
  var includes = comparator ? arrayIncludesWith : arrayIncludes,
      length = arrays[0].length,
      othLength = arrays.length,
      othIndex = othLength,
      caches = Array(othLength),
      maxLength = Infinity,
      result = [];

  while (othIndex--) {
    var array = arrays[othIndex];
    if (othIndex && iteratee) {
      array = arrayMap(array, baseUnary(iteratee));
    }
    maxLength = nativeMin(array.length, maxLength);
    caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))
      ? new SetCache(othIndex && array)
      : undefined;
  }
  array = arrays[0];

  var index = -1,
      seen = caches[0];

  outer:
  while (++index < length && result.length < maxLength) {
    var value = array[index],
        computed = iteratee ? iteratee(value) : value;

    value = (comparator || value !== 0) ? value : 0;
    if (!(seen
          ? cacheHas(seen, computed)
          : includes(result, computed, comparator)
        )) {
      othIndex = othLength;
      while (--othIndex) {
        var cache = caches[othIndex];
        if (!(cache
              ? cacheHas(cache, computed)
              : includes(arrays[othIndex], computed, comparator))
            ) {
          continue outer;
        }
      }
      if (seen) {
        seen.push(computed);
      }
      result.push(value);
    }
  }
  return result;
}

module.exports = baseIntersection;


/***/ }),
/* 166 */
/***/ (function(module, exports) {

/**
 * The base implementation of `_.property` without support for deep paths.
 *
 * @private
 * @param {string} key The key of the property to get.
 * @returns {Function} Returns the new accessor function.
 */
function baseProperty(key) {
  return function(object) {
    return object == null ? undefined : object[key];
  };
}

module.exports = baseProperty;


/***/ }),
/* 167 */
/***/ (function(module, exports, __webpack_require__) {

var arrayMap = __webpack_require__(27),
    baseIndexOf = __webpack_require__(116),
    baseIndexOfWith = __webpack_require__(579),
    baseUnary = __webpack_require__(89),
    copyArray = __webpack_require__(120);

/** Used for built-in method references. */
var arrayProto = Array.prototype;

/** Built-in value references. */
var splice = arrayProto.splice;

/**
 * The base implementation of `_.pullAllBy` without support for iteratee
 * shorthands.
 *
 * @private
 * @param {Array} array The array to modify.
 * @param {Array} values The values to remove.
 * @param {Function} [iteratee] The iteratee invoked per element.
 * @param {Function} [comparator] The comparator invoked per element.
 * @returns {Array} Returns `array`.
 */
function basePullAll(array, values, iteratee, comparator) {
  var indexOf = comparator ? baseIndexOfWith : baseIndexOf,
      index = -1,
      length = values.length,
      seen = array;

  if (array === values) {
    values = copyArray(values);
  }
  if (iteratee) {
    seen = arrayMap(array, baseUnary(iteratee));
  }
  while (++index < length) {
    var fromIndex = 0,
        value = values[index],
        computed = iteratee ? iteratee(value) : value;

    while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {
      if (seen !== array) {
        splice.call(seen, fromIndex, 1);
      }
      splice.call(array, fromIndex, 1);
    }
  }
  return array;
}

module.exports = basePullAll;


/***/ }),
/* 168 */
/***/ (function(module, exports, __webpack_require__) {

var isSymbol = __webpack_require__(72);

/** Used as references for the maximum length and index of an array. */
var MAX_ARRAY_LENGTH = 4294967295,
    MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeFloor = Math.floor,
    nativeMin = Math.min;

/**
 * The base implementation of `_.sortedIndexBy` and `_.sortedLastIndexBy`
 * which invokes `iteratee` for `value` and each element of `array` to compute
 * their sort ranking. The iteratee is invoked with one argument; (value).
 *
 * @private
 * @param {Array} array The sorted array to inspect.
 * @param {*} value The value to evaluate.
 * @param {Function} iteratee The iteratee invoked per element.
 * @param {boolean} [retHighest] Specify returning the highest qualified index.
 * @returns {number} Returns the index at which `value` should be inserted
 *  into `array`.
 */
function baseSortedIndexBy(array, value, iteratee, retHighest) {
  value = iteratee(value);

  var low = 0,
      high = array == null ? 0 : array.length,
      valIsNaN = value !== value,
      valIsNull = value === null,
      valIsSymbol = isSymbol(value),
      valIsUndefined = value === undefined;

  while (low < high) {
    var mid = nativeFloor((low + high) / 2),
        computed = iteratee(array[mid]),
        othIsDefined = computed !== undefined,
        othIsNull = computed === null,
        othIsReflexive = computed === computed,
        othIsSymbol = isSymbol(computed);

    if (valIsNaN) {
      var setLow = retHighest || othIsReflexive;
    } else if (valIsUndefined) {
      setLow = othIsReflexive && (retHighest || othIsDefined);
    } else if (valIsNull) {
      setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);
    } else if (valIsSymbol) {
      setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);
    } else if (othIsNull || othIsSymbol) {
      setLow = false;
    } else {
      setLow = retHighest ? (computed <= value) : (computed < value);
    }
    if (setLow) {
      low = mid + 1;
    } else {
      high = mid;
    }
  }
  return nativeMin(high, MAX_ARRAY_INDEX);
}

module.exports = baseSortedIndexBy;


/***/ }),
/* 169 */
/***/ (function(module, exports, __webpack_require__) {

var baseDifference = __webpack_require__(88),
    baseFlatten = __webpack_require__(20),
    baseUniq = __webpack_require__(65);

/**
 * The base implementation of methods like `_.xor`, without support for
 * iteratee shorthands, that accepts an array of arrays to inspect.
 *
 * @private
 * @param {Array} arrays The arrays to inspect.
 * @param {Function} [iteratee] The iteratee invoked per element.
 * @param {Function} [comparator] The comparator invoked per element.
 * @returns {Array} Returns the new array of values.
 */
function baseXor(arrays, iteratee, comparator) {
  var length = arrays.length;
  if (length < 2) {
    return length ? baseUniq(arrays[0]) : [];
  }
  var index = -1,
      result = Array(length);

  while (++index < length) {
    var array = arrays[index],
        othIndex = -1;

    while (++othIndex < length) {
      if (othIndex != index) {
        result[index] = baseDifference(result[index] || array, arrays[othIndex], iteratee, comparator);
      }
    }
  }
  return baseUniq(baseFlatten(result, 1), iteratee, comparator);
}

module.exports = baseXor;


/***/ }),
/* 170 */
/***/ (function(module, exports, __webpack_require__) {

var isArrayLikeObject = __webpack_require__(30);

/**
 * Casts `value` to an empty array if it's not an array like object.
 *
 * @private
 * @param {*} value The value to inspect.
 * @returns {Array|Object} Returns the cast array-like object.
 */
function castArrayLikeObject(value) {
  return isArrayLikeObject(value) ? value : [];
}

module.exports = castArrayLikeObject;


/***/ }),
/* 171 */
/***/ (function(module, exports, __webpack_require__) {

var isArray = __webpack_require__(10),
    isSymbol = __webpack_require__(72);

/** Used to match property names within property paths. */
var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
    reIsPlainProp = /^\w*$/;

/**
 * Checks if `value` is a property name and not a property path.
 *
 * @private
 * @param {*} value The value to check.
 * @param {Object} [object] The object to query keys on.
 * @returns {boolean} Returns `true` if `value` is a property name, else `false`.
 */
function isKey(value, object) {
  if (isArray(value)) {
    return false;
  }
  var type = typeof value;
  if (type == 'number' || type == 'symbol' || type == 'boolean' ||
      value == null || isSymbol(value)) {
    return true;
  }
  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||
    (object != null && value in Object(object));
}

module.exports = isKey;


/***/ }),
/* 172 */
/***/ (function(module, exports) {

/**
 * Converts `set` to an array of its values.
 *
 * @private
 * @param {Object} set The set to convert.
 * @returns {Array} Returns the values.
 */
function setToArray(set) {
  var index = -1,
      result = Array(set.size);

  set.forEach(function(value) {
    result[++index] = value;
  });
  return result;
}

module.exports = setToArray;


/***/ }),
/* 173 */
/***/ (function(module, exports, __webpack_require__) {

var baseFlatten = __webpack_require__(20);

/**
 * Flattens `array` a single level deep.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Array
 * @param {Array} array The array to flatten.
 * @returns {Array} Returns the new flattened array.
 * @example
 *
 * _.flatten([1, [2, [3, [4]], 5]]);
 * // => [1, 2, [3, [4]], 5]
 */
function flatten(array) {
  var length = array == null ? 0 : array.length;
  return length ? baseFlatten(array, 1) : [];
}

module.exports = flatten;


/***/ }),
/* 174 */
/***/ (function(module, exports, __webpack_require__) {

var baseIsArguments = __webpack_require__(581),
    isObjectLike = __webpack_require__(71);

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/** Built-in value references. */
var propertyIsEnumerable = objectProto.propertyIsEnumerable;

/**
 * Checks if `value` is likely an `arguments` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an `arguments` object,
 *  else `false`.
 * @example
 *
 * _.isArguments(function() { return arguments; }());
 * // => true
 *
 * _.isArguments([1, 2, 3]);
 * // => false
 */
var isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {
  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&
    !propertyIsEnumerable.call(value, 'callee');
};

module.exports = isArguments;


/***/ }),
/* 175 */
/***/ (function(module, exports) {

/** Used as references for various `Number` constants. */
var MAX_SAFE_INTEGER = 9007199254740991;

/**
 * Checks if `value` is a valid array-like length.
 *
 * **Note:** This method is loosely based on
 * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
 * @example
 *
 * _.isLength(3);
 * // => true
 *
 * _.isLength(Number.MIN_VALUE);
 * // => false
 *
 * _.isLength(Infinity);
 * // => false
 *
 * _.isLength('3');
 * // => false
 */
function isLength(value) {
  return typeof value == 'number' &&
    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
}

module.exports = isLength;


/***/ }),
/* 176 */
/***/ (function(module, exports, __webpack_require__) {

var arrayFilter = __webpack_require__(64),
    arrayMap = __webpack_require__(27),
    baseProperty = __webpack_require__(166),
    baseTimes = __webpack_require__(241),
    isArrayLikeObject = __webpack_require__(30);

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max;

/**
 * This method is like `_.zip` except that it accepts an array of grouped
 * elements and creates an array regrouping the elements to their pre-zip
 * configuration.
 *
 * @static
 * @memberOf _
 * @since 1.2.0
 * @category Array
 * @param {Array} array The array of grouped elements to process.
 * @returns {Array} Returns the new array of regrouped elements.
 * @example
 *
 * var zipped = _.zip(['a', 'b'], [1, 2], [true, false]);
 * // => [['a', 1, true], ['b', 2, false]]
 *
 * _.unzip(zipped);
 * // => [['a', 'b'], [1, 2], [true, false]]
 */
function unzip(array) {
  if (!(array && array.length)) {
    return [];
  }
  var length = 0;
  array = arrayFilter(array, function(group) {
    if (isArrayLikeObject(group)) {
      length = nativeMax(group.length, length);
      return true;
    }
  });
  return baseTimes(length, function(index) {
    return arrayMap(array, baseProperty(index));
  });
}

module.exports = unzip;


/***/ }),
/* 177 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var singleComment = 1;
var multiComment = 2;

function stripWithoutWhitespace() {
	return '';
}

function stripWithWhitespace(str, start, end) {
	return str.slice(start, end).replace(/\S/g, ' ');
}

module.exports = function (str, opts) {
	opts = opts || {};

	var currentChar;
	var nextChar;
	var insideString = false;
	var insideComment = false;
	var offset = 0;
	var ret = '';
	var strip = opts.whitespace === false ? stripWithoutWhitespace : stripWithWhitespace;

	for (var i = 0; i < str.length; i++) {
		currentChar = str[i];
		nextChar = str[i + 1];

		if (!insideComment && currentChar === '"') {
			var escaped = str[i - 1] === '\\' && str[i - 2] !== '\\';
			if (!escaped) {
				insideString = !insideString;
			}
		}

		if (insideString) {
			continue;
		}

		if (!insideComment && currentChar + nextChar === '//') {
			ret += str.slice(offset, i);
			offset = i;
			insideComment = singleComment;
			i++;
		} else if (insideComment === singleComment && currentChar + nextChar === '\r\n') {
			i++;
			insideComment = false;
			ret += strip(str, offset, i);
			offset = i;
			continue;
		} else if (insideComment === singleComment && currentChar === '\n') {
			insideComment = false;
			ret += strip(str, offset, i);
			offset = i;
		} else if (!insideComment && currentChar + nextChar === '/*') {
			ret += str.slice(offset, i);
			offset = i;
			insideComment = multiComment;
			i++;
			continue;
		} else if (insideComment === multiComment && currentChar + nextChar === '*/') {
			i++;
			insideComment = false;
			ret += strip(str, offset, i + 1);
			offset = i + 1;
			continue;
		}
	}

	return ret + (insideComment ? strip(str.substr(offset)) : str.substr(offset));
};


/***/ }),
/* 178 */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || Function("return this")() || (1,eval)("this");
} catch(e) {
	// This works if the window reference is available
	if(typeof window === "object")
		g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),
/* 179 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.FeaturePopup = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _flatten = __webpack_require__(173);

var _flatten2 = _interopRequireDefault(_flatten);

var _ListenerOrganizerMixin = __webpack_require__(48);

var _Window = __webpack_require__(93);

var _globals = __webpack_require__(11);

var _utilities = __webpack_require__(5);

__webpack_require__(526);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {object} FeaturePopupOptions
 * @property {string} [className='g4u-featurepopup']
 * @property {number[]} [offset=[0,0]]
 * @property {ol.OverlayPositioning} [positioning='center-center']
 * @property {number[]} [iconSizedOffset=[0,0]]
 * @property {boolean} [centerOnPopup=false]
 * @property {boolean} [animated=true]
 * @property {string[]} [popupModifier] default popupModifiers to use
 */

/**
 * Displays a Popup bound to a geographical position via an ol.Overlay
 */
var FeaturePopup = exports.FeaturePopup = function (_mixin) {
  _inherits(FeaturePopup, _mixin);

  /**
   * @param {FeaturePopupOptions} options
   */
  function FeaturePopup() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, FeaturePopup);

    /**
     * @type {string}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (FeaturePopup.__proto__ || Object.getPrototypeOf(FeaturePopup)).call(this));

    _this.className_ = options.hasOwnProperty('className') ? options.className : 'g4u-featurepopup';

    /**
     * @type {string}
     * @private
     */
    _this.classNameFeatureName_ = _this.className_ + '-feature-name';

    /**
     * @type {string}
     * @private
     */
    _this.classNameFeatureDescription_ = _this.className_ + '-feature-description';

    /**
     * @type {jQuery}
     * @private
     */
    _this.$name_ = (0, _jquery2.default)('<h3>').addClass(_this.classNameFeatureName_);

    /**
     * @type {jQuery}
     * @private
     */
    _this.$description_ = (0, _jquery2.default)('<p>').addClass(_this.classNameFeatureDescription_);

    /**
     * @type {null|ol.Feature}
     * @private
     */
    _this.feature_ = null;

    /**
     * @type {boolean}
     * @private
     */
    _this.visible_ = false;

    /**
     * @type {VectorLayer[]}
     * @private
     */
    _this.referencingVisibleLayers_ = [];

    /**
     * @type {number[]}
     * @private
     */
    _this.pixelOffset_ = options.hasOwnProperty('offset') ? options.offset : [0, 0];

    /**
     * @type {number[]}
     * @private
     */
    _this.iconSizedOffset_ = options.hasOwnProperty('iconSizedOffset') ? options.iconSizedOffset : [0, 0];

    /**
     * @type {boolean}
     * @private
     */
    _this.centerOnPopup_ = options.hasOwnProperty('centerOnPopup') ? options.centerOnPopup : true;

    /**
     * @type {boolean}
     * @private
     */
    _this.centerOnPopupInitial_ = _this.centerOnPopup_;

    /**
     * @type {boolean}
     * @private
     */
    _this.animated_ = options.hasOwnProperty('animated') ? options.animated : true;

    /**
     * @type {jQuery}
     * @private
     */
    _this.$element_ = (0, _jquery2.default)('<div>').addClass(_this.className_).addClass(_globals.cssClasses.hidden);

    /**
     * @type {ol.Overlay}
     * @private
     */
    _this.overlay_ = new _openlayers2.default.Overlay({
      element: _this.$element_.get(0),
      offset: _this.pixelOffset_,
      positioning: options.hasOwnProperty('positioning') ? options.positioning : 'center-center',
      stopEvent: false
    });

    /**
     * @type {string[]}
     * @private
     */
    _this.defaultPopupModifiers_ = options.popupModifier || [];

    /**
     * @type {string[]}
     * @private
     */
    _this.currentPopupModifiers_ = [];

    /**
     * @type {?Window}
     * @private
     */
    _this.window_ = null;

    /**
     * @type {?G4UMap}
     * @private
     */
    _this.map__ = null;
    return _this;
  }

  /**
   * @param {ol.Feature} feature
   * @returns {boolean}
   */


  _createClass(FeaturePopup, [{
    key: 'setMap',


    /**
     * @param {G4UMap} map
     */
    value: function setMap(map) {
      var _this2 = this;

      if (this.getMap()) {
        this.detachAllListeners();
        this.getMap().removeOverlay(this.overlay_);
      }

      if (map) {
        this.window_ = new _Window.Window({ draggable: false, fixedPosition: true, map: map });

        this.window_.get$Body().append(this.$name_).append(this.$description_);

        this.listenAt(this.window_).on('change:visible', function () {
          if (!_this2.window_.getVisible()) {
            _this2.setVisible(false); // notifying the featurepopup about the closing of the window
          }
        });

        this.$element_.append(this.window_.get$Element());

        // feature click

        this.listenAt(map.getDefaultInteractions('singleclick')[0]).on('select', function (e) {
          var selected = e.selected.filter(FeaturePopup.canDisplay);
          if (selected.length) {
            _this2.onFeatureClick_(selected[0], e.mapBrowserEvent.coordinate);
            e.target.getFeatures().remove(selected[0]); // remove feature to be able to select feature again
            e.target.changed();
          }
        });

        // feature hover

        this.listenAt(map.getDefaultInteractions('pointermove')[0]).on('select', function (e) {
          var selected = e.selected.filter(FeaturePopup.canDisplay);
          var deselected = e.deselected.filter(FeaturePopup.canDisplay);
          if (selected.length) {
            (0, _jquery2.default)(map.getViewport()).addClass(_globals.cssClasses.clickable);
          } else if (deselected.length) {
            (0, _jquery2.default)(map.getViewport()).removeClass(_globals.cssClasses.clickable);
          }
        });

        // hiding feature Popup if the layer gets hidden or the feature gets removed

        var forEachSource = function forEachSource(layer, source) {
          if (source.getFeatures) {
            _this2.listenAt(source).on('removefeature', function (e) {
              if (e.feature === _this2.getFeature()) {
                _this2.referencingVisibleLayers_.forEach(function (rLay) {
                  if (rLay.getSource() === source) {
                    _this2.removeReferencingLayer_(rLay);
                  }
                });
              }
            });
          }
        };

        var forEachLayer = function forEachLayer(layer) {
          if (layer.getSource) {
            var source = layer.getSource();

            if (source) {
              forEachSource(layer, source);
            }

            _this2.listenAt(layer).on('change:source', function (e) {
              _this2.detachFrom(e.oldValue);
              forEachSource(layer, layer.getSource());
            });

            _this2.listenAt(layer).on('change:visible', function () {
              var source = layer.getSource();
              if (source && source.getFeatures) {
                if (layer.getVisible() === false) {
                  if (source.getFeatures().indexOf(_this2.getFeature()) > -1) {
                    _this2.removeReferencingLayer_(layer);
                  }
                } else {
                  if (source.getFeatures().indexOf(_this2.getFeature()) > -1) {
                    _this2.referencingVisibleLayers_.push(layer);
                  }
                }
              }
            });
          }

          if (layer.getLayers) {
            layer.getLayers().forEach(forEachLayer);
            _this2.listenAt(layer.getLayers()).on('add', function (e) {
              forEachLayer(e.element);
            }).on('remove', function (e) {
              if (e.element.getSource && e.element.getSource()) {
                _this2.detachFrom(e.element.getSource());
              }
              _this2.detachFrom(e.element);
            });
          }
        };

        forEachLayer(map.getLayerGroup());

        map.addOverlay(this.overlay_);

        this.$element_.parent().addClass(this.className_ + '-container');

        // disable scrolling of body and zooming into map while in the feature popup
        this.window_.get$Element().on('mousewheel wheel DOMMouseScroll', function (e) {
          e.stopPropagation();
          e.preventDefault();
        });

        var onMapChangeMobile = function onMapChangeMobile() {
          if (map.get('mobile')) {
            _this2.centerOnPopup_ = false;
          } else {
            _this2.centerOnPopup_ = _this2.centerOnPopupInitial_;
          }
        };

        onMapChangeMobile();
        this.listenAt(map).on('change:mobile', onMapChangeMobile);

        // limiting size

        map.once('postrender', function () {
          _this2.window_.updateSize();
        });
      }

      this.map__ = map;
    }

    /**
     * @param {ol.Feature} feature
     * @param {ol.Coordinate} coordinate
     * @private
     */

  }, {
    key: 'onFeatureClick_',
    value: function onFeatureClick_(feature) {
      var _this3 = this;

      var coordinate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

      this.referencingVisibleLayers_ = [];

      this.getMap().getLayerGroup().recursiveForEach(function (layer) {
        if (layer.getVisible() && layer.getSource && layer.getSource().getFeatures) {
          if (layer.getSource().getFeatures().indexOf(feature) > -1) {
            _this3.referencingVisibleLayers_.push(layer);
          }
        }
      });

      this.setFeature(feature, coordinate);
      this.setVisible(true);

      if (this.centerOnPopup_) {
        this.centerMapOnPopup();
      }
    }

    /**
     * @param {VectorLayer} layer
     * @private
     */

  }, {
    key: 'removeReferencingLayer_',
    value: function removeReferencingLayer_(layer) {
      this.referencingVisibleLayers_.splice(this.referencingVisibleLayers_.indexOf(layer), 1);
      if (this.referencingVisibleLayers_.length === 0) {
        this.setVisible(false);
      }
    }

    /**
     * @returns {G4UMap}
     */

  }, {
    key: 'getMap',
    value: function getMap() {
      return this.map__;
    }

    /**
     * @returns {null|ol.Feature}
     */

  }, {
    key: 'getFeature',
    value: function getFeature() {
      return this.feature_;
    }

    /**
     * @returns {Array|VectorLayer[]}
     */

  }, {
    key: 'getLayers',
    value: function getLayers() {
      return this.referencingVisibleLayers_;
    }
  }, {
    key: 'updateContent',
    value: function updateContent() {
      var _this4 = this;

      if (this.getMap().get('localiser').isRtl()) {
        this.window_.get$Body().prop('dir', 'rtl');
      } else {
        this.window_.get$Body().prop('dir', undefined);
      }

      this.getMap().get('popupModifiers').apply({
        name: this.getFeature().get('name'),
        description: this.getFeature().get('description')
      }, this.currentPopupModifiers_).then(function (result) {
        if (result.name) {
          _this4.$name_.removeClass(_globals.cssClasses.hidden);
          _this4.$name_.html(result.name);
        } else {
          _this4.$name_.addClass(_globals.cssClasses.hidden);
        }

        if (result.description) {
          _this4.$description_.removeClass(_globals.cssClasses.hidden);
          _this4.$description_.html(result.description);
        } else {
          _this4.$description_.addClass(_globals.cssClasses.hidden);
        }

        _this4.updateSize();

        _this4.dispatchEvent('update:content');
      });
    }

    /**
     * Update the Popup. Call this if something in the feature has changed
     */

  }, {
    key: 'update',
    value: function update() {
      var _this5 = this;

      if (this.getFeature()) {
        var feature = this.getFeature();

        this.$name_.empty();
        this.$description_.empty();

        this.updateContent(); // this produces one unnecessary call to window.updateSize()

        if (!feature.get('observedByPopup')) {
          feature.on('change:name', function () {
            return _this5.updateContent();
          });
          feature.on('change:description', function () {
            return _this5.updateContent();
          });
          feature.set('observedByPopup', true);
        }

        this.once('change:feature', function () {
          feature.un('change:name', function () {
            return _this5.updateContent();
          });
          feature.un('change:description', function () {
            return _this5.updateContent();
          });
          feature.set('observedByPopup', false);
        });

        if (!this.getMap().get('mobile')) {
          var resolution = this.getMap().getView().getResolution();

          this.addIconSizedOffset(this.getFeature(), resolution);
        }

        if (this.referencingVisibleLayers_.length) {
          this.window_.get$Element().attr('data-layer-0', this.referencingVisibleLayers_[0].get('id'));
        }

        // apply default offset

        if (this.getVisible()) {
          setTimeout(function () {
            return _this5.window_.updateSize();
          }, 0);
        }
      }
    }
  }, {
    key: 'updateSize',
    value: function updateSize() {
      if (this.getVisible() && this.window_ && this.window_.updateSize) {
        this.window_.updateSize();
      }
    }

    /**
     * The feature should have a property 'name' and/or 'description' to be shown inside of the popup.
     * @param {ol.Feature} feature
     * @param {ol.Coordinate} coordinate
     * @param {string[]} [optPopupModifiers=[]]
     */

  }, {
    key: 'setFeature',
    value: function setFeature(feature) {
      var _this6 = this;

      var coordinate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var optPopupModifiers = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];

      var oldValue = this.feature_;
      if (feature) {
        this.overlay_.setPosition(coordinate || _openlayers2.default.extent.getCenter(feature.getGeometry().getExtent()));
      }

      if (oldValue !== feature) {
        if (this.feature_) {
          this.feature_.un('change:geometry', this.geometryChangeHandler_);
        }
        this.feature_ = feature;
        this.currentPopupModifiers_ = [].concat(_toConsumableArray(this.defaultPopupModifiers_), _toConsumableArray(optPopupModifiers));
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = this.referencingVisibleLayers_[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var layer = _step.value;

            this.currentPopupModifiers_ = this.currentPopupModifiers_.concat((0, _flatten2.default)(layer.get('popupModifiers')));
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator.return) {
              _iterator.return();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }

        this.geometryChangeHandler_ = function () {
          _this6.overlay_.setPosition(coordinate || _openlayers2.default.extent.getCenter(_this6.feature_.getGeometry().getExtent()));
          if (_this6.getVisible()) {
            _this6.update();
          }
        };
        this.feature_.on('change:geometry', this.geometryChangeHandler_);
        this.dispatchEvent({
          type: 'change:feature',
          oldValue: oldValue,
          key: 'feature'
        });

        this.update();
      }
    }

    /**
     * @returns {boolean}
     */

  }, {
    key: 'getVisible',
    value: function getVisible() {
      return this.visible_;
    }

    /**
     * @param {boolean} visible
     */

  }, {
    key: 'setVisible',
    value: function setVisible(visible) {
      var _this7 = this;

      var oldValue = this.visible_;
      if (oldValue !== visible) {
        if (visible === true && this.getFeature()) {
          this.$element_.removeClass(_globals.cssClasses.hidden);
          this.window_.setVisible(true);
        } else {
          this.$element_.addClass(_globals.cssClasses.hidden);
          this.window_.setVisible(false);
        }

        this.visible_ = visible;

        this.dispatchEvent({
          type: 'change:visible',
          oldValue: oldValue,
          key: 'visible'
        });
      }

      if (visible) {
        setTimeout(function () {
          return _this7.window_.updateSize();
        }, 0);
      }
    }

    /**
     * calculates iconSized Offset and applies it
     * @param {ol.Feature} feature
     * @param {number} resolution
     */

  }, {
    key: 'addIconSizedOffset',
    value: function addIconSizedOffset(feature, resolution) {
      var _this8 = this;

      if (this.iconSizedOffset_[0] !== 0 || this.iconSizedOffset_[1] !== 0) {
        var featureStyleFunction = feature.getStyleFunction();
        if (featureStyleFunction) {
          var style = featureStyleFunction.call(feature, resolution)[0];
          if (style) {
            var imageStyle = style.getImage();
            if (imageStyle instanceof _openlayers2.default.style.Icon) {
              new Promise(function (resolve) {
                var img = imageStyle.getImage();
                if (img.complete && img.src) {
                  resolve();
                } else {
                  img.addEventListener('load', function () {
                    _this8.getMap().render(); // initiate styles with size and anchor
                    _this8.getMap().once('postcompose', resolve);
                  });
                  imageStyle.load();
                }
              }).then(function () {
                var iconSize = imageStyle.getSize();

                var totalOffset = [_this8.pixelOffset_[0] + _this8.iconSizedOffset_[0] * iconSize[0] * (imageStyle.getScale() || 1), _this8.pixelOffset_[1] + _this8.iconSizedOffset_[1] * iconSize[1] * (imageStyle.getScale() || 1)];

                _this8.overlay_.setOffset(totalOffset);
              });
            }
          }
        }
      }
    }

    /**
     * Centers the map on the popup after all images have been loaded
     */

  }, {
    key: 'centerMapOnPopup',
    value: function centerMapOnPopup(animated) {
      var _this9 = this;

      animated = animated === undefined ? this.animated_ : animated;

      var _centerMap = function _centerMap() {
        _this9.window_.updateSize();
        _this9.getMap().get('move').toPoint(_this9.getCenter(), { animated: animated });
      };

      (0, _utilities.finishAllImages)(this.window_.get$Body()).then(function () {
        // we need to do this trick to find out if map is already visible/started rendering
        if (_this9.getMap().getPixelFromCoordinate([0, 0])) {
          _centerMap();
        } else {
          _this9.getMap().once('postrender', _centerMap);
        }
      });
    }

    /**
     * calculates Center of the Popup. Be careful, this calculation repositions the popup to calculate the center
     * properly and repostions to the initial Position again.
     * This does only work if the popup is already visible!
     * @returns {ol.Coordinate}
     */

  }, {
    key: 'getCenter',
    value: function getCenter() {
      var offset = this.overlay_.getOffset();

      var pixelPosition = this.getMap().getPixelFromCoordinate(this.overlay_.getPosition());

      // apply offset
      pixelPosition[0] += offset[0];
      pixelPosition[1] += offset[1];

      // applay width/height depending on positioning
      var positioning = this.overlay_.getPositioning().split('-');

      var width = this.$element_.outerWidth();
      var height = this.$element_.outerHeight();

      if (positioning[1] === 'left') {
        pixelPosition[0] += width / 2;
      }
      if (positioning[1] === 'right') {
        pixelPosition[0] -= width / 2;
      }

      if (positioning[0] === 'top') {
        pixelPosition[1] += height / 2;
      }
      if (positioning[0] === 'bottom') {
        pixelPosition[1] -= height / 2;
      }

      return this.getMap().getCoordinateFromPixel(pixelPosition);
    }
  }], [{
    key: 'canDisplay',
    value: function canDisplay(feature) {
      return !feature.get('disabled') && (feature.get('name') || feature.get('description') && (0, _jquery2.default)(feature.get('description')).text().match(/\S/));
    }
  }]);

  return FeaturePopup;
}((0, _utilities.mixin)(_openlayers2.default.Object, _ListenerOrganizerMixin.ListenerOrganizerMixin));

/***/ }),
/* 180 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * Gathers function calls made in a specified time or till the main loop is free again and only calls the function once
 */
var FunctionCallBuffer = exports.FunctionCallBuffer = function () {
  /**
   * @param {function} func the function whichs call should be buffered
   * @param {number} [bufferTime=0] time of the buffer. If set to 0 it evaluates as soon as the main loop is free again
   */
  function FunctionCallBuffer(func) {
    var bufferTime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;

    _classCallCheck(this, FunctionCallBuffer);

    /**
     * @type {function}
     * @private
     */
    this.func_ = func;
    /**
     * @type {number}
     * @private
     */
    this.bufferTime_ = bufferTime;

    /**
     * Timeout ID
     * @type {number}
     * @private
     */
    this.timeout_ = -1;
  }

  /**
   * @param {any[]} params
   */


  _createClass(FunctionCallBuffer, [{
    key: "call",
    value: function call() {
      var _this = this;

      for (var _len = arguments.length, params = Array(_len), _key = 0; _key < _len; _key++) {
        params[_key] = arguments[_key];
      }

      clearTimeout(this.timeout_);
      this.timeout_ = setTimeout(function () {
        _this.func_.apply(_this, params);
      }, this.bufferTime_);
    }
  }]);

  return FunctionCallBuffer;
}();

/***/ }),
/* 181 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Attribution = undefined;

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _collection = __webpack_require__(653);

var _Control = __webpack_require__(21);

var _ListenerOrganizerMixin = __webpack_require__(48);

var _utilities = __webpack_require__(5);

var _globals = __webpack_require__(11);

var _html = __webpack_require__(35);

var _GroupLayer = __webpack_require__(73);

__webpack_require__(524);

var _array = __webpack_require__(651);

var _FunctionCallBuffer = __webpack_require__(180);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function groupByChain(col) {
  return {
    groupBy: function groupBy(cb) {
      return groupByChain((0, _collection.groupBy)(col, cb));
    },
    forEach: function forEach(cb) {
      return groupByChain(col.forEach(cb));
    },
    map: function map(cb) {
      return groupByChain((0, _collection.map)(col, cb));
    }
  };
}

var Attribution = exports.Attribution = function (_mixin) {
  _inherits(Attribution, _mixin);

  function Attribution(options) {
    _classCallCheck(this, Attribution);

    options.className = options.className || 'g4u-attribution';
    options.singleButton = false;
    options.element = (0, _jquery2.default)('<div>').get(0);

    var _this = _possibleConstructorReturn(this, (Attribution.__proto__ || Object.getPrototypeOf(Attribution)).call(this, options));

    _this.setTipLabel(_this.getTipLabel() || _this.getLocaliser().localiseUsingDictionary('Attribution tipLabel'));

    /**
     * Pairs of layer title and attribution
     * @type {Array.<[string, string]>}
     * @private
     */
    _this.visibleAttributions_ = [];

    _this.createStaticHTML(options);

    _this.setCollapsed(options.collapsed === true);

    _this.updateListCallBuffer = new _FunctionCallBuffer.FunctionCallBuffer(function () {
      return _this.updateList();
    });
    return _this;
  }

  _createClass(Attribution, [{
    key: 'setCollapsed',
    value: function setCollapsed(collapsed, silent) {
      var oldValue = this.collapsed_;
      if (oldValue !== collapsed) {
        this.collapsed_ = collapsed;
        this.dispatchEvent({
          type: 'change:collapsed',
          oldValue: oldValue
        });
        if (!silent) {
          this.dispatchEvent('change:size');
        }
        this.get$Element().toggleClass(_globals.cssClasses.collapsed, collapsed);
      }
    }
  }, {
    key: 'getCollapsed',
    value: function getCollapsed() {
      return this.collapsed_;
    }
  }, {
    key: 'createStaticHTML',
    value: function createStaticHTML(options) {
      var _this2 = this;

      var $button = (0, _jquery2.default)('<button>').on('click', function () {
        _this2.setCollapsed(!_this2.getCollapsed());
      });
      (0, _html.addTooltip)($button, this.getTipLabel());

      this.$list_ = (0, _jquery2.default)('<ul>');

      this.get$Element().append($button).append(this.$list_);

      /**
       * @type {boolean}
       * @private
       */
      this.showPoweredBy_ = options.poweredBy !== false;
      if (this.showPoweredBy_) {
        var content = options.poweredBy === undefined ? '<a href="https://github.com/KlausBenndorf/guide4you" target="_blank">Guide4You</a>' : this.getLocaliser().selectL10N(options.poweredBy);

        if (!Array.isArray(content)) {
          content = [content];
        }

        /**
         * @type {jQuery}
         * @private
         */
        this.$poweredBy_ = content.map(function (c) {
          return (0, _jquery2.default)('<li>').append(c).addClass(_this2.className_ + '-poweredby');
        });
      }
    }
  }, {
    key: 'updateList',
    value: function updateList() {
      var _this3 = this;

      this.scanLayers();

      this.$list_.empty();
      if (this.showPoweredBy_) {
        this.$list_.append(this.$poweredBy_);
      }

      groupByChain(this.visibleAttributions_).groupBy(function (_ref) {
        var _ref2 = _slicedToArray(_ref, 2),
            layerTitle = _ref2[0],
            attribution = _ref2[1];

        return layerTitle;
      }) // -> { layerTitle: [[layerTitle, attribution]*] }
      .map(function (val, key) {
        return [key, val.map(function (p) {
          return p[1];
        })];
      }) // -> [[layerTitle, attribution*]*]
      .groupBy(function (_ref3) {
        var _ref4 = _slicedToArray(_ref3, 2),
            layerTitle = _ref4[0],
            attributions = _ref4[1];

        attributions = (0, _array.uniq)(attributions);
        if (attributions.length === 1) {
          return attributions[0];
        } else {
          return attributions.join(' & ');
        }
      }).map(function (val, key) {
        return [val.map(function (p) {
          return p[0];
        }), key];
      }).forEach(function (_ref5) {
        var _ref6 = _slicedToArray(_ref5, 2),
            layerTitles = _ref6[0],
            attributionText = _ref6[1];

        var text = void 0;
        if (layerTitles.length === 1) {
          text = layerTitles[0];
        } else {
          text = layerTitles.slice(0, -1).join(', ') + ' & ' + layerTitles[layerTitles.length - 1];
        }
        text += ': ' + attributionText;
        _this3.$list_.append((0, _jquery2.default)('<li>').html(text));
        if (!_this3.getCollapsed()) {
          _this3.dispatchEvent('change:size');
        }
      });
    }
  }, {
    key: 'scanLayers',
    value: function scanLayers() {
      if (this.getMap()) {
        this.visibleAttributions_ = [];
        this.scanLayer(this.getMap().getLayerGroup());
      }
    }
  }, {
    key: 'scanLayer',
    value: function scanLayer(layer) {
      var _this4 = this;

      var layerTitle = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;

      if (layer.getVisible()) {
        if (layer.getLayers) {
          var silentGroup = !(layer instanceof _GroupLayer.GroupLayer);
          layer.getLayers().forEach(function (l) {
            return _this4.scanLayer(l, silentGroup ? layer.get('title') : null);
          });
        } else {
          if (layer.getVisible()) {
            var label = layer.isBaseLayer ? this.getLocaliser().localiseUsingDictionary('Attribution baseLayerLabel') : layerTitle || layer.get('title');
            this.addLayer(layer, label);
          }
        }
      }
    }
  }, {
    key: 'attachListeners',
    value: function attachListeners(layer) {
      var _this5 = this;

      if (layer.getLayers) {
        layer.getLayers().forEach(function (l) {
          return _this5.attachListeners(l);
        });
        this.listenAt(layer.getLayers()).on('add', function (e) {
          _this5.attachListeners(e.element);
          _this5.updateListCallBuffer.call();
        }).on('remove', function (e) {
          _this5.detachFrom(e.element);
          _this5.updateListCallBuffer.call();
        });
      }

      if (!(layer instanceof _GroupLayer.GroupLayer)) {
        this.listenAt(layer).on('change:visible', function () {
          _this5.updateListCallBuffer.call();
        }).on('change:source', function () {
          if (layer.getVisible()) {
            _this5.updateListCallBuffer.call();
          }
        });
      }
    }
  }, {
    key: 'addLayer',
    value: function addLayer(layer, label) {
      if (layer.getSource && layer.getSource()) {
        var attributions = layer.getSource().getAttributions();
        if (attributions) {
          var _iteratorNormalCompletion = true;
          var _didIteratorError = false;
          var _iteratorError = undefined;

          try {
            for (var _iterator = attributions[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
              var attribution = _step.value;

              this.visibleAttributions_.push([label, attribution.getHTML()]);
            }
          } catch (err) {
            _didIteratorError = true;
            _iteratorError = err;
          } finally {
            try {
              if (!_iteratorNormalCompletion && _iterator.return) {
                _iterator.return();
              }
            } finally {
              if (_didIteratorError) {
                throw _iteratorError;
              }
            }
          }
        }
      }
    }
  }, {
    key: 'updateRtl',
    value: function updateRtl() {
      if (this.getMap().get('localiser').isRtl()) {
        this.$list_.prop('dir', 'rtl');
      } else {
        this.$list_.prop('dir', undefined);
      }
    }
  }, {
    key: 'setMap',
    value: function setMap(map) {
      var _this6 = this;

      if (this.getMap()) {
        this.visibleAttributions_ = [];
        this.detachAllListeners();
      }

      _get(Attribution.prototype.__proto__ || Object.getPrototypeOf(Attribution.prototype), 'setMap', this).call(this, map);

      if (map) {
        setTimeout(function () {
          _this6.attachListeners(map.getLayerGroup());
          _this6.updateListCallBuffer.call();
          _this6.updateRtl();
          _this6.listenAt(map.get('localiser')).on('change:language', function () {
            _this6.updateRtl();
          });
        }, 0);
      }
    }
  }]);

  return Attribution;
}((0, _utilities.mixin)(_Control.Control, _ListenerOrganizerMixin.ListenerOrganizerMixin));

/***/ }),
/* 182 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ControlLogicMixin = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _globals = __webpack_require__(11);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * This class contains logic which should be part of any Control in the Software. Any custom controls
 * should inherit from Control which inherits from this class AND from ol.cont
 */
var ControlLogicMixin = exports.ControlLogicMixin = function () {
  function ControlLogicMixin() {
    _classCallCheck(this, ControlLogicMixin);
  }

  _createClass(ControlLogicMixin, [{
    key: 'initialize',

    /**
     * @param {g4uControlOptions} options
     */
    value: function initialize() {
      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      /**
       * @type {string}
       * @private
       */
      this.className_ = options.hasOwnProperty('className') ? options.className : '';

      if (options.hasOwnProperty('target')) {
        var $target = void 0;
        if (typeof options.target === 'string' && options.target[0] !== '#') {
          $target = (0, _jquery2.default)('#' + options.target);
        } else {
          $target = (0, _jquery2.default)(options.target);
        }
        this.set$Target($target);
      }

      if (options.hasOwnProperty('element')) {
        (0, _jquery2.default)(options.element).addClass(this.className_).addClass('ol-unselectable ol-control');
      }

      /**
       * @type {boolean}
       */
      this.singleButton = options.singleButton === true;
      if (this.singleButton) {
        (0, _jquery2.default)(options.element).addClass(_globals.cssClasses.mainButton);
      }

      /**
       * @type {string|undefined}
       * @private
       */
      this.controlName_ = options.controlName;

      /**
       * @type {boolean}
       * @private
       */
      this.windowed_ = options.hasOwnProperty('windowed') ? options.windowed : false;

      /**
       * @type {L10N}
       * @private
       */
      this.localiser_ = options.localiser;

      /**
       * @type {string|undefined}
       * @private
       */
      this.title_ = options.hasOwnProperty('title') ? this.getLocaliser().selectL10N(options.title) : undefined;

      /**
       * @type {string|undefined}
       * @private
       */
      this.tipLabel_ = options.hasOwnProperty('tipLabel') ? this.getLocaliser().selectL10N(options.tipLabel) : undefined;

      /**
       * @type {string[]| string}
       * @private
       */
      this.float_ = options.float === undefined ? ['top', 'left'] : options.float;

      /**
       * @type {number}
       * @private
       */
      this.importance_ = options.importance || 0;

      /**
       * @type {boolean}
       * @private
       */
      this.visible_ = true;
    }

    /**
     * Returns the floating directions of the control
     * @returns {string[]|string}
     */

  }, {
    key: 'getFloat',
    value: function getFloat() {
      return this.float_;
    }

    /**
     * @returns {number}
     */

  }, {
    key: 'getImportance',
    value: function getImportance() {
      return this.importance_;
    }

    /**
     * @returns {L10N}
     */

  }, {
    key: 'getLocaliser',
    value: function getLocaliser() {
      return this.localiser_;
    }

    /**
     * Returns true if the element consists only of a single button
     * @returns {Boolean} element it is created in
     */

  }, {
    key: 'isSingleButton',
    value: function isSingleButton() {
      return this.singleButton;
    }

    /**
     * @returns {boolean}
     */

  }, {
    key: 'isWindowed',
    value: function isWindowed() {
      return this.windowed_;
    }

    /**
     * Returns the name of the control if given to the constructor
     * @returns {string}
     */

  }, {
    key: 'getControlName',
    value: function getControlName() {
      return this.controlName_;
    }

    /**
     * Returns the title of the control if given to the constructor
     * @returns {string}
     */

  }, {
    key: 'getTitle',
    value: function getTitle() {
      return this.title_;
    }

    /**
     * @param {Localizable} title
     */

  }, {
    key: 'setTitle',
    value: function setTitle(title) {
      this.title_ = this.getLocaliser().selectL10N(title);
    }

    /**
     * Returns the tipLabel of the control if given to the constructor
     * @returns {string} title
     */

  }, {
    key: 'getTipLabel',
    value: function getTipLabel() {
      return this.tipLabel_;
    }

    /**
     * @param {Localizable} tipLabel
     */

  }, {
    key: 'setTipLabel',
    value: function setTipLabel(tipLabel) {
      this.tipLabel_ = this.getLocaliser().selectL10N(tipLabel);
    }

    /**
     * Returns the element of the control
     * @returns {jQuery} element it is created in
     */

  }, {
    key: 'get$Element',
    value: function get$Element() {
      return (0, _jquery2.default)(this.element);
    }

    /**
     * Returns the target of the control
     * @returns {jQuery} element it is created in
     */

  }, {
    key: 'get$Target',
    value: function get$Target() {
      if (this.catched$Target_) {
        return this.catched$Target_;
      } else if (this.getMap()) {
        this.catched$Target_ = (0, _jquery2.default)(this.getMap().getViewport()).children('.ol-overlaycontainer-stopevent');
        return this.catched$Target_;
      }
    }

    /**
     * Returns the CSS-className of the control
     * @returns {string} CSS-className
     */

  }, {
    key: 'getClassName',
    value: function getClassName() {
      return this.className_;
    }

    /**
     * Sets a new target for the control
     * @param {jQuery} $target element it is moved to
     */

  }, {
    key: 'set$Target',
    value: function set$Target($target) {
      /**
       * @type {jQuery}
       * @private
       */
      this.catched$Target_ = $target;
      this.setTarget($target[0]);
      $target.append(this.get$Element());
    }

    /**
     * @param {boolean} visible
     */

  }, {
    key: 'setVisible',
    value: function setVisible(visible) {
      if (visible !== this.visible_) {
        this.get$Element().toggleClass(_globals.cssClasses.hidden, !visible);
        this.visible_ = visible;
        this.dispatchEvent('change:visible');
      }
    }

    /**
     * @returns {boolean}
     */

  }, {
    key: 'getVisible',
    value: function getVisible() {
      return this.visible_;
    }
  }]);

  return ControlLogicMixin;
}();

/***/ }),
/* 183 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MeasurementButton = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _Control = __webpack_require__(21);

var _globals = __webpack_require__(11);

var _VectorLayer = __webpack_require__(94);

__webpack_require__(535);

var _utilities = __webpack_require__(5);

var _ActivatableMixin = __webpack_require__(82);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {g4uControlOptions} MeasurementButtonOptions
 * @property {StyleLike} [style='#defaultStyle']
 * @property {string} type geometry type ('LineString', 'Polygon')
 * @property {number} [dimension=1] 1 for lines, 2 for polygons
 * @property {string} [atDrawEnd] if set to 'newMeasurement' the control will start a new measurement after
 *    completing a measurement. if set to 'closeWindow' the window will be closed.
 * @property {boolean} [active=false]
 */

/**
 * Enables the user to draw lines or polygons on the map and displays the length or area.
 */
var MeasurementButton = exports.MeasurementButton = function (_mixin) {
  _inherits(MeasurementButton, _mixin);

  /**
   * @param {MeasurementButtonOptions} options
   */
  function MeasurementButton() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, MeasurementButton);

    options.element = (0, _jquery2.default)('<div>').get(0);
    options.className = options.className || 'g4u-measurement';
    options.singleButton = false;

    /**
     * @type {StyleLike}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (MeasurementButton.__proto__ || Object.getPrototypeOf(MeasurementButton)).call(this, options));

    _this.style_ = options.style || '#defaultStyle';

    if (!options.hasOwnProperty('type')) {
      throw new Error('Measurement needs a type (Polygon, LineString, etc)');
    }

    /**
     * @type {string}
     * @private
     */
    _this.type_ = options.type;

    /**
     * @type {number}
     * @private
     */
    _this.dimension_ = options.dimension || 1;

    _this.setTitle(_this.getTitle() || _this.getLocaliser().localiseUsingDictionary('MeasurementButton dim' + _this.dimension_ + ' title'));
    _this.setTipLabel(_this.getTipLabel() || _this.getLocaliser().localiseUsingDictionary('MeasurementButton dim' + _this.dimension_ + ' tipLabel'));

    /**
     * @type {string|undefined}
     * @private
     */
    _this.atDrawEnd_ = options.atDrawEnd;

    /**
     * @type {number}
     * @private
     */
    _this.value_ = 0;

    /**
     * @type {jQuery}
     * @private
     */
    _this.$valueDisplay_ = (0, _jquery2.default)('<span>').html('0');

    /**
     * @type {jQuery}
     * @private
     */
    _this.$unitPlaceholder_ = (0, _jquery2.default)('<span>');

    _this.on('change:active', function () {
      return _this.handleActiveChange_();
    });
    return _this;
  }

  /**
   * @param {G4UMap} map
   */


  _createClass(MeasurementButton, [{
    key: 'setMap',
    value: function setMap(map) {
      var _this2 = this;

      if (this.getMap()) {
        this.getMap().getLayers().remove(this.layer_);
        this.getMap().removeInteraction(this.drawInteraction_);
      }

      _get(MeasurementButton.prototype.__proto__ || Object.getPrototypeOf(MeasurementButton.prototype), 'setMap', this).call(this, map);

      if (map) {
        this.get$Element().append(this.getLocaliser().localiseUsingDictionary('MeasurementButton dim' + this.dimension_ + ' measured')).append((0, _jquery2.default)('<span>').addClass(this.className_ + '-value').append(this.$valueDisplay_).append('&nbsp;').append(this.$unitPlaceholder_)).append('<br/>').append(this.getLocaliser().localiseUsingDictionary('MeasurementButton doubleClickEndsMeasurement'));

        /**
         * @type {ol.proj.Projection}
         * @private
         */
        this.measurementProjection_ = map.get('measurementProjection');

        if (!this.measurementProjection_) {
          throw new Error('MeasurementButton needs a measurementProjection. This is a global option of the map.');
        }

        if (this.dimension_ === 1) {
          this.$unitPlaceholder_.replaceWith(this.measurementProjection_.getUnits());
        }
        if (this.dimension_ === 2) {
          this.$unitPlaceholder_.replaceWith(this.measurementProjection_.getUnits() + '&sup2;');
        }

        /**
         * @type {ol.TransformFunction}
         * @private
         */
        this.measurementTransform_ = _openlayers2.default.proj.getTransform(map.getView().getProjection(), this.measurementProjection_);

        /**
         * @type {ol.source.Vector}
         * @private
         */
        this.source_ = new _openlayers2.default.source.Vector({
          projection: this.measurementProjection_
        });

        /**
         * @type {VectorLayer}
         * @private
         */
        this.layer_ = new _VectorLayer.VectorLayer({
          source: this.source_
        });

        this.layer_.setStyle(map.get('styling').getStyle(this.style_));
        map.get('styling').manageLayer(this.layer_);

        map.getLayers().insertAt(1, this.layer_); // at 0 the baselayers are

        /**
         * @type {ol.interaction.Draw}
         * @private
         */
        this.drawInteraction_ = new _openlayers2.default.interaction.Draw({
          source: this.source_,
          type: this.type_,
          style: map.get('styling').getStyle(this.style_)
        });

        this.drawInteraction_.setActive(false);

        map.addSupersedingInteraction('singleclick dblclick pointermove', this.drawInteraction_);

        var curFeature = null;

        this.drawInteraction_.on('drawstart', function (e) {
          _this2.clear();
          curFeature = e.feature;
          _this2.dispatchEvent('measurement');
        });

        map.on('click', function () {
          if (_this2.getActive()) {
            var geometry = curFeature.getGeometry().clone();
            geometry.applyTransform(_this2.measurementTransform_);
            if (_this2.dimension_ === 1) {
              _this2.setValue(geometry.getLength());
            } else if (_this2.dimension_ === 2) {
              _this2.setValue(geometry.getArea());
            }
          }
        });

        (0, _jquery2.default)(map.getViewport()).parent().on('keydown', function (e) {
          if (e.which === _globals.keyCodes.ESCAPE && _this2.drawInteraction_.getActive()) {
            _this2.drawInteraction_.finishDrawing();
          }
        });

        this.drawInteraction_.on('drawend', function () {
          switch (_this2.atDrawEnd_) {
            case 'newMeasurement':
              break;
            case 'closeWindow':
              _this2.setActive(false);
              break;
            default:
              _this2.drawInteraction_.setActive(false);
          }
        });

        this.activateOnMapChange();
      }
    }

    /**
     * @returns {number}
     */

  }, {
    key: 'getValue',
    value: function getValue() {
      return this.value_;
    }

    /**
     * @param {number} value
     */

  }, {
    key: 'setValue',
    value: function setValue(value) {
      this.value_ = value;
      this.$valueDisplay_.html('' + Math.round(value));
      this.changed();
    }

    /**
     * @returns {string}
     */

  }, {
    key: 'getType',
    value: function getType() {
      return this.type_;
    }
  }, {
    key: 'handleActiveChange_',
    value: function handleActiveChange_() {
      var active = this.getActive();

      this.layer_.setVisible(active);

      if (active) {
        if (this.getMap().get('localiser').isRtl()) {
          this.get$Element().prop('dir', 'rtl');
        } else {
          this.get$Element().prop('dir', undefined);
        }
        var popup = this.getMap().get('featurePopup');
        if (popup) {
          popup.setVisible(false);
        }
        (0, _jquery2.default)(this.getMap().getViewport()).addClass(_globals.cssClasses.crosshair);

        this.clear();
        this.drawInteraction_.setActive(true);
      } else {
        (0, _jquery2.default)(this.getMap().getViewport()).removeClass(_globals.cssClasses.crosshair);

        this.drawInteraction_.setActive(false);
      }
    }

    /**
     * Clears any measurement
     */

  }, {
    key: 'clear',
    value: function clear() {
      this.source_.clear();
      this.setValue(0);
    }
  }]);

  return MeasurementButton;
}((0, _utilities.mixin)(_Control.Control, _ActivatableMixin.ActivatableMixin));

/***/ }),
/* 184 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PrintButton = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _Control2 = __webpack_require__(21);

var _html = __webpack_require__(35);

var _globals = __webpack_require__(11);

__webpack_require__(540);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var PrintButton = exports.PrintButton = function (_Control) {
  _inherits(PrintButton, _Control);

  /**
   * @param {g4uControlOptions} options
   */
  function PrintButton() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, PrintButton);

    options.className = options.className || 'g4u-printbutton';
    options.element = (0, _jquery2.default)('<button>').get(0);

    var _this = _possibleConstructorReturn(this, (PrintButton.__proto__ || Object.getPrototypeOf(PrintButton)).call(this, options));

    _this.get$Element().addClass(_this.className_).addClass(_globals.cssClasses.mainButton).html(_this.getLocaliser().localiseUsingDictionary('PrintButton title'));

    (0, _html.addTooltip)(_this.get$Element(), _this.getLocaliser().localiseUsingDictionary('PrintButton tipLabel'));

    _this.get$Element().on('click', function () {
      return _this.onClick_();
    });
    return _this;
  }

  /**
   * @private
   */


  _createClass(PrintButton, [{
    key: 'onClick_',
    value: function onClick_() {
      var setDivSize = function setDivSize(div, mapSize) {
        (0, _jquery2.default)(div).innerWidth(mapSize[0]);
        (0, _jquery2.default)(div).innerHeight(mapSize[1]);
      };

      //
      // Variant A: Create a new window and copy the canvas over there. This raises security issues in IE.
      //
      // Variant B: Apply a special css class to the body that hides everything except the map for @media print
      //    DOES NOT WORK
      //      -> doesn't work because hiding everything will hide the parents of the map, too
      //
      // Variant C: Create a new body and switching it with the old body for printing
      //      -> This heavily manipulates the existing DOM-Structure and it
      //        relies on the ol-viewport div being the only child of its parent.
      //        works in IE!
      //
      // Variant D: Convert everything to a pdf
      //    IMPLEMENTED IN MODULE
      //      -> jsPDF Print Module
      //
      // Variant E: Add a function to reproduce a map in its current state on another page
      //    NOT IMPLEMENTED
      //      -> some work, but maybe useful for other functions, too
      //

      var isMapCanvasTainted = function isMapCanvasTainted() {
        // Needs to be looked into
        try {
          var viewport = this.getMap().getViewport();
          var srcCanvas = viewport.getElementsByTagName('canvas')[0];
          srcCanvas.getContext('2d').getImageData(1, 1, 1, 1);
          return false;
        } catch (e) {
          return true;
        }
      };

      //
      // We check if we can use variant a, if we cant, we use variant c
      //

      if (!isMapCanvasTainted()) {
        //
        // Variant A: Creating a new window and copying the canvas over there. This raises security issues in IE.
        //

        // new window
        var newWindow = window.open('', '_blank');

        var jStyleDiv = (0, _jquery2.default)('<div>').append((0, _jquery2.default)('style').clone()).append((0, _jquery2.default)('link[type="text/css"]').clone());

        // copying the map
        var viewport = this.getMap().getViewport();
        var mapClone = viewport.parentNode.cloneNode(true);
        setDivSize(mapClone, this.getMap().getSize());
        var srcCanvas = viewport.getElementsByTagName('canvas')[0];
        var destCanvas = mapClone.getElementsByTagName('canvas')[0];
        var destContext = destCanvas.getContext('2d');
        destContext.drawImage(srcCanvas, 0, 0);
        var newdoc = newWindow.document;

        // writing the document
        newdoc.open();
        newdoc.write('<!doctype html>');
        newdoc.write('<html>');
        newdoc.write('<head>');
        newdoc.write('<title>');
        newdoc.write(this.getLocaliser().localiseUsingDictionary('PrintButton windowTitle'));
        newdoc.write('</title>');
        newdoc.write(jStyleDiv.html());
        newdoc.write('<script type="text/javascript">');
        newdoc.write('window.onload = function () {\n');
        newdoc.write('\twindow.focus();\n');
        newdoc.write('\tsetTimeout( function () {\n'); // we need to wait till the map is appended
        newdoc.write('\t\twindow.print();\n');
        newdoc.write('\t\twindow.close();\n');
        newdoc.write('\t}, 50);\n');
        newdoc.write('};');
        newdoc.write('</script>');
        newdoc.write('</head>');
        newdoc.write('</html>');
        newdoc.close();

        newWindow.onload = function () {
          newdoc.getElementsByTagName('body')[0].appendChild(mapClone);
        };

        newWindow.focus();
      } else {
        //
        // Variant C: Creating a new body and switching it with the old body for printing
        //

        var $mapViewport = (0, _jquery2.default)(this.getMap().getViewport());
        var $mapParent = $mapViewport.parent();
        var $mapContainer = $mapParent.clone().empty().append($mapViewport);
        setDivSize($mapContainer, this.getMap().getSize());
        var $oldbody = (0, _jquery2.default)('body');
        var $newbody = (0, _jquery2.default)('<body>').append($mapContainer);
        document.body = $newbody.get(0);
        window.print();
        document.body = $oldbody.get(0);
        $mapParent.append($mapViewport);
      }

      this.dispatchEvent('click');
    }
  }]);

  return PrintButton;
}(_Control2.Control);

/***/ }),
/* 185 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.WindowDecorator = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _Control2 = __webpack_require__(21);

var _Window = __webpack_require__(93);

var _html = __webpack_require__(35);

var _globals = __webpack_require__(11);

__webpack_require__(546);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {g4uControlOptions} WindowDecoratorOptions
 * @property {Control} component
 */

/**
 * This class provides an easy wrap around an control to provide a button to open the control inside of a window.
 * If the child control has a setActive method it is called upon opening and closing the window.
 */
var WindowDecorator = exports.WindowDecorator = function (_Control) {
  _inherits(WindowDecorator, _Control);

  /**
   * @param {WindowDecoratorOptions} options
   */
  function WindowDecorator() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, WindowDecorator);

    options.element = (0, _jquery2.default)('<div>').addClass('g4u-window-decorator').get(0);
    options.singleButton = false;
    options.className = options.component.getClassName();
    options.windowed = true;

    /**
     * @type {jQuery}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (WindowDecorator.__proto__ || Object.getPrototypeOf(WindowDecorator)).call(this, options));

    _this.$button_ = (0, _jquery2.default)('<button>').addClass(_globals.cssClasses.mainButton);

    _this.get$Element().append(_this.$button_);

    /**
     * @type {Control}
     * @private
     */
    _this.component_ = options.component;
    _this.component_.get$Element().addClass('g4u-window-component');

    _this.$button_.addClass(_globals.cssClasses.hasTooltip).html(_this.component_.getTitle());
    (0, _html.addTooltip)(_this.$button_, _this.component_.getTipLabel());
    return _this;
  }

  /**
   * @returns {Control}
   */


  _createClass(WindowDecorator, [{
    key: 'getComponent',
    value: function getComponent() {
      return this.component_;
    }

    /**
     * @param {G4UMap} map
     */

  }, {
    key: 'setMap',
    value: function setMap(map) {
      var _this2 = this;

      _get(WindowDecorator.prototype.__proto__ || Object.getPrototypeOf(WindowDecorator.prototype), 'setMap', this).call(this, map);

      if (this.getMap()) {
        this.getMap().removeControl(this.component_);
      }

      if (map) {
        map.addControl(this.component_);

        /**
         * @type {Window}
         * @private
         */
        this.window_ = new _Window.Window({ map: map });

        this.component_.on('change', function () {
          _this2.window_.updateSize();
          _this2.window_.getInFront();
        });

        this.window_.get$Body().append(this.component_.get$Element());

        if (this.component_.setActive) {
          if (this.component_.getActive()) {
            setTimeout(function () {
              return _this2.setWindowVisible(true);
            }, 0);
            this.$button_.addClass(_globals.cssClasses.active);
          }

          this.$button_.on('click touch', function () {
            _this2.component_.setActive(!_this2.component_.getActive());
          });

          this.component_.on('change:active', function () {
            var active = _this2.component_.getActive();
            setTimeout(function () {
              return _this2.setWindowVisible(active);
            }, 0);
            _this2.$button_.toggleClass(_globals.cssClasses.active, active);
          });

          this.window_.on('change:visible', function (e) {
            if (!_this2.window_.getVisible()) {
              _this2.component_.setActive(false);
            }
            _this2.dispatchEvent({
              type: 'change:windowVisible',
              oldValue: e.oldValue
            });
          });
        } else {
          this.$button_.on('click touch', function () {
            _this2.setWindowVisible(!_this2.window_.getVisible());
          });

          this.window_.on('change:visible', function (e) {
            _this2.dispatchEvent({
              type: 'change:windowVisible',
              oldValue: e.oldValue
            });
          });
        }
        this.get$Element().append(this.window_.get$Element());
      }
    }
  }, {
    key: 'setActive',
    value: function setActive(active) {
      if (this.component_.setActive) {
        this.component_.setActive(active);
      } else {
        this.window_.setVisible(active);
      }
    }

    /**
     * @param {boolean} visible
     */

  }, {
    key: 'setWindowVisible',
    value: function setWindowVisible(visible) {
      this.window_.setVisible(visible);
    }

    /**
     * @returns {boolean}
     */

  }, {
    key: 'getWindowVisible',
    value: function getWindowVisible() {
      return this.window_.getVisible();
    }

    /**
     * @returns {Float}
     */

  }, {
    key: 'getFloat',
    value: function getFloat() {
      return this.component_.getFloat();
    }
  }]);

  return WindowDecorator;
}(_Control2.Control);

/***/ }),
/* 186 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.BaseLayerImage = exports.ImageLayer = undefined;

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _LayerLoadProcessCountMixin = __webpack_require__(130);

var _BaseLayerMixin = __webpack_require__(129);

var _utilities = __webpack_require__(5);

var _ProvideMapMixin = __webpack_require__(83);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var ImageLayer = exports.ImageLayer = (0, _utilities.mixin)(_openlayers2.default.layer.Image, [_ProvideMapMixin.ProvideMapMixin, _LayerLoadProcessCountMixin.LayerLoadProcessCountMixin]);

var BaseLayerImage = exports.BaseLayerImage = (0, _utilities.mixin)(ImageLayer, _BaseLayerMixin.BaseLayerMixin);

/***/ }),
/* 187 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TileLayer = undefined;

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _LayerLoadProcessCountMixin = __webpack_require__(130);

var _utilities = __webpack_require__(5);

var _ProvideMapMixin = __webpack_require__(83);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var TileLayer = exports.TileLayer = (0, _utilities.mixin)(_openlayers2.default.layer.Tile, [_ProvideMapMixin.ProvideMapMixin, _LayerLoadProcessCountMixin.LayerLoadProcessCountMixin]);

/***/ }),
/* 188 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.registerModule = registerModule;
exports.getRegisteredModules = getRegisteredModules;
var modules = [];

function registerModule(module) {
  modules.push(module);
}

function getRegisteredModules() {
  return modules;
}

/***/ }),
/* 189 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TileWMSSource = exports.ImageWMSSource = exports.WMSFeatureInfoMixin = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _utilities = __webpack_require__(5);

var _Debug = __webpack_require__(15);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var WMSFeatureInfoMixin = exports.WMSFeatureInfoMixin = function () {
  function WMSFeatureInfoMixin() {
    _classCallCheck(this, WMSFeatureInfoMixin);
  }

  _createClass(WMSFeatureInfoMixin, [{
    key: 'initialize',
    value: function initialize(options) {
      this.featureInfo_ = options.featureInfo !== undefined;

      if (this.featureInfo_) {
        if (options.featureInfoProxy !== undefined) {
          this.switchedUrl = options.originalUrl.clone();
          this.switchedUrl.proxy = options.featureInfo.proxy;
        }
        this.featureInfoParams_ = options.featureInfo.params || {};
        this.featureInfoCheckable_ = options.featureInfo.checkable;
        this.featureInfoMutators_ = options.featureInfo.mutators;
      }
    }
  }, {
    key: 'getFeatureInfoMutators',
    value: function getFeatureInfoMutators() {
      return this.featureInfoMutators_ || [];
    }
  }, {
    key: 'hasFeatureInfo',
    value: function hasFeatureInfo() {
      return this.featureInfo_;
    }
  }, {
    key: 'isFeatureInfoCheckable',
    value: function isFeatureInfoCheckable() {
      return this.featureInfoCheckable_;
    }
  }, {
    key: 'updateFeatureInfoParams',
    value: function updateFeatureInfoParams(newParams) {
      Object.assign(this.featureInfoParams_, newParams);
    }
  }, {
    key: 'getFeatureInfo',
    value: function getFeatureInfo(coordinate, resolution, projection) {
      var _this = this;

      return new Promise(function (resolve, reject) {
        var params = _this.featureInfoParams_;
        if (!params['QUERY_LAYERS'] || params['QUERY_LAYERS'].length === 0) {
          resolve('');
        } else {
          var normalUrls = void 0;
          if (_this.switchedUrl) {
            normalUrls = _this.getUrls();
            _this.setUrl(_this.switchedUrl.finalize());
          }
          _jquery2.default.ajax({
            url: _this.getGetFeatureInfoUrl(coordinate, resolution, projection, params),
            success: resolve,
            error: reject,
            dataType: 'text'
          });
          if (_this.switchedUrl) {
            _this.setUrls(normalUrls);
          }
        }
      });
    }
  }, {
    key: 'toggleArrayEntries_',
    value: function toggleArrayEntries_(obj, prop, names, toggle) {
      var arr = obj[prop] || [];
      if (toggle) {
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = names[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var name = _step.value;

            if (arr.indexOf(name) < 0) {
              arr.push(name);
            }
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator.return) {
              _iterator.return();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      } else {
        var _iteratorNormalCompletion2 = true;
        var _didIteratorError2 = false;
        var _iteratorError2 = undefined;

        try {
          for (var _iterator2 = names[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
            var _name = _step2.value;

            var index = arr.indexOf(_name);
            if (index >= 0) {
              arr.splice(index, 1);
            }
          }
        } catch (err) {
          _didIteratorError2 = true;
          _iteratorError2 = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion2 && _iterator2.return) {
              _iterator2.return();
            }
          } finally {
            if (_didIteratorError2) {
              throw _iteratorError2;
            }
          }
        }
      }
      obj[prop] = arr;
      return obj;
    }
  }, {
    key: 'toggleWMSLayers',
    value: function toggleWMSLayers(names, toggle) {
      this.updateParams(this.toggleArrayEntries_(this.getParams(), 'LAYERS', names, toggle));
    }
  }, {
    key: 'toggleWMSQueryLayers',
    value: function toggleWMSQueryLayers(names, toggle) {
      this.updateFeatureInfoParams(this.toggleArrayEntries_(this.featureInfoParams_, 'QUERY_LAYERS', names, toggle));
    }
  }, {
    key: 'arrayContainsAll',
    value: function arrayContainsAll(arr, contains) {
      for (var needle in contains) {
        if (arr.indexOf(needle) < 0) {
          return false;
        }
      }
      return true;
    }
  }, {
    key: 'getWMSLayersVisible',
    value: function getWMSLayersVisible(names) {
      return this.arrayContainsAll(this.getParams().LAYERS || [], names);
    }
  }, {
    key: 'getWMSQueryLayersVisible',
    value: function getWMSQueryLayersVisible(names) {
      return this.arrayContainsAll(this.featureInfoParams_.QUERY_LAYERS || [], names);
    }
  }]);

  return WMSFeatureInfoMixin;
}();

var ImageWMSSource = exports.ImageWMSSource = function (_mixin) {
  _inherits(ImageWMSSource, _mixin);

  function ImageWMSSource(options) {
    _classCallCheck(this, ImageWMSSource);

    options.originalUrl = options.url;
    options.url = options.url.finalize();
    options.imageLoadFunction = function (image, src) {
      (0, _utilities.asyncImageLoad)(image.getImage(), options.originalUrl, src).catch(function (err) {
        return _Debug.Debug.error(err);
      });
    };
    return _possibleConstructorReturn(this, (ImageWMSSource.__proto__ || Object.getPrototypeOf(ImageWMSSource)).call(this, options));
  }

  return ImageWMSSource;
}((0, _utilities.mixin)(_openlayers2.default.source.ImageWMS, WMSFeatureInfoMixin));

var TileWMSSource = exports.TileWMSSource = function (_mixin2) {
  _inherits(TileWMSSource, _mixin2);

  function TileWMSSource(options) {
    _classCallCheck(this, TileWMSSource);

    options.originalUrl = options.url;
    options.url = options.url.finalize();
    options.tileLoadFunction = function (tile, src) {
      (0, _utilities.asyncImageLoad)(tile.getImage(), options.originalUrl, src).catch(function (err) {
        return _Debug.Debug.error(err);
      });
    };
    return _possibleConstructorReturn(this, (TileWMSSource.__proto__ || Object.getPrototypeOf(TileWMSSource)).call(this, options));
  }

  return TileWMSSource;
}((0, _utilities.mixin)(_openlayers2.default.source.TileWMS, WMSFeatureInfoMixin));

/***/ }),
/* 190 */
/***/ (function(module, exports, __webpack_require__) {

var cof = __webpack_require__(31);
module.exports = function (it, msg) {
  if (typeof it != 'number' && cof(it) != 'Number') throw TypeError(msg);
  return +it;
};


/***/ }),
/* 191 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)

var toObject = __webpack_require__(16);
var toAbsoluteIndex = __webpack_require__(61);
var toLength = __webpack_require__(14);

module.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {
  var O = toObject(this);
  var len = toLength(O.length);
  var to = toAbsoluteIndex(target, len);
  var from = toAbsoluteIndex(start, len);
  var end = arguments.length > 2 ? arguments[2] : undefined;
  var count = Math.min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);
  var inc = 1;
  if (from < to && to < from + count) {
    inc = -1;
    from += count - 1;
    to += count - 1;
  }
  while (count-- > 0) {
    if (from in O) O[to] = O[from];
    else delete O[to];
    to += inc;
    from += inc;
  } return O;
};


/***/ }),
/* 192 */
/***/ (function(module, exports, __webpack_require__) {

var forOf = __webpack_require__(54);

module.exports = function (iter, ITERATOR) {
  var result = [];
  forOf(iter, false, result.push, result, ITERATOR);
  return result;
};


/***/ }),
/* 193 */
/***/ (function(module, exports, __webpack_require__) {

var aFunction = __webpack_require__(19);
var toObject = __webpack_require__(16);
var IObject = __webpack_require__(85);
var toLength = __webpack_require__(14);

module.exports = function (that, callbackfn, aLen, memo, isRight) {
  aFunction(callbackfn);
  var O = toObject(that);
  var self = IObject(O);
  var length = toLength(O.length);
  var index = isRight ? length - 1 : 0;
  var i = isRight ? -1 : 1;
  if (aLen < 2) for (;;) {
    if (index in self) {
      memo = self[index];
      index += i;
      break;
    }
    index += i;
    if (isRight ? index < 0 : length <= index) {
      throw TypeError('Reduce of empty array with no initial value');
    }
  }
  for (;isRight ? index >= 0 : length > index; index += i) if (index in self) {
    memo = callbackfn(memo, self[index], index, O);
  }
  return memo;
};


/***/ }),
/* 194 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var aFunction = __webpack_require__(19);
var isObject = __webpack_require__(7);
var invoke = __webpack_require__(99);
var arraySlice = [].slice;
var factories = {};

var construct = function (F, len, args) {
  if (!(len in factories)) {
    for (var n = [], i = 0; i < len; i++) n[i] = 'a[' + i + ']';
    // eslint-disable-next-line no-new-func
    factories[len] = Function('F,a', 'return new F(' + n.join(',') + ')');
  } return factories[len](F, args);
};

module.exports = Function.bind || function bind(that /* , ...args */) {
  var fn = aFunction(this);
  var partArgs = arraySlice.call(arguments, 1);
  var bound = function (/* args... */) {
    var args = partArgs.concat(arraySlice.call(arguments));
    return this instanceof bound ? construct(fn, args.length, args) : invoke(fn, args, that);
  };
  if (isObject(fn.prototype)) bound.prototype = fn.prototype;
  return bound;
};


/***/ }),
/* 195 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var dP = __webpack_require__(13).f;
var create = __webpack_require__(56);
var redefineAll = __webpack_require__(59);
var ctx = __webpack_require__(32);
var anInstance = __webpack_require__(53);
var forOf = __webpack_require__(54);
var $iterDefine = __webpack_require__(142);
var step = __webpack_require__(202);
var setSpecies = __webpack_require__(60);
var DESCRIPTORS = __webpack_require__(12);
var fastKey = __webpack_require__(50).fastKey;
var validate = __webpack_require__(77);
var SIZE = DESCRIPTORS ? '_s' : 'size';

var getEntry = function (that, key) {
  // fast case
  var index = fastKey(key);
  var entry;
  if (index !== 'F') return that._i[index];
  // frozen object case
  for (entry = that._f; entry; entry = entry.n) {
    if (entry.k == key) return entry;
  }
};

module.exports = {
  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {
    var C = wrapper(function (that, iterable) {
      anInstance(that, C, NAME, '_i');
      that._t = NAME;         // collection type
      that._i = create(null); // index
      that._f = undefined;    // first entry
      that._l = undefined;    // last entry
      that[SIZE] = 0;         // size
      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);
    });
    redefineAll(C.prototype, {
      // 23.1.3.1 Map.prototype.clear()
      // 23.2.3.2 Set.prototype.clear()
      clear: function clear() {
        for (var that = validate(this, NAME), data = that._i, entry = that._f; entry; entry = entry.n) {
          entry.r = true;
          if (entry.p) entry.p = entry.p.n = undefined;
          delete data[entry.i];
        }
        that._f = that._l = undefined;
        that[SIZE] = 0;
      },
      // 23.1.3.3 Map.prototype.delete(key)
      // 23.2.3.4 Set.prototype.delete(value)
      'delete': function (key) {
        var that = validate(this, NAME);
        var entry = getEntry(that, key);
        if (entry) {
          var next = entry.n;
          var prev = entry.p;
          delete that._i[entry.i];
          entry.r = true;
          if (prev) prev.n = next;
          if (next) next.p = prev;
          if (that._f == entry) that._f = next;
          if (that._l == entry) that._l = prev;
          that[SIZE]--;
        } return !!entry;
      },
      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)
      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)
      forEach: function forEach(callbackfn /* , that = undefined */) {
        validate(this, NAME);
        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);
        var entry;
        while (entry = entry ? entry.n : this._f) {
          f(entry.v, entry.k, this);
          // revert to the last existing entry
          while (entry && entry.r) entry = entry.p;
        }
      },
      // 23.1.3.7 Map.prototype.has(key)
      // 23.2.3.7 Set.prototype.has(value)
      has: function has(key) {
        return !!getEntry(validate(this, NAME), key);
      }
    });
    if (DESCRIPTORS) dP(C.prototype, 'size', {
      get: function () {
        return validate(this, NAME)[SIZE];
      }
    });
    return C;
  },
  def: function (that, key, value) {
    var entry = getEntry(that, key);
    var prev, index;
    // change existing entry
    if (entry) {
      entry.v = value;
    // create new entry
    } else {
      that._l = entry = {
        i: index = fastKey(key, true), // <- index
        k: key,                        // <- key
        v: value,                      // <- value
        p: prev = that._l,             // <- previous entry
        n: undefined,                  // <- next entry
        r: false                       // <- removed
      };
      if (!that._f) that._f = entry;
      if (prev) prev.n = entry;
      that[SIZE]++;
      // add to index
      if (index !== 'F') that._i[index] = entry;
    } return that;
  },
  getEntry: getEntry,
  setStrong: function (C, NAME, IS_MAP) {
    // add .keys, .values, .entries, [@@iterator]
    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11
    $iterDefine(C, NAME, function (iterated, kind) {
      this._t = validate(iterated, NAME); // target
      this._k = kind;                     // kind
      this._l = undefined;                // previous
    }, function () {
      var that = this;
      var kind = that._k;
      var entry = that._l;
      // revert to the last existing entry
      while (entry && entry.r) entry = entry.p;
      // get next entry
      if (!that._t || !(that._l = entry = entry ? entry.n : that._t._f)) {
        // or finish the iteration
        that._t = undefined;
        return step(1);
      }
      // return step by kind
      if (kind == 'keys') return step(0, entry.k);
      if (kind == 'values') return step(0, entry.v);
      return step(0, [entry.k, entry.v]);
    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);

    // add [@@species], 23.1.2.2, 23.2.2.2
    setSpecies(NAME);
  }
};


/***/ }),
/* 196 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/DavidBruant/Map-Set.prototype.toJSON
var classof = __webpack_require__(84);
var from = __webpack_require__(192);
module.exports = function (NAME) {
  return function toJSON() {
    if (classof(this) != NAME) throw TypeError(NAME + "#toJSON isn't generic");
    return from(this);
  };
};


/***/ }),
/* 197 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var redefineAll = __webpack_require__(59);
var getWeak = __webpack_require__(50).getWeak;
var anObject = __webpack_require__(3);
var isObject = __webpack_require__(7);
var anInstance = __webpack_require__(53);
var forOf = __webpack_require__(54);
var createArrayMethod = __webpack_require__(37);
var $has = __webpack_require__(22);
var validate = __webpack_require__(77);
var arrayFind = createArrayMethod(5);
var arrayFindIndex = createArrayMethod(6);
var id = 0;

// fallback for uncaught frozen keys
var uncaughtFrozenStore = function (that) {
  return that._l || (that._l = new UncaughtFrozenStore());
};
var UncaughtFrozenStore = function () {
  this.a = [];
};
var findUncaughtFrozen = function (store, key) {
  return arrayFind(store.a, function (it) {
    return it[0] === key;
  });
};
UncaughtFrozenStore.prototype = {
  get: function (key) {
    var entry = findUncaughtFrozen(this, key);
    if (entry) return entry[1];
  },
  has: function (key) {
    return !!findUncaughtFrozen(this, key);
  },
  set: function (key, value) {
    var entry = findUncaughtFrozen(this, key);
    if (entry) entry[1] = value;
    else this.a.push([key, value]);
  },
  'delete': function (key) {
    var index = arrayFindIndex(this.a, function (it) {
      return it[0] === key;
    });
    if (~index) this.a.splice(index, 1);
    return !!~index;
  }
};

module.exports = {
  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {
    var C = wrapper(function (that, iterable) {
      anInstance(that, C, NAME, '_i');
      that._t = NAME;      // collection type
      that._i = id++;      // collection id
      that._l = undefined; // leak store for uncaught frozen objects
      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);
    });
    redefineAll(C.prototype, {
      // 23.3.3.2 WeakMap.prototype.delete(key)
      // 23.4.3.3 WeakSet.prototype.delete(value)
      'delete': function (key) {
        if (!isObject(key)) return false;
        var data = getWeak(key);
        if (data === true) return uncaughtFrozenStore(validate(this, NAME))['delete'](key);
        return data && $has(data, this._i) && delete data[this._i];
      },
      // 23.3.3.4 WeakMap.prototype.has(key)
      // 23.4.3.4 WeakSet.prototype.has(value)
      has: function has(key) {
        if (!isObject(key)) return false;
        var data = getWeak(key);
        if (data === true) return uncaughtFrozenStore(validate(this, NAME)).has(key);
        return data && $has(data, this._i);
      }
    });
    return C;
  },
  def: function (that, key, value) {
    var data = getWeak(anObject(key), true);
    if (data === true) uncaughtFrozenStore(that).set(key, value);
    else data[that._i] = value;
    return that;
  },
  ufstore: uncaughtFrozenStore
};


/***/ }),
/* 198 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray
var isArray = __webpack_require__(100);
var isObject = __webpack_require__(7);
var toLength = __webpack_require__(14);
var ctx = __webpack_require__(32);
var IS_CONCAT_SPREADABLE = __webpack_require__(9)('isConcatSpreadable');

function flattenIntoArray(target, original, source, sourceLen, start, depth, mapper, thisArg) {
  var targetIndex = start;
  var sourceIndex = 0;
  var mapFn = mapper ? ctx(mapper, thisArg, 3) : false;
  var element, spreadable;

  while (sourceIndex < sourceLen) {
    if (sourceIndex in source) {
      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];

      spreadable = false;
      if (isObject(element)) {
        spreadable = element[IS_CONCAT_SPREADABLE];
        spreadable = spreadable !== undefined ? !!spreadable : isArray(element);
      }

      if (spreadable && depth > 0) {
        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;
      } else {
        if (targetIndex >= 0x1fffffffffffff) throw TypeError();
        target[targetIndex] = element;
      }

      targetIndex++;
    }
    sourceIndex++;
  }
  return targetIndex;
}

module.exports = flattenIntoArray;


/***/ }),
/* 199 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = !__webpack_require__(12) && !__webpack_require__(6)(function () {
  return Object.defineProperty(__webpack_require__(135)('div'), 'a', { get: function () { return 7; } }).a != 7;
});


/***/ }),
/* 200 */
/***/ (function(module, exports, __webpack_require__) {

// 20.1.2.3 Number.isInteger(number)
var isObject = __webpack_require__(7);
var floor = Math.floor;
module.exports = function isInteger(it) {
  return !isObject(it) && isFinite(it) && floor(it) === it;
};


/***/ }),
/* 201 */
/***/ (function(module, exports, __webpack_require__) {

// call something on iterator step with safe closing on error
var anObject = __webpack_require__(3);
module.exports = function (iterator, fn, value, entries) {
  try {
    return entries ? fn(anObject(value)[0], value[1]) : fn(value);
  // 7.4.6 IteratorClose(iterator, completion)
  } catch (e) {
    var ret = iterator['return'];
    if (ret !== undefined) anObject(ret.call(iterator));
    throw e;
  }
};


/***/ }),
/* 202 */
/***/ (function(module, exports) {

module.exports = function (done, value) {
  return { value: value, done: !!done };
};


/***/ }),
/* 203 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.16 Math.fround(x)
var sign = __webpack_require__(144);
var pow = Math.pow;
var EPSILON = pow(2, -52);
var EPSILON32 = pow(2, -23);
var MAX32 = pow(2, 127) * (2 - EPSILON32);
var MIN32 = pow(2, -126);

var roundTiesToEven = function (n) {
  return n + 1 / EPSILON - 1 / EPSILON;
};

module.exports = Math.fround || function fround(x) {
  var $abs = Math.abs(x);
  var $sign = sign(x);
  var a, result;
  if ($abs < MIN32) return $sign * roundTiesToEven($abs / MIN32 / EPSILON32) * MIN32 * EPSILON32;
  a = (1 + EPSILON32 / EPSILON) * $abs;
  result = a - (a - $abs);
  // eslint-disable-next-line no-self-compare
  if (result > MAX32 || result != result) return $sign * Infinity;
  return $sign * result;
};


/***/ }),
/* 204 */
/***/ (function(module, exports) {

// 20.2.2.20 Math.log1p(x)
module.exports = Math.log1p || function log1p(x) {
  return (x = +x) > -1e-8 && x < 1e-8 ? x - x * x / 2 : Math.log(1 + x);
};


/***/ }),
/* 205 */
/***/ (function(module, exports) {

// https://rwaldron.github.io/proposal-math-extensions/
module.exports = Math.scale || function scale(x, inLow, inHigh, outLow, outHigh) {
  if (
    arguments.length === 0
      // eslint-disable-next-line no-self-compare
      || x != x
      // eslint-disable-next-line no-self-compare
      || inLow != inLow
      // eslint-disable-next-line no-self-compare
      || inHigh != inHigh
      // eslint-disable-next-line no-self-compare
      || outLow != outLow
      // eslint-disable-next-line no-self-compare
      || outHigh != outHigh
  ) return NaN;
  if (x === Infinity || x === -Infinity) return x;
  return (x - inLow) * (outHigh - outLow) / (inHigh - inLow) + outLow;
};


/***/ }),
/* 206 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 19.1.2.1 Object.assign(target, source, ...)
var getKeys = __webpack_require__(51);
var gOPS = __webpack_require__(104);
var pIE = __webpack_require__(86);
var toObject = __webpack_require__(16);
var IObject = __webpack_require__(85);
var $assign = Object.assign;

// should work with symbols and should have deterministic property order (V8 bug)
module.exports = !$assign || __webpack_require__(6)(function () {
  var A = {};
  var B = {};
  // eslint-disable-next-line no-undef
  var S = Symbol();
  var K = 'abcdefghijklmnopqrst';
  A[S] = 7;
  K.split('').forEach(function (k) { B[k] = k; });
  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;
}) ? function assign(target, source) { // eslint-disable-line no-unused-vars
  var T = toObject(target);
  var aLen = arguments.length;
  var index = 1;
  var getSymbols = gOPS.f;
  var isEnum = pIE.f;
  while (aLen > index) {
    var S = IObject(arguments[index++]);
    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);
    var length = keys.length;
    var j = 0;
    var key;
    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];
  } return T;
} : $assign;


/***/ }),
/* 207 */
/***/ (function(module, exports, __webpack_require__) {

var dP = __webpack_require__(13);
var anObject = __webpack_require__(3);
var getKeys = __webpack_require__(51);

module.exports = __webpack_require__(12) ? Object.defineProperties : function defineProperties(O, Properties) {
  anObject(O);
  var keys = getKeys(Properties);
  var length = keys.length;
  var i = 0;
  var P;
  while (length > i) dP.f(O, P = keys[i++], Properties[P]);
  return O;
};


/***/ }),
/* 208 */
/***/ (function(module, exports, __webpack_require__) {

// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window
var toIObject = __webpack_require__(26);
var gOPN = __webpack_require__(57).f;
var toString = {}.toString;

var windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames
  ? Object.getOwnPropertyNames(window) : [];

var getWindowNames = function (it) {
  try {
    return gOPN(it);
  } catch (e) {
    return windowNames.slice();
  }
};

module.exports.f = function getOwnPropertyNames(it) {
  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));
};


/***/ }),
/* 209 */
/***/ (function(module, exports, __webpack_require__) {

var has = __webpack_require__(22);
var toIObject = __webpack_require__(26);
var arrayIndexOf = __webpack_require__(95)(false);
var IE_PROTO = __webpack_require__(148)('IE_PROTO');

module.exports = function (object, names) {
  var O = toIObject(object);
  var i = 0;
  var result = [];
  var key;
  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);
  // Don't enum bug & hidden keys
  while (names.length > i) if (has(O, key = names[i++])) {
    ~arrayIndexOf(result, key) || result.push(key);
  }
  return result;
};


/***/ }),
/* 210 */
/***/ (function(module, exports, __webpack_require__) {

var getKeys = __webpack_require__(51);
var toIObject = __webpack_require__(26);
var isEnum = __webpack_require__(86).f;
module.exports = function (isEntries) {
  return function (it) {
    var O = toIObject(it);
    var keys = getKeys(O);
    var length = keys.length;
    var i = 0;
    var result = [];
    var key;
    while (length > i) if (isEnum.call(O, key = keys[i++])) {
      result.push(isEntries ? [key, O[key]] : O[key]);
    } return result;
  };
};


/***/ }),
/* 211 */
/***/ (function(module, exports, __webpack_require__) {

// all object keys, includes non-enumerable and symbols
var gOPN = __webpack_require__(57);
var gOPS = __webpack_require__(104);
var anObject = __webpack_require__(3);
var Reflect = __webpack_require__(4).Reflect;
module.exports = Reflect && Reflect.ownKeys || function ownKeys(it) {
  var keys = gOPN.f(anObject(it));
  var getSymbols = gOPS.f;
  return getSymbols ? keys.concat(getSymbols(it)) : keys;
};


/***/ }),
/* 212 */
/***/ (function(module, exports, __webpack_require__) {

var $parseFloat = __webpack_require__(4).parseFloat;
var $trim = __webpack_require__(76).trim;

module.exports = 1 / $parseFloat(__webpack_require__(152) + '-0') !== -Infinity ? function parseFloat(str) {
  var string = $trim(String(str), 3);
  var result = $parseFloat(string);
  return result === 0 && string.charAt(0) == '-' ? -0 : result;
} : $parseFloat;


/***/ }),
/* 213 */
/***/ (function(module, exports, __webpack_require__) {

var $parseInt = __webpack_require__(4).parseInt;
var $trim = __webpack_require__(76).trim;
var ws = __webpack_require__(152);
var hex = /^[-+]?0[xX]/;

module.exports = $parseInt(ws + '08') !== 8 || $parseInt(ws + '0x16') !== 22 ? function parseInt(str, radix) {
  var string = $trim(String(str), 3);
  return $parseInt(string, (radix >>> 0) || (hex.test(string) ? 16 : 10));
} : $parseInt;


/***/ }),
/* 214 */
/***/ (function(module, exports) {

module.exports = function (exec) {
  try {
    return { e: false, v: exec() };
  } catch (e) {
    return { e: true, v: e };
  }
};


/***/ }),
/* 215 */
/***/ (function(module, exports, __webpack_require__) {

var newPromiseCapability = __webpack_require__(146);

module.exports = function (C, x) {
  var promiseCapability = newPromiseCapability.f(C);
  var resolve = promiseCapability.resolve;
  resolve(x);
  return promiseCapability.promise;
};


/***/ }),
/* 216 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/tc39/proposal-string-pad-start-end
var toLength = __webpack_require__(14);
var repeat = __webpack_require__(151);
var defined = __webpack_require__(39);

module.exports = function (that, maxLength, fillString, left) {
  var S = String(defined(that));
  var stringLength = S.length;
  var fillStr = fillString === undefined ? ' ' : String(fillString);
  var intMaxLength = toLength(maxLength);
  if (intMaxLength <= stringLength || fillStr == '') return S;
  var fillLen = intMaxLength - stringLength;
  var stringFiller = repeat.call(fillStr, Math.ceil(fillLen / fillStr.length));
  if (stringFiller.length > fillLen) stringFiller = stringFiller.slice(0, fillLen);
  return left ? stringFiller + S : S + stringFiller;
};


/***/ }),
/* 217 */
/***/ (function(module, exports, __webpack_require__) {

// https://tc39.github.io/ecma262/#sec-toindex
var toInteger = __webpack_require__(41);
var toLength = __webpack_require__(14);
module.exports = function (it) {
  if (it === undefined) return 0;
  var number = toInteger(it);
  var length = toLength(number);
  if (number !== length) throw RangeError('Wrong length!');
  return length;
};


/***/ }),
/* 218 */
/***/ (function(module, exports, __webpack_require__) {

exports.f = __webpack_require__(9);


/***/ }),
/* 219 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var strong = __webpack_require__(195);
var validate = __webpack_require__(77);
var MAP = 'Map';

// 23.1 Map Objects
module.exports = __webpack_require__(96)(MAP, function (get) {
  return function Map() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };
}, {
  // 23.1.3.6 Map.prototype.get(key)
  get: function get(key) {
    var entry = strong.getEntry(validate(this, MAP), key);
    return entry && entry.v;
  },
  // 23.1.3.9 Map.prototype.set(key, value)
  set: function set(key, value) {
    return strong.def(validate(this, MAP), key === 0 ? 0 : key, value);
  }
}, strong, true);


/***/ }),
/* 220 */
/***/ (function(module, exports, __webpack_require__) {

// 21.2.5.3 get RegExp.prototype.flags()
if (__webpack_require__(12) && /./g.flags != 'g') __webpack_require__(13).f(RegExp.prototype, 'flags', {
  configurable: true,
  get: __webpack_require__(98)
});


/***/ }),
/* 221 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var strong = __webpack_require__(195);
var validate = __webpack_require__(77);
var SET = 'Set';

// 23.2 Set Objects
module.exports = __webpack_require__(96)(SET, function (get) {
  return function Set() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };
}, {
  // 23.2.3.1 Set.prototype.add(value)
  add: function add(value) {
    return strong.def(validate(this, SET), value = value === 0 ? 0 : value, value);
  }
}, strong);


/***/ }),
/* 222 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var each = __webpack_require__(37)(0);
var redefine = __webpack_require__(24);
var meta = __webpack_require__(50);
var assign = __webpack_require__(206);
var weak = __webpack_require__(197);
var isObject = __webpack_require__(7);
var fails = __webpack_require__(6);
var validate = __webpack_require__(77);
var WEAK_MAP = 'WeakMap';
var getWeak = meta.getWeak;
var isExtensible = Object.isExtensible;
var uncaughtFrozenStore = weak.ufstore;
var tmp = {};
var InternalMap;

var wrapper = function (get) {
  return function WeakMap() {
    return get(this, arguments.length > 0 ? arguments[0] : undefined);
  };
};

var methods = {
  // 23.3.3.3 WeakMap.prototype.get(key)
  get: function get(key) {
    if (isObject(key)) {
      var data = getWeak(key);
      if (data === true) return uncaughtFrozenStore(validate(this, WEAK_MAP)).get(key);
      return data ? data[this._i] : undefined;
    }
  },
  // 23.3.3.5 WeakMap.prototype.set(key, value)
  set: function set(key, value) {
    return weak.def(validate(this, WEAK_MAP), key, value);
  }
};

// 23.3 WeakMap Objects
var $WeakMap = module.exports = __webpack_require__(96)(WEAK_MAP, wrapper, methods, weak, true, true);

// IE11 WeakMap frozen keys fix
if (fails(function () { return new $WeakMap().set((Object.freeze || Object)(tmp), 7).get(tmp) != 7; })) {
  InternalMap = weak.getConstructor(wrapper, WEAK_MAP);
  assign(InternalMap.prototype, methods);
  meta.NEED = true;
  each(['delete', 'has', 'get', 'set'], function (key) {
    var proto = $WeakMap.prototype;
    var method = proto[key];
    redefine(proto, key, function (a, b) {
      // store frozen objects on internal weakmap shim
      if (isObject(a) && !isExtensible(a)) {
        if (!this._f) this._f = new InternalMap();
        var result = this._f[key](a, b);
        return key == 'set' ? this : result;
      // store all the rest on native weakmap
      } return method.call(this, a, b);
    });
  });
}


/***/ }),
/* 223 */
/***/ (function(module, exports) {

// (c) Dean McNamee <dean@gmail.com>, 2012.
//
// https://github.com/deanm/css-color-parser-js
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to
// deal in the Software without restriction, including without limitation the
// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
// sell copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
// IN THE SOFTWARE.

// http://www.w3.org/TR/css3-color/
var kCSSColorTable = {
  "transparent": [0,0,0,0], "aliceblue": [240,248,255,1],
  "antiquewhite": [250,235,215,1], "aqua": [0,255,255,1],
  "aquamarine": [127,255,212,1], "azure": [240,255,255,1],
  "beige": [245,245,220,1], "bisque": [255,228,196,1],
  "black": [0,0,0,1], "blanchedalmond": [255,235,205,1],
  "blue": [0,0,255,1], "blueviolet": [138,43,226,1],
  "brown": [165,42,42,1], "burlywood": [222,184,135,1],
  "cadetblue": [95,158,160,1], "chartreuse": [127,255,0,1],
  "chocolate": [210,105,30,1], "coral": [255,127,80,1],
  "cornflowerblue": [100,149,237,1], "cornsilk": [255,248,220,1],
  "crimson": [220,20,60,1], "cyan": [0,255,255,1],
  "darkblue": [0,0,139,1], "darkcyan": [0,139,139,1],
  "darkgoldenrod": [184,134,11,1], "darkgray": [169,169,169,1],
  "darkgreen": [0,100,0,1], "darkgrey": [169,169,169,1],
  "darkkhaki": [189,183,107,1], "darkmagenta": [139,0,139,1],
  "darkolivegreen": [85,107,47,1], "darkorange": [255,140,0,1],
  "darkorchid": [153,50,204,1], "darkred": [139,0,0,1],
  "darksalmon": [233,150,122,1], "darkseagreen": [143,188,143,1],
  "darkslateblue": [72,61,139,1], "darkslategray": [47,79,79,1],
  "darkslategrey": [47,79,79,1], "darkturquoise": [0,206,209,1],
  "darkviolet": [148,0,211,1], "deeppink": [255,20,147,1],
  "deepskyblue": [0,191,255,1], "dimgray": [105,105,105,1],
  "dimgrey": [105,105,105,1], "dodgerblue": [30,144,255,1],
  "firebrick": [178,34,34,1], "floralwhite": [255,250,240,1],
  "forestgreen": [34,139,34,1], "fuchsia": [255,0,255,1],
  "gainsboro": [220,220,220,1], "ghostwhite": [248,248,255,1],
  "gold": [255,215,0,1], "goldenrod": [218,165,32,1],
  "gray": [128,128,128,1], "green": [0,128,0,1],
  "greenyellow": [173,255,47,1], "grey": [128,128,128,1],
  "honeydew": [240,255,240,1], "hotpink": [255,105,180,1],
  "indianred": [205,92,92,1], "indigo": [75,0,130,1],
  "ivory": [255,255,240,1], "khaki": [240,230,140,1],
  "lavender": [230,230,250,1], "lavenderblush": [255,240,245,1],
  "lawngreen": [124,252,0,1], "lemonchiffon": [255,250,205,1],
  "lightblue": [173,216,230,1], "lightcoral": [240,128,128,1],
  "lightcyan": [224,255,255,1], "lightgoldenrodyellow": [250,250,210,1],
  "lightgray": [211,211,211,1], "lightgreen": [144,238,144,1],
  "lightgrey": [211,211,211,1], "lightpink": [255,182,193,1],
  "lightsalmon": [255,160,122,1], "lightseagreen": [32,178,170,1],
  "lightskyblue": [135,206,250,1], "lightslategray": [119,136,153,1],
  "lightslategrey": [119,136,153,1], "lightsteelblue": [176,196,222,1],
  "lightyellow": [255,255,224,1], "lime": [0,255,0,1],
  "limegreen": [50,205,50,1], "linen": [250,240,230,1],
  "magenta": [255,0,255,1], "maroon": [128,0,0,1],
  "mediumaquamarine": [102,205,170,1], "mediumblue": [0,0,205,1],
  "mediumorchid": [186,85,211,1], "mediumpurple": [147,112,219,1],
  "mediumseagreen": [60,179,113,1], "mediumslateblue": [123,104,238,1],
  "mediumspringgreen": [0,250,154,1], "mediumturquoise": [72,209,204,1],
  "mediumvioletred": [199,21,133,1], "midnightblue": [25,25,112,1],
  "mintcream": [245,255,250,1], "mistyrose": [255,228,225,1],
  "moccasin": [255,228,181,1], "navajowhite": [255,222,173,1],
  "navy": [0,0,128,1], "oldlace": [253,245,230,1],
  "olive": [128,128,0,1], "olivedrab": [107,142,35,1],
  "orange": [255,165,0,1], "orangered": [255,69,0,1],
  "orchid": [218,112,214,1], "palegoldenrod": [238,232,170,1],
  "palegreen": [152,251,152,1], "paleturquoise": [175,238,238,1],
  "palevioletred": [219,112,147,1], "papayawhip": [255,239,213,1],
  "peachpuff": [255,218,185,1], "peru": [205,133,63,1],
  "pink": [255,192,203,1], "plum": [221,160,221,1],
  "powderblue": [176,224,230,1], "purple": [128,0,128,1],
  "rebeccapurple": [102,51,153,1],
  "red": [255,0,0,1], "rosybrown": [188,143,143,1],
  "royalblue": [65,105,225,1], "saddlebrown": [139,69,19,1],
  "salmon": [250,128,114,1], "sandybrown": [244,164,96,1],
  "seagreen": [46,139,87,1], "seashell": [255,245,238,1],
  "sienna": [160,82,45,1], "silver": [192,192,192,1],
  "skyblue": [135,206,235,1], "slateblue": [106,90,205,1],
  "slategray": [112,128,144,1], "slategrey": [112,128,144,1],
  "snow": [255,250,250,1], "springgreen": [0,255,127,1],
  "steelblue": [70,130,180,1], "tan": [210,180,140,1],
  "teal": [0,128,128,1], "thistle": [216,191,216,1],
  "tomato": [255,99,71,1], "turquoise": [64,224,208,1],
  "violet": [238,130,238,1], "wheat": [245,222,179,1],
  "white": [255,255,255,1], "whitesmoke": [245,245,245,1],
  "yellow": [255,255,0,1], "yellowgreen": [154,205,50,1]}

function clamp_css_byte(i) {  // Clamp to integer 0 .. 255.
  i = Math.round(i);  // Seems to be what Chrome does (vs truncation).
  return i < 0 ? 0 : i > 255 ? 255 : i;
}

function clamp_css_float(f) {  // Clamp to float 0.0 .. 1.0.
  return f < 0 ? 0 : f > 1 ? 1 : f;
}

function parse_css_int(str) {  // int or percentage.
  if (str[str.length - 1] === '%')
    return clamp_css_byte(parseFloat(str) / 100 * 255);
  return clamp_css_byte(parseInt(str));
}

function parse_css_float(str) {  // float or percentage.
  if (str[str.length - 1] === '%')
    return clamp_css_float(parseFloat(str) / 100);
  return clamp_css_float(parseFloat(str));
}

function css_hue_to_rgb(m1, m2, h) {
  if (h < 0) h += 1;
  else if (h > 1) h -= 1;

  if (h * 6 < 1) return m1 + (m2 - m1) * h * 6;
  if (h * 2 < 1) return m2;
  if (h * 3 < 2) return m1 + (m2 - m1) * (2/3 - h) * 6;
  return m1;
}

function parseCSSColor(css_str) {
  // Remove all whitespace, not compliant, but should just be more accepting.
  var str = css_str.replace(/ /g, '').toLowerCase();

  // Color keywords (and transparent) lookup.
  if (str in kCSSColorTable) return kCSSColorTable[str].slice();  // dup.

  // #abc and #abc123 syntax.
  if (str[0] === '#') {
    if (str.length === 4) {
      var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.
      if (!(iv >= 0 && iv <= 0xfff)) return null;  // Covers NaN.
      return [((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8),
              (iv & 0xf0) | ((iv & 0xf0) >> 4),
              (iv & 0xf) | ((iv & 0xf) << 4),
              1];
    } else if (str.length === 7) {
      var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.
      if (!(iv >= 0 && iv <= 0xffffff)) return null;  // Covers NaN.
      return [(iv & 0xff0000) >> 16,
              (iv & 0xff00) >> 8,
              iv & 0xff,
              1];
    }

    return null;
  }

  var op = str.indexOf('('), ep = str.indexOf(')');
  if (op !== -1 && ep + 1 === str.length) {
    var fname = str.substr(0, op);
    var params = str.substr(op+1, ep-(op+1)).split(',');
    var alpha = 1;  // To allow case fallthrough.
    switch (fname) {
      case 'rgba':
        if (params.length !== 4) return null;
        alpha = parse_css_float(params.pop());
        // Fall through.
      case 'rgb':
        if (params.length !== 3) return null;
        return [parse_css_int(params[0]),
                parse_css_int(params[1]),
                parse_css_int(params[2]),
                alpha];
      case 'hsla':
        if (params.length !== 4) return null;
        alpha = parse_css_float(params.pop());
        // Fall through.
      case 'hsl':
        if (params.length !== 3) return null;
        var h = (((parseFloat(params[0]) % 360) + 360) % 360) / 360;  // 0 .. 1
        // NOTE(deanm): According to the CSS spec s/l should only be
        // percentages, but we don't bother and let float or percentage.
        var s = parse_css_float(params[1]);
        var l = parse_css_float(params[2]);
        var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;
        var m1 = l * 2 - m2;
        return [clamp_css_byte(css_hue_to_rgb(m1, m2, h+1/3) * 255),
                clamp_css_byte(css_hue_to_rgb(m1, m2, h) * 255),
                clamp_css_byte(css_hue_to_rgb(m1, m2, h-1/3) * 255),
                alpha];
      default:
        return null;
    }
  }

  return null;
}

try { exports.parseCSSColor = parseCSSColor } catch(e) { }


/***/ }),
/* 224 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 225 */
/***/ (function(module, exports, __webpack_require__) {

var getNative = __webpack_require__(66),
    root = __webpack_require__(46);

/* Built-in method references that are verified to be native. */
var Set = getNative(root, 'Set');

module.exports = Set;


/***/ }),
/* 226 */
/***/ (function(module, exports, __webpack_require__) {

var ListCache = __webpack_require__(110),
    stackClear = __webpack_require__(641),
    stackDelete = __webpack_require__(642),
    stackGet = __webpack_require__(643),
    stackHas = __webpack_require__(644),
    stackSet = __webpack_require__(645);

/**
 * Creates a stack cache object to store key-value pairs.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function Stack(entries) {
  var data = this.__data__ = new ListCache(entries);
  this.size = data.size;
}

// Add methods to `Stack`.
Stack.prototype.clear = stackClear;
Stack.prototype['delete'] = stackDelete;
Stack.prototype.get = stackGet;
Stack.prototype.has = stackHas;
Stack.prototype.set = stackSet;

module.exports = Stack;


/***/ }),
/* 227 */
/***/ (function(module, exports, __webpack_require__) {

var baseRandom = __webpack_require__(238);

/**
 * A specialized version of `_.sample` for arrays.
 *
 * @private
 * @param {Array} array The array to sample.
 * @returns {*} Returns the random element.
 */
function arraySample(array) {
  var length = array.length;
  return length ? array[baseRandom(0, length - 1)] : undefined;
}

module.exports = arraySample;


/***/ }),
/* 228 */
/***/ (function(module, exports) {

/**
 * A specialized version of `_.some` for arrays without support for iteratee
 * shorthands.
 *
 * @private
 * @param {Array} [array] The array to iterate over.
 * @param {Function} predicate The function invoked per iteration.
 * @returns {boolean} Returns `true` if any element passes the predicate check,
 *  else `false`.
 */
function arraySome(array, predicate) {
  var index = -1,
      length = array == null ? 0 : array.length;

  while (++index < length) {
    if (predicate(array[index], index, array)) {
      return true;
    }
  }
  return false;
}

module.exports = arraySome;


/***/ }),
/* 229 */
/***/ (function(module, exports, __webpack_require__) {

var baseAssignValue = __webpack_require__(114),
    eq = __webpack_require__(70);

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Assigns `value` to `key` of `object` if the existing value is not equivalent
 * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * for equality comparisons.
 *
 * @private
 * @param {Object} object The object to modify.
 * @param {string} key The key of the property to assign.
 * @param {*} value The value to assign.
 */
function assignValue(object, key, value) {
  var objValue = object[key];
  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||
      (value === undefined && !(key in object))) {
    baseAssignValue(object, key, value);
  }
}

module.exports = assignValue;


/***/ }),
/* 230 */
/***/ (function(module, exports, __webpack_require__) {

var baseForOwnRight = __webpack_require__(575),
    createBaseEach = __webpack_require__(245);

/**
 * The base implementation of `_.forEachRight` without support for iteratee shorthands.
 *
 * @private
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array|Object} Returns `collection`.
 */
var baseEachRight = createBaseEach(baseForOwnRight, true);

module.exports = baseEachRight;


/***/ }),
/* 231 */
/***/ (function(module, exports, __webpack_require__) {

var baseEach = __webpack_require__(52);

/**
 * The base implementation of `_.filter` without support for iteratee shorthands.
 *
 * @private
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} predicate The function invoked per iteration.
 * @returns {Array} Returns the new filtered array.
 */
function baseFilter(collection, predicate) {
  var result = [];
  baseEach(collection, function(value, index, collection) {
    if (predicate(value, index, collection)) {
      result.push(value);
    }
  });
  return result;
}

module.exports = baseFilter;


/***/ }),
/* 232 */
/***/ (function(module, exports, __webpack_require__) {

var baseIsEqualDeep = __webpack_require__(582),
    isObjectLike = __webpack_require__(71);

/**
 * The base implementation of `_.isEqual` which supports partial comparisons
 * and tracks traversed objects.
 *
 * @private
 * @param {*} value The value to compare.
 * @param {*} other The other value to compare.
 * @param {boolean} bitmask The bitmask flags.
 *  1 - Unordered comparison
 *  2 - Partial comparison
 * @param {Function} [customizer] The function to customize comparisons.
 * @param {Object} [stack] Tracks traversed `value` and `other` objects.
 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
 */
function baseIsEqual(value, other, bitmask, customizer, stack) {
  if (value === other) {
    return true;
  }
  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {
    return value !== value && other !== other;
  }
  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);
}

module.exports = baseIsEqual;


/***/ }),
/* 233 */
/***/ (function(module, exports) {

/**
 * The base implementation of `_.isNaN` without support for number objects.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.
 */
function baseIsNaN(value) {
  return value !== value;
}

module.exports = baseIsNaN;


/***/ }),
/* 234 */
/***/ (function(module, exports, __webpack_require__) {

var isPrototype = __webpack_require__(621),
    nativeKeys = __webpack_require__(634);

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 */
function baseKeys(object) {
  if (!isPrototype(object)) {
    return nativeKeys(object);
  }
  var result = [];
  for (var key in Object(object)) {
    if (hasOwnProperty.call(object, key) && key != 'constructor') {
      result.push(key);
    }
  }
  return result;
}

module.exports = baseKeys;


/***/ }),
/* 235 */
/***/ (function(module, exports, __webpack_require__) {

var baseEach = __webpack_require__(52),
    isArrayLike = __webpack_require__(47);

/**
 * The base implementation of `_.map` without support for iteratee shorthands.
 *
 * @private
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array} Returns the new mapped array.
 */
function baseMap(collection, iteratee) {
  var index = -1,
      result = isArrayLike(collection) ? Array(collection.length) : [];

  baseEach(collection, function(value, key, collection) {
    result[++index] = iteratee(value, key, collection);
  });
  return result;
}

module.exports = baseMap;


/***/ }),
/* 236 */
/***/ (function(module, exports, __webpack_require__) {

var arrayMap = __webpack_require__(27),
    baseIteratee = __webpack_require__(8),
    baseMap = __webpack_require__(235),
    baseSortBy = __webpack_require__(596),
    baseUnary = __webpack_require__(89),
    compareMultiple = __webpack_require__(600),
    identity = __webpack_require__(79);

/**
 * The base implementation of `_.orderBy` without param guards.
 *
 * @private
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.
 * @param {string[]} orders The sort orders of `iteratees`.
 * @returns {Array} Returns the new sorted array.
 */
function baseOrderBy(collection, iteratees, orders) {
  var index = -1;
  iteratees = arrayMap(iteratees.length ? iteratees : [identity], baseUnary(baseIteratee));

  var result = baseMap(collection, function(value, key, collection) {
    var criteria = arrayMap(iteratees, function(iteratee) {
      return iteratee(value);
    });
    return { 'criteria': criteria, 'index': ++index, 'value': value };
  });

  return baseSortBy(result, function(object, other) {
    return compareMultiple(object, other, orders);
  });
}

module.exports = baseOrderBy;


/***/ }),
/* 237 */
/***/ (function(module, exports, __webpack_require__) {

var baseUnset = __webpack_require__(598),
    isIndex = __webpack_require__(67);

/** Used for built-in method references. */
var arrayProto = Array.prototype;

/** Built-in value references. */
var splice = arrayProto.splice;

/**
 * The base implementation of `_.pullAt` without support for individual
 * indexes or capturing the removed elements.
 *
 * @private
 * @param {Array} array The array to modify.
 * @param {number[]} indexes The indexes of elements to remove.
 * @returns {Array} Returns `array`.
 */
function basePullAt(array, indexes) {
  var length = array ? indexes.length : 0,
      lastIndex = length - 1;

  while (length--) {
    var index = indexes[length];
    if (length == lastIndex || index !== previous) {
      var previous = index;
      if (isIndex(index)) {
        splice.call(array, index, 1);
      } else {
        baseUnset(array, index);
      }
    }
  }
  return array;
}

module.exports = basePullAt;


/***/ }),
/* 238 */
/***/ (function(module, exports) {

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeFloor = Math.floor,
    nativeRandom = Math.random;

/**
 * The base implementation of `_.random` without support for returning
 * floating-point numbers.
 *
 * @private
 * @param {number} lower The lower bound.
 * @param {number} upper The upper bound.
 * @returns {number} Returns the random number.
 */
function baseRandom(lower, upper) {
  return lower + nativeFloor(nativeRandom() * (upper - lower + 1));
}

module.exports = baseRandom;


/***/ }),
/* 239 */
/***/ (function(module, exports) {

/**
 * The base implementation of `_.reduce` and `_.reduceRight`, without support
 * for iteratee shorthands, which iterates over `collection` using `eachFunc`.
 *
 * @private
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @param {*} accumulator The initial value.
 * @param {boolean} initAccum Specify using the first or last element of
 *  `collection` as the initial value.
 * @param {Function} eachFunc The function to iterate over `collection`.
 * @returns {*} Returns the accumulated value.
 */
function baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {
  eachFunc(collection, function(value, index, collection) {
    accumulator = initAccum
      ? (initAccum = false, value)
      : iteratee(accumulator, value, index, collection);
  });
  return accumulator;
}

module.exports = baseReduce;


/***/ }),
/* 240 */
/***/ (function(module, exports, __webpack_require__) {

var eq = __webpack_require__(70);

/**
 * The base implementation of `_.sortedUniq` and `_.sortedUniqBy` without
 * support for iteratee shorthands.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {Function} [iteratee] The iteratee invoked per element.
 * @returns {Array} Returns the new duplicate free array.
 */
function baseSortedUniq(array, iteratee) {
  var index = -1,
      length = array.length,
      resIndex = 0,
      result = [];

  while (++index < length) {
    var value = array[index],
        computed = iteratee ? iteratee(value) : value;

    if (!index || !eq(computed, seen)) {
      var seen = computed;
      result[resIndex++] = value === 0 ? 0 : value;
    }
  }
  return result;
}

module.exports = baseSortedUniq;


/***/ }),
/* 241 */
/***/ (function(module, exports) {

/**
 * The base implementation of `_.times` without support for iteratee shorthands
 * or max array length checks.
 *
 * @private
 * @param {number} n The number of times to invoke `iteratee`.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array} Returns the array of results.
 */
function baseTimes(n, iteratee) {
  var index = -1,
      result = Array(n);

  while (++index < n) {
    result[index] = iteratee(index);
  }
  return result;
}

module.exports = baseTimes;


/***/ }),
/* 242 */
/***/ (function(module, exports) {

/**
 * This base implementation of `_.zipObject` which assigns values using `assignFunc`.
 *
 * @private
 * @param {Array} props The property identifiers.
 * @param {Array} values The property values.
 * @param {Function} assignFunc The function to assign values.
 * @returns {Object} Returns the new object.
 */
function baseZipObject(props, values, assignFunc) {
  var index = -1,
      length = props.length,
      valsLength = values.length,
      result = {};

  while (++index < length) {
    var value = index < valsLength ? values[index] : undefined;
    assignFunc(result, props[index], value);
  }
  return result;
}

module.exports = baseZipObject;


/***/ }),
/* 243 */
/***/ (function(module, exports, __webpack_require__) {

var identity = __webpack_require__(79);

/**
 * Casts `value` to `identity` if it's not a function.
 *
 * @private
 * @param {*} value The value to inspect.
 * @returns {Function} Returns cast function.
 */
function castFunction(value) {
  return typeof value == 'function' ? value : identity;
}

module.exports = castFunction;


/***/ }),
/* 244 */
/***/ (function(module, exports, __webpack_require__) {

var isSymbol = __webpack_require__(72);

/**
 * Compares values to sort them in ascending order.
 *
 * @private
 * @param {*} value The value to compare.
 * @param {*} other The other value to compare.
 * @returns {number} Returns the sort order indicator for `value`.
 */
function compareAscending(value, other) {
  if (value !== other) {
    var valIsDefined = value !== undefined,
        valIsNull = value === null,
        valIsReflexive = value === value,
        valIsSymbol = isSymbol(value);

    var othIsDefined = other !== undefined,
        othIsNull = other === null,
        othIsReflexive = other === other,
        othIsSymbol = isSymbol(other);

    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||
        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||
        (valIsNull && othIsDefined && othIsReflexive) ||
        (!valIsDefined && othIsReflexive) ||
        !valIsReflexive) {
      return 1;
    }
    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||
        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||
        (othIsNull && valIsDefined && valIsReflexive) ||
        (!othIsDefined && valIsReflexive) ||
        !othIsReflexive) {
      return -1;
    }
  }
  return 0;
}

module.exports = compareAscending;


/***/ }),
/* 245 */
/***/ (function(module, exports, __webpack_require__) {

var isArrayLike = __webpack_require__(47);

/**
 * Creates a `baseEach` or `baseEachRight` function.
 *
 * @private
 * @param {Function} eachFunc The function to iterate over a collection.
 * @param {boolean} [fromRight] Specify iterating from right to left.
 * @returns {Function} Returns the new base function.
 */
function createBaseEach(eachFunc, fromRight) {
  return function(collection, iteratee) {
    if (collection == null) {
      return collection;
    }
    if (!isArrayLike(collection)) {
      return eachFunc(collection, iteratee);
    }
    var length = collection.length,
        index = fromRight ? length : -1,
        iterable = Object(collection);

    while ((fromRight ? index-- : ++index < length)) {
      if (iteratee(iterable[index], index, iterable) === false) {
        break;
      }
    }
    return collection;
  };
}

module.exports = createBaseEach;


/***/ }),
/* 246 */
/***/ (function(module, exports) {

/**
 * Creates a base function for methods like `_.forIn` and `_.forOwn`.
 *
 * @private
 * @param {boolean} [fromRight] Specify iterating from right to left.
 * @returns {Function} Returns the new base function.
 */
function createBaseFor(fromRight) {
  return function(object, iteratee, keysFunc) {
    var index = -1,
        iterable = Object(object),
        props = keysFunc(object),
        length = props.length;

    while (length--) {
      var key = props[fromRight ? length : ++index];
      if (iteratee(iterable[key], key, iterable) === false) {
        break;
      }
    }
    return object;
  };
}

module.exports = createBaseFor;


/***/ }),
/* 247 */
/***/ (function(module, exports, __webpack_require__) {

var baseIteratee = __webpack_require__(8),
    isArrayLike = __webpack_require__(47),
    keys = __webpack_require__(81);

/**
 * Creates a `_.find` or `_.findLast` function.
 *
 * @private
 * @param {Function} findIndexFunc The function to find the collection index.
 * @returns {Function} Returns the new find function.
 */
function createFind(findIndexFunc) {
  return function(collection, predicate, fromIndex) {
    var iterable = Object(collection);
    if (!isArrayLike(collection)) {
      var iteratee = baseIteratee(predicate, 3);
      collection = keys(collection);
      predicate = function(key) { return iteratee(iterable[key], key, iterable); };
    }
    var index = findIndexFunc(collection, predicate, fromIndex);
    return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;
  };
}

module.exports = createFind;


/***/ }),
/* 248 */
/***/ (function(module, exports, __webpack_require__) {

var getNative = __webpack_require__(66);

var defineProperty = (function() {
  try {
    var func = getNative(Object, 'defineProperty');
    func({}, '', {});
    return func;
  } catch (e) {}
}());

module.exports = defineProperty;


/***/ }),
/* 249 */
/***/ (function(module, exports, __webpack_require__) {

var SetCache = __webpack_require__(111),
    arraySome = __webpack_require__(228),
    cacheHas = __webpack_require__(119);

/** Used to compose bitmasks for value comparisons. */
var COMPARE_PARTIAL_FLAG = 1,
    COMPARE_UNORDERED_FLAG = 2;

/**
 * A specialized version of `baseIsEqualDeep` for arrays with support for
 * partial deep comparisons.
 *
 * @private
 * @param {Array} array The array to compare.
 * @param {Array} other The other array to compare.
 * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
 * @param {Function} customizer The function to customize comparisons.
 * @param {Function} equalFunc The function to determine equivalents of values.
 * @param {Object} stack Tracks traversed `array` and `other` objects.
 * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.
 */
function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {
  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,
      arrLength = array.length,
      othLength = other.length;

  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {
    return false;
  }
  // Assume cyclic values are equal.
  var stacked = stack.get(array);
  if (stacked && stack.get(other)) {
    return stacked == other;
  }
  var index = -1,
      result = true,
      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;

  stack.set(array, other);
  stack.set(other, array);

  // Ignore non-index properties.
  while (++index < arrLength) {
    var arrValue = array[index],
        othValue = other[index];

    if (customizer) {
      var compared = isPartial
        ? customizer(othValue, arrValue, index, other, array, stack)
        : customizer(arrValue, othValue, index, array, other, stack);
    }
    if (compared !== undefined) {
      if (compared) {
        continue;
      }
      result = false;
      break;
    }
    // Recursively compare arrays (susceptible to call stack limits).
    if (seen) {
      if (!arraySome(other, function(othValue, othIndex) {
            if (!cacheHas(seen, othIndex) &&
                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {
              return seen.push(othIndex);
            }
          })) {
        result = false;
        break;
      }
    } else if (!(
          arrValue === othValue ||
            equalFunc(arrValue, othValue, bitmask, customizer, stack)
        )) {
      result = false;
      break;
    }
  }
  stack['delete'](array);
  stack['delete'](other);
  return result;
}

module.exports = equalArrays;


/***/ }),
/* 250 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {/** Detect free variable `global` from Node.js. */
var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;

module.exports = freeGlobal;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(178)))

/***/ }),
/* 251 */
/***/ (function(module, exports, __webpack_require__) {

var DataView = __webpack_require__(554),
    Map = __webpack_require__(158),
    Promise = __webpack_require__(556),
    Set = __webpack_require__(225),
    WeakMap = __webpack_require__(558),
    baseGetTag = __webpack_require__(78),
    toSource = __webpack_require__(257);

/** `Object#toString` result references. */
var mapTag = '[object Map]',
    objectTag = '[object Object]',
    promiseTag = '[object Promise]',
    setTag = '[object Set]',
    weakMapTag = '[object WeakMap]';

var dataViewTag = '[object DataView]';

/** Used to detect maps, sets, and weakmaps. */
var dataViewCtorString = toSource(DataView),
    mapCtorString = toSource(Map),
    promiseCtorString = toSource(Promise),
    setCtorString = toSource(Set),
    weakMapCtorString = toSource(WeakMap);

/**
 * Gets the `toStringTag` of `value`.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the `toStringTag`.
 */
var getTag = baseGetTag;

// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.
if ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||
    (Map && getTag(new Map) != mapTag) ||
    (Promise && getTag(Promise.resolve()) != promiseTag) ||
    (Set && getTag(new Set) != setTag) ||
    (WeakMap && getTag(new WeakMap) != weakMapTag)) {
  getTag = function(value) {
    var result = baseGetTag(value),
        Ctor = result == objectTag ? value.constructor : undefined,
        ctorString = Ctor ? toSource(Ctor) : '';

    if (ctorString) {
      switch (ctorString) {
        case dataViewCtorString: return dataViewTag;
        case mapCtorString: return mapTag;
        case promiseCtorString: return promiseTag;
        case setCtorString: return setTag;
        case weakMapCtorString: return weakMapTag;
      }
    }
    return result;
  };
}

module.exports = getTag;


/***/ }),
/* 252 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(80);

/**
 * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` if suitable for strict
 *  equality comparisons, else `false`.
 */
function isStrictComparable(value) {
  return value === value && !isObject(value);
}

module.exports = isStrictComparable;


/***/ }),
/* 253 */
/***/ (function(module, exports) {

/**
 * A specialized version of `matchesProperty` for source values suitable
 * for strict equality comparisons, i.e. `===`.
 *
 * @private
 * @param {string} key The key of the property to get.
 * @param {*} srcValue The value to match.
 * @returns {Function} Returns the new spec function.
 */
function matchesStrictComparable(key, srcValue) {
  return function(object) {
    if (object == null) {
      return false;
    }
    return object[key] === srcValue &&
      (srcValue !== undefined || (key in Object(object)));
  };
}

module.exports = matchesStrictComparable;


/***/ }),
/* 254 */
/***/ (function(module, exports, __webpack_require__) {

var apply = __webpack_require__(112);

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max;

/**
 * A specialized version of `baseRest` which transforms the rest array.
 *
 * @private
 * @param {Function} func The function to apply a rest parameter to.
 * @param {number} [start=func.length-1] The start position of the rest parameter.
 * @param {Function} transform The rest array transform.
 * @returns {Function} Returns the new function.
 */
function overRest(func, start, transform) {
  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);
  return function() {
    var args = arguments,
        index = -1,
        length = nativeMax(args.length - start, 0),
        array = Array(length);

    while (++index < length) {
      array[index] = args[start + index];
    }
    index = -1;
    var otherArgs = Array(start + 1);
    while (++index < start) {
      otherArgs[index] = args[index];
    }
    otherArgs[start] = transform(array);
    return apply(func, this, otherArgs);
  };
}

module.exports = overRest;


/***/ }),
/* 255 */
/***/ (function(module, exports, __webpack_require__) {

var baseGet = __webpack_require__(164),
    baseSlice = __webpack_require__(43);

/**
 * Gets the parent value at `path` of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {Array} path The path to get the parent value of.
 * @returns {*} Returns the parent value.
 */
function parent(object, path) {
  return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));
}

module.exports = parent;


/***/ }),
/* 256 */
/***/ (function(module, exports, __webpack_require__) {

var baseSetToString = __webpack_require__(593),
    shortOut = __webpack_require__(640);

/**
 * Sets the `toString` method of `func` to return `string`.
 *
 * @private
 * @param {Function} func The function to modify.
 * @param {Function} string The `toString` result.
 * @returns {Function} Returns `func`.
 */
var setToString = shortOut(baseSetToString);

module.exports = setToString;


/***/ }),
/* 257 */
/***/ (function(module, exports) {

/** Used for built-in method references. */
var funcProto = Function.prototype;

/** Used to resolve the decompiled source of functions. */
var funcToString = funcProto.toString;

/**
 * Converts `func` to its source code.
 *
 * @private
 * @param {Function} func The function to convert.
 * @returns {string} Returns the source code.
 */
function toSource(func) {
  if (func != null) {
    try {
      return funcToString.call(func);
    } catch (e) {}
    try {
      return (func + '');
    } catch (e) {}
  }
  return '';
}

module.exports = toSource;


/***/ }),
/* 258 */
/***/ (function(module, exports, __webpack_require__) {

var baseFindIndex = __webpack_require__(115),
    baseIteratee = __webpack_require__(8),
    toInteger = __webpack_require__(18);

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max;

/**
 * This method is like `_.find` except that it returns the index of the first
 * element `predicate` returns truthy for instead of the element itself.
 *
 * @static
 * @memberOf _
 * @since 1.1.0
 * @category Array
 * @param {Array} array The array to inspect.
 * @param {Function} [predicate=_.identity] The function invoked per iteration.
 * @param {number} [fromIndex=0] The index to search from.
 * @returns {number} Returns the index of the found element, else `-1`.
 * @example
 *
 * var users = [
 *   { 'user': 'barney',  'active': false },
 *   { 'user': 'fred',    'active': false },
 *   { 'user': 'pebbles', 'active': true }
 * ];
 *
 * _.findIndex(users, function(o) { return o.user == 'barney'; });
 * // => 0
 *
 * // The `_.matches` iteratee shorthand.
 * _.findIndex(users, { 'user': 'fred', 'active': false });
 * // => 1
 *
 * // The `_.matchesProperty` iteratee shorthand.
 * _.findIndex(users, ['active', false]);
 * // => 0
 *
 * // The `_.property` iteratee shorthand.
 * _.findIndex(users, 'active');
 * // => 2
 */
function findIndex(array, predicate, fromIndex) {
  var length = array == null ? 0 : array.length;
  if (!length) {
    return -1;
  }
  var index = fromIndex == null ? 0 : toInteger(fromIndex);
  if (index < 0) {
    index = nativeMax(length + index, 0);
  }
  return baseFindIndex(array, baseIteratee(predicate, 3), index);
}

module.exports = findIndex;


/***/ }),
/* 259 */
/***/ (function(module, exports, __webpack_require__) {

var baseFindIndex = __webpack_require__(115),
    baseIteratee = __webpack_require__(8),
    toInteger = __webpack_require__(18);

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max,
    nativeMin = Math.min;

/**
 * This method is like `_.findIndex` except that it iterates over elements
 * of `collection` from right to left.
 *
 * @static
 * @memberOf _
 * @since 2.0.0
 * @category Array
 * @param {Array} array The array to inspect.
 * @param {Function} [predicate=_.identity] The function invoked per iteration.
 * @param {number} [fromIndex=array.length-1] The index to search from.
 * @returns {number} Returns the index of the found element, else `-1`.
 * @example
 *
 * var users = [
 *   { 'user': 'barney',  'active': true },
 *   { 'user': 'fred',    'active': false },
 *   { 'user': 'pebbles', 'active': false }
 * ];
 *
 * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });
 * // => 2
 *
 * // The `_.matches` iteratee shorthand.
 * _.findLastIndex(users, { 'user': 'barney', 'active': true });
 * // => 0
 *
 * // The `_.matchesProperty` iteratee shorthand.
 * _.findLastIndex(users, ['active', false]);
 * // => 2
 *
 * // The `_.property` iteratee shorthand.
 * _.findLastIndex(users, 'active');
 * // => 0
 */
function findLastIndex(array, predicate, fromIndex) {
  var length = array == null ? 0 : array.length;
  if (!length) {
    return -1;
  }
  var index = length - 1;
  if (fromIndex !== undefined) {
    index = toInteger(fromIndex);
    index = fromIndex < 0
      ? nativeMax(length + index, 0)
      : nativeMin(index, length - 1);
  }
  return baseFindIndex(array, baseIteratee(predicate, 3), index, true);
}

module.exports = findLastIndex;


/***/ }),
/* 260 */
/***/ (function(module, exports, __webpack_require__) {

var arrayEach = __webpack_require__(560),
    baseEach = __webpack_require__(52),
    castFunction = __webpack_require__(243),
    isArray = __webpack_require__(10);

/**
 * Iterates over elements of `collection` and invokes `iteratee` for each element.
 * The iteratee is invoked with three arguments: (value, index|key, collection).
 * Iteratee functions may exit iteration early by explicitly returning `false`.
 *
 * **Note:** As with other "Collections" methods, objects with a "length"
 * property are iterated like arrays. To avoid this behavior use `_.forIn`
 * or `_.forOwn` for object iteration.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @alias each
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} [iteratee=_.identity] The function invoked per iteration.
 * @returns {Array|Object} Returns `collection`.
 * @see _.forEachRight
 * @example
 *
 * _.forEach([1, 2], function(value) {
 *   console.log(value);
 * });
 * // => Logs `1` then `2`.
 *
 * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {
 *   console.log(key);
 * });
 * // => Logs 'a' then 'b' (iteration order is not guaranteed).
 */
function forEach(collection, iteratee) {
  var func = isArray(collection) ? arrayEach : baseEach;
  return func(collection, castFunction(iteratee));
}

module.exports = forEach;


/***/ }),
/* 261 */
/***/ (function(module, exports, __webpack_require__) {

var arrayEachRight = __webpack_require__(561),
    baseEachRight = __webpack_require__(230),
    castFunction = __webpack_require__(243),
    isArray = __webpack_require__(10);

/**
 * This method is like `_.forEach` except that it iterates over elements of
 * `collection` from right to left.
 *
 * @static
 * @memberOf _
 * @since 2.0.0
 * @alias eachRight
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} [iteratee=_.identity] The function invoked per iteration.
 * @returns {Array|Object} Returns `collection`.
 * @see _.forEach
 * @example
 *
 * _.forEachRight([1, 2], function(value) {
 *   console.log(value);
 * });
 * // => Logs `2` then `1`.
 */
function forEachRight(collection, iteratee) {
  var func = isArray(collection) ? arrayEachRight : baseEachRight;
  return func(collection, castFunction(iteratee));
}

module.exports = forEachRight;


/***/ }),
/* 262 */
/***/ (function(module, exports, __webpack_require__) {

var baseGet = __webpack_require__(164);

/**
 * Gets the value at `path` of `object`. If the resolved value is
 * `undefined`, the `defaultValue` is returned in its place.
 *
 * @static
 * @memberOf _
 * @since 3.7.0
 * @category Object
 * @param {Object} object The object to query.
 * @param {Array|string} path The path of the property to get.
 * @param {*} [defaultValue] The value returned for `undefined` resolved values.
 * @returns {*} Returns the resolved value.
 * @example
 *
 * var object = { 'a': [{ 'b': { 'c': 3 } }] };
 *
 * _.get(object, 'a[0].b.c');
 * // => 3
 *
 * _.get(object, ['a', '0', 'b', 'c']);
 * // => 3
 *
 * _.get(object, 'a.b.c', 'default');
 * // => 'default'
 */
function get(object, path, defaultValue) {
  var result = object == null ? undefined : baseGet(object, path);
  return result === undefined ? defaultValue : result;
}

module.exports = get;


/***/ }),
/* 263 */
/***/ (function(module, exports) {

/**
 * Gets the first element of `array`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @alias first
 * @category Array
 * @param {Array} array The array to query.
 * @returns {*} Returns the first element of `array`.
 * @example
 *
 * _.head([1, 2, 3]);
 * // => 1
 *
 * _.head([]);
 * // => undefined
 */
function head(array) {
  return (array && array.length) ? array[0] : undefined;
}

module.exports = head;


/***/ }),
/* 264 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(module) {var root = __webpack_require__(46),
    stubFalse = __webpack_require__(722);

/** Detect free variable `exports`. */
var freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;

/** Detect free variable `module`. */
var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;

/** Detect the popular CommonJS extension `module.exports`. */
var moduleExports = freeModule && freeModule.exports === freeExports;

/** Built-in value references. */
var Buffer = moduleExports ? root.Buffer : undefined;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;

/**
 * Checks if `value` is a buffer.
 *
 * @static
 * @memberOf _
 * @since 4.3.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.
 * @example
 *
 * _.isBuffer(new Buffer(2));
 * // => true
 *
 * _.isBuffer(new Uint8Array(2));
 * // => false
 */
var isBuffer = nativeIsBuffer || stubFalse;

module.exports = isBuffer;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(272)(module)))

/***/ }),
/* 265 */
/***/ (function(module, exports, __webpack_require__) {

var baseGetTag = __webpack_require__(78),
    isObject = __webpack_require__(80);

/** `Object#toString` result references. */
var asyncTag = '[object AsyncFunction]',
    funcTag = '[object Function]',
    genTag = '[object GeneratorFunction]',
    proxyTag = '[object Proxy]';

/**
 * Checks if `value` is classified as a `Function` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a function, else `false`.
 * @example
 *
 * _.isFunction(_);
 * // => true
 *
 * _.isFunction(/abc/);
 * // => false
 */
function isFunction(value) {
  if (!isObject(value)) {
    return false;
  }
  // The use of `Object#toString` avoids issues with the `typeof` operator
  // in Safari 9 which returns 'object' for typed arrays and other constructors.
  var tag = baseGetTag(value);
  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;
}

module.exports = isFunction;


/***/ }),
/* 266 */
/***/ (function(module, exports, __webpack_require__) {

var baseGetTag = __webpack_require__(78),
    isArray = __webpack_require__(10),
    isObjectLike = __webpack_require__(71);

/** `Object#toString` result references. */
var stringTag = '[object String]';

/**
 * Checks if `value` is classified as a `String` primitive or object.
 *
 * @static
 * @since 0.1.0
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a string, else `false`.
 * @example
 *
 * _.isString('abc');
 * // => true
 *
 * _.isString(1);
 * // => false
 */
function isString(value) {
  return typeof value == 'string' ||
    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);
}

module.exports = isString;


/***/ }),
/* 267 */
/***/ (function(module, exports, __webpack_require__) {

var baseIsTypedArray = __webpack_require__(585),
    baseUnary = __webpack_require__(89),
    nodeUtil = __webpack_require__(635);

/* Node.js helper references. */
var nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;

/**
 * Checks if `value` is classified as a typed array.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
 * @example
 *
 * _.isTypedArray(new Uint8Array);
 * // => true
 *
 * _.isTypedArray([]);
 * // => false
 */
var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;

module.exports = isTypedArray;


/***/ }),
/* 268 */
/***/ (function(module, exports, __webpack_require__) {

var basePullAll = __webpack_require__(167);

/**
 * This method is like `_.pull` except that it accepts an array of values to remove.
 *
 * **Note:** Unlike `_.difference`, this method mutates `array`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} array The array to modify.
 * @param {Array} values The values to remove.
 * @returns {Array} Returns `array`.
 * @example
 *
 * var array = ['a', 'b', 'c', 'a', 'b', 'c'];
 *
 * _.pullAll(array, ['a', 'c']);
 * console.log(array);
 * // => ['b', 'b']
 */
function pullAll(array, values) {
  return (array && array.length && values && values.length)
    ? basePullAll(array, values)
    : array;
}

module.exports = pullAll;


/***/ }),
/* 269 */
/***/ (function(module, exports, __webpack_require__) {

var baseFlatten = __webpack_require__(20),
    baseOrderBy = __webpack_require__(236),
    baseRest = __webpack_require__(17),
    isIterateeCall = __webpack_require__(68);

/**
 * Creates an array of elements, sorted in ascending order by the results of
 * running each element in a collection thru each iteratee. This method
 * performs a stable sort, that is, it preserves the original sort order of
 * equal elements. The iteratees are invoked with one argument: (value).
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {...(Function|Function[])} [iteratees=[_.identity]]
 *  The iteratees to sort by.
 * @returns {Array} Returns the new sorted array.
 * @example
 *
 * var users = [
 *   { 'user': 'fred',   'age': 48 },
 *   { 'user': 'barney', 'age': 36 },
 *   { 'user': 'fred',   'age': 40 },
 *   { 'user': 'barney', 'age': 34 }
 * ];
 *
 * _.sortBy(users, [function(o) { return o.user; }]);
 * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]
 *
 * _.sortBy(users, ['user', 'age']);
 * // => objects for [['barney', 34], ['barney', 36], ['fred', 40], ['fred', 48]]
 */
var sortBy = baseRest(function(collection, iteratees) {
  if (collection == null) {
    return [];
  }
  var length = iteratees.length;
  if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {
    iteratees = [];
  } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {
    iteratees = [iteratees[0]];
  }
  return baseOrderBy(collection, baseFlatten(iteratees, 1), []);
});

module.exports = sortBy;


/***/ }),
/* 270 */
/***/ (function(module, exports, __webpack_require__) {

var baseUniq = __webpack_require__(65);

/**
 * Creates a duplicate-free version of an array, using
 * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * for equality comparisons, in which only the first occurrence of each element
 * is kept. The order of result values is determined by the order they occur
 * in the array.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Array
 * @param {Array} array The array to inspect.
 * @returns {Array} Returns the new duplicate free array.
 * @example
 *
 * _.uniq([2, 1, 2]);
 * // => [2, 1]
 */
function uniq(array) {
  return (array && array.length) ? baseUniq(array) : [];
}

module.exports = uniq;


/***/ }),
/* 271 */
/***/ (function(module, exports, __webpack_require__) {

var apply = __webpack_require__(112),
    arrayMap = __webpack_require__(27),
    unzip = __webpack_require__(176);

/**
 * This method is like `_.unzip` except that it accepts `iteratee` to specify
 * how regrouped values should be combined. The iteratee is invoked with the
 * elements of each group: (...group).
 *
 * @static
 * @memberOf _
 * @since 3.8.0
 * @category Array
 * @param {Array} array The array of grouped elements to process.
 * @param {Function} [iteratee=_.identity] The function to combine
 *  regrouped values.
 * @returns {Array} Returns the new array of regrouped elements.
 * @example
 *
 * var zipped = _.zip([1, 2], [10, 20], [100, 200]);
 * // => [[1, 10, 100], [2, 20, 200]]
 *
 * _.unzipWith(zipped, _.add);
 * // => [3, 30, 300]
 */
function unzipWith(array, iteratee) {
  if (!(array && array.length)) {
    return [];
  }
  var result = unzip(array);
  if (iteratee == null) {
    return result;
  }
  return arrayMap(result, function(group) {
    return apply(iteratee, undefined, group);
  });
}

module.exports = unzipWith;


/***/ }),
/* 272 */
/***/ (function(module, exports) {

module.exports = function(module) {
	if(!module.webpackPolyfill) {
		module.deprecate = function() {};
		module.paths = [];
		// module.parent = undefined by default
		if(!module.children) module.children = [];
		Object.defineProperty(module, "loaded", {
			enumerable: true,
			get: function() {
				return module.l;
			}
		});
		Object.defineProperty(module, "id", {
			enumerable: true,
			get: function() {
				return module.i;
			}
		});
		module.webpackPolyfill = 1;
	}
	return module;
};


/***/ }),
/* 273 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
                           value: true
});
exports.createMap = createMap;

var _exports = __webpack_require__(306);

Object.keys(_exports).forEach(function (key) {
                           if (key === "default" || key === "__esModule") return;
                           Object.defineProperty(exports, key, {
                                                      enumerable: true,
                                                      get: function get() {
                                                                                 return _exports[key];
                                                      }
                           });
});

__webpack_require__(548);

var _main = __webpack_require__(316);

__webpack_require__(550);

__webpack_require__(549);

__webpack_require__(552);

// exports

function createMap(target) {
                           var clientConf = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : './conf/client.commented.json';
                           var layerConf = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : './conf/layers.commented.json';

                           return (0, _main.createMapInternal)(target, clientConf, layerConf);
}

/***/ }),
/* 274 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {

__webpack_require__(522);

__webpack_require__(747);

__webpack_require__(320);

if (global._babelPolyfill) {
  throw new Error("only one instance of babel-polyfill is allowed");
}
global._babelPolyfill = true;

var DEFINE_PROPERTY = "defineProperty";
function define(O, key, value) {
  O[key] || Object[DEFINE_PROPERTY](O, key, {
    writable: true,
    configurable: true,
    value: value
  });
}

define(String.prototype, "padLeft", "".padStart);
define(String.prototype, "padRight", "".padEnd);

"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function (key) {
  [][key] && define(Array, key, Function.call.bind([][key]));
});
/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(178)))

/***/ }),
/* 275 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.API = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _globals = __webpack_require__(11);

var _Debug = __webpack_require__(15);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {object} APIMapInteraction
 * @property {function} cancel ends the interaction. The result promise will not resolve.
 * @property {function} end ends the interaction properly. The result promise will resolve if possible.
 * @property {Promise} result a promise that represents the value of the interaction.
 */

// NOTE:
// Access to a source factory would be nice

/**
 * @typedef {object} APIOptions
 * @property {StyleLike} [drawStyle='#drawStyle']
 */

var API = exports.API = function (_ol$Object) {
  _inherits(API, _ol$Object);

  /**
   * @param {G4UMap} map
   * @param {object} options
   */
  function API(map) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    _classCallCheck(this, API);

    /**
     * @type {boolean}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (API.__proto__ || Object.getPrototypeOf(API)).call(this));

    _this.featureManipulationActive_ = false;

    /**
     * @type {StyleLike}
     * @private
     */
    _this.drawStyle_ = options.drawStyle || '#drawStyle';

    /**
     * @type {ol.format.WKT}
     * @private
     */
    _this.wktParser_ = new _openlayers2.default.format.WKT();

    /**
     * @type {G4UMap}
     * @private
     */
    _this.map_ = map;

    /**
     * @type {?ol.interaction.Interaction}
     * @private
     */
    _this.featureManipulationInteraction_ = null;

    _this.map_.once('ready', function () {
      _this.layerConfigurator_ = _this.map_.get('configurator').layerConfigurator_;
    });

    (0, _jquery2.default)(_this.map_.getViewport()).on('keydown', _this.onKeyDown_.bind(_this));
    return _this;
  }

  // //////////////  FEATURE MANIPULATION ////////////////

  _createClass(API, [{
    key: 'endFeatureManipulationInternal_',
    value: function endFeatureManipulationInternal_() {
      if (this.featureManipulationInteraction_) {
        this.featureManipulationInteraction_.setActive(false);

        this.map_.removeInteraction(this.featureManipulationInteraction_);
      }

      (0, _jquery2.default)(this.map_.getViewport()).removeClass(_globals.cssClasses.crosshair);
      (0, _jquery2.default)(this.map_.getViewport()).removeClass(_globals.cssClasses.arrow);
      // and any other cursor changes

      this.featureManipulationActive_ = false;

      this.dispatchEvent('endManipulation');
    }

    /**
     * cancel the current feature manipulation
     */

  }, {
    key: 'cancelFeatureManipulation',
    value: function cancelFeatureManipulation() {
      if (this.featureManipulationActive_) {
        this.endFeatureManipulationInternal_();
      }
    }

    /**
     * draw a feature
     * @param {object} [options={}]
     * @param {StyleLike} [options.style]
     * @param {string} [options.type='Point'] possible values are: 'Point', 'LineString', 'Polygon', 'MultiPoint',
     *  'MultiLineString', 'MultiPolygon' or 'Circle'
     * @returns {APIMapInteraction}
     */

  }, {
    key: 'drawFeature',
    value: function drawFeature() {
      var _this2 = this;

      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      if (this.featureManipulationActive_) {
        this.endFeatureManipulationInternal_();
      }

      this.featureManipulationActive_ = true;

      var collection = new _openlayers2.default.Collection();

      var styleConf = options.style || this.drawStyle_ || {};

      var style = this.map_.get('styling').getStyle(styleConf);

      this.map_.get('styling').manageFeatureCollection(collection);

      this.featureManipulationInteraction_ = new _openlayers2.default.interaction.Draw({
        features: collection,
        type: options.type || 'Point',
        style: style
      });

      this.map_.addSupersedingInteraction('singleclick dblclick pointermove', this.featureManipulationInteraction_);

      (0, _jquery2.default)(this.map_.getViewport()).addClass(_globals.cssClasses.crosshair);

      return {
        cancel: function cancel() {
          _this2.endFeatureManipulationInternal_();
        },
        end: function end() {
          _this2.featureManipulationInteraction_.finishDrawing();
          _this2.endFeatureManipulationInternal_();
        },
        result: new Promise(function (resolve) {
          _this2.featureManipulationInteraction_.on('drawend', function (e) {
            resolve(e.feature);
            _this2.endFeatureManipulationInternal_();
          });
        })
      };
    }
  }, {
    key: 'fitRectangle',
    value: function fitRectangle(coordinates) {
      var opt = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      if (!opt.hasOwnProperty('srId')) {
        opt.srId = 'EPSG:4326';
      }
      if (!opt.hasOwnProperty('constrainResolution')) {
        opt.constrainResolution = false;
      }
      if (!opt.hasOwnProperty('padding')) {
        opt.padding = [0, 0, 0, 0];
      }
      if (_openlayers2.default.proj.get(opt.srId)) {
        this.map_.getView().fit(_openlayers2.default.extent.boundingExtent([_openlayers2.default.proj.transform([parseFloat(coordinates[0][0]), parseFloat(coordinates[0][1])], opt.srId, this.map_.get('mapProjection').getCode()), _openlayers2.default.proj.transform([parseFloat(coordinates[1][0]), parseFloat(coordinates[1][1])], opt.srId, this.map_.get('mapProjection').getCode())]), opt);
      } else {
        _Debug.Debug.error('Unknown Projection \'' + opt.srId + '\'');
      }
    }
  }, {
    key: 'setVisibleBaseLayer',
    value: function setVisibleBaseLayer(id) {
      this.map_.get('baseLayers').recursiveForEach(function (layer) {
        layer.setVisible(layer.get('id') === id);
      });
    }
  }, {
    key: 'onKeyDown_',
    value: function onKeyDown_(e) {
      if (this.featureManipulationActive_ && e.which === _globals.keyCodes.ESCAPE) {
        this.endFeatureManipulationInternal_();
      }
    }

    /**
     * Select a feature with a single click
     * @returns {APIMapInteraction}
     */

  }, {
    key: 'selectFeature',
    value: function selectFeature() {
      var _this3 = this;

      if (this.featureManipulationActive_) {
        this.endFeatureManipulationInternal_(null);
      }

      this.featureManipulationActive_ = true;

      this.featureManipulationInteraction_ = new _openlayers2.default.interaction.Select();

      this.map_.addSupersedingInteraction('singleclick', this.featureManipulationInteraction_);

      (0, _jquery2.default)(this.map_.getViewport()).addClass(_globals.cssClasses.arrow);

      return {
        cancel: function cancel() {
          _this3.endFeatureManipulationInternal_();
        },
        end: function end() {
          _this3.endFeatureManipulationInternal_();
        },
        result: new Promise(function (resolve) {
          _this3.featureManipulationInteraction_.getFeatures().on('add', /** ol.CollectionEvent */function (e) {
            resolve(e.element);
            _this3.endFeatureManipulationInternal_();
          });
        })
      };
    }

    /**
     * Modify a given Feature. The end function needs to be called to indicate that a modifying process is completed.
     * @param {ol.Collection<ol.Feature>|ol.Feature[]|ol.Feature} feature
     * @param {Object} options
     * @param {StyleLike} [options.style]
     * @returns {APIMapInteraction}
     */

  }, {
    key: 'modifyFeature',
    value: function modifyFeature(feature) {
      var _this4 = this;

      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      options.features = new _openlayers2.default.Collection([feature]);

      if (this.featureManipulationActive_) {
        this.endFeatureManipulationInternal_(false);
      }

      this.featureManipulationActive_ = true;

      if (options.style) {
        options.style = this.map_.get('styling').getStyle(options.style);
      }

      this.featureManipulationInteraction_ = new _openlayers2.default.interaction.Modify(options);

      this.map_.addSupersedingInteraction('singleclick dblclick pointermove', this.featureManipulationInteraction_);

      (0, _jquery2.default)(this.map_.getViewport()).addClass(_globals.cssClasses.crosshair);

      var ended = false;

      return {
        cancel: function cancel() {
          _this4.endFeatureManipulationInternal_();
        },
        end: function end() {
          ended = true;
          _this4.endFeatureManipulationInternal_();
        },
        result: new Promise(function (resolve) {
          _this4.featureManipulationInteraction_.on('modifyend', function () {
            if (ended) {
              resolve(feature);
            }
          });

          _this4.featureManipulationInteraction_.once('change:active', function () {
            if (ended) {
              resolve(feature);
            }
          });
        })
      };
    }

    /**
     * This function creates a layer from the given layerOptions and adds it the map
     * @param {g4uLayerOptions} layerOptions
     * @returns {VectorLayer}
     */

  }, {
    key: 'addFeatureLayer',
    value: function addFeatureLayer(layerOptions) {
      return this.layerConfigurator_.getFactory().addLayer(this.map_.get('featureLayers'), layerOptions, 'featureLayer', true);
    }

    /**
     * This function creates a layer from the given layerOptions and adds it as a fixedFeatureLayer to the map
     * @param {g4uLayerOptions} layerOptions
     * @returns {VectorLayer}
     */

  }, {
    key: 'addFixedFeatureLayer',
    value: function addFixedFeatureLayer(layerOptions) {
      return this.layerConfigurator_.getFactory().addLayer(this.map_.get('fixedFeatureLayers'), layerOptions, 'featureLayer', true);
    }

    /**
     * This function creates a base layer from the given layerOptions and adds it to the map
     * @param {g4uLayerOptions} layerOptions
     * @returns {ol.layer.Base}
     */

  }, {
    key: 'addBaseLayer',
    value: function addBaseLayer(layerOptions) {
      return this.layerConfigurator_.getFactory().addLayer(this.map_.get('baseLayers'), layerOptions, 'baseLayer', true);
    }

    /**
     * This function creates a layer from the given layerOptions, adds it as a VectorLayere and returns a promise which
     * is resolved as soon as the layer is loaded fully.
     * @param {g4uLayerOptions} layerOptions
     * @returns {Promise.<VectorLayer>}
     */

  }, {
    key: 'loadLayerFromServer',
    value: function loadLayerFromServer(layerOptions) {
      var _this5 = this;

      layerOptions = layerOptions || {};
      layerOptions.visible = true;
      layerOptions.source = layerOptions.source || {};

      var promise = new Promise(function (resolve, reject) {
        var layer = _this5.addFeatureLayer(layerOptions);
        var source = layer.getSource();
        var loadEndHandler = function loadEndHandler() {
          source.un('vectorloadend', loadErrorHandler);
          resolve(layer);
        };
        var loadErrorHandler = function loadErrorHandler() {
          source.un('vectorloaderror', loadEndHandler);
          reject('vector load error');
        };
        source.once('vectorloadend', loadEndHandler);
        source.once('vectorloaderror', loadErrorHandler);
      });

      return promise;
    }

    /**
     * Creates a Feature from the given config
     * @param {FeatureConfig} config
     * @returns {ol.Feature}
     */

  }, {
    key: 'createFeature',
    value: function createFeature(config) {
      return this.layerConfigurator_.getFactory().createFeature(config);
    }

    /**
     * Removes a layer from the map
     * @param {ol.layer.Base} layer
     */

  }, {
    key: 'removeLayer',
    value: function removeLayer(layer) {
      this.map_.getLayerGroup().removeLayer(layer);
    }
  }]);

  return API;
}(_openlayers2.default.Object);

/***/ }),
/* 276 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.FeatureTooltip = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _globals = __webpack_require__(11);

__webpack_require__(544);

var _utilities = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * @typedef {object} FeatureTooltipOptions
 * @property {string} [className='g4u-featuretooltip']
 * @property {number[]} [offset=[0,0]]
 * @property {ol.OverlayPositioning} [positioning='center-center']
 * @property {string[]} [popupModifier=[]]
 */

/**
 * Displays a tooltip if a feature with a name is hovered.
 */
var FeatureTooltip = exports.FeatureTooltip = function () {
  /**
   * @param {FeatureTooltipOptions} [options={}]
   */
  function FeatureTooltip() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, FeatureTooltip);

    /**
     * @type {string}
     * @private
     */
    this.className_ = options.hasOwnProperty('className') ? options.className : 'g4u-featuretooltip';

    /**
     * @type {jQuery}
     * @private
     */
    this.$element_ = (0, _jquery2.default)('<span></span>').addClass(this.className_).addClass(_globals.cssClasses.hidden);

    /**
     * @type {ol.Overlay}
     * @private
     */
    this.overlay_ = new _openlayers2.default.Overlay({
      element: this.$element_.get(0),
      offset: options.hasOwnProperty('offset') ? options.offset : [0, 0],
      positioning: options.hasOwnProperty('positioning') ? options.positioning : 'center-center',
      stopEvent: false
    });

    /**
     * @type {string[]}
     * @private
     */
    this.defaultPopupModifiers_ = options.popupModifier || [];

    /**
     * @type {?ol.Feature}
     * @private
     */
    this.feature_ = null;

    this.$element_.parent().addClass(this.className_ + '-container');
  }

  _createClass(FeatureTooltip, [{
    key: 'setMap',


    /**
     * @param {G4UMap} map
     */
    value: function setMap(map) {
      var _this = this;

      if (this.getMap()) {
        this.getMap().removeOverlay(this.overlay_);
      }

      if (map) {
        map.addOverlay(this.overlay_);

        var interaction = map.getDefaultInteractions('pointermove')[0];
        interaction.on('select', function (e) {
          var selected = e.selected.filter(FeatureTooltip.canDisplay);
          if (selected.length) {
            _this.setFeature(selected[0], e.mapBrowserEvent.coordinate);
          } else {
            _this.setFeature(null);
          }
        });

        /**
         * @type {?G4UMap}
         * @private
         */
        this.map_ = map;
      }
    }

    /**
     * @returns {?ol.Feature}
     */

  }, {
    key: 'getFeature',
    value: function getFeature() {
      return this.feature_;
    }

    /**
     * @param {?ol.Feature} feature
     * @param {ol.Coordinate} coordinate
     * @param {string[]} [optPopupModifiers=[]]
     */

  }, {
    key: 'setFeature',
    value: function setFeature(feature) {
      var _this2 = this;

      var coordinate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
      var optPopupModifiers = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];

      if (feature) {
        var currentPopupModifiers = [].concat(_toConsumableArray(this.defaultPopupModifiers_), _toConsumableArray(optPopupModifiers));
        this.getMap().get('popupModifiers').apply({
          name: feature.get('name'),
          description: feature.get('description')
        }, currentPopupModifiers).then(function (result) {
          _this2.$element_.html((0, _utilities.html2Text)(result.name));
          _this2.$element_.removeClass(_globals.cssClasses.hidden);
        });
        if (!coordinate) {
          var geometry = feature.getGeometry();
          coordinate = _openlayers2.default.extent.getCenter(geometry.getExtent());
        }
        this.overlay_.setPosition(coordinate);
      } else {
        this.$element_.addClass(_globals.cssClasses.hidden);
      }
      this.feature_ = feature;
    }

    /**
     * @returns {G4UMap}
     */

  }, {
    key: 'getMap',
    value: function getMap() {
      return this.map_;
    }
  }], [{
    key: 'canDisplay',
    value: function canDisplay(feature) {
      return !feature.get('disabled') && feature.get('name');
    }
  }]);

  return FeatureTooltip;
}();

/***/ }),
/* 277 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.L10N = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _stripJsonComments = __webpack_require__(177);

var _stripJsonComments2 = _interopRequireDefault(_stripJsonComments);

var _Debug = __webpack_require__(15);

var _URLHelper = __webpack_require__(91);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {Object.<string, string>|string} Localizable
 */

/**
 * @typedef {object} L10NOptions
 * @property {string} [defaultLanguage='en']
 * @property {string} [currentLanguage]
 * @property {string} [languageFile='files/l10n.commented.json']
 * @property {string[]} [availableLanguages]
 */

/**
 * This class localizes texts by either selecting one from a dictionary (asynchron loaded JSON File) or choosing the
 * right string from a selection.
 */
var L10N = exports.L10N = function (_ol$Observable) {
  _inherits(L10N, _ol$Observable);

  /**
   * @param {L10NOptions} options
   */
  function L10N() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, L10N);

    /**
     * @type {string}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (L10N.__proto__ || Object.getPrototypeOf(L10N)).call(this));

    _this.defaultLang_ = options.defaultLanguage || 'en';

    /**
     * @type {string}
     * @private
     */
    _this.currentLang_ = options.currentLanguage || _this.defaultLang_;

    /**
     * @type {URL}
     * @private
     */
    _this.languageFileUrl_ = _URLHelper.URL.extractFromConfig(options, 'languageFile', 'files/l10n.commented.json');

    if (options.availableLanguages) {
      /**
       * @type {string[]}
       * @private
       */
      _this.availableLanguages_ = options.availableLanguages;
    } else {
      _this.availableLanguages_ = [_this.currentLang_];
      if (_this.currentLang_ !== _this.defaultLang_) {
        _this.availableLanguages_.push(_this.defaultLang_);
      }
    }
    return _this;
  }

  /**
   * @returns {string[]}
   */


  _createClass(L10N, [{
    key: 'getAvailableLanguages',
    value: function getAvailableLanguages() {
      return this.availableLanguages_;
    }

    /**
     * @param {string[]} languages
     */

  }, {
    key: 'setAvailableLanguages',
    value: function setAvailableLanguages(languages) {
      this.availableLanguages_ = languages;
    }

    /**
     * Loads the language file. This function is called manually from outside to be abel to pass in a callback.
     */

  }, {
    key: 'ajaxGetLanguageFile',
    value: function ajaxGetLanguageFile() {
      var _this2 = this;

      var finalUrl = this.languageFileUrl_.finalize();
      return _jquery2.default.ajax({
        type: 'GET',
        url: finalUrl,
        dataType: 'text',
        success: function success(data) {
          _this2.dictionary = JSON.parse((0, _stripJsonComments2.default)(data));
        },
        error: function error() {
          // The arguments are ignored
          _Debug.Debug.error('The language file ' + finalUrl + ' couldn\'t be loaded or parsed');
        }
      });
    }

    /**
     * Select language string. Note that this routine throws an error if there is no fitting string. Method to obtain the
     *    fitting string:
     * 1. If there is no data, an 'Unable to obtain localization' error is thrown.
     * 2. If data is a string, that string is returned.
     * 3. If language is given and present in data, the string value for langage is returned.
     * 4. If the default language is given and present in data, that value is returned.
     * 5. If the special tag '*' is present in data, that value is returned.
     * 6. If still no string was found at this point, an 'Unable to obtain localization' error is thrown.
     * @property {Localizable} data
     * @returns {string} a (presumably localised) string
     */

  }, {
    key: 'selectL10N',
    value: function selectL10N(data) {
      if (data) {
        if (typeof data === 'string') {
          // Only a generic string is available
          return data;
        } else {
          // an object is available
          if (data.hasOwnProperty(this.currentLang_)) {
            // current language available
            return data[this.currentLang_];
          } else if (data.hasOwnProperty(this.defaultLang_)) {
            // default language as a last resort
            return data[this.defaultLang_];
          } else if (data.hasOwnProperty('*')) {
            return data['*'];
          } else {
            _Debug.Debug.error('Unable to obtain localization');
          }
        }
      }
    }

    /**
     * Localise identifier using given dictionary. Throws an error if identifier is not in dictionary. Relies on
     * selectL10N to select actual localisation.
     * @param {string} identifier
     * @param {boolean} silent if an error message should be printed if the text is not found in the dictionary
     * @returns {string} a (presumably localised) string
     */

  }, {
    key: 'localiseUsingDictionary',
    value: function localiseUsingDictionary(identifier) {
      var silent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

      if (identifier in this.dictionary) {
        return this.selectL10N(this.dictionary[identifier]);
      } else if (!silent) {
        _Debug.Debug.error('Cannot localise \'' + identifier + '\': Not in dictionary');
      }
    }

    /**
     * @param {string} lang
     */

  }, {
    key: 'setCurrentLang',
    value: function setCurrentLang(lang) {
      this.currentLang_ = lang;
      this.dispatchEvent('change:language', lang);
    }

    /**
     *
     * @returns {string|*}
     */

  }, {
    key: 'getCurrentLang',
    value: function getCurrentLang() {
      return this.currentLang_;
    }
  }, {
    key: 'getDefaultLang',
    value: function getDefaultLang() {
      return this.defaultLang_;
    }

    /**
     * @returns {bool}
     */

  }, {
    key: 'isRtl',
    value: function isRtl() {
      return this.dictionary[this.currentLang_].rtl || false;
    }
  }]);

  return L10N;
}(_openlayers2.default.Observable);

/***/ }),
/* 278 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MessageDisplay = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

__webpack_require__(538);

__webpack_require__(745);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _utilities = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * @typedef {object} MessageReducedDisplayOptions
 * @property {boolean} [autoHide] - whether to auto-hide the notification
 * @property {number} [autoHideDelay] - milliseconds before hide (if autoHide is set)
 * @property {string} [position] - notification position relative to element
 */

/**
 * @typedef {MessageReducedDisplayOptions} MessageDisplayOptions
 * @property {(string|string[])} [className] - default class
 */

/**
 * @typedef {MessageDisplayOptions} MessageConstructorOptions
 * @property {boolean} [arrowShow=true] - whether to show an arrow pointing at the element
 * @property {number} [arrowSize=5] - Arrow size in pixels
 * @property {boolean} [autoHide=true] - whether to auto-hide the notification
 * @property {number} [autoHideDelay=15000] - milliseconds before hide (if autoHide is set)
 * @property {(string|string[])} [className='error'] - default class
 * @property {string} [position=bottom left] - notification position relative to element
 * @property {number} [gap=2] - padding between element and notification
 * @property {string} [hideAnimation=slideUp] - hide animation type
 * @property {number} [hideDuration=200] - hide animation duration in milliseconds
 * @property {string} [showAnimation=slideDown] - show animation type
 * @property {number} [showDuration=400] - show animation duration in miliseconds
 * @property {string} [style=bootstrap] - default style
 */

/**
 * Displays Messages
 */
var MessageDisplay = function () {
  /**
   * @param {jQuery} $element
   * @param {MessageConstructorOptions} options
   */

  function MessageDisplay($element) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    _classCallCheck(this, MessageDisplay);

    if ($element) {
      /**
       * @type {jQuery}
       * @private
       */
      this.$element_ = $element;

      if (!_jquery2.default.notify.getStyle('benndorf')) {
        _jquery2.default.notify.addStyle('benndorf', {
          html: '<div>' + '<div class="text" data-notify-text />' + '</div>' + '</div>',
          classes: {
            error: {
              'color': '#b94a48',
              'background-color': '#f2dede',
              'border-color': '#b94a48'
            },
            success: {
              'color': '#468847',
              'background-color': '#dff0d8',
              'border-color': '#468847'
            },
            info: {
              'color': '#3a87a',
              'background-color': '#d9edf7',
              'border-color': '#3a87ad'
            },
            warn: {
              'color': '#c09853',
              'background-color': '#fcf8e3',
              'border-color': '#c09853'
            }
          }
        });
      }
    } else {
      throw new Error('MessageDisplay needs an object to be associated to!');
    }

    /**
     * @type {MessageOptions}
     * @private
     */
    this.defaults_ = options;

    /**
     * @type {?number}
     * @private
     */
    this.autoHideTimer_ = null;

    if (!options.hasOwnProperty('arrowShow')) {
      this.defaults_.arrowShow = true;
    }
    if (!options.hasOwnProperty('arrowSize')) {
      this.defaults_.arrowSize = 5;
    }
    if (!options.hasOwnProperty('autoHide')) {
      this.defaults_.autoHide = true;
    }
    if (!options.hasOwnProperty('autoHideDelay')) {
      this.defaults_.autoHideDelay = 15000;
    }
    if (!options.hasOwnProperty('className')) {
      this.defaults_.className = 'error';
    }
    if (!options.hasOwnProperty('position')) {
      this.defaults_.position = 'bottom left';
    }
    if (!options.hasOwnProperty('gap')) {
      this.defaults_.gap = 2;
    }
    if (!options.hasOwnProperty('hideAnimation')) {
      this.defaults_.hideAnimation = 'slideUp';
    }
    if (!options.hasOwnProperty('hideDuration')) {
      this.defaults_.hideDuration = 200;
    }
    if (!options.hasOwnProperty('showAnimation')) {
      this.defaults_.showAnimation = 'slideDown';
    }
    if (!options.hasOwnProperty('showDuration')) {
      this.defaults_.showDuration = 400;
    }
    if (!options.hasOwnProperty('style')) {
      this.defaults_.style = 'benndorf';
    }
  }

  /**
   * Displays a generic message
   * @param {string} message
   * @param {MessageDisplayOptions} options
   */


  _createClass(MessageDisplay, [{
    key: 'message',
    value: function message(_message) {
      var _this = this;

      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      var msgOptions = this.defaults_;
      if (options.hasOwnProperty('autoHide')) {
        msgOptions.autoHide = options.autoHide;
      }
      if (options.hasOwnProperty('autoHideDelay')) {
        msgOptions.autoHideDelay = options.autoHideDelay;
      }
      if (options.hasOwnProperty('className')) {
        msgOptions.className = options.className;
      }
      if (options.hasOwnProperty('position')) {
        msgOptions.position = options.position;
      }

      this.$element_.notify((0, _utilities.html2Text)(_message), msgOptions);

      // HOTFIX for notifyjs issue
      (0, _jquery2.default)('.notifyjs-wrapper').click(function () {
        _this.hide();
      });
    }

    /**
     * Displays an error message
     * @param {string} message
     * @param {MessageReducedDisplayOptions} options
     */

  }, {
    key: 'error',
    value: function error(message) {
      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      options.className = 'error';
      this.message(message, options);
    }

    /**
     * Displays an info message
     * @param {string} message
     * @param {MessageReducedDisplayOptions} options
     */

  }, {
    key: 'info',
    value: function info(message) {
      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      options.className = 'info';
      this.message(message, options);
    }

    /**
     * Displays a success message
     * @param {string} message
     * @param {MessageReducedDisplayOptions} options
     */

  }, {
    key: 'success',
    value: function success(message) {
      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      options.className = 'success';
      this.message(message, options);
    }

    /**
     * Displays a warning message
     * @param {string} message
     * @param {MessageReducedDisplayOptions} options
     */

  }, {
    key: 'warn',
    value: function warn(message) {
      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      options.className = 'warn';
      this.message(message, options);
    }

    /**
     * Hides all messages
     */

  }, {
    key: 'hide',
    value: function hide() {
      (0, _jquery2.default)('.notifyjs-wrapper').trigger('notify-hide');
      window.clearTimeout(this.autoHideTimer_);
    }
  }]);

  return MessageDisplay;
}();

exports.MessageDisplay = MessageDisplay;

/***/ }),
/* 279 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Move = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * @typedef {object} MoveOptions
 * @property {G4UMap} map
 * @property {number} [pixelPadding=0] a default padding around the target extent in pixels
 * @property {number} [meterMinSize=0] the minimal size of the target extent in meters
 * @property {number} [animationDuration=4000]
 * @property {boolean} [animations=true]
 * @property {boolean} [bouncing=false] if the animation should bounce or not
 */

/**
 * @typedef {olx.view.FitOptions} SingleMoveOptions
 * @property {boolean} [animated] if specified overwrites the default settings
 * @property {number[]|string} [padding] can be set to 'default' to use the default settings
 */

/**
 * Moves the map. Uses animations if desired.
 */
var Move = exports.Move = function () {
  /**
   * @param {MoveOptions} options
   */
  function Move(options) {
    _classCallCheck(this, Move);

    /**
     * @type {G4UMap}
     * @private
     */
    this.map_ = options.map;

    /**
     * @type {number}
     * @private
     */
    this.pixelPadding_ = options.meterMinSize !== undefined ? 50 : options.pixelPadding;

    /**
     * @type {number}
     * @private
     */
    this.meterMinSize_ = options.meterMinSize !== undefined ? options.meterMinSize : 500;

    /**
     * @type {number}
     * @private
     */
    this.animationDuration_ = options.animationDuration || 2000;

    /**
     * @type {boolean}
     * @private
     */
    this.animations_ = options.animations !== undefined ? options.animations : true;

    /**
     * @type {boolean}
     * @private
     */
    this.bouncing_ = options.bouncing !== false;
  }

  /**
   * Turns animations on or off
   * @param {boolean} animations
   */


  _createClass(Move, [{
    key: 'setAnimations',
    value: function setAnimations(animations) {
      this.animations_ = animations;
    }

    /**
     * @returns {boolean}
     */

  }, {
    key: 'getAnimations',
    value: function getAnimations() {
      return this.animations_;
    }

    /**
     * @param {ol.Coordinate} point
     * @param {SingleMoveOptions} [options={}]
     */

  }, {
    key: 'toPoint',
    value: function toPoint(point) {
      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      // calculate extent
      var tmpView = new _openlayers2.default.View({
        projection: this.map_.getView().getProjection(),
        center: point,
        resolution: this.map_.getView().getResolution()
      });
      var extent = tmpView.calculateExtent(this.map_.getSize().map(function (s) {
        return s - 2;
      }));

      options.padding = [0, 0, 0, 0]; // no padding around this extent

      this.toExtent(extent, options);
    }

    /**
     * @param {ol.Extent} extent
     * @param {SingleMoveOptions} [options={}]
     */

  }, {
    key: 'toExtent',
    value: function toExtent(extent) {
      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      var newExtent = extent;
      if (this.meterMinSize_) {
        newExtent = this.bufferUpToMinSize_(extent);
      }
      if (options.animated === undefined ? this.animations_ : options.animated) {
        this.animationZoomToExtent_(newExtent, options);
      } else {
        this.fit_(newExtent, options);
      }
    }

    /**
     * @param {ol.Point} point
     * @param {SingleMoveOptions} [options={}]
     */

  }, {
    key: 'zoomToPoint',
    value: function zoomToPoint(point) {
      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      this.toExtent(_openlayers2.default.extent.boundingExtent([point]), options);
    }

    /**
     * @param {ol.Extent} extent
     * @returns {ol.Extent}
     * @private
     */

  }, {
    key: 'bufferUpToMinSize_',
    value: function bufferUpToMinSize_(extent) {
      // TODO: maybe use something more precise than transforming into 3857 to get meter size.
      var extentInMeters = _openlayers2.default.proj.transformExtent(extent, this.map_.getView().getProjection(), 'EPSG:3857');
      var smallerSize = Math.min(_openlayers2.default.extent.getWidth(extentInMeters), _openlayers2.default.extent.getHeight(extentInMeters));
      if (smallerSize < this.meterMinSize_) {
        extentInMeters = _openlayers2.default.extent.buffer(extentInMeters, this.meterMinSize_ - smallerSize / 2);
        return _openlayers2.default.proj.transformExtent(extentInMeters, 'EPSG:3857', this.map_.getView().getProjection());
      } else {
        return extent;
      }
    }

    /**
     * @param {ol.Extent} extent
     * @param {SingleMoveOptions} options
     * @private
     */

  }, {
    key: 'fit_',
    value: function fit_(extent, options) {
      if (options.padding === 'default') {
        options.padding = [this.pixelPadding_, this.pixelPadding_, this.pixelPadding_, this.pixelPadding_];
      }

      // options.constrainResolution = false

      // using fit's padding option
      this.map_.getView().fit(_openlayers2.default.geom.Polygon.fromExtent(extent), this.map_.getSize(), options);
    }

    /**
     * This function glides or bounces to an extent
     * @param {ol.Extent} endExtent
     * @param {SingleMoveOptions} options
     * @private
     */

  }, {
    key: 'animationZoomToExtent_',
    value: function animationZoomToExtent_(endExtent, options) {
      var _this = this;

      var map = this.map_;
      var view = map.getView();
      var size = map.getSize();

      var startExtent = view.calculateExtent(size);

      var moveExtent = _openlayers2.default.extent.extend(startExtent.slice(0), endExtent); // a extent where both extents are contained.

      if (this.bouncing_ && !_openlayers2.default.extent.intersects(startExtent, endExtent)) {
        var moveOptions = Object.assign({
          duration: this.animationDuration_ / 2
        }, options);
        view.fit(moveExtent, moveOptions);
        setTimeout(function () {
          var endOptions = Object.assign({
            duration: _this.animationDuration_ / 2
          }, options);
          view.fit(endExtent, endOptions);
        }, this.animationDuration_ / 2);
      } else {
        var endOptions = Object.assign({
          duration: this.animationDuration_ / 2
        }, options);
        view.fit(endExtent, endOptions);
      }
    }

    /**
     * Easing function based on a circle function
     * @param {number} t
     * @returns {number}
     * @private
     */

  }, {
    key: 'earlyFastRiseEasing_',
    value: function earlyFastRiseEasing_(t) {
      return Math.sqrt(2 * t - Math.pow(t, 2));
    }

    /**
     * Easing function based on a circle function
     * @param {number} t
     * @returns {number}
     * @private
     */

  }, {
    key: 'lateFastRiseEasing_',
    value: function lateFastRiseEasing_(t) {
      return 1 - Math.sqrt(1 - Math.pow(t, 2));
    }

    /**
     * Easing function based on a parabolic function
     * @param {number} t
     * @returns {number}
     * @private
     */

  }, {
    key: 'earlyFastRiseEasing2_',
    value: function earlyFastRiseEasing2_(t) {
      return -Math.pow(t - 1, 2) + 1;
    }

    /**
     * Easing function based on a parabolic function
     * @param {number} t
     * @returns {number}
     * @private
     */

  }, {
    key: 'lateFastRiseEasing2_',
    value: function lateFastRiseEasing2_(t) {
      return Math.pow(t, 2);
    }
  }]);

  return Move;
}();

/***/ }),
/* 280 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PopupModifierManager = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Debug = __webpack_require__(15);

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var PopupModifierManager = exports.PopupModifierManager = function () {
  function PopupModifierManager() {
    _classCallCheck(this, PopupModifierManager);

    /**
     * @type {Map.<string,PopupModifier>}
     * @private
     */
    this.popupModifiers_ = new Map();
  }

  /**
   * register a text mutator with a name. Which mutator is finally used can be adjusted via the config files.
   * @param {string} name
   * @param {PopupModifier} popupModifier
   */


  _createClass(PopupModifierManager, [{
    key: 'register',
    value: function register(name, popupModifier) {
      this.popupModifiers_.set(name, popupModifier);
    }

    /**
     * @param {PopupContent} popupContent
     * @param {string[]} popupModifiers
     * @returns {Promise.<PopupContent>}
     */

  }, {
    key: 'apply',
    value: function apply(popupContent, popupModifiers) {
      var _this = this;

      var promiseContent = Promise.resolve(popupContent);

      var _loop = function _loop(m) {
        var popupModifier = _this.popupModifiers_.get(m);
        if (popupModifier) {
          promiseContent = promiseContent.then(function (result) {
            return popupModifier.modifyPopupContent(result);
          });
        } else {
          _Debug.Debug.error('Trying to use unregistered modifier ' + m);
        }
      };

      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = popupModifiers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var m = _step.value;

          _loop(m);
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }

      return promiseContent;
    }
  }]);

  return PopupModifierManager;
}();

/***/ }),
/* 281 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ShowWMSFeatureInfo = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _VectorLayer = __webpack_require__(94);

var _MapEventInteraction = __webpack_require__(312);

var _FeaturePopup = __webpack_require__(179);

var _globals = __webpack_require__(11);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * @typedef {Object} ShowWMSFeatureInfoOptions
 * @property {StyleLike} [style='#defaultStyle']
 * @property {String} [seperator='<br>']
 * @property {String[]} [popupModifiers=[]]
 * @property {boolean} [animated]
 */

var ShowWMSFeatureInfo = exports.ShowWMSFeatureInfo = function () {
  /**
   * @param {ShowWMSFeatureInfoOptions} [options={}]
   */
  function ShowWMSFeatureInfo() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, ShowWMSFeatureInfo);

    this.separator_ = options.hasOwnProperty('seperator') ? options.seperator : '<br>';
    this.style_ = options.style || '#defaultStyle';

    this.animated_ = options.animated;
    this.centerOnPopup_ = options.hasOwnProperty('centerOnPopup') ? options.centerOnPopup : true;
    this.centerIfNoData_ = this.centerOnPopup_ && options.hasOwnProperty('centerIfNoData') ? options.centerIfNoData : false;

    this.centerOnPopupInitial_ = this.centerOnPopup_;

    this.popupModifiers_ = options.popupModifiers || [];
  }

  _createClass(ShowWMSFeatureInfo, [{
    key: 'handleClickEvent',
    value: function handleClickEvent(e) {
      var _this = this;

      var map = this.getMap();
      var featurePopup = map.get('featurePopup');
      var projection = map.getView().getProjection();

      var layers = this.layers_.filter(function (l) {
        return l.getVisible();
      });

      var shouldShow = map.forEachLayerAtPixel(e.mapEvent.pixel, function (layer) {
        return layers.indexOf(layer) > -1;
      }) && !map.forEachFeatureAtPixel(e.mapEvent.pixel, _FeaturePopup.FeaturePopup.canDisplay);

      if (shouldShow) {
        (function () {
          var coordinate = e.mapEvent.coordinate;
          _this.utilitySource_.clear();
          var feature = void 0;

          var _loop = function _loop(layer) {
            layer.getSource().getFeatureInfo(coordinate, map.getView().getResolution(), projection).then(function (data) {
              if (data !== '') {
                if (!feature) {
                  _this.utilitySource_.clear();
                  feature = new _openlayers2.default.Feature({
                    geometry: new _openlayers2.default.geom.Point(coordinate),
                    description: data,
                    style: map.get('styling').getStyle(_this.style_)
                  });
                  map.get('styling').manageFeature(feature);
                  _this.utilitySource_.addFeature(feature);
                  featurePopup.setFeature(feature, coordinate, [].concat(_toConsumableArray(_this.popupModifiers_), _toConsumableArray(layer.getSource().getFeatureInfoMutators())));
                  featurePopup.setVisible(true);
                  _this.setPointVisible(true);
                  if (_this.centerOnPopup_) {
                    featurePopup.centerMapOnPopup(_this.animated_);
                  }
                  featurePopup.once('change:visible', function () {
                    return _this.setPointVisible(false);
                  });
                } else {
                  feature.set('description', feature.get('description') + _this.separator_ + data);
                }
              }
              layer.on('change:visible', function () {
                featurePopup.setVisible(false);
              });
            });
          };

          var _iteratorNormalCompletion = true;
          var _didIteratorError = false;
          var _iteratorError = undefined;

          try {
            for (var _iterator = layers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
              var layer = _step.value;

              _loop(layer);
            }
          } catch (err) {
            _didIteratorError = true;
            _iteratorError = err;
          } finally {
            try {
              if (!_iteratorNormalCompletion && _iterator.return) {
                _iterator.return();
              }
            } finally {
              if (_didIteratorError) {
                throw _iteratorError;
              }
            }
          }
        })();
      }
    }
  }, {
    key: 'handlePointerMoveEvent',
    value: function handlePointerMoveEvent(e) {
      var _this2 = this;

      var map = this.getMap();
      var featureTooltip = map.get('featureTooltip');

      featureTooltip.setFeature(null);
      clearTimeout(this.tooltipTimeout_);
      this.lastTooltipPixel_ = e.pixel;
      this.tooltipTimeout_ = setTimeout(function () {
        if (e.pixel === _this2.lastTooltipPixel_) {
          var projection = map.getView().getProjection();
          var layers = _this2.layers_.filter(function (l) {
            return l.getVisible();
          });
          var shouldShow = map.forEachLayerAtPixel(e.mapEvent.pixel, function (layer) {
            return layers.indexOf(layer) > -1;
          }) && !map.forEachFeatureAtPixel(e.mapEvent.pixel, _FeaturePopup.FeaturePopup.canDisplay);

          if (shouldShow) {
            (function () {
              var coordinate = e.mapEvent.coordinate;
              var feature = void 0;

              var _loop2 = function _loop2(layer) {
                layer.getSource().getFeatureInfo(coordinate, map.getView().getResolution(), projection).then(function (data) {
                  if (data !== '') {
                    if (!feature) {
                      feature = new _openlayers2.default.Feature({
                        geometry: new _openlayers2.default.geom.Point(coordinate),
                        description: data
                      });
                      featureTooltip.setFeature(feature, coordinate, [].concat(_toConsumableArray(_this2.popupModifiers_), _toConsumableArray(layer.getSource().getFeatureInfoMutators())));
                    } else {
                      feature.set('description', feature.get('description') + _this2.separator_ + data);
                    }
                  }
                  layer.on('change:visible', function () {
                    featureTooltip.setFeature(null);
                  });
                });
              };

              var _iteratorNormalCompletion2 = true;
              var _didIteratorError2 = false;
              var _iteratorError2 = undefined;

              try {
                for (var _iterator2 = layers[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                  var layer = _step2.value;

                  _loop2(layer);
                }
              } catch (err) {
                _didIteratorError2 = true;
                _iteratorError2 = err;
              } finally {
                try {
                  if (!_iteratorNormalCompletion2 && _iterator2.return) {
                    _iterator2.return();
                  }
                } finally {
                  if (_didIteratorError2) {
                    throw _iteratorError2;
                  }
                }
              }
            })();
          }
        }
      }, 200);

      if (map.forEachLayerAtPixel(e.mapEvent.pixel, function (layer) {
        return _this2.layers_.indexOf(layer) > -1;
      })) {
        (0, _jquery2.default)(map.getViewport()).addClass(_globals.cssClasses.clickable);
      } else {
        (0, _jquery2.default)(map.getViewport()).removeClass(_globals.cssClasses.clickable);
      }
    }
  }, {
    key: 'setMap',
    value: function setMap(map) {
      var _this3 = this;

      var onMapChangeMobile = function onMapChangeMobile() {
        if (map.get('mobile')) {
          _this3.centerOnPopup_ = false;
        } else {
          _this3.centerOnPopup_ = _this3.centerOnPopupInitial_;
        }
      };

      if (this.getMap()) {
        this.getMap().un('change:mobile', onMapChangeMobile);
        _openlayers2.default.Observable.unByKey(this.listenerKey_);
      }

      this.map_ = map;
      if (map) {
        this.utilitySource_ = new _openlayers2.default.source.Vector();
        this.utilityLayer_ = new _VectorLayer.VectorLayer({
          visible: false,
          source: this.utilitySource_
        });
        map.addLayer(this.utilityLayer_);

        this.layers_ = [];

        var interaction = new _MapEventInteraction.MapEventInteraction({ type: 'singleclick' });
        interaction.on('mapevent', function (e) {
          return _this3.handleClickEvent(e);
        });

        map.addDefaultInteraction('singleclick', interaction);

        var hoverInteraction = new _MapEventInteraction.MapEventInteraction({ type: 'pointermove' });
        hoverInteraction.on('mapevent', function (e) {
          return _this3.handlePointerMoveEvent(e);
        });

        map.addDefaultInteraction('pointermove', hoverInteraction);

        onMapChangeMobile();
        map.on('change:mobile', onMapChangeMobile);
      }
    }
  }, {
    key: 'getPointVisible',
    value: function getPointVisible() {
      return this.utilityLayer_.getVisible();
    }
  }, {
    key: 'setPointVisible',
    value: function setPointVisible(visible) {
      this.utilityLayer_.setVisible(visible);
    }
  }, {
    key: 'getMap',
    value: function getMap() {
      return this.map_;
    }
  }, {
    key: 'addLayer',
    value: function addLayer(layer) {
      this.layers_.push(layer);
    }
  }]);

  return ShowWMSFeatureInfo;
}();

/***/ }),
/* 282 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Styling = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _utilitiesObject = __webpack_require__(36);

var _utilities = __webpack_require__(5);

var _Debug = __webpack_require__(15);

var _csscolorparser = __webpack_require__(223);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * @typedef {string|StyleObject|ol.style.Style} StyleLike
 */

/**
 * @typedef {Object} StyleObject
 */

/**
 * merges two style configs
 * @param {StyleObject} configTarget
 * @param {StyleObject} configSource
 * @returns {StyleObject}
 */
function mergeStyleConfigs(configTarget, configSource) {
  var mergedConf = (0, _utilitiesObject.copyDeep)(configTarget);
  if (configSource) {
    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
      for (var _iterator = Object.keys(configSource)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
        var k = _step.value;

        var sourceProp = configSource[k];

        if (configTarget.hasOwnProperty(k)) {
          var targetProp = configTarget[k];

          if ((typeof targetProp === 'undefined' ? 'undefined' : _typeof(targetProp)) === 'object' && !(targetProp instanceof Array)) {
            // if it is another object, merge recursively
            var _targetProp = configTarget[k];

            if (_targetProp.hasOwnProperty('type')) {
              if (sourceProp.hasOwnProperty('type')) {
                if (configTarget[k].type === sourceProp.type) {
                  mergedConf[k] = mergeStyleConfigs(_targetProp, sourceProp);
                }
              }
            } else {
              mergedConf[k] = mergeStyleConfigs(_targetProp, sourceProp);
            }
          }
        } else {
          // copy over if it doesn't exist in the target
          if ((typeof sourceProp === 'undefined' ? 'undefined' : _typeof(sourceProp)) === 'object' && !(sourceProp instanceof Array)) {
            mergedConf[k] = (0, _utilitiesObject.copyDeep)(sourceProp);
          } else {
            mergedConf[k] = sourceProp;
          }
        }
      }
    } catch (err) {
      _didIteratorError = true;
      _iteratorError = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion && _iterator.return) {
          _iterator.return();
        }
      } finally {
        if (_didIteratorError) {
          throw _iteratorError;
        }
      }
    }
  }
  return mergedConf;
}

/**
 * This class coordinates the styling.
 */

var Styling = exports.Styling = function () {
  /**
   * @param {Object} [options]
   * @param {Object} [options.styleConfigMap]
   * @param {number} [options.globalIconScale]
   * @param {boolean} [options.manageStyles=true]
   */
  function Styling() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, Styling);

    /**
     * @type {Map.<string,StyleObject>}
     * @private
     */
    this.styleConfigMap_ = new Map();

    if (!this.styleConfigMap_.has('#defaultStyle')) {
      // FallbackStyle
      this.styleConfigMap_.set('#defaultStyle', {
        'stroke': {
          'color': 'rgba(0,0,0,0.9)',
          'width': 2
        },
        'fill': {
          'color': 'rgba(0,0,0,0.3)'
        },
        'image': {
          'type': 'circle',
          'stroke': {
            'color': 'rgba(0,0,0,0.9)',
            'width': 2
          },
          'fill': {
            'color': 'rgba(0,0,0,0.3)'
          }
        }
      });
    }

    if (options.styleConfigMap) {
      var _iteratorNormalCompletion2 = true;
      var _didIteratorError2 = false;
      var _iteratorError2 = undefined;

      try {
        for (var _iterator2 = Object.keys(options.styleConfigMap)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
          var k = _step2.value;

          this.styleConfigMap_.set(k, options.styleConfigMap[k]);
        }
      } catch (err) {
        _didIteratorError2 = true;
        _iteratorError2 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion2 && _iterator2.return) {
            _iterator2.return();
          }
        } finally {
          if (_didIteratorError2) {
            throw _iteratorError2;
          }
        }
      }
    }

    /**
     * @type {Map.<string,ol.style.Style>}
     * @private
     */
    this.styleMap_ = new Map();

    /**
     * @type {Set.<ol.style.Style>}
     * @private
     */
    this.allStyles_ = new Set();

    if (options.globalIconScale) {
      this.setGlobalIconScale(options.globalIconScale);
    }

    var _this = this;

    /**
     * @param resolution
     * @returns {*}
     * @private
     */
    this.managingFeatureStyle_ = function (resolution) {
      var _this2 = this;

      var style = this.get('managedStyle');
      if (_jquery2.default.isFunction(style)) {
        style = style.call(this, resolution);
      }
      if (!style) {
        style = _this.getStyle('#defaultStyle');
      }
      if (_jquery2.default.isArray(style)) {
        return style.map(function (s) {
          return _this.adjustStyle_(_this2, s);
        });
      } else {
        return _this.adjustStyle_(this, style);
      }
    };

    this.nullStyle_ = new _openlayers2.default.style.Style({
      image: null
    });

    this.manageStyles_ = options.manageStyles !== false;
  }

  /**
   * @param {number} scale
   */


  _createClass(Styling, [{
    key: 'setGlobalIconScale',
    value: function setGlobalIconScale(scale) {
      /**
       * @type {number}
       * @private
       */
      this.globalIconScale_ = scale;
    }

    /**
     * @returns {number}
     */

  }, {
    key: 'getGlobalIconScale',
    value: function getGlobalIconScale() {
      return this.globalIconScale_ || 1;
    }

    /**
     * @param {StyleObject} styleConf
     * @returns {ol.style.Style}
     */

  }, {
    key: 'getStyleFromConfig',
    value: function getStyleFromConfig(styleConf) {
      var filledStyleConf = mergeStyleConfigs(styleConf, this.styleConfigMap_.get('#default'));

      function addFillsAndStrokes(subStyleConf) {
        subStyleConf = subStyleConf || {};
        var preparedOptions = (0, _utilitiesObject.copy)(subStyleConf);

        if ((0, _utilities.checkFor)(subStyleConf, 'fill')) {
          preparedOptions.fill = new _openlayers2.default.style.Fill(mergeStyleConfigs(subStyleConf.fill, filledStyleConf.fill));
        } else {
          preparedOptions.fill = new _openlayers2.default.style.Fill(filledStyleConf.fill);
        }

        if ((0, _utilities.checkFor)(subStyleConf, 'stroke')) {
          preparedOptions.stroke = new _openlayers2.default.style.Stroke(mergeStyleConfigs(subStyleConf.stroke, filledStyleConf.stroke));
        } else {
          preparedOptions.stroke = new _openlayers2.default.style.Stroke(filledStyleConf.stroke);
        }

        return preparedOptions;
      }

      var styleOptions = addFillsAndStrokes(filledStyleConf);

      styleOptions.text = new _openlayers2.default.style.Text(addFillsAndStrokes(filledStyleConf.text));

      var scalable = false;

      if (filledStyleConf.hasOwnProperty('image')) {
        if (filledStyleConf.image.type === 'icon' && filledStyleConf.image.hasOwnProperty('src') && filledStyleConf.image.src) {
          styleOptions.image = new _openlayers2.default.style.Icon(filledStyleConf.image);
          scalable = true;
        } else if (filledStyleConf.image.type === 'circle') {
          styleOptions.image = new _openlayers2.default.style.Circle(addFillsAndStrokes(filledStyleConf.image));
          scalable = true;
        } else if (filledStyleConf.image.type === 'regularShape') {
          styleOptions.image = new _openlayers2.default.style.RegularShape(addFillsAndStrokes(filledStyleConf.image));
          scalable = true;
        }

        if (scalable) {
          styleOptions.image.setScale((styleOptions.image.getScale() || 1) * this.getGlobalIconScale());
        }
      }

      return new _openlayers2.default.style.Style(styleOptions);
    }
  }, {
    key: 'getConfigFromStyle',
    value: function getConfigFromStyle(style) {
      throw new Error('Not implemented yet');
    }

    /**
     * @param {string} id
     * @returns {ol.style.Style}
     */

  }, {
    key: 'getStyleById',
    value: function getStyleById(id) {
      if (!this.styleMap_.has(id)) {
        if (this.styleConfigMap_.has(id)) {
          this.styleMap_.set(id, this.getStyleFromConfig(this.getConfigById(id)));
        } else {
          _Debug.Debug.error('No style found for id ' + id + '. Using default style.');
          return this.styleMap_.get('#defaultStyle');
        }
      }
      return this.styleMap_.get(id);
    }

    /**
     * @param {string} id
     * @returns {StyleObject}
     */

  }, {
    key: 'getConfigById',
    value: function getConfigById(id) {
      if (this.styleConfigMap_.has(id)) {
        return this.styleConfigMap_.get(id);
      } else {
        _Debug.Debug.error('No style config found for id ' + id + '. Using default style.');
        return this.styleConfigMap_.get('#defaultStyle');
      }
    }

    /**
     * @param {StyleLike} data
     * @returns {ol.style.Style}
     */

  }, {
    key: 'getStyle',
    value: function getStyle(data) {
      if (data === undefined) {
        return this.getStyleById('#defaultStyle');
      } else if (data instanceof _openlayers2.default.style.Style || _jquery2.default.isFunction(data)) {
        return data;
      } else if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) === 'object') {
        return this.getStyleFromConfig(data);
      } else {
        return this.getStyleById(data);
      }
    }

    /**
     * converts ol.StyleFunction to ol.FeatureStyleFunction
     * @param {ol.style.StyleFunction} styleFunction
     * @returns {ol.FeatureStyleFunction}
     */

  }, {
    key: 'convertStyleFunction',
    value: function convertStyleFunction(styleFunction) {
      return function (resolution) {
        return styleFunction(this, resolution);
      };
    }

    /**
     * This internal method is called to adjust each style to current global and feature settings
     * @param feature
     * @param style
     * @returns {ol.style.Style}
     * @private
     */

  }, {
    key: 'adjustStyle_',
    value: function adjustStyle_(feature, style) {
      if (!feature.get('hidden')) {
        var clone = style.clone();
        this.scaleStyle_(clone);
        if (feature.get('opacity') !== undefined) {
          this.changeColorOpacity_(clone, feature.get('opacity'));
        }
        return clone;
      } else {
        return this.nullStyle_;
      }
    }

    /**
     * This method adjusts the scale of a style
     * @param style
     * @private
     */

  }, {
    key: 'scaleStyle_',
    value: function scaleStyle_(style) {
      var image = style.getImage();
      if (image) {
        var origScale = style.getImage().getScale() || 1;
        image.setScale(origScale * this.getGlobalIconScale());
      }
    }

    /**
     * adjust the styles opacity by a given value
     * @param {ol.style.Style} style
     * @param {number} opacity between 0 and 1
     * @returns {ol.style.Style}
     */

  }, {
    key: 'changeColorOpacity_',
    value: function changeColorOpacity_(style, opacity) {
      var adjustColor = function adjustColor(style, opacity) {
        var color = style.getColor();
        if (color !== null) {
          if (!(color instanceof Array)) {
            if (typeof color === 'string') {
              color = (0, _csscolorparser.parseCSSColor)(color);
            } else {
              throw new Error('Type not supported');
            }
          }

          color[3] = color[3] * opacity;
        }
        style.setColor(color);
      };

      if (style.getImage()) {
        style.getImage().setOpacity(opacity);
      }
      if (style.getFill()) {
        adjustColor(style.getFill(), opacity);
      }
      if (style.getStroke()) {
        adjustColor(style.getStroke(), opacity);
      }
      if (style.getText()) {
        if (style.getText().getFill()) {
          adjustColor(style.getText().getFill(), opacity);
        }
        if (style.getText().getStroke()) {
          adjustColor(style.getText().getStroke(), opacity);
        }
      }
    }
  }, {
    key: 'manageFeature',
    value: function manageFeature(feature) {
      if (this.manageStyles_) {
        var style = feature.getStyle();
        if (style && !feature.get('managedStyle')) {
          feature.set('managedStyle', style);
          feature.setStyle(this.managingFeatureStyle_);
        }
      }
    }
  }, {
    key: 'manageFeatureCollection',
    value: function manageFeatureCollection(collection) {
      var _this3 = this;

      if (this.manageStyles_) {
        collection.forEach(function (feature) {
          _this3.manageFeature(feature);
        });

        collection.on('add', function (e) {
          _this3.manageFeature(e.element);
        });
      }
    }
  }, {
    key: 'manageLayer',
    value: function manageLayer(layer) {
      var _this4 = this;

      if (this.manageStyles_) {
        var style = layer.getStyle();

        if (style && !layer.get('managedStyle')) {
          layer.set('managedStyle', layer.getStyle());

          layer.setStyle(function (feature, resolution) {
            var style = layer.get('managedStyle');
            if (_jquery2.default.isFunction(style)) {
              style = style.call(feature, resolution);
            }
            if (!style) {
              style = _this4.getStyle('#defaultStyle');
            }
            if (_jquery2.default.isArray(style)) {
              return style.map(function (s) {
                return _this4.adjustStyle_(feature, s);
              });
            } else {
              return _this4.adjustStyle_(feature, style);
            }
          });
        }

        layer.getSource().getFeatures().forEach(function (feature) {
          _this4.manageFeature(feature);
        });

        layer.getSource().on('addfeature', function (e) {
          _this4.manageFeature(e.feature);
        });
      }
    }
  }]);

  return Styling;
}();

/***/ }),
/* 283 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ControlFactory = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _Attribution = __webpack_require__(181);

var _ComposedControl = __webpack_require__(128);

var _ArrowButtons = __webpack_require__(290);

var _CombinedZoom = __webpack_require__(291);

var _LayerSelector = __webpack_require__(297);

var _GeoLocationButton = __webpack_require__(292);

var _MeasurementButton = __webpack_require__(183);

var _LanguageSwitcherButton = __webpack_require__(295);

var _LanguageSwitcherMenu = __webpack_require__(296);

var _MobileControls = __webpack_require__(300);

var _InfoButton = __webpack_require__(294);

var _LinkButton = __webpack_require__(298);

var _PrintButton = __webpack_require__(184);

var _Logo = __webpack_require__(299);

var _HelpButton = __webpack_require__(293);

var _WindowDecorator = __webpack_require__(185);

var _utilities = __webpack_require__(5);

var _utilitiesObject = __webpack_require__(36);

var _G4UMap = __webpack_require__(127);

var _Debug = __webpack_require__(15);

var _ActiveGroup = __webpack_require__(289);

var _MousePosition = __webpack_require__(301);

var _ScaleLine = __webpack_require__(303);

var _OverviewMap = __webpack_require__(302);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * @typedef {Object} ControlFactoryOptions
 * @property {L10N} localiser
 * @property {G4UMap} map
 */

/**
 * A Factory that takes a control config as an object and returns the correspondig control. Modules can expand the
 * functionality of this class via the createControl method
 */
var ControlFactory = exports.ControlFactory = function () {
  /**
   * @param {ControlFactoryOptions} options
   * @public
   */
  function ControlFactory(options) {
    _classCallCheck(this, ControlFactory);

    /**
     * @type {L10N}
     * @private
     * */
    this.localiser_ = options.localiser;

    /**
     * @type {G4UMap}
     * @private
     */
    this.map_ = options.map;

    /**
     * @type {Map.<string, ActiveGroup>}
     * @private
     */
    this.activeGroups_ = new Map();
  }

  /**
   * @returns {Positioning}
   */


  _createClass(ControlFactory, [{
    key: 'getPositioning',
    value: function getPositioning() {
      return this.map_.get('controlPositioning');
    }

    /**
     * The factory function
     * @param {string} controlType
     * @param {g4uControlOptions} options
     * @returns {Control}
     * @public
     */

  }, {
    key: 'createControl',
    value: function createControl(controlType, options) {
      switch (controlType) {
        case 'mousePosition':
          options.projection = options.projection || this.map_.get('interfaceProjection');
          return new _MousePosition.MousePosition(options);
        case 'attribution':
          return new _Attribution.Attribution(options);
        case 'zoom':
          return new _CombinedZoom.CombinedZoom(options);
        case 'scaleLine':
          return new _ScaleLine.ScaleLine(options);
        case 'logo':
          return new _Logo.Logo(options);
        case 'linkButton':
          return new _LinkButton.LinkButton(options);
        case 'mobileControls':
          return new _MobileControls.MobileControls(options);
        case 'overviewMap':
          var projection = options.projection || this.map_.get('mapProjection');
          options.view = new _openlayers2.default.View({ projection: projection });
          return new _OverviewMap.OverviewMap(options);
        case 'infoButton':
          return new _WindowDecorator.WindowDecorator({
            component: new _InfoButton.InfoButton(options)
          });
        case 'arrowButtons':
          var mapConfig = this.map_.get('mapConfig');
          if (mapConfig.view) {
            if (mapConfig.view.center) {
              options.initCenter = _openlayers2.default.proj.transform(mapConfig.view.center, this.map_.get('interfaceProjection'), this.map_.get('mapProjection'));
            }
            if (mapConfig.view.zoom) {
              options.initZoom = mapConfig.view.zoom;
            }
          }
          return new _ArrowButtons.ArrowButtons(options);
        case 'layerSelector':
          return new _LayerSelector.LayerSelector(options);
        case 'geolocationButton':
          return new _GeoLocationButton.GeolocationButton(options);
        case 'languageSwitcherButton':
          return new _LanguageSwitcherButton.LanguageSwitcherButton(options);
        case 'languageSwitcherMenu':
          return new _LanguageSwitcherMenu.LanguageSwitcherMenu(options);
        case 'printButton':
          return new _PrintButton.PrintButton(options);
        case 'distanceMeasurementButton':
          options.className = options.className || 'g4u-distance-measurement';
          options.type = 'LineString';
          options.dimension = 1;
          return new _WindowDecorator.WindowDecorator({
            component: new _MeasurementButton.MeasurementButton(options)
          });
        case 'areaMeasurementButton':
          options.className = options.className || 'g4u-area-measurement';
          options.type = 'Polygon';
          options.dimension = 2;
          return new _WindowDecorator.WindowDecorator({
            component: new _MeasurementButton.MeasurementButton(options)
          });
        case 'helpButton':
          options.configControls = this.map_.get('mapConfig').controls;
          return new _WindowDecorator.WindowDecorator({
            component: new _HelpButton.HelpButton(options)
          });
        case 'toolbox':
          options.className = options.className || 'g4u-toolbox';
          return new _ComposedControl.ComposedControl(options);
        case 'layerMenu':
          options.className = options.className || 'g4u-layermenu';
          return new _ComposedControl.ComposedControl(options);
      }
    }

    /**
     * Function to add a control by its name to a certain receiver
     * @param {ComposedControl|G4UMap} receiver
     * @param {string} controlName
     * @public
     */

  }, {
    key: 'addControlTo',
    value: function addControlTo(receiver, controlName) {
      /**
       * @type {g4uControlOptions}
       */
      var config = (0, _utilitiesObject.copyDeep)((0, _utilities.asObject)(this.controlsConfig[controlName]));

      var controlType = config.controlType || controlName;

      config.controlName = controlName;

      config.localiser = this.localiser_;

      if (!config.hasOwnProperty('importance') && receiver.getImportance) {
        config.importance = receiver.getImportance();
      }

      var control = this.createControl(controlType, config, receiver);

      var modules = this.map_.getModules();

      for (var i = 0, ii = modules.length; i < ii && control === undefined; i++) {
        control = modules[i].createControl(controlType, config, receiver);
      }

      if (control) {
        if (config.activeGroup) {
          if (!this.activeGroups_.has(config.activeGroup)) {
            this.activeGroups_.set(config.activeGroup, new _ActiveGroup.ActiveGroup());
          }
          this.activeGroups_.get(config.activeGroup).addControl(control);
        }

        if (!this.map_.controlsByName[controlName]) {
          this.map_.controlsByName[controlName] = [control];
        } else {
          this.map_.controlsByName[controlName].push(control);
        }

        receiver.addControl(control);

        if (config.contains) {
          this.addControlMultipleInternal_(control, config.contains);
        }

        if (control.rewire) {
          control.rewire();
        }

        if (receiver instanceof _G4UMap.G4UMap) {
          this.getPositioning().addControl(control);
        }
      } else if (control === undefined) {
        throw new Error('Unrecognized control type ' + controlType + ', maybe you did forget to set the property type of the control?');
      }
    }

    /**
     * Adds multiple controls to one receiver
     * @param {ComposedControl|G4UMap} receiver
     * @param {string[]} controlNames
     * @private
     */

  }, {
    key: 'addControlMultipleInternal_',
    value: function addControlMultipleInternal_(receiver, controlNames) {
      var _this = this;

      controlNames.forEach(function (controlName) {
        _Debug.Debug.tryOrThrow(function () {
          _this.addControlTo(receiver, controlName);
        });
      });
    }

    /**
     * Add all configured Controls to the map
     * @public
     */

  }, {
    key: 'addControls',
    value: function addControls() {
      this.controlsConfig = this.map_.get('mapConfig').controls;
      if ((0, _utilities.checkFor)(this.controlsConfig, 'onMap')) {
        this.addControlMultipleInternal_(this.map_, this.controlsConfig.onMap);
      }
    }

    /**
     * Sets the localiser to pass on to the controls
     * @param {L10N} loc
     * @public
     */

  }, {
    key: 'setLocaliser',
    value: function setLocaliser(loc) {
      this.localiser_ = loc;
    }
  }]);

  return ControlFactory;
}();

/***/ }),
/* 284 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.LayerConfigurator = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _GroupLayer = __webpack_require__(73);

var _utilitiesObject = __webpack_require__(36);

var _utilities = __webpack_require__(5);

var _Debug = __webpack_require__(15);

var _LayerFactory = __webpack_require__(285);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * This is part of the MapConfigurator class
 */
var LayerConfigurator = exports.LayerConfigurator = function () {
  /**
   * @param {G4UMap} map
   * @public
   */
  function LayerConfigurator(map) {
    _classCallCheck(this, LayerConfigurator);

    /**
     * @type {G4UMap}
     * @private
     */
    this.map_ = map;
    this.map_.on('change:layerConfig', this.configureLayers.bind(this));

    /**
     * @type {LayerFactory}
     * @private
     */
    this.layerFactory_ = new _LayerFactory.LayerFactory(map);
  }

  /**
   * configures the layers according to the layerConfig stored in the 'layerConfig' property stored in the map. If the
   * config changes this method is called automatically.
   * @public
   */


  _createClass(LayerConfigurator, [{
    key: 'configureLayers',
    value: function configureLayers() {
      var _this = this;

      this.map_.set('ready:layers', false);

      if (!(this.map_.getLayerGroup() instanceof _GroupLayer.GroupLayer)) {
        this.map_.setLayerGroup(new _GroupLayer.GroupLayer());
      }

      var layers = this.map_.getLayerGroup();
      layers.getLayers().clear();

      /**
       * @type {LayerConfig}
       */
      var layerConfigCopy = (0, _utilitiesObject.copyDeep)(this.map_.get('layerConfig'));

      /**
       * @type {MapConfig}
       */
      var mapConfig = this.map_.get('mapConfig');

      this.map_.set('layerIds', []); // in layerIds all ids are stored to check if one is double.

      this.layerFactory_.setMapConfigProjection(mapConfig.hasOwnProperty('mapProjection') ? _openlayers2.default.proj.get(mapConfig.mapProjection) : null);

      this.map_.set('loadingStrategy', mapConfig.hasOwnProperty('loadingStrategy') ? mapConfig.loadingStrategy : 'ALL');

      this.map_.set('ignoreLayerAvailability', mapConfig.hasOwnProperty('ignoreLayerAvailability') ? mapConfig.ignoreLayerAvailability : false);

      // //////////////////////////////////////////////////////////////////////////////////////////
      //                                      Baselayers                                        //
      // //////////////////////////////////////////////////////////////////////////////////////////

      // baseLayers before the view, because they determine the projection of the view.

      /**
       * @type {GroupLayer}
       * @private
       */
      this.baseLayerGroup_ = this.map_.get('baseLayers') || new _GroupLayer.GroupLayer();

      this.baseLayerGroup_.getLayers().clear();

      if (layerConfigCopy.hasOwnProperty('baseLayers') && layerConfigCopy.baseLayers instanceof Array) {
        _Debug.Debug.tryOrThrow(function () {
          _this.layerFactory_.addLayers(_this.baseLayerGroup_, layerConfigCopy.baseLayers, 'baseLayer');
        });

        if (this.baseLayerGroup_.getLayers().getLength() === 0) {
          if (layerConfigCopy.baseLayers.length !== 0) {
            var confCp = (0, _utilitiesObject.copyDeep)(layerConfigCopy.baseLayers[0]);
            confCp.alwaysVisible = true;
            this.layerFactory_.addLayers(this.baseLayerGroup_, confCp, 'baseLayer', true);
          } else {
            _Debug.Debug.warn('There is no baselayer available!');
          }
        }

        var visibleBaseLayer = void 0;

        this.baseLayerGroup_.recursiveForEach(function (layer) {
          if (!(layer instanceof _GroupLayer.GroupLayer)) {
            visibleBaseLayer = visibleBaseLayer || layer.getVisible();
          }
        });

        if (!visibleBaseLayer && this.baseLayerGroup_.getLayers().getLength()) {
          var setFirstVisible = function setFirstVisible(layer) {
            if (layer instanceof _GroupLayer.GroupLayer) {
              setFirstVisible(layer.getLayersArray()[0]);
            } else {
              layer.setVisible(true);
            }
          };

          setFirstVisible(this.baseLayerGroup_);
        }

        if (!this.map_.get('baseLayers')) {
          this.baseLayerGroup_.getLayers().on('remove', function (e) {
            if (_this.baseLayerGroup_.getLayers().getLength() > 0) {
              if (e.element.getVisible()) {
                _this.baseLayerGroup_.getLayers().item(0).setVisible(true);
              }
            }
          });
        }

        this.map_.set('baseLayers', this.baseLayerGroup_);
        layers.getLayers().push(this.baseLayerGroup_);
      } else {
        _Debug.Debug.warn('The mapConfig option \'baseLayers\' is not set or not an Array!');
      }

      // if no baselayer had a given projection, choose 'EPSG:3857'
      this.map_.set('mapProjection', this.layerFactory_.getMapProjection() || _openlayers2.default.proj.get('EPSG:3857'));

      // //////////////////////////////////////////////////////////////////////////////////////////
      //                                    FeatureLayers                                       //
      // //////////////////////////////////////////////////////////////////////////////////////////

      /**
       * @type {GroupLayer}
       */
      var featureLayers = this.map_.get('featureLayers') || new _GroupLayer.GroupLayer();

      featureLayers.getLayers().clear();

      this.layerFactory_.addLayers(featureLayers, layerConfigCopy.featureLayers || [], 'featureLayer');

      this.map_.set('featureLayers', featureLayers);
      layers.getLayers().push(featureLayers);

      // //////////////////////////////////////////////////////////////////////////////////////////
      //                                 FixedFeatureLayers                                     //
      // //////////////////////////////////////////////////////////////////////////////////////////

      /**
       * @type {GroupLayer}
       */
      var fixedFeatureLayers = this.map_.get('fixedFeatureLayers') || new _GroupLayer.GroupLayer();

      fixedFeatureLayers.getLayers().clear();

      if ((0, _utilities.checkFor)(layerConfigCopy, 'fixedFeatureLayers')) {
        this.layerFactory_.addLayers(fixedFeatureLayers, layerConfigCopy.fixedFeatureLayers, 'featureLayer');

        this.map_.set('fixedFeatureLayers', fixedFeatureLayers);
        layers.getLayers().push(fixedFeatureLayers);
      }

      // //////////////////////////////////////////////////////////////////////////////////////////
      //                                      QueryLayer                                        //
      // //////////////////////////////////////////////////////////////////////////////////////////

      /**
       * @type {GroupLayer}
       */
      var queryLayers = this.map_.get('queryLayers') || new _GroupLayer.GroupLayer();

      queryLayers.getLayers().clear();

      if (layerConfigCopy.hasOwnProperty('queryLayers') && layerConfigCopy.queryLayers instanceof Array) {
        this.layerFactory_.addLayers(queryLayers, layerConfigCopy.queryLayers, 'queryLayer', true);

        this.map_.set('queryLayers', queryLayers);
        layers.getLayers().push(queryLayers);
      }

      // //////////////////////////////////////////////////////////////////////////////////////// //
      //                                   All layers loaded                                      //
      // //////////////////////////////////////////////////////////////////////////////////////// //

      var loadingLayers = [];
      var isLoadingDelayed = false;
      var isLoadingPrecise = false;

      var forEachLayer = function forEachLayer(layer) {
        if (layer.getLayers) {
          layer.getLayers().on('add', function (e) {
            forEachLayer(e.element);
          });
          layer.getLayers().forEach(forEachLayer);
        }
        if (layer.isLoading) {
          if (layer.isLoading()) {
            if (!isLoadingDelayed) {
              isLoadingDelayed = true;
              _this.map_.dispatchEvent('layersloadstart');
              _this.map_.set('allLayersLoaded', false);
            }
            isLoadingPrecise = true;
            loadingLayers.push(layer);
          }
        }
        layer.on('loadcountstart', function () {
          if (!isLoadingDelayed) {
            isLoadingDelayed = true;
            _this.map_.dispatchEvent('layersloadstart');
            _this.map_.set('allLayersLoaded', false);
          }
          isLoadingPrecise = true;
          loadingLayers.push(layer);
        });
        layer.on('loadcountend', function () {
          loadingLayers.splice(loadingLayers.indexOf(layer), 1);
          if (loadingLayers.length === 0) {
            isLoadingPrecise = false;
            _this.map_.afterPostrender(function () {
              if (!isLoadingPrecise) {
                _this.map_.dispatchEvent('layersloadend');
                isLoadingDelayed = false;
                _this.map_.set('allLayersLoaded', true);
              }
            });
            _this.map_.render();
          }
        });
      };

      forEachLayer(this.map_.getLayerGroup());

      this.map_.set('allLayersLoaded', false);

      var layerLoadStarted = false;

      this.map_.once('layersloadstart', function () {
        layerLoadStarted = true;
      });

      this.map_.once('postrender', function () {
        _this.map_.once('postrender', function () {
          if (!layerLoadStarted) {
            _this.map_.set('allLayersLoaded', true);
          }
        });
      });

      this.map_.set('ready:layers', true);
    }

    /**
     * @returns {GroupLayer}
     */

  }, {
    key: 'getBaseLayerGroup',
    value: function getBaseLayerGroup() {
      return this.baseLayerGroup_;
    }

    /**
     * @returns {LayerFactory}
     */

  }, {
    key: 'getFactory',
    value: function getFactory() {
      return this.layerFactory_;
    }
  }]);

  return LayerConfigurator;
}();

/***/ }),
/* 285 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.LayerFactory = exports.LayerType = exports.SuperType = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _ImageLayer = __webpack_require__(186);

var _EmptyBaseLayer = __webpack_require__(314);

var _BaseTileLayer = __webpack_require__(313);

var _TileLayer = __webpack_require__(187);

var _GroupLayer = __webpack_require__(73);

var _VectorLayer = __webpack_require__(94);

var _SourceServerVector = __webpack_require__(131);

var _QueryVectorSource = __webpack_require__(318);

var _utilitiesObject = __webpack_require__(36);

var _utilities = __webpack_require__(5);

var _Debug = __webpack_require__(15);

var _ImageWMSSource = __webpack_require__(189);

var _SilentGroupLayer = __webpack_require__(315);

var _URLHelper = __webpack_require__(91);

var _QueryWMSSource = __webpack_require__(319);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var SuperType = exports.SuperType = {
  BASELAYER: 'baseLayer',
  FEATURELAYER: 'featureLayer',
  QUERYLAYER: 'queryLayer'
};

var LayerType = exports.LayerType = {
  CATEGORY: 'Category',
  SILENTGROUP: 'SilentGroup',
  GEOJSON: 'GeoJSON',
  KML: 'KML',
  WMS: 'WMS',
  TILEWMS: 'TileWMS',
  WMTS: 'WMTS',
  OSM: 'OSM',
  STAMEN: 'Stamen',
  INTERN: 'Intern',
  EMPTY: 'Empty',
  XYZ: 'XYZ',
  BING: 'Bing'
};

/**
 * A config describing a layer
 * @public
 * @typedef {Object} g4uLayerOptions
 * @property {string} type the LayerType
 * @property {string|number} id unique in the whole config
 * @property {string} title
 * @property {SourceConfig|ol.source.Source} source
 * @property {Boolean} available
 * @property {Boolean} availableMobile overwrites available in mobile mode
 * @property {Boolean} visible
 * @property {Boolean} alwaysVisible overwrites visible, available and mobileAvailable
 * @property {StyleLike} [style]
 */

/**
 * A config describing the source of a layer
 * @public
 * @typedef {Object} SourceConfig
 * @property {Localizable} [attribution]
 * @property {boolean} [localised=false]
 * @property {ol.Attribution[]} [attributions] will be setted automatically.
 * @property {null} [crossOrigin] will be setted automatically.
 * @property {string} loadingStrategy
 * @property {URLLike} url
 */

/**
 * @typedef {Object} FeatureConfig
 * @public
 * @property {string|number} id
 * @property {StyleLike} style
 * @property {string} geometryWKT
 * @property {ol.geom.Geometry} geometry
 */

/**
 * This class constructs a layer according to the given {{LayerOptions}}
 */

var LayerFactory = exports.LayerFactory = function () {
  /**
   * @param {G4UMap} map
   */
  function LayerFactory(map) {
    _classCallCheck(this, LayerFactory);

    /**
     * @type {G4UMap}
     * @private
     */
    this.map_ = map;
  }

  /**
   * @param {ol.ProjectionLike} mapConfigProjection
   */


  _createClass(LayerFactory, [{
    key: 'setMapConfigProjection',
    value: function setMapConfigProjection(mapConfigProjection) {
      this.mapProjection = mapConfigProjection;
    }

    /**
     * @returns {ol.ProjectionLike}
     */

  }, {
    key: 'getMapProjection',
    value: function getMapProjection() {
      return this.mapProjection;
    }

    /**
     * Adds multiple layers according to their configs to the given layerGroup
     * @param {LayerGroup} layerGroup
     * @param {g4uLayerOptions[]} configs
     * @param {string} superType
     * @param {Boolean} skipIdCheck
     * @returns {ol.Layer.Base[]}
     */

  }, {
    key: 'addLayers',
    value: function addLayers(layerGroup, configs, superType, skipIdCheck) {
      var _this = this;

      return configs.map(function (config) {
        return _this.addLayer(layerGroup, config, superType, skipIdCheck);
      });
    }

    /**
     * Adds a layer defined by a given config to a given layerGroup
     * @param {LayerGroup} layerGroup
     * @param {g4uLayerOptions} options
     * @param {string} superType
     * @param {Boolean} skipIdCheck
     * @returns {ol.layer.Base}
     */

  }, {
    key: 'addLayer',
    value: function addLayer(layerGroup, options, superType, skipIdCheck) {
      var layer = void 0;
      /**
       * @type {g4uLayerOptions}
       */
      var optionsCopy = (0, _utilitiesObject.copyDeep)(options);

      if (skipIdCheck || this.configureLayerIsIdOk_(optionsCopy.id)) {
        // loading strategy

        if (!optionsCopy.type) {
          throw new Error('Layer needs a type. Layer id: ' + optionsCopy.id + '. Layer title: ' + optionsCopy.title + '.');
        }

        // availability
        this.configureLayerAvailability_(optionsCopy);

        // the title/name of the layer
        this.configureLayerTitle_(optionsCopy);

        if (superType === SuperType.BASELAYER) {
          optionsCopy.groupLayer = this.map_.get('layerConfigurator').getBaseLayerGroup();
        }

        if (optionsCopy.source) {
          this.configureLayerSourceAttribution_(optionsCopy.source);
        }

        // visibility
        this.configureLayerVisibility_(optionsCopy);

        layer = this.createLayer(optionsCopy.type, optionsCopy, superType, skipIdCheck);

        var forEachLayer = function forEachLayer(layer) {
          layerGroup.getLayers().push(layer);
        };

        if (layer instanceof _openlayers2.default.Collection) {
          layer.forEach(forEachLayer);
        } else {
          forEachLayer(layer);
        }
      }

      return layer;
    }

    /**
     * @param {string} type
     * @param {string} superType
     */

  }, {
    key: 'superTypeNotSupported',
    value: function superTypeNotSupported(type, superType) {
      throw new Error(type + ' is not configured for superType \'' + superType + '\'');
    }

    /**
     * Creates a layer or a collection of layers from the config
     * @param {string} layerType
     * @param {g4uLayerOptions} optionsCopy
     * @param {string} superType
     * @param {Boolean} skipIdCheck
     * @returns {ol.layer.Layer|ol.Collection.<ol.layer.Layer>}
     */

  }, {
    key: 'createLayer',
    value: function createLayer(layerType, optionsCopy, superType, skipIdCheck) {
      var _this2 = this;

      if (superType === SuperType.QUERYLAYER) {
        if (!optionsCopy.hasOwnProperty('apiKey')) {
          _Debug.Debug.error('Each query layer needs to have an apiKey.');
        }
        optionsCopy.source.projection = this.mapProjection;
      }

      if (optionsCopy.source) {
        optionsCopy.source.localiser = this.map_.get('localiser');
      }

      var layer = void 0;
      var layerConfigs = void 0;
      var localised = false;
      if (optionsCopy.source) {
        optionsCopy.source.localiser = this.map_.get('localiser');
        localised = optionsCopy.source.localised;
      }

      var style = (0, _utilitiesObject.take)(optionsCopy, 'style');

      switch (layerType) {
        case LayerType.SILENTGROUP:

          layerConfigs = (0, _utilitiesObject.take)(optionsCopy, 'layers');

          if (superType === SuperType.BASELAYER) {
            layer = new _SilentGroupLayer.BaseSilentGroupLayer(optionsCopy);
          } else {
            layer = new _SilentGroupLayer.SilentGroupLayer(optionsCopy);
          }

          this.addLayers(layer, layerConfigs, superType, true);

          layer.getLayers().forEach(function (childLayer) {
            childLayer.setVisible(true);
          });
          break;
        case LayerType.CATEGORY:
          layerConfigs = (0, _utilitiesObject.take)(optionsCopy, 'layers');

          layer = new _GroupLayer.GroupLayer(optionsCopy);

          this.addLayers(layer, layerConfigs, superType, skipIdCheck);

          // availability & parent ref
          var childrenAvailable = false;
          layer.getLayers().forEach(function (childLayer) {
            childLayer.set('category', layer);
            childrenAvailable = childrenAvailable || childLayer.get('available');
          });

          var childrenCount = layer.getLayers().getLength();

          if (childrenAvailable !== false) {
            if (layer.get('available') !== false && childrenCount > 0) {
              // category is shown

              if (childrenAvailable === true) {
                layer.set('available', true);
              }

              layer.setVisible(true);

              if (superType === SuperType.BASELAYER) {
                layer.set('activateChildren', false);
              }

              return layer;
            } else if (childrenAvailable === true) {
              // only children are shown
              return layer.getLayers();
            }
            // else neither are shown
          }
          break;
        case LayerType.EMPTY:
          if (superType === SuperType.BASELAYER) {
            layer = new _EmptyBaseLayer.EmptyBaseLayer(optionsCopy);
          } else {
            optionsCopy.source = new _openlayers2.default.source.Vector();
            layer = new _VectorLayer.VectorLayer(optionsCopy);
          }
          break;
        case LayerType.XYZ:
          optionsCopy.source.url = _URLHelper.URL.extractFromConfig(optionsCopy.source, 'url', undefined, this.map_).finalize();
          optionsCopy.source = new _openlayers2.default.source.XYZ(optionsCopy.source);

          if (superType === SuperType.BASELAYER) {
            layer = new _BaseTileLayer.BaseTileLayer(optionsCopy);
          } else {
            layer = new _TileLayer.TileLayer(optionsCopy);
          }
          break;
        case LayerType.OSM:
          optionsCopy.source.url = _URLHelper.URL.extractFromConfig(optionsCopy.source, 'url', undefined, this.map_).finalize();
          optionsCopy.source = new _openlayers2.default.source.OSM(optionsCopy.source);

          if (superType === SuperType.BASELAYER) {
            layer = new _BaseTileLayer.BaseTileLayer(optionsCopy);
          } else {
            layer = new _TileLayer.TileLayer(optionsCopy);
          }
          break;
        case LayerType.STAMEN:
          optionsCopy.source = new _openlayers2.default.source.Stamen(optionsCopy.source);

          if (superType === SuperType.BASELAYER) {
            layer = new _BaseTileLayer.BaseTileLayer(optionsCopy);
          } else {
            layer = new _TileLayer.TileLayer(optionsCopy);
          }
          break;
        case LayerType.BING:
          optionsCopy.source = new _openlayers2.default.source.BingMaps(optionsCopy.source);

          if (superType === SuperType.BASELAYER) {
            layer = new _BaseTileLayer.BaseTileLayer(optionsCopy);
          } else {
            layer = new _TileLayer.TileLayer(optionsCopy);
          }
          break;
        case LayerType.WMS:
          if (optionsCopy.categoryButtons) {
            optionsCopy.source.params.LAYERS = [];
          }

          optionsCopy.source.url = _URLHelper.URL.extractFromConfig(optionsCopy.source, 'url', undefined, this.map_); // not finalized

          if (superType === SuperType.BASELAYER) {
            optionsCopy.source = new _ImageWMSSource.ImageWMSSource(optionsCopy.source);
            layer = new _ImageLayer.BaseLayerImage(optionsCopy);
          } else if (superType === SuperType.QUERYLAYER) {
            optionsCopy.visible = false;
            optionsCopy.source = new _QueryWMSSource.QueryImageWMSSource(optionsCopy.source);
            layer = new _ImageLayer.ImageLayer(optionsCopy);
          } else {
            optionsCopy.source = new _ImageWMSSource.ImageWMSSource(optionsCopy.source);
            layer = new _ImageLayer.ImageLayer(optionsCopy);
          }

          if (layer.getSource().hasFeatureInfo()) {
            this.map_.asSoonAs('ready:ui', true, function () {
              if (_this2.map_.get('showWMSFeatureInfo')) {
                _this2.map_.get('showWMSFeatureInfo').addLayer(layer);
              }
            });
          }

          break;
        case LayerType.TILEWMS:
          if (optionsCopy.source.tileSize) {
            optionsCopy.source.tileGrid = _openlayers2.default.tilegrid.createXYZ({ tileSize: optionsCopy.source.tileSize });
            delete optionsCopy.source.tileSize;
          }

          optionsCopy.source.url = _URLHelper.URL.extractFromConfig(optionsCopy.source, 'url', undefined, this.map_); // not finalized

          if (superType === SuperType.BASELAYER) {
            optionsCopy.source = new _ImageWMSSource.TileWMSSource(optionsCopy.source);
            layer = new _BaseTileLayer.BaseTileLayer(optionsCopy);
          } else if (superType === SuperType.QUERYLAYER) {
            optionsCopy.visible = false;
            optionsCopy.source = new _QueryWMSSource.QueryTileWMSSource(optionsCopy.source);
            layer = new _TileLayer.TileLayer(optionsCopy);
          } else {
            optionsCopy.source = new _ImageWMSSource.TileWMSSource(optionsCopy.source);
            layer = new _TileLayer.TileLayer(optionsCopy);
          }

          if (layer.getSource().hasFeatureInfo()) {
            this.map_.asSoonAs('ready:ui', true, function () {
              if (_this2.map_.get('showWMSFeatureInfo')) {
                _this2.map_.get('showWMSFeatureInfo').addLayer(layer);
              }
            });
          }

          break;
        case LayerType.WMTS:
          var sourceOptions = (0, _utilitiesObject.take)(optionsCopy, 'source');

          if (superType === SuperType.BASELAYER) {
            layer = new _BaseTileLayer.BaseTileLayer(optionsCopy);
          } else {
            layer = new _TileLayer.TileLayer(optionsCopy);
          }

          this.setWMTSSourceFromCapabilities(layer, sourceOptions);

          break;
        case LayerType.GEOJSON:
          this.configureLayerSourceLoadingStrategy_(optionsCopy.source);
          optionsCopy.source.url = _URLHelper.URL.extractFromConfig(optionsCopy.source, 'url', undefined, this.map_); // not finalized

          optionsCopy.source.defaultStyle = this.map_.get('styling').getStyle(style || '#defaultStyle');

          optionsCopy.source.type = 'GeoJSON';

          optionsCopy.source.bboxProjection = optionsCopy.source.bboxProjection || this.map_.get('interfaceProjection');

          optionsCopy.source.styling = this.map_.get('styling');

          if (superType === SuperType.QUERYLAYER) {
            optionsCopy.visible = false;
            optionsCopy.source = new _QueryVectorSource.QueryVectorSource(optionsCopy.source);
          } else {
            optionsCopy.source = new _SourceServerVector.SourceServerVector(optionsCopy.source);
          }
          layer = new _VectorLayer.VectorLayer(optionsCopy);
          break;
        case LayerType.KML:
          this.configureLayerSourceLoadingStrategy_(optionsCopy.source);
          optionsCopy.source.url = _URLHelper.URL.extractFromConfig(optionsCopy.source, 'url', undefined, this.map_); // not finalized

          optionsCopy.source.defaultStyle = this.map_.get('styling').getStyle(style || '#defaultStyle');

          optionsCopy.source.type = 'KML';

          optionsCopy.source.bboxProjection = optionsCopy.source.bboxProjection || this.map_.get('interfaceProjection');

          optionsCopy.source.styling = this.map_.get('styling');

          if (superType === SuperType.QUERYLAYER) {
            optionsCopy.visible = false;
            optionsCopy.source = new _QueryVectorSource.QueryVectorSource(optionsCopy.source);
          } else {
            optionsCopy.source = new _SourceServerVector.SourceServerVector(optionsCopy.source);
          }

          layer = new _VectorLayer.VectorLayer(optionsCopy);
          break;
        case LayerType.INTERN:

          if (optionsCopy.source.hasOwnProperty('features')) {
            for (var i = 0; i < optionsCopy.source.features.length; i++) {
              optionsCopy.source.features[i] = this.createFeature(optionsCopy.source.features[i]);
            }
          }

          optionsCopy.source = new _openlayers2.default.source.Vector(optionsCopy.source);

          if (superType === SuperType.QUERYLAYER) {
            this.superTypeNotSupported(layerType, superType);
          } else {
            layer = new _VectorLayer.VectorLayer(optionsCopy);
          }
          break;
      }

      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = this.map_.getModules()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var module = _step.value;

          if (layer) {
            break;
          }
          layer = module.createLayer(optionsCopy.type, optionsCopy, superType, skipIdCheck);
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }

      if (!layer) {
        throw new Error('layer with type \'' + optionsCopy.type + '\' could not be created.');
      }

      // styling
      if (layer.setStyle) {
        layer.setStyle(this.map_.get('styling').getStyle(style));
        this.map_.get('styling').manageLayer(layer);
      }

      // if layer is a baselayer, check for mapProjection
      if (superType === SuperType.BASELAYER && optionsCopy.source) {
        if (layer.getSource().getProjection()) {
          if (!this.mapProjection) {
            this.mapProjection = layer.getSource().getProjection();
          } else if (this.mapProjection && this.mapProjection !== layer.getSource().getProjection()) {
            _Debug.Debug.warn('The baseLayers are not in mapProjection or a baseLayers has a different projection than' + ' another! This might cause reprojection issues.');
          }
        }
      } else if (superType === SuperType.QUERYLAYER) {
        this.map_.get('urlApi').addApiLayer(layer, optionsCopy.apiKey);
      }

      // if layer is being localised, refresh on language change
      if (localised) {
        this.map_.get('localiser').on('change:language', function () {
          return layer.getSource().refresh();
        });
      }

      return layer;
    }

    /**
     * A function that checks if a layer id is setted and not a duplicate of another.
     * Throws an error if this is the case.
     * @param {string|number} id
     * @private
     */

  }, {
    key: 'configureLayerIsIdOk_',
    value: function configureLayerIsIdOk_(id) {
      /**
       * @type {string[]|number[]}
       */
      var layerIds = this.map_.get('layerIds');

      if (id === 0 || id && (typeof id === 'string' || !isNaN(id))) {
        for (var j = 0, jj = layerIds.length; j < jj; j++) {
          if (id === layerIds[j]) {
            _Debug.Debug.error('Each layer needs a unique id! Otherwise the layer won\'t be shown. Layer id: ' + id);
            return false;
          }
        }
        layerIds.push(id);
        this.map_.set('layerIds', layerIds);
        return true;
      } else {
        _Debug.Debug.error('Each layer needs a unique id! Otherwise the layer won\'t be shown. Layer id: ' + id);
        return false;
      }
    }

    /**
     * @param {g4uLayerOptions} config
     * @returns {g4uLayerOptions}
     * @private
     */

  }, {
    key: 'configureLayerAvailability_',
    value: function configureLayerAvailability_(config) {
      // if available is set to false explicitely, the layer won't be available
      config.available = config.available !== false;

      if (!config.alwaysVisible) {
        config.available = config.hasOwnProperty('availableMobile') ? config.availableMobile : config.available;
        if (this.map_.get('ignoreLayerAvailability')) {
          config.available = true;
        }
      }
      return config;
    }

    /**
     * @param {SourceConfig} sourceConfig
     * @returns {SourceConfig}
     * @private
     */

  }, {
    key: 'configureLayerSourceAttribution_',
    value: function configureLayerSourceAttribution_(sourceConfig) {
      if ((0, _utilities.checkFor)(sourceConfig, 'attribution')) {
        sourceConfig.attributions = [new _openlayers2.default.Attribution({
          html: this.map_.get('localiser').selectL10N(sourceConfig.attribution)
        })];
      }
      return sourceConfig;
    }

    /**
     * @param {SourceConfig} sourceConfig
     * @returns {SourceConfig}
     * @private
     */

  }, {
    key: 'configureLayerSourceLoadingStrategy_',
    value: function configureLayerSourceLoadingStrategy_(sourceConfig) {
      sourceConfig.loadingStrategy = sourceConfig.hasOwnProperty('loadingStrategy') ? sourceConfig.loadingStrategy : this.map_.get('loadingStrategy');
      return sourceConfig;
    }

    /**
     * @param {g4uLayerOptions} config
     * @returns {g4uLayerOptions}
     * @private
     */

  }, {
    key: 'configureLayerTitle_',
    value: function configureLayerTitle_(config) {
      if (!config.hasOwnProperty('title')) {
        config.title = 'No title given';
      } else {
        config.title = this.map_.get('localiser').selectL10N(config.title);
      }
      return config;
    }

    /**
     * @param {g4uLayerOptions} config
     * @returns {g4uLayerOptions}
     * @private
     */

  }, {
    key: 'configureLayerVisibility_',
    value: function configureLayerVisibility_(config) {
      if (config.alwaysVisible === true) {
        config.visible = true;
      } else {
        config.visible = config.visible === true;
      }

      return config;
    }

    /**
     * @param {FeatureConfig} featureConf
     * @returns {ol.Feature}
     */

  }, {
    key: 'createFeature',
    value: function createFeature(featureConf) {
      /**
       * @type {FeatureConfig}
       */
      var featureConfCopy = (0, _utilitiesObject.copyDeep)(featureConf);

      var id = (0, _utilitiesObject.take)(featureConfCopy, 'id');

      var style = (0, _utilitiesObject.take)(featureConfCopy, 'style');

      var format = new _openlayers2.default.format.WKT();
      var wkt = (0, _utilitiesObject.take)(featureConfCopy, 'geometryWKT') || (0, _utilitiesObject.take)(featureConfCopy, 'geographyWKT');
      featureConfCopy.geometry = format.readGeometry(wkt).transform(this.map_.get('interfaceProjection'), this.map_.get('mapProjection'));

      var feature = new _openlayers2.default.Feature(featureConfCopy);

      if (style) {
        this.map_.get('styling').styleFeature(feature, style);
      }

      if (id) {
        feature.setId(id);
      }

      return feature;
    }
  }, {
    key: 'setWMTSSourceFromCapabilities',
    value: function setWMTSSourceFromCapabilities(layer, sourceOptions) {
      var url = _URLHelper.URL.extractFromConfig(sourceOptions, 'url', undefined, this.map_);
      var capUrl = url.clone().addParam('Service=WMTS').addParam('Request=GetCapabilities');
      _jquery2.default.ajax({
        url: capUrl.finalize(),
        dataType: 'text xml',
        crossDomain: true,
        success: function success(data) {
          var wmtsCap = new _openlayers2.default.format.WMTSCapabilities().read(data);
          var capOptions = _openlayers2.default.source.WMTS.optionsFromCapabilities(wmtsCap, (0, _utilitiesObject.take)(sourceOptions, 'config'));
          sourceOptions.url = url.finalize();
          sourceOptions = (0, _utilitiesObject.mergeDeep)(sourceOptions, capOptions);
          layer.setSource(new _openlayers2.default.source.WMTS(sourceOptions));
        }
      });
      layer.setSource(new _openlayers2.default.source.ImageCanvas({
        state: 'ready',
        canvasFunction: function canvasFunction() {} // not loading any canvas
      }));
    }
  }]);

  return LayerFactory;
}();

/***/ }),
/* 286 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MapConfigurator = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _proj = __webpack_require__(746);

var _proj2 = _interopRequireDefault(_proj);

var _Styling = __webpack_require__(282);

var _LayerConfigurator = __webpack_require__(284);

var _UIConfigurator = __webpack_require__(288);

var _utilitiesObject = __webpack_require__(36);

var _utilities = __webpack_require__(5);

var _API = __webpack_require__(275);

var _Debug = __webpack_require__(15);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

_openlayers2.default.proj.setProj4(_proj2.default);

/**
 * @typedef {Object} MapConfig
 * @property {Boolean} [userActionTracking]
 * @property {boolean} [enableContextMenu=false] enables the contextMenu outside of textinput fields
 * @property {g4uViewOptions} view
 * @property {string} [interfaceProjection='EPSG:4326']
 * @property {string} [mapProjection] will be infered from map data if not set
 * @property {string} [measurementProjection] the projection measurements will calculated in
 * @property {string} [proxy] A proxy url. It should be an url with a {url} part where the proxied url is to be
 *    inserted.
 * @property {Object.<string,StyleObject>} [styleMap] the style objects which will be mapped to certain identifiers. It
 *    is recommended that identifiers start with a #. The {{StyleObject}} with the identifier '#defaultStyle' will be
 *    used as a default Style in the whole Software
 * @property {number} [scaleIcons] a default scaling for all used feature icons
 * @property {boolean} [manageStyles=true] set this to false to disable style managing. This disables scaleIcons,
 *    mobileScaleIcons, feature hiding and adjustable style opacity
 * @property {ProjectionConfig[]} [additionalProjections]
 * @property {Object} [api] API-Options
 * @property {string} [loadingStrategy='ALL'] global loading strategy. Can have the values 'BBOX' or 'ALL'.
 * @property {boolean} [ignoreLayerAvailability=false] if set all layers are added to the map, regardless of their
 *    available config option
 * @property {string} [cssFile] a cssFile to load and insert in the head dynamically.
 * @property {Color[]} [cssTemplate] if 3 colors are given, the colors used in the text of the loaded cssFile will be
 *    replaced by this colors. The colors in the cssFile need to be pure red, blue and green.
 * @property {MobileLayoutOptions} [mobileLayout]
 * @property {PositioningOptions} [positioning={}]
 * @property {KineticOptions|boolean} [kinetic] This influences the DragPan behaviour. If set to false no kinetic
 *    options are applied, if not set, the defaults are used.
 */

/**
 * @typedef {object} KineticOptions
 * @property {number} [decay]
 * @property {number} [minVelocity]
 * @property {number} [delay]
 */

/**
 * @typedef {Object} ProjectionConfig
 * @property {string} code
 * @property {string} definition
 */

/**
 * @typedef {Object} g4uViewOptions
 * @property {ol.Coordinate} center the initial center of the map
 * @property {ol.Extent} [extent] the max extent the center can lay in
 * @property {number} [resolution]
 * @property {number} [zoom]
 * @property {number} [rotation]
 * @property {number} [fit] an extent to fit the map initialy to, overwrites center settings
 * @property {ol.ProjectionLike} [projection]
 */

/**
 * @typedef {Object} LayerConfig
 * @property {Object[]} baseLayers
 * @property {Object[]} featureLayers
 * @property {Object[]} fixedFeatureLayers
 * @property {Object[]} queryLayers
 */

/**
 * @typedef {object} MobileLayoutOptions
 * @property {string[]} mediaQueries these will enable the mobile layout including removing the g4u-desktop class from
 *    the ol-viewport and adding the g4u-mobile class
 * @property {number} [scaleIcons=1] a value to scale all icons by
 * @property {boolean} [animations=true] if animations should be disabled
 * @property {number} [hitTolerance]
 */

/**
 * This class configures a map once the configureMap method is called.
 * configureMap initializes the map and can only be called once.
 * it delegates the configureUI and configureLayers to the {{UIConfigurator}} and {{LayerConfigurator}} classes.
 */
var MapConfigurator = exports.MapConfigurator = function () {
  /**
   * @param {G4UMap} map
   * @public
   */
  function MapConfigurator(map) {
    _classCallCheck(this, MapConfigurator);

    /**
     * @type {G4UMap}
     * @private
     */
    this.map_ = map;

    /**
     * @type {LayerConfigurator}
     * @private
     */
    this.layerConfigurator_ = new _LayerConfigurator.LayerConfigurator(map);

    /**
     * @type {UIConfigurator}
     * @private
     */
    this.UIConfigurator_ = new _UIConfigurator.UIConfigurator(map);

    map.set('layerConfigurator', this.layerConfigurator_);
    map.set('UIConfigurator', this.UIConfigurator_);

    this.configureMap();

    /**
     * @type {boolean}
     * @private
     */
    this.firstRun_ = false;
  }

  /**
   * Delegate call to {{LayerConfigurator}}
   * @public
   */


  _createClass(MapConfigurator, [{
    key: 'configureLayers',
    value: function configureLayers() {
      this.layerConfigurator_.configureLayers();
    }

    /**
     * Delegate call to {{UIConfigurator}}
     * @public
     */

  }, {
    key: 'configureUI',
    value: function configureUI() {
      this.UIConfigurator_.configureUI();
    }

    /**
     * @public
     */

  }, {
    key: 'configureMap',
    value: function configureMap() {
      var _this = this;

      if (this.firstRun_) {
        _Debug.Debug.error('configureMap is supposed to be called only once');
        _Debug.Debug.warn('If you would like to change that, please think about something because of the asynchronous nature' + ' of "ready", "ready:ui" and "ready:layers"');
        throw new Error();
      }

      /**
       * @type {MapConfig}
       */
      var mapConfigCopy = (0, _utilitiesObject.copyDeep)(this.map_.get('mapConfig'));

      if (!mapConfigCopy.enableContextMenu) {
        (0, _jquery2.default)(this.map_.getTarget()).on('contextmenu', function (e) {
          if (!(0, _jquery2.default)(e.target).is('input[type=text]') && !(0, _jquery2.default)(e.target).is('textarea')) {
            e.preventDefault();
          }
        });
      }

      this.map_.set('userActionTracking', mapConfigCopy.userActionTracking);

      var interfaceProjection = mapConfigCopy.hasOwnProperty('interfaceProjection') ? mapConfigCopy.interfaceProjection : 'EPSG:4326';

      this.map_.set('interfaceProjection', interfaceProjection);

      // //////////////////////////////////////////////////////////////////////////////////////// //
      //                                       Styling                                            //
      // //////////////////////////////////////////////////////////////////////////////////////// //

      // has to be done before configureLayers ... -> promise?

      var stylingOptions = {};

      if (mapConfigCopy.hasOwnProperty('manageStyles')) {
        stylingOptions.manageStyles = mapConfigCopy.manageStyles;
      }

      if (mapConfigCopy.hasOwnProperty('styleMap')) {
        stylingOptions.styleConfigMap = mapConfigCopy.styleMap;
      }

      var scaleIcons = mapConfigCopy.hasOwnProperty('scaleIcons') ? mapConfigCopy.scaleIcons : 1;
      stylingOptions.scaleIcons = scaleIcons;

      this.map_.set('scaleIcons', scaleIcons);
      this.map_.set('styling', new _Styling.Styling(stylingOptions));

      // //////////////////////////////////////////////////////////////////////////////////////// //
      //                                      Projections                                         //
      // //////////////////////////////////////////////////////////////////////////////////////// //

      var additionalProjectionsConf = mapConfigCopy.hasOwnProperty('additionalProjections') ? mapConfigCopy.additionalProjections : [];

      for (var i = 0, ii = additionalProjectionsConf.length; i < ii; i++) {
        _proj2.default.defs(additionalProjectionsConf[i].code, additionalProjectionsConf[i].definition);
      }

      if ((0, _utilities.checkFor)(mapConfigCopy, 'measurementProjection')) {
        try {
          this.map_.set('measurementProjection', _openlayers2.default.proj.get(mapConfigCopy.measurementProjection));
        } catch (e) {
          throw new Error('measurementProjection is not available, check for spelling or try to add it to' + ' additionalProjections with a proj4 definition.');
        }
      }

      this.configureLayers();

      var mapProjection = this.map_.get('mapProjection'); // mapProjection is determined by the baseLayers

      // //////////////////////////////////////////////////////////////////////////////////////// //
      //                                    Creating View                                         //
      // //////////////////////////////////////////////////////////////////////////////////////// //

      /**
       * @type {g4uViewOptions}
       */
      var viewOptions = mapConfigCopy.view || {};

      viewOptions.projection = mapProjection;

      if ((0, _utilities.checkFor)(mapConfigCopy.view, 'center')) {
        viewOptions.center = _openlayers2.default.proj.transform(mapConfigCopy.view.center, interfaceProjection, mapProjection);
      }

      if ((0, _utilities.checkFor)(mapConfigCopy.view, 'extent')) {
        viewOptions.extent = _openlayers2.default.extent.applyTransform(mapConfigCopy.view.extent, _openlayers2.default.proj.getTransform(interfaceProjection, mapProjection));
      }

      var oldView = this.map_.getView();
      if (oldView) {
        viewOptions.center = oldView.getCenter() || mapConfigCopy.view.center;
        viewOptions.resolution = oldView.getResolution() || mapConfigCopy.view.resolution;
        viewOptions.rotation = oldView.getRotation() || mapConfigCopy.view.rotation;
      }

      // creating the view
      var view = new _openlayers2.default.View(viewOptions);

      // setting the extent overwrites any settings about zoom and start coordinates
      if (!oldView && (0, _utilities.checkFor)(mapConfigCopy.view, 'fit')) {
        view.fit(_openlayers2.default.proj.transformExtent(mapConfigCopy.view.fit, interfaceProjection, mapProjection), {
          size: this.map_.getSize()
        });
      }

      // //////////////////////////////////////////////////////////////////////////////////////// //
      //                                   Setting View                                           //
      // //////////////////////////////////////////////////////////////////////////////////////// //

      this.map_.setView(view);

      // //////////////////////////////////////////////////////////////////////////////////////// //
      //                                       Resize                                             //
      // //////////////////////////////////////////////////////////////////////////////////////// //

      (0, _jquery2.default)(window).on('resize', function () {
        // NOTE: could get depricated with 'change:size'
        _this.map_.dispatchEvent('resize');
      });

      // //////////////////////////////////////////////////////////////////////////////////////// //
      //                              Generic global handlers                                     //
      // //////////////////////////////////////////////////////////////////////////////////////// //

      var $viewport = (0, _jquery2.default)(this.map_.getViewport());

      // applying a mousedown class to the viewport if the mouse is down
      var mousedownClass = 'mousedown';
      $viewport.on('mousedown', function () {
        $viewport.addClass(mousedownClass);
      });
      $viewport.on('mouseup', function () {
        $viewport.removeClass(mousedownClass);
      });

      // Sets the Keyboardfocus on the Map
      $viewport.focus();

      // Let the keyboardfocus stay with the Map
      $viewport.on('click', function () {
        $viewport.focus();
      });

      // //////////////////////////////////////////////////////////////////////////////////////// //
      //                             UI (Interactions and Controls)                               //
      // //////////////////////////////////////////////////////////////////////////////////////// //

      _Debug.Debug.tryOrThrow(function () {
        _this.configureUI();
      });

      this.map_.set('api', new _API.API(this.map_, mapConfigCopy.api));

      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = this.map_.getModules()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var module = _step.value;

          module.configureMap(mapConfigCopy);
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }
    }
  }]);

  return MapConfigurator;
}();

/***/ }),
/* 287 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Positioning = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _uniq = __webpack_require__(270);

var _uniq2 = _interopRequireDefault(_uniq);

var _globals = __webpack_require__(11);

var _utilities = __webpack_require__(5);

var _ListenerOrganizerMixin = __webpack_require__(48);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * This describes the floating directions of an element. It can be an array, then it will move from the center to the
 * first specified direction and after that it moves in the second direction. If it is set to 'fixed' it is not
 * positioned via Positioning.
 * @typedef {string[]|string} Float
 */

/**
 * @typedef {Object} HideableElement
 * @property {Control} control
 * @property {number} importance
 * @property {number} order
 * @property {Float} [float] first and second direction or special value 'fixed'
 * @property {HideableElement[]} [hideableChildren]
 */

/**
 * @typedef {HideableElement} PositionedElement
 * @property {string[]} float first and second direction or special value 'fixed'
 * @property {number} minWidth
 * @property {number} minHeight
 * @property {{width: number, height: number}} size
 */

/**
 * @typedef {object} PositioningOptions
 * @property {number} [padding=5]
 * @property {number} [spacing=10]
 * @property {HTMLElement} viewport
 */

var Positioning = exports.Positioning = function (_mixinAsClass) {
  _inherits(Positioning, _mixinAsClass);

  /**
   * @param {PositioningOptions} options
   */
  function Positioning(options) {
    _classCallCheck(this, Positioning);

    /**
     * @type {jQuery|HTMLElement}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (Positioning.__proto__ || Object.getPrototypeOf(Positioning)).call(this));

    _this.$viewport_ = (0, _jquery2.default)(options.viewport);

    /**
     * The padding between the controls
     * @type {number}
     * @private
     */
    _this.padding_ = options.padding || 5;

    /**
     * The space between the controls and the edges of the map
     * @type {number}
     * @private
     */
    _this.spacing_ = options.spacing || 10;

    /**
     * The hidden controle
     * @type {jQuery}
     * @private
     */
    _this.hidden$Elements_ = [];

    _this.init();
    return _this;
  }

  _createClass(Positioning, [{
    key: 'init',
    value: function init() {
      this.detachAllListeners();

      /**
       * @type {HideableElement[]}
       * @private
       */
      this.all_ = [];

      /**
       * All Controls stored according their position on the map
       * @type {object}
       * @private
       */
      this.corners_ = {
        'left': {
          'top': {
            counterclockwise: [],
            clockwise: []
          },
          'bottom': {
            counterclockwise: [],
            clockwise: []
          }
        },
        'right': {
          'top': {
            counterclockwise: [],
            clockwise: []
          },
          'bottom': {
            counterclockwise: [],
            clockwise: []
          }
        }
      };

      /**
       * This number tracks the order in which controls are added
       * @type {number}
       * @private
       */
      this.order_ = 0;
    }
  }, {
    key: 'getArray_',
    value: function getArray_(float) {
      var x = void 0,
          y = void 0,
          direction = void 0;
      switch (float[0]) {
        case 'top':
          y = 'top';
          x = float[1];
          if (x === 'left') {
            direction = 'clockwise';
          } else if (x === 'right') {
            direction = 'counterclockwise';
          }
          break;
        case 'right':
          x = 'right';
          y = float[1];
          if (y === 'top') {
            direction = 'clockwise';
          } else if (y === 'bottom') {
            direction = 'counterclockwise';
          }
          break;
        case 'bottom':
          y = 'bottom';
          x = float[1];
          if (x === 'left') {
            direction = 'counterclockwise';
          } else {
            direction = 'clockwise';
          }
          break;
        case 'left':
          x = 'left';
          y = float[1];
          if (y === 'top') {
            direction = 'counterclockwise';
          } else {
            direction = 'clockwise';
          }
      }

      return this.corners_[x][y][direction];
    }

    /**
     * Add a control to the positioning.
     * @param {Control} control
     * @param {Object} [parentMeta] the meta information of the parent control
     */

  }, {
    key: 'addControl',
    value: function addControl(control, parentMeta) {
      var _this2 = this;

      // check if control needs to be positioned
      if (control.get$Element().parents().hasClass('ol-viewport')) {
        if (!parentMeta || !parentMeta.control.isWindowed()) {
          // gather metainformation
          /** @type {HideableElement} */
          var metaElem = {
            control: control,
            order: this.order_++,
            importance: control.getImportance()
          };

          control.on('change:visible', function (e) {
            var index = _this2.hidden$Elements_.indexOf(control.get$Element());
            if (e.oldValue && index > -1) {
              _this2.hidden$Elements_.splice(index, 1);
            }
            _this2.positionElements();
          });

          // repositioning if collapsible elements changes size
          this.listenAt(control).on('change:size', function () {
            _this2.positionElements();
          });

          if (!parentMeta) {
            metaElem.float = metaElem.control.getFloat() || ['top', 'left'];

            if (metaElem.float === 'fixed') {
              return;
            }

            this.getArray_(metaElem.float).push(metaElem);

            this.all_.push(metaElem);

            if (metaElem.control.getControls) {
              metaElem.hideableChildren = [];
              var _iteratorNormalCompletion = true;
              var _didIteratorError = false;
              var _iteratorError = undefined;

              try {
                for (var _iterator = metaElem.control.getControls()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                  var child = _step.value;

                  this.addControl(child, metaElem);
                }
              } catch (err) {
                _didIteratorError = true;
                _iteratorError = err;
              } finally {
                try {
                  if (!_iteratorNormalCompletion && _iterator.return) {
                    _iterator.return();
                  }
                } finally {
                  if (_didIteratorError) {
                    throw _iteratorError;
                  }
                }
              }
            }
          } else if (!parentMeta.control.isWindowed()) {
            metaElem.importance = control.getImportance();
            parentMeta.hideableChildren.push(metaElem);
            this.all_.push(metaElem);
          }
        }
      }
    }

    /**
     * Gets the element in a corner
     * @param {string} x
     * @param {string} y
     * @returns {HideableElement}
     * @private
     */

  }, {
    key: 'getCorner_',
    value: function getCorner_(x, y) {
      var cwi = 0;
      var ccwi = 0;

      var cwElem = this.corners_[x][y].clockwise[cwi++];
      var ccwElem = this.corners_[x][y].counterclockwise[ccwi++];

      while (cwElem && !Positioning.isElemVisible_(cwElem)) {
        cwElem = this.corners_[x][y].clockwise[cwi++];
      }

      while (ccwElem && !Positioning.isElemVisible_(ccwElem)) {
        ccwElem = this.corners_[x][y].counterclockwise[ccwi++];
      }

      if (cwElem || ccwElem) {
        if (!cwElem) {
          return ccwElem;
        } else if (!ccwElem) {
          return cwElem;
        } else {
          if (cwElem.order < ccwElem.order) {
            return cwElem;
          } else {
            return ccwElem;
          }
        }
      }
    }
  }, {
    key: 'getEdge_',


    /**
     * Gets all elements at one edge
     * @param side
     * @returns {*|Array.<Element>}
     * @private
     */
    value: function getEdge_(side) {
      var x1 = void 0,
          x2 = void 0,
          y1 = void 0,
          y2 = void 0;
      if (side === 'top') {
        x1 = 'left';
        x2 = 'right';
        y1 = y2 = 'top';
      } else if (side === 'right') {
        x1 = x2 = 'right';
        y1 = 'top';
        y2 = 'bottom';
      } else if (side === 'bottom') {
        x1 = 'right';
        x2 = 'left';
        y1 = y2 = 'bottom';
      } else if (side === 'left') {
        x1 = x2 = 'left';
        y1 = 'bottom';
        y2 = 'top';
      }

      var clockwise = this.corners_[x1][y1].clockwise.filter(Positioning.isElemVisible_);
      var counterclockwise = this.corners_[x2][y2].counterclockwise.filter(Positioning.isElemVisible_);

      var arr = [];
      var c = this.getCorner_(x1, y1);
      if (c) {
        arr.push(c);
      }
      arr.push.apply(arr, _toConsumableArray(clockwise));
      arr.push.apply(arr, _toConsumableArray(counterclockwise));
      c = this.getCorner_(x2, y2);
      if (c) {
        arr.push(c);
      }
      return (0, _uniq2.default)(arr);
    }

    /**
     * Initializes all elements
     * @private
     */

  }, {
    key: 'beforePositioning_',
    value: function beforePositioning_() {
      var _this3 = this;

      var elems = new Set(this.all_);

      this.hidden$Elements_.forEach(function ($e) {
        return $e.removeClass(_globals.cssClasses.hidden);
      });
      this.hidden$Elements_ = [];

      /**
       * @param {PositionedElement} elem
       */
      var forEach = function forEach(elem) {
        if (Positioning.isElemVisible_(elem)) {
          if (elem.control.beforePositioning) {
            elem.control.beforePositioning();
          }

          if (elem.hideableChildren) {
            var _iteratorNormalCompletion2 = true;
            var _didIteratorError2 = false;
            var _iteratorError2 = undefined;

            try {
              for (var _iterator2 = elem.hideableChildren[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                var child = _step2.value;

                forEach(child);
              }
            } catch (err) {
              _didIteratorError2 = true;
              _iteratorError2 = err;
            } finally {
              try {
                if (!_iteratorNormalCompletion2 && _iterator2.return) {
                  _iterator2.return();
                }
              } finally {
                if (_didIteratorError2) {
                  throw _iteratorError2;
                }
              }
            }
          }

          elem.control.get$Element().position({ top: 0, left: 0 });
          if (elem.control.release) {
            elem.control.release('height');
            elem.control.release('width');
          }
          elem.size = _this3.measureExpandedElement_(elem);
        }

        elems.delete(elem);
      };

      var _iteratorNormalCompletion3 = true;
      var _didIteratorError3 = false;
      var _iteratorError3 = undefined;

      try {
        for (var _iterator3 = elems[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
          var elem = _step3.value;

          forEach(elem);
        }
      } catch (err) {
        _didIteratorError3 = true;
        _iteratorError3 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion3 && _iterator3.return) {
            _iterator3.return();
          }
        } finally {
          if (_didIteratorError3) {
            throw _iteratorError3;
          }
        }
      }
    }

    /**
     * called after positioning
     * @private
     */

  }, {
    key: 'afterPositioning_',
    value: function afterPositioning_() {
      var elems = new Set(this.all_);

      /**
       * @param {PositionedElement} elem
       */
      var forEach = function forEach(elem) {
        if (elem.control.afterPositioning) {
          elem.control.afterPositioning();
        }

        if (elem.hideableChildren) {
          var _iteratorNormalCompletion4 = true;
          var _didIteratorError4 = false;
          var _iteratorError4 = undefined;

          try {
            for (var _iterator4 = elem.hideableChildren[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
              var child = _step4.value;

              forEach(child);
            }
          } catch (err) {
            _didIteratorError4 = true;
            _iteratorError4 = err;
          } finally {
            try {
              if (!_iteratorNormalCompletion4 && _iterator4.return) {
                _iterator4.return();
              }
            } finally {
              if (_didIteratorError4) {
                throw _iteratorError4;
              }
            }
          }
        }

        elems.delete(elem);
      };

      var _iteratorNormalCompletion5 = true;
      var _didIteratorError5 = false;
      var _iteratorError5 = undefined;

      try {
        for (var _iterator5 = elems[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {
          var elem = _step5.value;

          forEach(elem);
        }
      } catch (err) {
        _didIteratorError5 = true;
        _iteratorError5 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion5 && _iterator5.return) {
            _iterator5.return();
          }
        } finally {
          if (_didIteratorError5) {
            throw _iteratorError5;
          }
        }
      }
    }

    /**
     * Calculates summed length of all elements on one edge
     * @param {PositionedElement[]} edgeElems
     * @param {string} dim
     * @returns {number}
     * @private
     */

  }, {
    key: 'calculateLength_',
    value: function calculateLength_(edgeElems, dim) {
      if (edgeElems.length === 0) {
        return 0;
      }

      var length = this.padding_ * 2;

      var firstElement = true;

      var _iteratorNormalCompletion6 = true;
      var _didIteratorError6 = false;
      var _iteratorError6 = undefined;

      try {
        for (var _iterator6 = edgeElems[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {
          var elem = _step6.value;

          length += elem.size[dim];
          if (firstElement) {
            firstElement = false;
          } else {
            length += this.spacing_;
          }
        }
      } catch (err) {
        _didIteratorError6 = true;
        _iteratorError6 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion6 && _iterator6.return) {
            _iterator6.return();
          }
        } finally {
          if (_didIteratorError6) {
            throw _iteratorError6;
          }
        }
      }

      return length;
    }
  }, {
    key: 'calculateSide_',
    value: function calculateSide_(side, availableSpace) {
      var dim = side === 'top' || side === 'bottom' ? 'width' : 'height';
      var elems = this.getEdge_(side);
      var wantedSpace = this.calculateLength_(elems, dim);
      var changed = false;

      while (wantedSpace > availableSpace) {
        if (this.squeezeElements_(elems, dim, wantedSpace - availableSpace)) {
          break;
        }
        this.hideLeastImportant_(elems);
        elems = this.getEdge_(side);
        wantedSpace = this.calculateLength_(elems, dim);
        changed = true;
      }
      return changed;
    }
  }, {
    key: 'positionElementsCorner_',
    value: function positionElementsCorner_(x, y) {
      var corner = this.getCorner_(x, y);
      if (corner) {
        var _$elem$removeClass$cs;

        var xLength = this.padding_;
        var yLength = this.padding_;
        var $elem = corner.control.get$Element();

        $elem.removeClass(_globals.cssClasses.hidden).css((_$elem$removeClass$cs = {}, _defineProperty(_$elem$removeClass$cs, x, xLength), _defineProperty(_$elem$removeClass$cs, y, yLength), _$elem$removeClass$cs));

        xLength += $elem.outerWidth() + this.spacing_;
        yLength += $elem.outerHeight() + this.spacing_;

        var xDirection = void 0,
            yDirection = void 0;

        if (x === 'left' && y === 'top') {
          xDirection = 'clockwise';
          yDirection = 'counterclockwise';
        } else if (x === 'right' && y === 'top') {
          xDirection = 'counterclockwise';
          yDirection = 'clockwise';
        } else if (x === 'right' && y === 'bottom') {
          xDirection = 'clockwise';
          yDirection = 'counterclockwise';
        } else if (x === 'left' && y === 'bottom') {
          xDirection = 'counterclockwise';
          yDirection = 'clockwise';
        }

        // x
        var _iteratorNormalCompletion7 = true;
        var _didIteratorError7 = false;
        var _iteratorError7 = undefined;

        try {
          for (var _iterator7 = this.corners_[x][y][xDirection].filter(function (el) {
            return Positioning.isElemVisible_(el) && el !== corner;
          })[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {
            var _$elem$css;

            var elem = _step7.value;

            $elem = elem.control.get$Element();
            $elem.css((_$elem$css = {}, _defineProperty(_$elem$css, x, xLength), _defineProperty(_$elem$css, y, this.padding_), _$elem$css));
            xLength += $elem.outerWidth() + this.spacing_;
          }

          // y
        } catch (err) {
          _didIteratorError7 = true;
          _iteratorError7 = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion7 && _iterator7.return) {
              _iterator7.return();
            }
          } finally {
            if (_didIteratorError7) {
              throw _iteratorError7;
            }
          }
        }

        var _iteratorNormalCompletion8 = true;
        var _didIteratorError8 = false;
        var _iteratorError8 = undefined;

        try {
          for (var _iterator8 = this.corners_[x][y][yDirection].filter(function (el) {
            return Positioning.isElemVisible_(el) && el !== corner;
          })[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {
            var _$elem$css2;

            var _elem = _step8.value;

            $elem = _elem.control.get$Element();
            $elem.css((_$elem$css2 = {}, _defineProperty(_$elem$css2, x, this.padding_), _defineProperty(_$elem$css2, y, yLength), _$elem$css2));
            yLength += $elem.outerHeight() + this.spacing_;
          }
        } catch (err) {
          _didIteratorError8 = true;
          _iteratorError8 = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion8 && _iterator8.return) {
              _iterator8.return();
            }
          } finally {
            if (_didIteratorError8) {
              throw _iteratorError8;
            }
          }
        }
      }
    }

    /**
     * (Re-)Position the controls on the map
     */

  }, {
    key: 'positionElements',
    value: function positionElements() {
      var width = this.$viewport_.innerWidth();
      var height = this.$viewport_.innerHeight();

      this.beforePositioning_();

      // calculation
      var processSides = new Set(['top', 'left', 'bottom', 'right']);

      while (processSides.size) {
        if (processSides.has('top')) {
          if (this.calculateSide_('top', width)) {
            processSides.add('left');
            processSides.add('right');
          }

          processSides.delete('top');
        }

        if (processSides.has('right')) {
          if (this.calculateSide_('right', height)) {
            processSides.add('top');
            processSides.add('bottom');
          }

          processSides.delete('right');
        }

        if (processSides.has('bottom')) {
          if (this.calculateSide_('bottom', width)) {
            processSides.add('left');
            processSides.add('right');
          }

          processSides.delete('bottom');
        }

        if (processSides.has('left')) {
          if (this.calculateSide_('left', height)) {
            processSides.add('top');
            processSides.add('bottom');
          }

          processSides.delete('left');
        }
      }

      // positioning

      this.positionElementsCorner_('left', 'top');
      this.positionElementsCorner_('right', 'top');
      this.positionElementsCorner_('right', 'bottom');
      this.positionElementsCorner_('left', 'bottom');

      this.afterPositioning_();
    }

    /**
     * Tries to squeeze the elements on one edge to fit the space. Returns true if it did work, false otherwise.
     * @param {PositionedElement[]} elems
     * @param {string} side
     * @param {number} neededSpace
     * @private
     * @returns {boolean}
     */

  }, {
    key: 'squeezeElements_',
    value: function squeezeElements_(elems, side, neededSpace) {
      var squeezableElements = [];

      function insert(item) {
        var x = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
        var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : squeezableElements.length;

        if (y === x) {
          squeezableElements.splice(x, 0, item);
        } else {
          var p = Math.floor((x + y) / 2);
          if (item.importance <= squeezableElements[p].importance) {
            insert(item, x, p);
          } else {
            insert(item, p + 1, y);
          }
        }
      }

      /**
       * @param {PositionedElement[]} elems
       */
      function findSqueezables(elems) {
        var _iteratorNormalCompletion9 = true;
        var _didIteratorError9 = false;
        var _iteratorError9 = undefined;

        try {
          for (var _iterator9 = elems[Symbol.iterator](), _step9; !(_iteratorNormalCompletion9 = (_step9 = _iterator9.next()).done); _iteratorNormalCompletion9 = true) {
            var elem = _step9.value;

            if (elem.control.isSqueezable && elem.control.isSqueezable(side)) {
              insert(elem);
            }
            if (elem.hideableChildren) {
              findSqueezables(elem.hideableChildren);
            }
          }
        } catch (err) {
          _didIteratorError9 = true;
          _iteratorError9 = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion9 && _iterator9.return) {
              _iterator9.return();
            }
          } finally {
            if (_didIteratorError9) {
              throw _iteratorError9;
            }
          }
        }
      }

      findSqueezables(elems);

      var _iteratorNormalCompletion10 = true;
      var _didIteratorError10 = false;
      var _iteratorError10 = undefined;

      try {
        for (var _iterator10 = squeezableElements[Symbol.iterator](), _step10; !(_iteratorNormalCompletion10 = (_step10 = _iterator10.next()).done); _iteratorNormalCompletion10 = true) {
          var elem = _step10.value;

          neededSpace -= elem.control.squeezeBy(side, neededSpace);

          if (neededSpace <= 0) {
            return true;
          }
        }
      } catch (err) {
        _didIteratorError10 = true;
        _iteratorError10 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion10 && _iterator10.return) {
            _iterator10.return();
          }
        } finally {
          if (_didIteratorError10) {
            throw _iteratorError10;
          }
        }
      }

      var _iteratorNormalCompletion11 = true;
      var _didIteratorError11 = false;
      var _iteratorError11 = undefined;

      try {
        for (var _iterator11 = squeezableElements[Symbol.iterator](), _step11; !(_iteratorNormalCompletion11 = (_step11 = _iterator11.next()).done); _iteratorNormalCompletion11 = true) {
          var _elem2 = _step11.value;

          _elem2.control.release(side);
        }
      } catch (err) {
        _didIteratorError11 = true;
        _iteratorError11 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion11 && _iterator11.return) {
            _iterator11.return();
          }
        } finally {
          if (_didIteratorError11) {
            throw _iteratorError11;
          }
        }
      }

      return false;
    }

    /**
     * Expands element to maximum size
     * @param {PositionedElement} elem
     * @returns {Array}
     * @private
     */

  }, {
    key: 'expandElement_',
    value: function expandElement_(elem) {
      var expanded = [];

      if (elem.hideableChildren) {
        var _iteratorNormalCompletion12 = true;
        var _didIteratorError12 = false;
        var _iteratorError12 = undefined;

        try {
          for (var _iterator12 = elem.hideableChildren[Symbol.iterator](), _step12; !(_iteratorNormalCompletion12 = (_step12 = _iterator12.next()).done); _iteratorNormalCompletion12 = true) {
            var child = _step12.value;

            expanded.push.apply(expanded, _toConsumableArray(this.expandElement_(child)));
          }
        } catch (err) {
          _didIteratorError12 = true;
          _iteratorError12 = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion12 && _iterator12.return) {
              _iterator12.return();
            }
          } finally {
            if (_didIteratorError12) {
              throw _iteratorError12;
            }
          }
        }
      }
      if (elem.control.getCollapsible && elem.control.getCollapsible()) {
        if (elem.control.getCollapsed()) {
          elem.control.setCollapsed(false, true);
          expanded.push(elem.control);
        }
      }

      return expanded;
    }

    /**
     * measures size of the element
     * @param {PositionedElement} elem
     * @returns {{width: number, height: number}}
     * @private
     */

  }, {
    key: 'measureExpandedElement_',
    value: function measureExpandedElement_(elem) {
      // let expanded = this.expandElement_(elem)
      var $elem = elem.control.get$Element();
      var size = { width: $elem.outerWidth(), height: $elem.outerHeight() };
      // for (let exp of expanded) {
      //   exp.setCollapsed(true, true)
      // }
      return size;
    }

    /**
     * Hides the least important element of the given ones.
     * @param {PositionedElement[]} elems visible elements
     * @private
     */

  }, {
    key: 'hideLeastImportant_',
    value: function hideLeastImportant_(elems) {
      /**
       * @param {PositionedElement[]} elems
       * @returns {PositionedElement}
       */
      var findLeastImportant = function findLeastImportant(elems) {
        var leastImportant = void 0;
        var _iteratorNormalCompletion13 = true;
        var _didIteratorError13 = false;
        var _iteratorError13 = undefined;

        try {
          for (var _iterator13 = elems[Symbol.iterator](), _step13; !(_iteratorNormalCompletion13 = (_step13 = _iterator13.next()).done); _iteratorNormalCompletion13 = true) {
            var elem = _step13.value;

            if (!leastImportant) {
              leastImportant = elem;
            } else {
              if (elem.importance < leastImportant.importance) {
                leastImportant = elem;
              }
            }

            if (elem.hideableChildren) {
              var hideableChildren = elem.hideableChildren.filter(function (el) {
                return Positioning.isElemVisible_;
              });
              if (hideableChildren.length) {
                var leastImportantChild = findLeastImportant(hideableChildren);
                if (leastImportantChild.importance < leastImportant.importance) {
                  leastImportant = leastImportantChild;
                }
              }
            }
          }
        } catch (err) {
          _didIteratorError13 = true;
          _iteratorError13 = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion13 && _iterator13.return) {
              _iterator13.return();
            }
          } finally {
            if (_didIteratorError13) {
              throw _iteratorError13;
            }
          }
        }

        return leastImportant;
      };

      var leastImportant = findLeastImportant(elems);
      leastImportant.control.get$Element().addClass(_globals.cssClasses.hidden);
      this.hidden$Elements_.push(leastImportant.control.get$Element());
    }
  }], [{
    key: 'isElemVisible_',
    value: function isElemVisible_(elem) {
      return elem.control.get$Element().is(':visible');
    }
  }]);

  return Positioning;
}((0, _utilities.mixinAsClass)(_ListenerOrganizerMixin.ListenerOrganizerMixin));

/***/ }),
/* 288 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.UIConfigurator = undefined;

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _Positioning = __webpack_require__(287);

var _Move = __webpack_require__(279);

var _FeaturePopup = __webpack_require__(179);

var _FeatureTooltip = __webpack_require__(276);

var _Shield = __webpack_require__(310);

var _ControlFactory = __webpack_require__(283);

var _Debug = __webpack_require__(15);

var _utilitiesObject = __webpack_require__(36);

var _utilities = __webpack_require__(5);

var _MeasurementButton = __webpack_require__(183);

var _PrintButton = __webpack_require__(184);

var _globals = __webpack_require__(11);

var _FeatureSelect = __webpack_require__(311);

var _csscolorparser = __webpack_require__(223);

var _FunctionCallBuffer = __webpack_require__(180);

var _ShowWMSFeatureInfo = __webpack_require__(281);

var _History = __webpack_require__(309);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * This class configures the UI of a map according to its mapconfig
 */
var UIConfigurator = exports.UIConfigurator = function () {
  /**
   * @param {G4UMap} map
   */
  function UIConfigurator(map) {
    _classCallCheck(this, UIConfigurator);

    /**
     * @type {G4UMap}
     * @private
     */
    this.map_ = map;
    this.map_.on('change:mapConfig', this.configureUI.bind(this));

    /**
     * @type {boolean}
     * @private
     */
    this.initialized_ = false;

    /**
     * Counts how many cssFiles are getting loaded
     * @type {number}
     * @private
     */
    this.pending_ = 0;
  }

  /**
   * Fill the given css String with the rigth colors
   * @param {string} css
   * @param {Color[]} colors
   * @returns {string}
   */


  _createClass(UIConfigurator, [{
    key: 'loadCSS',


    /**
     * Loads the from cssFile the given conf (if any is given) and inserts into a style tag in the head of the document
     * @param {MapConfig} conf
     * @returns {Promise}
     */
    value: function loadCSS(conf) {
      var _this = this;

      return new Promise(function (resolve) {
        if (conf.hasOwnProperty('cssFile')) {
          var id = 'g4u-css';
          var $style = (0, _jquery2.default)('#' + id);

          if ($style.length === 0) {
            $style = (0, _jquery2.default)('<style>', {
              'id': id
            });
            (0, _jquery2.default)('head').append($style);
          }

          var same = _this.cssFile_ === conf.cssFile;
          if (!same) {
            _jquery2.default.ajax(conf.cssFile).done(function (data) {
              $style.empty();
              data = UIConfigurator.fixUrls(data, conf.cssFile);
              if (conf.hasOwnProperty('cssTemplate')) {
                _this.map_.set('cssTemplateFile', data);
                $style.html(UIConfigurator.templateCSS(data, conf.cssTemplate));
              } else {
                $style.html(data);
              }
              resolve();
            }).fail(function () {
              _Debug.Debug.error('Failed to load css file.');
              resolve();
            });
            _this.cssFile_ = conf.cssFile;
          } else {
            if (conf.hasOwnProperty('cssTemplate')) {
              $style.html(UIConfigurator.templateCSS(_this.map_.get('cssTemplateFile'), conf.cssTemplate));
            }
            resolve();
          }
        } else {
          resolve();
        }
      });
    }

    /**
     * This functions is called the first time the configureUI function is called
     * @param {MapConfig} mapConfigCopy
     * @private
     */

  }, {
    key: 'initialize_',
    value: function initialize_(mapConfigCopy) {
      var _this2 = this;

      //
      // Control positioning
      //

      /**
       * @type {PositioningOptions}
       */
      var positioningOptions = mapConfigCopy.positioning || {};
      positioningOptions.viewport = this.map_.getViewport();

      this.map_.set('controlPositioning', new _Positioning.Positioning(positioningOptions));

      var positionCallBuffer = new _FunctionCallBuffer.FunctionCallBuffer(function () {
        return _this2.map_.get('controlPositioning').positionElements();
      });

      this.map_.on('ready', function () {
        return positionCallBuffer.call();
      });

      this.map_.asSoonAs('ready', true, function () {
        _this2.map_.on('resize', function () {
          return positionCallBuffer.call();
        });
        _this2.map_.on('ready:ui', function () {
          if (_this2.map_.get('ready:ui')) {
            positionCallBuffer.call();
          }
        });
        _this2.map_.on('change:mobile', function () {
          return positionCallBuffer.call();
        });

        _this2.map_.on('ready:layers', function () {
          positionCallBuffer.call();
          _this2.map_.getLayerGroup().forEachOn('change:visible', function () {
            return setTimeout(function () {
              return positionCallBuffer.call();
            }, 200);
          });
        });

        _this2.map_.getLayerGroup().forEachOn('change:visible', function () {
          return setTimeout(function () {
            return positionCallBuffer.call();
          }, 200);
        });
      });

      //
      //  Responsiveness / Mobile Layout
      //

      this.map_.set('mobile', false);
      (0, _jquery2.default)(this.map_.getTarget()).children().addClass(_globals.cssClasses.desktop);

      this.map_.set('scaleIcons', mapConfigCopy.scaleIcons);

      this.map_.once('ready', function () {
        _this2.map_.set('desktopLayout', {
          animations: _this2.map_.get('move').getAnimations(),
          scaleIcons: _this2.map_.get('scaleIcons'),
          hitTolerance: _this2.map_.get('hitTolerance')
        });
      });

      var checkMobileLayoutQuery = function checkMobileLayoutQuery() {
        /**
         * @type {MobileLayoutOptions}
         */
        var mobileLayout = _this2.map_.get('mobileLayout');

        if (mobileLayout && mobileLayout.mediaQueries && window.matchMedia) {
          _this2.map_.set('mobile', mobileLayout.mediaQueries.some(function (query) {
            return window.matchMedia(query).matches;
          }));
        }
      };

      this.map_.on('change:mobile', this.getHandleMobileChange_());

      //
      // Enabling/Disabling responsiveness
      //

      var oldResponsive = void 0;

      var onChangeResponsive = function onChangeResponsive() {
        if (_this2.map_.get('responsive') !== oldResponsive) {
          if (_this2.map_.get('responsive')) {
            checkMobileLayoutQuery();
            _this2.map_.on('resize', checkMobileLayoutQuery);
          } else {
            _this2.map_.un('resize', checkMobileLayoutQuery);
          }
          oldResponsive = _this2.map_.get('responsive');
        }
      };

      this.map_.once('ready', onChangeResponsive);

      this.map_.on('change:responsive', onChangeResponsive);

      this.map_.on('ready:ui', onChangeResponsive);

      this.initialized_ = true;
    }
  }, {
    key: 'applyLayout',
    value: function applyLayout(layout) {
      if (layout.hasOwnProperty('animations')) {
        this.map_.get('move').setAnimations(layout.animations);
      }

      if (layout.hasOwnProperty('scaleIcons')) {
        this.map_.set('scaleIcons', layout.scaleIcons);
        this.map_.get('styling').setGlobalIconScale(layout.scaleIcons);
        this.map_.getLayerGroup().recursiveForEach(function (l) {
          if (l.getVisible()) {
            l.changed();
          }
        });
      }

      if (layout.hasOwnProperty('hitTolerance')) {
        this.map_.set('hitTolerance', layout.hitTolerance);
      }

      var featurePopup = this.map_.get('featurePopup');
      var wmsFeatureInfo = this.map_.get('showWMSFeatureInfo');

      var restoreWmsFeatureInfoPoint = wmsFeatureInfo && wmsFeatureInfo.getPointVisible();

      if (featurePopup && featurePopup.getVisible()) {
        featurePopup.setVisible(false);
        setTimeout(function () {
          featurePopup.setVisible(true);
          if (restoreWmsFeatureInfoPoint) {
            wmsFeatureInfo.setPointVisible(true);
          }
        }, 0);
      }
    }
  }, {
    key: 'getHandleMobileChange_',
    value: function getHandleMobileChange_() {
      var _this3 = this;

      if (!this.handleMobileChange__) {
        this.handleMobileChange__ = function () {
          if (_this3.map_.get('mobile')) {
            (0, _jquery2.default)(_this3.map_.getTarget()).children().addClass(_globals.cssClasses.mobile);
            (0, _jquery2.default)(_this3.map_.getTarget()).children().removeClass(_globals.cssClasses.desktop);

            _this3.applyLayout(_this3.map_.get('mobileLayout'));
          } else {
            (0, _jquery2.default)(_this3.map_.getTarget()).children().addClass(_globals.cssClasses.desktop);
            (0, _jquery2.default)(_this3.map_.getTarget()).children().removeClass(_globals.cssClasses.mobile);

            _this3.applyLayout(_this3.map_.get('desktopLayout'));
          }
        };
      }
      return this.handleMobileChange__;
    }

    /**
     * @public
     */

  }, {
    key: 'configureUI',
    value: function configureUI() {
      var _this4 = this;

      this.map_.set('ready:ui', false);
      this.pending_++;

      var mapConfigCopy = (0, _utilitiesObject.copyDeep)(this.map_.get('mapConfig'));

      if (!this.initialized_) {
        this.initialize_(mapConfigCopy);
      }

      var curConfig = void 0;

      // //////////////////////////////////////////////////////////////////////////////////////// //
      //                              Load CSS if neccessary                                      //
      // //////////////////////////////////////////////////////////////////////////////////////// //

      this.loadCSS(mapConfigCopy).then(function () {
        _this4.pending_--;
        if (_this4.pending_ === 0) {
          // clear
          _this4.map_.removeControls();
          _this4.map_.controlsByName = {};
          _this4.map_.removeInteractions();

          _this4.map_.get('controlPositioning').init();

          // //////////////////////////////////////////////////////////////////////////////////////// //
          //                           Move Class (before mobileLayout)                               //
          // //////////////////////////////////////////////////////////////////////////////////////// //

          var moveOptions = (0, _utilitiesObject.copyDeep)((0, _utilities.getConfig)(mapConfigCopy, 'move'));
          moveOptions.map = _this4.map_;

          _this4.map_.set('move', new _Move.Move(moveOptions));

          // //////////////////////////////////////////////////////////////////////////////////////// //
          //                                     HTML-Shield                                          //
          // //////////////////////////////////////////////////////////////////////////////////////// //

          if (!_this4.map_.get('shield')) {
            _this4.map_.set('shield', new _Shield.Shield({ map: _this4.map_ }));
          }

          // //////////////////////////////////////////////////////////////////////////////////////// //
          //                                MobileLayoutMediaQuery                                    //
          // //////////////////////////////////////////////////////////////////////////////////////// //

          _this4.map_.set('mobileLayout', mapConfigCopy.mobileLayout);

          _this4.map_.set('responsive', _this4.map_.get('responsive') || !!_this4.map_.get('mobileLayout'));

          // //////////////////////////////////////////////////////////////////////////////////////// //
          //                                       MODULES                                            //
          // //////////////////////////////////////////////////////////////////////////////////////// //

          // should be before adding controls so the controls don't have to wait for any other ui elements

          var _iteratorNormalCompletion = true;
          var _didIteratorError = false;
          var _iteratorError = undefined;

          try {
            for (var _iterator = _this4.map_.getModules()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
              var module = _step.value;

              module.configureUI(mapConfigCopy);
            }

            // //////////////////////////////////////////////////////////////////////////////////////// //
            //                                       Controls                                           //
            // //////////////////////////////////////////////////////////////////////////////////////// //
          } catch (err) {
            _didIteratorError = true;
            _iteratorError = err;
          } finally {
            try {
              if (!_iteratorNormalCompletion && _iterator.return) {
                _iterator.return();
              }
            } finally {
              if (_didIteratorError) {
                throw _iteratorError;
              }
            }
          }

          if (!_this4.controlFactory) {
            _this4.controlFactory = new _ControlFactory.ControlFactory({
              map: _this4.map_,
              localiser: _this4.map_.get('localiser')
            });
          } else {
            _this4.controlFactory.setLocaliser(_this4.map_.get('localiser'));
          }

          _this4.controlFactory.addControls();

          var deactivate = function deactivate(control) {
            if (control.setActive) {
              control.setActive(false);
            }
            if (control.getControls) {
              control.getControls().forEach(deactivate);
            }
          };

          _this4.map_.on('change:mobile', function () {
            return _this4.map_.getControls().forEach(deactivate);
          });

          // //////////////////////////////////////////////////////////////////////////////////////// //
          //                                     Interactions                                         //
          // //////////////////////////////////////////////////////////////////////////////////////// //

          if ((0, _utilities.checkFor)(mapConfigCopy, 'interactions')) {
            if ((0, _utilities.checkFor)(mapConfigCopy.interactions, 'doubleClickZoom')) {
              _this4.map_.addDefaultInteraction('dblclick', new _openlayers2.default.interaction.DoubleClickZoom());
            }

            if ((0, _utilities.checkFor)(mapConfigCopy.interactions, 'dragPan')) {
              if (mapConfigCopy.kinetic !== false) {
                var decay = -0.002;
                var minVelocity = 0.02;
                var delay = 100;
                if (_typeof(mapConfigCopy.kinetic) === 'object') {
                  decay = mapConfigCopy.kinetic.decay || decay;
                  minVelocity = mapConfigCopy.kinetic.minVelocity || minVelocity;
                  delay = mapConfigCopy.kinetic.delay || delay;
                }
                _this4.map_.addDefaultInteraction('drag', new _openlayers2.default.interaction.DragPan({
                  kinetic: new _openlayers2.default.Kinetic(decay, minVelocity, delay)
                }));
              } else {
                _this4.map_.addDefaultInteraction('drag', new _openlayers2.default.interaction.DragPan());
              }
            }

            if ((0, _utilities.checkFor)(mapConfigCopy.interactions, 'dragRotate')) {
              // using default condition: ol.events.condition.altShiftKeysOnly
              _this4.map_.addDefaultInteraction('altShiftDrag', new _openlayers2.default.interaction.DragRotate());
            }

            if ((0, _utilities.checkFor)(mapConfigCopy.interactions, 'dragZoom')) {
              // using default condition: ol.events.condition.shiftKeyOnly
              _this4.map_.addDefaultInteraction('shiftDrag', new _openlayers2.default.interaction.DragZoom());
            }

            if ((0, _utilities.checkFor)(mapConfigCopy.interactions, 'keyboardPan')) {
              _this4.map_.addDefaultInteraction('keyboard', new _openlayers2.default.interaction.KeyboardPan());
            }

            if ((0, _utilities.checkFor)(mapConfigCopy.interactions, 'keyboardZoom')) {
              _this4.map_.addDefaultInteraction('keyboard', new _openlayers2.default.interaction.KeyboardZoom());
            }

            if ((0, _utilities.checkFor)(mapConfigCopy.interactions, 'mouseWheelZoom')) {
              _this4.map_.addDefaultInteraction('mouseWheel', new _openlayers2.default.interaction.MouseWheelZoom());
            }

            if ((0, _utilities.checkFor)(mapConfigCopy.interactions, 'pinchRotate')) {
              _this4.map_.addDefaultInteraction('pinchRotate', new _openlayers2.default.interaction.PinchRotate());
            }

            if ((0, _utilities.checkFor)(mapConfigCopy.interactions, 'pinchZoom')) {
              _this4.map_.addDefaultInteraction('pinchZoom', new _openlayers2.default.interaction.PinchZoom());
            }
          }

          _this4.map_.addDefaultInteraction('singleclick', new _FeatureSelect.FeatureSelect({
            condition: function condition(e) {
              return _openlayers2.default.events.condition.singleClick(e) && (0, _jquery2.default)(e.originalEvent.target).is('canvas');
            },
            style: null,
            multi: true
          }));

          var moveInteraction = new _FeatureSelect.FeatureSelect({
            condition: function condition(e) {
              return _openlayers2.default.events.condition.pointerMove(e) && (0, _jquery2.default)(e.originalEvent.target).is('canvas');
            },
            style: null,
            multi: true
          });
          _this4.map_.addDefaultInteraction('pointermove', moveInteraction);

          var $viewport = (0, _jquery2.default)(_this4.map_.getViewport());

          // if the map is left the features should get deselected
          $viewport.find('canvas').on('mouseleave', function (e) {
            if (!(0, _jquery2.default)(e.relatedTarget).is('canvas')) {
              if (moveInteraction.getFeatures().getLength() > 0) {
                moveInteraction.deselect(moveInteraction.getFeatures().getArray());
              }
            }
          });

          // hitTolerance
          var updateHitTolerance = function updateHitTolerance() {
            var hitTolerance = _this4.map_.get('hitTolerance');
            var _iteratorNormalCompletion2 = true;
            var _didIteratorError2 = false;
            var _iteratorError2 = undefined;

            try {
              for (var _iterator2 = _this4.map_.getInteractions().getArray()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                var interaction = _step2.value;

                if (interaction.setHitTolerance) {
                  interaction.setHitTolerance(hitTolerance);
                }
              }
            } catch (err) {
              _didIteratorError2 = true;
              _iteratorError2 = err;
            } finally {
              try {
                if (!_iteratorNormalCompletion2 && _iterator2.return) {
                  _iterator2.return();
                }
              } finally {
                if (_didIteratorError2) {
                  throw _iteratorError2;
                }
              }
            }
          };

          _this4.map_.set('hitTolerance', mapConfigCopy.hitTolerance || 0);

          updateHitTolerance();
          _this4.map_.on('change:hitTolerance', updateHitTolerance);

          // //////////////////////////////////////////////////////////////////////////////////////// //
          //                                     Feature Popups                                       //
          // //////////////////////////////////////////////////////////////////////////////////////// //

          var featurePopup = _this4.map_.get('featurePopup');
          if (featurePopup) {
            featurePopup.setMap(null);
          }
          curConfig = (0, _utilities.getConfig)(mapConfigCopy, 'featurePopup');
          if (curConfig) {
            featurePopup = new _FeaturePopup.FeaturePopup(curConfig);
            featurePopup.setMap(_this4.map_);
            _this4.map_.set('featurePopup', featurePopup);
          } else {
            _this4.map_.set('featurePopup', undefined);
          }

          var featureTooltip = _this4.map_.get('featureTooltip');
          if (featureTooltip) {
            featureTooltip.setMap(null);
          }
          curConfig = (0, _utilities.getConfig)(mapConfigCopy, 'featureTooltip');
          if (curConfig) {
            featureTooltip = new _FeatureTooltip.FeatureTooltip(curConfig);
            featureTooltip.setMap(_this4.map_);
            _this4.map_.set('featureTooltip', featureTooltip);
          } else {
            _this4.map_.set('featureTooltip', undefined);
          }

          var showWMSFeatureInfo = _this4.map_.get('showWMSFeatureInfo');
          if (showWMSFeatureInfo) {
            showWMSFeatureInfo.setMap(null);
          }
          curConfig = (0, _utilities.getConfig)(mapConfigCopy, 'showWMSFeatureInfo');
          if (curConfig) {
            showWMSFeatureInfo = new _ShowWMSFeatureInfo.ShowWMSFeatureInfo(curConfig);
            showWMSFeatureInfo.setMap(_this4.map_);
            _this4.map_.set('showWMSFeatureInfo', showWMSFeatureInfo);
          } else {
            _this4.map_.set('showWMSFeatureInfo', undefined);
          }

          // //////////////////////////////////////////////////////////////////////////////////////// //
          //                                    Custom History                                        //
          // //////////////////////////////////////////////////////////////////////////////////////// //

          _this4.map_.set('history', new _History.History());

          // //////////////////////////////////////////////////////////////////////////////////////// //
          //                                     UserExit (2/2)                                       //
          // //////////////////////////////////////////////////////////////////////////////////////// //
          if (_this4.map_.get('userActionTracking')) {
            var map = _this4.map_;

            _this4.map_.on('moveend', function () {
              map.dispatchEvent({
                type: 'userActionTracking',
                action: 'move'
              });
            });

            _this4.map_.get('baseLayers').getLayers().forEach(function (layer) {
              layer.on('change:visible', function () {
                if (layer.getVisible()) {
                  // only if changed to visible
                  map.dispatchEvent({
                    type: 'userActionTracking',
                    action: 'baseLayerChange',
                    value: layer.get('title')
                  });
                }
              });
            });

            _this4.map_.get('featureLayers').recursiveForEach(function (layer) {
              layer.on('change:visible', function () {
                if (layer.getVisible()) {
                  // only if changed to visible
                  map.dispatchEvent({
                    type: 'userActionTracking',
                    action: 'featureLayerChange',
                    value: layer.get('title')
                  });
                }
              });
            });

            if (_this4.map_.get('featurePopup')) {
              _this4.map_.get('featurePopup').on('change:visible', function () {
                if (this.getVisible()) {
                  // only if changed to visible
                  map.dispatchEvent({
                    type: 'userActionTracking',
                    action: 'popupOpen',
                    value: this.getFeature().get('name')
                  });
                }
              });
            }

            var _iteratorNormalCompletion3 = true;
            var _didIteratorError3 = false;
            var _iteratorError3 = undefined;

            try {
              for (var _iterator3 = _this4.map_.getModules()[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                var _module = _step3.value;

                _module.enableUserActionTracking();
              }
            } catch (err) {
              _didIteratorError3 = true;
              _iteratorError3 = err;
            } finally {
              try {
                if (!_iteratorNormalCompletion3 && _iterator3.return) {
                  _iterator3.return();
                }
              } finally {
                if (_didIteratorError3) {
                  throw _iteratorError3;
                }
              }
            }

            _this4.map_.getControls().forEach(function (control) {
              if (control instanceof _PrintButton.PrintButton) {
                control.on('click', function () {
                  map.dispatchEvent({
                    type: 'userActionTracking',
                    action: 'print'
                  });
                });
              }

              if (control instanceof _MeasurementButton.MeasurementButton) {
                if (control.getType() === 'LineString') {
                  control.on('measurement', function () {
                    map.dispatchEvent({
                      type: 'userActionTracking',
                      action: 'measureLine'
                    });
                  });
                } else if (control.getType() === 'Polygon') {
                  control.on('measurement', function () {
                    map.dispatchEvent({
                      type: 'userActionTracking',
                      action: 'measureArea'
                    });
                  });
                }
              }
            });
          }
          _this4.map_.set('ready:ui', true);
        }
      }).catch(function (reason) {
        _Debug.Debug.error(reason);
      });
    }
  }], [{
    key: 'templateCSS',
    value: function templateCSS(css, colors) {
      // find the used index of the color template
      var colorTemplateIndex = function colorTemplateIndex(c) {
        var channels = 0;
        var index = -1;
        for (var i = 0; i < 3; i++) {
          if (c[i] !== 0) {
            channels++;
            index = i;
          }
        }
        if (channels > 1) {
          return -1;
        } else {
          return index;
        }
      };

      var regExp = /(rgba?\([^)]*\))|(#[0-9a-f]{6})/g;

      colors = colors.map(_csscolorparser.parseCSSColor);

      return css.replace(regExp, function (match) {
        var templateColor = (0, _csscolorparser.parseCSSColor)(match);
        var index = colorTemplateIndex(templateColor);
        if (index > -1) {
          var aFac = templateColor[3];
          var cFac = templateColor[index] / 120;
          var newColor = [colors[index][0] * cFac, colors[index][1] * cFac, colors[index][2] * cFac, colors[index][3] * aFac];
          return 'rgba(' + newColor[0] + ', ' + newColor[1] + ', ' + newColor[2] + ', ' + newColor[3] + ')';
        }
        return match;
      });
    }

    /**
     * Fixes all urls in the css string to the right path
     * @param css
     * @param cssPath
     * @returns {string}
     */

  }, {
    key: 'fixUrls',
    value: function fixUrls(css, cssPath) {
      var dirname = (0, _utilities.urlDirname)(cssPath);
      return css.replace(/url\("([^"]*)"\)/g, function (match, url) {
        return 'url("' + (0, _utilities.urlJoin)(dirname, url) + '")';
      });
    }
  }]);

  return UIConfigurator;
}();

/***/ }),
/* 289 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * This class organizes controls in an active group in which only one control can bea active at a time.
 * This specified and configured via a property 'activeGroup' in the config object of the control and
 * a matching string for all controls which should be in this group
 */
var ActiveGroup = exports.ActiveGroup = function () {
  /**
   * @param {Control[]} controls
   */
  function ActiveGroup() {
    var controls = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];

    _classCallCheck(this, ActiveGroup);

    /**
     * @type {Control[]}
     * @private
     */
    this.controls_ = controls;
    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
      for (var _iterator = this.controls_[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
        var control = _step.value;

        this.addControl(control);
      }
    } catch (err) {
      _didIteratorError = true;
      _iteratorError = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion && _iterator.return) {
          _iterator.return();
        }
      } finally {
        if (_didIteratorError) {
          throw _iteratorError;
        }
      }
    }
  }

  /**
   * @param {Control} control
   */


  _createClass(ActiveGroup, [{
    key: 'addControl',
    value: function addControl(control) {
      var _this = this;

      this.controls_.push(control);
      control.on('change:active', function () {
        if (control.getActive()) {
          if (_this.activeControl_) {
            _this.activeControl_.setActive(false);
          }
          _this.activeControl_ = control;
        } else {
          _this.activeControl_ = null;
        }
      });
    }
  }]);

  return ActiveGroup;
}();

/***/ }),
/* 290 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ArrowButtons = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _utilitiesObject = __webpack_require__(36);

var _Control2 = __webpack_require__(21);

var _html = __webpack_require__(35);

__webpack_require__(523);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {g4uControlOptions} ArrowButtonOptions
 * @property {number} [pixelDelta=128] how many pixels should one click move the map
 * @property {ol.Extent|undefined} [initExtent=undefined] the initial Extent to move the map back to (center button)
 * @property {number} [animationDuration=100] duration of the animation
 * @property {boolean} [animated=true] if the move should be done with an animation or without
 * @property {{up: string, right: string, down: string, left: string, center: string}} [labels={}]
 *  unicode labels for the buttons (only shown if pictures are not loaded)
 */

/**
 * ArrowButtons shows Buttons on the map which let you move in all 4 directions and a button to return to the initial
 * position of the map. It provides an Interface class with an produceOlControl returning an
 * {ol.control.Control} - Object. This can be added as normal controls to the map
 * (e.g. ``map.addControl(arrowButtons.produceOlControl)`` ).
 *
 * The Options are passed as an Object (e.g. ``{ initCenter : map.getView().getCenter(),
 *      initZoom : map.getView().getZoom() }``.
 */
var ArrowButtons = exports.ArrowButtons = function (_Control) {
  _inherits(ArrowButtons, _Control);

  /**
   * @param {ArrowButtonOptions} [options={}]
   */
  function ArrowButtons() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, ArrowButtons);

    options.className = options.className || 'g4u-arrowbuttons';
    options.element = (0, _jquery2.default)('<div class="ol-unselectable ol-control"></div>')[0];
    options.singleButton = false;

    var _this = _possibleConstructorReturn(this, (ArrowButtons.__proto__ || Object.getPrototypeOf(ArrowButtons)).call(this, options));

    var description = {
      'left': _this.getLocaliser().localiseUsingDictionary('ArrowButtons leftward'),
      'right': _this.getLocaliser().localiseUsingDictionary('ArrowButtons rightward'),
      'up': _this.getLocaliser().localiseUsingDictionary('ArrowButtons upward'),
      'down': _this.getLocaliser().localiseUsingDictionary('ArrowButtons downward'),
      'center': _this.getLocaliser().localiseUsingDictionary('ArrowButtons centerward')
    };

    /**
     * @type {number}
     * @private
     */
    _this.pixelDelta_ = options.pixelDelta || 128;

    /**
     * @type {ol.Extent|undefined}
     * @private
     */
    _this.initExtent_ = options.initExtent || undefined;

    /**
     * @type {number}
     * @private
     */
    _this.animationDuration_ = options.animationDuration || 100;

    /**
     * @type {boolean}
     * @private
     */
    _this.animated_ = options.animated || true;

    /**
     * @type {string[]}
     * @private
     */
    _this.directions_ = ['center', 'left', 'up', 'right', 'down'];

    /**
     * @type {{left: number[], up: number[], right: number[], down: number[]}}
     * @private
     */
    _this.vectors_ = { left: [-1, 0], up: [0, 1], right: [1, 0], down: [0, -1] };

    /**
     * @type {{up: string, right: string, down: string, left: string, center: string}}
     * @private
     */
    _this.labels_ = (0, _utilitiesObject.merge)(options.labels || {}, {
      left: '&#9665;',
      up: '&#9651;',
      right: '&#9655;',
      down: '&#9661;',
      center: '&#9675;'
    });

    // creating the HTML-Elements and registering Event-Handlers

    var _loop = function _loop(direction) {
      // HTML

      var $button = (0, _jquery2.default)('<button>').addClass(_this.className_ + '-' + direction).html(_this.labels_[direction]);

      (0, _html.addTooltip)($button, description[direction]);

      // Handler
      $button.on('click', function () {
        _this.onClick_(direction);
        $button.blur();
      });

      // adding button
      _this.get$Element().append($button);
    };

    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
      for (var _iterator = _this.directions_[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
        var direction = _step.value;

        _loop(direction);
      }
    } catch (err) {
      _didIteratorError = true;
      _iteratorError = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion && _iterator.return) {
          _iterator.return();
        }
      } finally {
        if (_didIteratorError) {
          throw _iteratorError;
        }
      }
    }

    return _this;
  }

  /**
   * @param {G4UMap} map
   */


  _createClass(ArrowButtons, [{
    key: 'setMap',
    value: function setMap(map) {
      _get(ArrowButtons.prototype.__proto__ || Object.getPrototypeOf(ArrowButtons.prototype), 'setMap', this).call(this, map);

      if (map) {
        if (!this.initExtent_) {
          this.initExtent_ = map.getView().calculateExtent(map.getSize());
        }
      }
    }

    /**
     * This method is called when a button is clicked and makes a move on the map corresponding to the direction.
     * @param {string} direction
     * @private
     */

  }, {
    key: 'onClick_',
    value: function onClick_(direction) {
      var map = this.getMap();
      var view = map.getView();

      if (direction === 'center') {
        map.get('move').toExtent(this.initExtent_, { animated: this.animated_ });
      } else {
        var resolution = view.getResolution();
        var rotation = view.getRotation();

        // a vector that points in the direction the move should be going
        var dirVec = this.vectors_[direction];

        // this calculates the 'move'-vector out of the direction and pixelDelta (-> length, how many pixels per move)
        var delta = [dirVec[0] * resolution * this.pixelDelta_, dirVec[1] * resolution * this.pixelDelta_];

        // this rotates if needed
        _openlayers2.default.coordinate.rotate(delta, rotation);

        var oldPosition = view.getCenter();

        // adding the delta to the actual center

        var constrainedCenter = view.constrainCenter([oldPosition[0] + delta[0], oldPosition[1] + delta[1]]);

        if (this.animated_) {
          // creating a pan-animation
          view.animate({
            center: constrainedCenter,
            duration: this.animationDuration_
          });
        } else {
          view.setCenter(constrainedCenter);
        }
      }
      (0, _jquery2.default)(map.getViewport()).focus();
    }
  }]);

  return ArrowButtons;
}(_Control2.Control);

/***/ }),
/* 291 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ZoomSlider = exports.Zoom = exports.CombinedZoom = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _ComposedControl2 = __webpack_require__(128);

var _globals = __webpack_require__(11);

var _utilitiesObject = __webpack_require__(36);

__webpack_require__(547);

var _utilities = __webpack_require__(5);

var _RewireMixin = __webpack_require__(92);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {ComposedControlOptions} CombinedZoomOptions
 * @property {boolean} [buttons=true] visibility of the zoombuttons
 * @property {boolean} [slider=true] visibility of the zoomslider
 * @property {number} [buttonImportance] importance of the buttons
 * @property {number} [sliderImportance] importance of the slider
 * @property {string} [zoomInTipLabel]
 * @property {string} [zoomOutTipLabel]
 */

/**
 * This combines the two zoom controls (zoomslider and zoombuttons)
 */
var CombinedZoom = exports.CombinedZoom = function (_ComposedControl) {
  _inherits(CombinedZoom, _ComposedControl);

  /**
   * @param {CombinedZoomOptions} [options={}]
   */
  function CombinedZoom() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, CombinedZoom);

    options.element = (0, _jquery2.default)('<div>').get(0);
    options.className = options.className || 'g4u-zoom';
    options.singleButton = false;

    var _this = _possibleConstructorReturn(this, (CombinedZoom.__proto__ || Object.getPrototypeOf(CombinedZoom)).call(this, options));

    delete options.element;

    /**
     * @type {boolean}
     * @private
     */
    _this.hasButtons_ = options.buttons || !options.hasOwnProperty('buttons');

    /**
     * @type {boolean}
     * @private
     */
    _this.hasSlider_ = options.slider || !options.hasOwnProperty('slider');

    if (_this.hasButtons_) {
      _this.zoomButtonOptions = (0, _utilitiesObject.copy)(options);
      _this.zoomButtonOptions.importance = options.buttonImportance || options.importance;
      _this.zoomButtonOptions.zoomInTipLabel = options.hasOwnProperty('zoomInTipLabel') ? _this.getLocaliser().selectL10N(options.zoomInTipLabel) : _this.getLocaliser().localiseUsingDictionary('Zoom zoomInTipLabel');

      _this.zoomButtonOptions.zoomOutTipLabel = options.hasOwnProperty('zoomOutTipLabel') ? _this.getLocaliser().selectL10N(options.zoomOutTipLabel) : _this.getLocaliser().localiseUsingDictionary('Zoom zoomOutTipLabel');
    }

    if (_this.hasSlider_) {
      _this.zoomSliderOptions = (0, _utilitiesObject.copy)(options);
      _this.zoomSliderOptions.importance = options.sliderImportance;
      _this.zoomSliderOptions.className = 'g4u-zoomslider';
    }
    return _this;
  }

  /**
   * @param {G4UMap} map
   */


  _createClass(CombinedZoom, [{
    key: 'setMap',
    value: function setMap(map) {
      _get(CombinedZoom.prototype.__proto__ || Object.getPrototypeOf(CombinedZoom.prototype), 'setMap', this).call(this, map);

      if (map) {
        if (this.hasSlider_) {
          this.addZoomSlider();
        }

        if (this.hasButtons_) {
          this.addZoomButtons();
        }
      }
    }
  }, {
    key: 'addZoomButtons',
    value: function addZoomButtons() {
      /**
       * @type {Zoom}
       * @private
       */
      this.zoomButtons_ = new Zoom(this.zoomButtonOptions);

      this.addControl(this.zoomButtons_, { wrap: false });

      var $zoomIn = this.zoomButtons_.get$Element().children('.g4u-zoom-in');
      var $zoomOut = this.zoomButtons_.get$Element().children('.g4u-zoom-out');

      this.get$Container().prepend($zoomIn);
      this.get$Container().append($zoomOut);

      this.zoomButtons_.get$Element().remove();
    }
  }, {
    key: 'addZoomSlider',
    value: function addZoomSlider() {
      /**
       * @type {ZoomSlider}
       * @private
       */
      this.zoomSlider_ = new ZoomSlider(this.zoomSliderOptions);

      this.addControl(this.zoomSlider_, { wrap: false });

      var $zoomSlider = this.zoomSlider_.get$Element();

      $zoomSlider.on('mousedown', function () {
        $zoomSlider.addClass(_globals.cssClasses.mousedown);
      });
      $zoomSlider.on('mouseup', function () {
        $zoomSlider.removeClass(_globals.cssClasses.mousedown);
      });

      var $zoomIn = this.get$Container().filter('.g4u-zoom-in');

      if ($zoomIn.length) {
        $zoomSlider.insertAfter($zoomIn);
      } else {
        this.get$Container().append($zoomSlider);
      }
    }
  }]);

  return CombinedZoom;
}(_ComposedControl2.ComposedControl);

/**
 * @typedef {g4uControlOptions} ZoomOptions
 * @property {Localizable} [zoomInTipLabel]
 * @property {Localizable} [zoomOutTipLabel]
 */

/**
 * @extends Control
 */


var Zoom = exports.Zoom = function (_mixin) {
  _inherits(Zoom, _mixin);

  /**
   * @param {g4uControlOptions} [options={}]
   */
  function Zoom() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, Zoom);

    options.className = options.hasOwnProperty('className') ? options.className : 'g4u-zoom';

    options.zoomInTipLabel = options.hasOwnProperty('zoomInTipLabel') ? options.localiser.selectL10N(options.zoomInTipLabel) : options.localiser.localiseUsingDictionary('Zoom zoomInTipLabel');

    options.zoomOutTipLabel = options.hasOwnProperty('zoomOutTipLabel') ? options.localiser.selectL10N(options.zoomOutTipLabel) : options.localiser.localiseUsingDictionary('Zoom zoomOutTipLabel');

    return _possibleConstructorReturn(this, (Zoom.__proto__ || Object.getPrototypeOf(Zoom)).call(this, options));
  }

  return Zoom;
}((0, _utilities.mixin)(_openlayers2.default.control.Zoom, _RewireMixin.RewireMixin));

/**
 * @extends Control
 */


var ZoomSlider = exports.ZoomSlider = function (_mixin2) {
  _inherits(ZoomSlider, _mixin2);

  /**
   * @param {g4uControlOptions} [options={}]
   */
  function ZoomSlider() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, ZoomSlider);

    options.className = options.hasOwnProperty('className') ? options.className : 'g4u-zoomslider';

    return _possibleConstructorReturn(this, (ZoomSlider.__proto__ || Object.getPrototypeOf(ZoomSlider)).call(this, options));
  }

  _createClass(ZoomSlider, [{
    key: 'rewire',
    value: function rewire() {
      _get(ZoomSlider.prototype.__proto__ || Object.getPrototypeOf(ZoomSlider.prototype), 'rewire', this).call(this);

      this.get$Element().on('mousedown', function () {
        (0, _jquery2.default)(this).addClass(_globals.cssClasses.mousedown);
      });
      this.get$Element().on('mouseup', function () {
        (0, _jquery2.default)(this).removeClass(_globals.cssClasses.mousedown);
      });
    }
  }]);

  return ZoomSlider;
}((0, _utilities.mixin)(_openlayers2.default.control.ZoomSlider, _RewireMixin.RewireMixin));

/***/ }),
/* 292 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.GeolocationButton = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _Control = __webpack_require__(21);

var _html = __webpack_require__(35);

var _VectorLayer = __webpack_require__(94);

var _MessageDisplay = __webpack_require__(278);

var _globals = __webpack_require__(11);

__webpack_require__(527);

var _ActivatableMixin = __webpack_require__(82);

var _ListenerOrganizerMixin = __webpack_require__(48);

var _utilities = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {g4uControlOptions} GeolocationButtonOptions
 * @property {boolean} [animated] if the move on the map to the geoposition should be animated
 * @property {StyleLike} [style='#defaultStyle']
 * @property {number} [maxZoom]
 * @property {boolean} [active=false]
 */

/**
 * This class provides a button to center the view on your current geoposition.
 */
var GeolocationButton = exports.GeolocationButton = function (_mixin) {
  _inherits(GeolocationButton, _mixin);

  /**
   * @param {GeolocationButtonOptions} [options={}]
   */
  function GeolocationButton() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, GeolocationButton);

    options.className = options.className || 'g4u-geolocation';
    options.singleButton = true;
    options.element = (0, _jquery2.default)('<button>').get(0);

    /**
     * @type {string}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (GeolocationButton.__proto__ || Object.getPrototypeOf(GeolocationButton)).call(this, options));

    _this.classNamePushed_ = _this.className_ + '-pushed';

    /**
     * @type {boolean}
     * @private
     */
    _this.animated_ = options.animated;

    /**
     * @type {StyleLike}
     * @private
     */
    _this.style_ = options.style || '#defaultStyle';

    /**
     * @type {number}
     * @private
     */
    _this.maxZoom_ = options.maxZoom;

    _this.setTitle(_this.getTitle() || _this.getLocaliser().localiseUsingDictionary('GeolocationButton title'));

    _this.setTipLabel(_this.getTipLabel() || _this.getLocaliser().localiseUsingDictionary('GeolocationButton tipLabel'));

    _this.get$Element().addClass(_this.className_).addClass(_globals.cssClasses.mainButton).html(_this.getTitle());

    (0, _html.addTooltip)(_this.get$Element(), _this.getTipLabel());

    /**
     * @type {MessageDisplay}
     * @private
     */
    _this.buttonMessageDisplay_ = new _MessageDisplay.MessageDisplay(_this.get$Element());

    _this.get$Element().on('click touch', function () {
      if (_openlayers2.default.has.GEOLOCATION) {
        _this.setActive(!_this.getActive());
      } else {
        _this.buttonMessageDisplay_.error(_this.getLocaliser().localiseUsingDictionary('geolocation geolocation-not-possible'), _this.getMap().get('mobile') ? { position: 'top middle' } : {});
      }
    });

    _this.layer_ = null;
    var geolocationOptions = { tracking: false };
    if (options.hasOwnProperty('trackingOptions')) {
      geolocationOptions.trackingOptions = options.trackingOptions;
    }
    if (options.hasOwnProperty('projection')) {
      geolocationOptions.projection = options.projection;
    }
    _this.followLocation_ = options.followLocation || false;
    _this.geolocation_ = new _openlayers2.default.Geolocation(geolocationOptions);
    _this.geolocation_.on('error', function () {
      _this.buttonMessageDisplay_.error(_this.getLocaliser().localiseUsingDictionary('geolocation geolocation-not-possible'), _this.getMap().get('mobile') ? { position: 'top middle' } : {});
      _this.setActive(false);
    });

    _this.on('change:active', function (e) {
      return _this.activeChangeHandler_(e);
    });
    return _this;
  }

  /**
   * @param {G4UMap} map
   */


  _createClass(GeolocationButton, [{
    key: 'setMap',
    value: function setMap(map) {
      if (this.getMap()) {
        this.getMap().getLayers().remove(this.layer_);
      }

      _get(GeolocationButton.prototype.__proto__ || Object.getPrototypeOf(GeolocationButton.prototype), 'setMap', this).call(this, map);

      if (map) {
        var projection = map.getView().getProjection();
        this.geolocation_.setProjection(projection);

        var layerOptions = { source: new _openlayers2.default.source.Vector({ projection: projection }), visible: true };
        this.layer_ = new _VectorLayer.VectorLayer(layerOptions);

        this.layer_.setStyle(map.get('styling').getStyle(this.style_));
        map.get('styling').manageLayer(this.layer_);
        map.getLayers().insertAt(1, this.layer_); // 0 is where the baseLayers are

        this.activateOnMapChange();
      }
    }
  }, {
    key: 'changeHandler_',
    value: function changeHandler_(options) {
      var source = this.layer_.getSource();
      source.clear();
      var position = this.geolocation_.getPosition();
      source.addFeature(new _openlayers2.default.Feature({ geometry: new _openlayers2.default.geom.Point(position) }));

      var circle = this.geolocation_.getAccuracyGeometry();
      source.addFeature(new _openlayers2.default.Feature({ geometry: circle }));
      if (options.hasOwnProperty('initialRun') && options.initialRun) {
        this.getMap().get('move').toExtent(circle.getExtent(), { animated: this.animated_, maxZoom: this.maxZoom_ });
      } else {
        if (this.animated_) {
          this.getMap().getView().animate({ 'center': position });
        } else {
          this.getMap().getView().setCenter(position);
        }
      }
      if (options.hasOwnProperty('stopTracking')) {
        this.geolocation_.setTracking(!options.stopTracking);
      }
    }

    /**
     * Show/Hide the geolocation on the map as point with a circle in the size of the accuracy around
     */

  }, {
    key: 'activeChangeHandler_',
    value: function activeChangeHandler_() {
      var _this2 = this;

      var active = this.getActive();
      this.get$Element().toggleClass(this.classNamePushed_, active);
      if (active) {
        this.geolocation_.setTracking(true);
        var position = this.geolocation_.getPosition();
        if (position) {
          this.changeHandler_({ 'stopTracking': !this.followLocation_, 'initialRun': true });
          if (this.followLocation_) {
            this.listenAt(this.geolocation_).on('change', function (e) {
              return _this2.changeHandler_(e);
            });
          }
        } else {
          this.listenAt(this.geolocation_).once('change', function () {
            _this2.changeHandler_({ 'stopTracking': !_this2.followLocation_, 'initialRun': true });
            if (_this2.followLocation_) {
              _this2.listenAt(_this2.geolocation_).on('change', function (e) {
                return _this2.changeHandler_(e);
              });
            }
          });
        }
      } else {
        this.layer_.getSource().clear();
        this.detachFrom(this.geolocation_, 'change');
        this.geolocation_.setTracking(false);
      }
    }

    /**
     * Creates a circle around a given position with a given radius in meters in a desired projection
     * @param {ol.Coordinate} position
     * @param {ol.ProjectionLike} projection
     * @param {number} meters
     * @returns {ol.geom.Circle}
     * @private
     */

  }], [{
    key: 'makeCircle_',
    value: function makeCircle_(position, projection, meters) {
      // using assumption that earth is a sphere and that one degree in north/south direction
      // on any point of the earth is 90/10000 km

      var position4326 = _openlayers2.default.proj.transform(position, projection, 'EPSG:4326');

      var secondPosition4326 = [position4326[0], position4326[1] + meters / 1000 * 90 / 10000];

      var secondPosition = _openlayers2.default.proj.transform(secondPosition4326, 'EPSG:4326', projection);

      var radius = Math.abs(position[1] - secondPosition[1]);

      return new _openlayers2.default.geom.Circle(position, radius);
    }
  }]);

  return GeolocationButton;
}((0, _utilities.mixin)(_Control.Control, [_ActivatableMixin.ActivatableMixin, _ListenerOrganizerMixin.ListenerOrganizerMixin]));

/***/ }),
/* 293 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.HelpButton = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _Control = __webpack_require__(21);

var _utilities = __webpack_require__(5);

var _stripJsonComments = __webpack_require__(177);

var _stripJsonComments2 = _interopRequireDefault(_stripJsonComments);

var _Debug = __webpack_require__(15);

__webpack_require__(528);

__webpack_require__(63);

var _ActivatableMixin = __webpack_require__(82);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {g4uControlOptions} HelpButtonOptions
 * @property {object} [configControls={}]
 * @property {string} fileName of the json with the helptexts
 * @property {boolean} [active=false]
 */

/**
 * Shows a help button. Loads an json file with the helptexts and images from the server.
 */
var HelpButton = exports.HelpButton = function (_mixin) {
  _inherits(HelpButton, _mixin);

  /**
   * @param {HelpButtonOptions} options
   */
  function HelpButton(options) {
    _classCallCheck(this, HelpButton);

    options.element = (0, _jquery2.default)('<div>')[0];
    options.className = options.className || 'g4u-helpbutton';

    var _this = _possibleConstructorReturn(this, (HelpButton.__proto__ || Object.getPrototypeOf(HelpButton)).call(this, options));

    _this.setTitle(_this.getTitle() || _this.getLocaliser().localiseUsingDictionary('HelpButton title'));
    _this.setTipLabel(_this.getTipLabel() || options.localiser.localiseUsingDictionary('HelpButton tipLabel'));

    /**
     * @type {object}
     * @private
     */
    _this.configControls_ = options.configControls || {};

    /**
     * @type {string}
     * @private
     */
    _this.documentationFileName_ = options.fileName;
    return _this;
  }

  _createClass(HelpButton, [{
    key: 'createContent_',
    value: function createContent_() {
      var _this2 = this;

      var localiser = this.getMap().get('localiser');

      var documentationObject = JSON.parse((0, _stripJsonComments2.default)(this.contentData_));

      if ((0, _utilities.checkFor)(documentationObject, localiser.getCurrentLang())) {
        this.language = localiser.getCurrentLang();
      } else if ((0, _utilities.checkFor)(documentationObject, localiser.getDefaultLang())) {
        this.language = localiser.getDefaultLang();
      } else {
        this.language = 'de';
      }

      var makeDocumentationTable = function makeDocumentationTable(documentation, language) {
        var $table = (0, _jquery2.default)('<table>').addClass(_this2.className_ + '-table');
        if (localiser.isRtl()) {
          $table.prop('dir', 'rtl');
        }
        var documentationLocalized = documentationObject[language];
        var id = void 0;
        var imgData = void 0;
        var descrData = void 0;
        var joinWith = void 0;
        var imgElements = void 0;
        var $row = void 0;
        var $td = void 0;
        var visibleControls = [];

        if (_this2.configControls_ && _this2.configControls_.hasOwnProperty('onMap')) {
          var findContainedControls = function findContainedControls(controlNamesArr) {
            visibleControls = visibleControls.concat(controlNamesArr.map(function (name) {
              return _this2.configControls_.hasOwnProperty(name) && _this2.configControls_[name].hasOwnProperty('controlType') ? _this2.configControls_[name].controlType : name;
            }));

            var _iteratorNormalCompletion = true;
            var _didIteratorError = false;
            var _iteratorError = undefined;

            try {
              for (var _iterator = controlNamesArr[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                var controlName = _step.value;

                if (_this2.configControls_.hasOwnProperty(controlName)) {
                  if (_this2.configControls_[controlName].hasOwnProperty('contains')) {
                    findContainedControls(_this2.configControls_[controlName].contains);
                  }
                }
              }
            } catch (err) {
              _didIteratorError = true;
              _iteratorError = err;
            } finally {
              try {
                if (!_iteratorNormalCompletion && _iterator.return) {
                  _iterator.return();
                }
              } finally {
                if (_didIteratorError) {
                  throw _iteratorError;
                }
              }
            }
          };

          if (!_this2.getMap().get('mobile')) {
            findContainedControls(_this2.configControls_.onMap.filter(function (c) {
              return c !== 'mobileControls';
            }));
          } else if (_this2.configControls_.hasOwnProperty('mobileControls') && _this2.configControls_.mobileControls.hasOwnProperty('contains')) {
            findContainedControls(_this2.configControls_.mobileControls.contains);
          }
        }
        for (id in documentationLocalized) {
          if (documentationLocalized.hasOwnProperty(id) && documentationLocalized[id]) {
            imgData = documentationLocalized[id].img;
            descrData = documentationLocalized[id].descr || '';
            joinWith = documentationLocalized[id].joinWith || '';

            if (visibleControls.includes(id)) {
              $row = (0, _jquery2.default)('<tr>');

              imgElements = '<td class="' + _this2.className_ + '-img"><div class="' + _this2.className_ + '-imgDiv">';
              if (imgData) {
                if (_jquery2.default.isArray(imgData)) {
                  for (var j = 0, jj = imgData.length; j < jj; j++) {
                    imgData[j] = '<img class="' + _this2.className_ + '-docuImg" src="images/doc/' + imgData[j] + '">';
                  }
                  imgElements += imgData.join(joinWith);
                } else {
                  imgElements += '<img class="' + _this2.className_ + '-docuImg" src="images/doc/' + imgData + '">';
                }
              }
              imgElements += '</div></td>';

              $row.append(imgElements);
              $td = (0, _jquery2.default)('<td>').addClass(_this2.className_ + '-descr');
              if (_jquery2.default.isArray(descrData)) {
                $td.append(descrData.join('<p>'));
              } else {
                $td.append(descrData);
              }
              $row.append($td);
            }
            $table.append($row);
          }
        }
        return $table;
      };

      this.get$Element().append(makeDocumentationTable(documentationObject, this.language));
    }

    /**
     * @param {G4UMap} map
     */

  }, {
    key: 'setMap',
    value: function setMap(map) {
      _get(HelpButton.prototype.__proto__ || Object.getPrototypeOf(HelpButton.prototype), 'setMap', this).call(this, map);

      if (map) {
        this.activateOnMapChange();
      }
    }

    /**
     * @param {boolean} active
     */

  }, {
    key: 'setActive',
    value: function setActive(active) {
      var _this3 = this;

      if (!this.loading_) {
        // all calls to setActive between the start and end of loading are ignored
        if (active === true) {
          if (!this.contentData_) {
            this.loading_ = true;

            _jquery2.default.ajax(this.documentationFileName_, { dataType: 'text' }).fail(function () {
              var msg = 'Wasn\'t able to load the documentation file ' + _this3.documentationFileName_;
              _Debug.Debug.error(msg);
              throw new Error(msg);
            }).done(function (data) {
              _this3.contentData_ = data;
              _this3.createContent_();

              (0, _utilities.finishAllImages)(_this3.get$Element()).then(function () {
                _this3.loading_ = false;
                _get(HelpButton.prototype.__proto__ || Object.getPrototypeOf(HelpButton.prototype), 'setActive', _this3).call(_this3, active);
              });
            });
          } else {
            _get(HelpButton.prototype.__proto__ || Object.getPrototypeOf(HelpButton.prototype), 'setActive', this).call(this, active);
          }
        } else {
          _get(HelpButton.prototype.__proto__ || Object.getPrototypeOf(HelpButton.prototype), 'setActive', this).call(this, active);
        }
      }
    }
  }]);

  return HelpButton;
}((0, _utilities.mixin)(_Control.Control, _ActivatableMixin.ActivatableMixin));

/***/ }),
/* 294 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.InfoButton = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _Attribution = __webpack_require__(181);

var _Control = __webpack_require__(21);

__webpack_require__(529);

var _URLHelper = __webpack_require__(91);

var _ActivatableMixin = __webpack_require__(82);

var _utilities = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {g4uControlOptions} InfoButtonOptions
 * @property {URLLike} contentURL url providing content to be shown
 * @property {boolean} [attribution=true]
 * @property {boolean} [active=false]
 */

/**
 * This control opens a window with showing some specified info text
 */
var InfoButton = exports.InfoButton = function (_mixin) {
  _inherits(InfoButton, _mixin);

  /**
   * @param {InfoButtonOptions} options
   */
  function InfoButton() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, InfoButton);

    options.className = options.className || 'g4u-infobutton';
    options.element = (0, _jquery2.default)('<div>')[0];

    /**
     * @type {string}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (InfoButton.__proto__ || Object.getPrototypeOf(InfoButton)).call(this, options));

    _this.classNameAttributions_ = _this.className_ + '-attributions';

    /**
     * @type {string}
     * @private
     */
    _this.classNameContent_ = _this.className_ + '-content';

    _this.setTitle(_this.getLocaliser().localiseUsingDictionary('InfoPage title'));
    _this.setTipLabel(_this.getLocaliser().localiseUsingDictionary('InfoPage tipLabel'));

    /**
     * @type {jQuery}
     * @private
     */
    _this.$content_ = (0, _jquery2.default)('<div>').addClass(_this.classNameContent_);

    _this.get$Element().append(_this.$content_);

    /**
     * @type {boolean}
     * @private
     */
    _this.attribution_ = options.attribution !== false;

    /**
     * @type {URL}
     * @private
     */
    _this.contentURL_ = _URLHelper.URL.extractFromConfig(options, 'contentURL');

    if (_this.attribution_) {
      /**
       * @type {jQuery}
       * @private
       */
      _this.$attributions_ = (0, _jquery2.default)('<div>');

      _this.get$Element().append((0, _jquery2.default)('<h2>').html(_this.getLocaliser().localiseUsingDictionary('InfoPage copyrightTitle'))).append(_this.$attributions_);

      /**
       * @type {Attribution}
       * @private
       */
      _this.attributionControl_ = new _Attribution.Attribution({
        target: _this.get$Element()[0],
        localiser: _this.getLocaliser(),
        collapsible: false,
        className: _this.classNameAttributions_
      });
    }

    /**
     * @type {boolean}
     * @private
     */
    _this.loaded_ = false;
    return _this;
  }

  /**
   * @param {G4UMap} map
   */


  _createClass(InfoButton, [{
    key: 'setMap',
    value: function setMap(map) {
      var oldMap = this.getMap();

      if (oldMap && this.attribution_) {
        oldMap.removeControl(this.attributionControl_);
      }

      _get(InfoButton.prototype.__proto__ || Object.getPrototypeOf(InfoButton.prototype), 'setMap', this).call(this, map);

      if (map) {
        if (this.contentURL_) {
          this.contentURL_.extractParamsFromMap(map);
        }

        if (this.attribution_) {
          map.addControl(this.attributionControl_);
        }

        this.activateOnMapChange();
      }
    }

    /**
     * @param {boolean} active
     */

  }, {
    key: 'setActive',
    value: function setActive(active) {
      var _this2 = this;

      if (active) {
        if (this.getMap().get('localiser').isRtl()) {
          this.get$Element().prop('dir', 'rtl');
        } else {
          this.get$Element().prop('dir', undefined);
        }
        if (!this.loaded_ && this.contentURL_) {
          _jquery2.default.get(this.contentURL_.finalize(), function (data) {
            _this2.$content_.html(data);
            _get(InfoButton.prototype.__proto__ || Object.getPrototypeOf(InfoButton.prototype), 'setActive', _this2).call(_this2, active);
            _this2.loaded_ = true;
          });
        } else {
          _get(InfoButton.prototype.__proto__ || Object.getPrototypeOf(InfoButton.prototype), 'setActive', this).call(this, active);
        }
      } else {
        _get(InfoButton.prototype.__proto__ || Object.getPrototypeOf(InfoButton.prototype), 'setActive', this).call(this, active);
      }
    }
  }]);

  return InfoButton;
}((0, _utilities.mixin)(_Control.Control, _ActivatableMixin.ActivatableMixin));

/***/ }),
/* 295 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.LanguageSwitcherButton = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _Control2 = __webpack_require__(21);

var _html = __webpack_require__(35);

var _Debug = __webpack_require__(15);

__webpack_require__(224);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {g4uControlOptions} LanguageSwitcherButtonOptions
 */

/**
 * A button to switch the language that is being used.
 * Works if only two languages are configured.
 */
var LanguageSwitcherButton = exports.LanguageSwitcherButton = function (_Control) {
  _inherits(LanguageSwitcherButton, _Control);

  /**
   * @param {LanguageSwitcherButtonOptions} options
   */
  function LanguageSwitcherButton() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, LanguageSwitcherButton);

    options.element = (0, _jquery2.default)('<button>').get(0);
    options.singleButton = true;
    options.className = options.className || 'g4u-languageswitcher';

    /**
     * @type {jQuery}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (LanguageSwitcherButton.__proto__ || Object.getPrototypeOf(LanguageSwitcherButton)).call(this, options));

    _this.$button_ = _this.get$Element().addClass(_this.className_ + '-button');

    var languages = _this.getLocaliser().getAvailableLanguages();

    if (languages.length < 2) {
      _Debug.Debug.info('You do not have any languages to switch between.');
      _Debug.Debug.info('Could it be that you forgot to disable languageSwitcherButton?');
    } else if (languages.length > 2) {
      _Debug.Debug.info('You have more than 2 languages to switch between.');
      _Debug.Debug.info('In this case you need to use languageSwitcherMenu.');
    }

    _this.$button_.on('click', function () {
      var targetLanguage = languages[1 - languages.indexOf(_this.getLocaliser().getCurrentLang())];
      _this.getLocaliser().setCurrentLang(targetLanguage);
    });
    return _this;
  }

  /**
   * @param {G4UMap} map
   */


  _createClass(LanguageSwitcherButton, [{
    key: 'setMap',
    value: function setMap(map) {
      if (map) {
        this.$button_.html(this.getLocaliser().getCurrentLang());
        (0, _html.addTooltip)(this.$button_, this.getLocaliser().localiseUsingDictionary('LanguageSwitcherButton tipLabel'));
      }

      _get(LanguageSwitcherButton.prototype.__proto__ || Object.getPrototypeOf(LanguageSwitcherButton.prototype), 'setMap', this).call(this, map);
    }
  }]);

  return LanguageSwitcherButton;
}(_Control2.Control);

/***/ }),
/* 296 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.LanguageSwitcherMenu = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _Dropdown = __webpack_require__(308);

var _html = __webpack_require__(35);

var _Control = __webpack_require__(21);

var _globals = __webpack_require__(11);

var _Debug = __webpack_require__(15);

__webpack_require__(224);

var _ListenerOrganizerMixin = __webpack_require__(48);

var _utilities = __webpack_require__(5);

var _ActivatableMixin = __webpack_require__(82);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {g4uControlOptions} LanguageSwitcherMenuOptions
 * @property {boolean} [showLongLanguage=false]
 * @property {boolean} [active=false]
 */

/**
 * A button to switch the language that is being used.
 */
var LanguageSwitcherMenu = exports.LanguageSwitcherMenu = function (_mixin) {
  _inherits(LanguageSwitcherMenu, _mixin);

  /**
   * @param {LanguageSwitcherMenuOptions} options
   */
  function LanguageSwitcherMenu() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, LanguageSwitcherMenu);

    options.className = options.className || 'g4u-languageswitchermenu';
    options.element = (0, _jquery2.default)('<div>').get(0);
    options.singleButton = false;

    var _this = _possibleConstructorReturn(this, (LanguageSwitcherMenu.__proto__ || Object.getPrototypeOf(LanguageSwitcherMenu)).call(this, options));

    _this.showLongLanguage_ = options.showLongLanguage || false;

    _this.setTitle(_this.getLocaliser().getCurrentLang());

    /**
     * @type {jQuery}
     * @private
     */
    _this.$button_ = (0, _jquery2.default)('<button>').addClass(_this.className_ + '-button').addClass(_globals.cssClasses.mainButton);

    if (_this.showLongLanguage_) {
      _this.$button_.addClass(_this.className_ + '-lang-long');
    }

    _this.get$Element().append(_this.$button_);

    var dropdownOptions = { 'className': 'g4u-dropdown' };

    /**
     * @type {Dropdown}
     * @private
     */
    _this.dropdown_ = new _Dropdown.Dropdown(dropdownOptions);
    _this.get$Element().append(_this.dropdown_.get$Element());

    var languages = _this.getLocaliser().getAvailableLanguages();

    if (languages.length < 2) {
      _Debug.Debug.info('You do not have any languages to switch between.');
      _Debug.Debug.info('Could it be that you forgot to disable languageSwitcherMenu?');
    } else if (languages.length === 2) {
      _Debug.Debug.info('You only have 2 languages to switch between.');
      _Debug.Debug.info('What about using languageSwitcherButton in place of languageSwitcherMenu?');
    }

    _this.dropdown_.setEntries(languages, languages.map(function (l) {
      return l.toUpperCase() + ' - ' + _this.getLocaliser().localiseUsingDictionary(l);
    }));

    _this.dropdown_.on('select', function () {
      return _this.getLocaliser().setCurrentLang(_this.dropdown_.getValue());
    });

    _this.get$Element().on('keydown', function (e) {
      if (e.which === _globals.keyCodes.ESCAPE) {
        _this.setActive(false);
        (0, _jquery2.default)(_this.getMap().getViewport()).focus();
      }
    });

    _this.on('change:active', function () {
      return _this.handleActiveChange_();
    });
    return _this;
  }

  /**
   * @param {G4UMap} map
   */


  _createClass(LanguageSwitcherMenu, [{
    key: 'setMap',
    value: function setMap(map) {
      var _this2 = this;

      if (this.getMap()) {
        this.detachAllListeners();

        this.setActive(false);
      }

      _get(LanguageSwitcherMenu.prototype.__proto__ || Object.getPrototypeOf(LanguageSwitcherMenu.prototype), 'setMap', this).call(this, map);

      if (map) {
        this.collapse_ = true;

        // The following does not work in 'on('click')' as it relies on useCapture; all click events will be
        // dispatched to the listener before being dispatched to any EventTarget beneath it in the DOM tree.
        this.listenAt(document).on('click', function () {
          _this2.collapse_ = true;
        }, true);

        this.listenAt([(0, _jquery2.default)(this.getMap().getViewport()).find('.ol-overlaycontainer-stopevent'), document]).on('click', function () {
          if (_this2.collapse_ && _this2.getActive()) {
            _this2.setActive(false);
          }
        });

        this.listenAt(this.get$Element()).on('click', function () {
          _this2.collapse_ = false;
          _this2.setActive(!_this2.getActive());
        });

        var curLang = this.getLocaliser().getCurrentLang();
        if (!this.showLongLanguage_) {
          this.$button_.html(curLang.toUpperCase());
        } else {
          this.$button_.html(curLang.toUpperCase() + ' - ' + this.getLocaliser().localiseUsingDictionary(curLang));
        }

        (0, _html.addTooltip)(this.$button_, this.getLocaliser().localiseUsingDictionary('LanguageSwitcherMenu tipLabel'));

        this.activateOnMapChange();
      }
    }
  }, {
    key: 'handleActiveChange_',
    value: function handleActiveChange_() {
      var active = this.getActive();
      this.dropdown_.setActivated(this.getLocaliser().getCurrentLang());
      if (active) {
        this.collapse_ = false;
        this.dropdown_.slideDown(this.getMap().get('mobile'));
      } else {
        this.dropdown_.slideUp(this.getMap().get('mobile'));
      }
    }
  }]);

  return LanguageSwitcherMenu;
}((0, _utilities.mixin)(_Control.Control, [_ListenerOrganizerMixin.ListenerOrganizerMixin, _ActivatableMixin.ActivatableMixin]));

/***/ }),
/* 297 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.LayerSelector = undefined;

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _GroupLayer = __webpack_require__(73);

var _ButtonBox = __webpack_require__(307);

var _Control = __webpack_require__(21);

var _utilities = __webpack_require__(5);

var _Window = __webpack_require__(93);

__webpack_require__(531);

var _ListenerOrganizerMixin = __webpack_require__(48);

var _URLHelper = __webpack_require__(91);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {g4uControlOptions} LayerSelectorOptions
 * @property {boolean} [toggle=true] if the layers are toggable
 * @property {boolean} [collapsible=true] if the menu should be collapsible
 * @property {boolean} [collapsed=false] if the menu starts collapsed
 * @property {number} [minVisibleEntries=6] amount of minimal visible elements
 * @property {string} layerGroupName the name of the layerGroup this selector is connected to. For example 'baseLayers'
 * @property {number} [minLayerAmount=1] the minimum number of layers which should be visible to show this selector
 */

/**
 * This control shows Buttons to let you select the layer you want to see on the map.
 * It supports categories and nested categories - each {GroupLayer}-Object will be interpreted as a category.
 */
var LayerSelector = exports.LayerSelector = function (_mixin) {
  _inherits(LayerSelector, _mixin);

  /**
   * @param {LayerSelectorOptions} options
   */
  function LayerSelector() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, LayerSelector);

    options.className = options.className || 'g4u-layerselector';
    options.element = (0, _jquery2.default)('<div>')[0];
    options.singleButton = false;

    /**
     * @type {String}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (LayerSelector.__proto__ || Object.getPrototypeOf(LayerSelector)).call(this, options));

    _this.layerGroupName_ = options.layerGroupName;

    /**
     * @type {number}
     * @private
     */
    _this.minLayerAmount_ = options.hasOwnProperty('minLayerAmount') ? options.minLayerAmount : 1;

    /**
     * @type {boolean}
     * @private
     */
    _this.collapsible_ = !options.hasOwnProperty('collapsible') || options.collapsible;

    /**
     * @type {boolean}
     * @private
     */
    _this.collapsed_ = options.collapsed || false;

    /**
     * classNames
     * @type {object.<string, string>}
     * @protected
     */
    _this.classNames_ = {
      menu: _this.getClassName() + '-menu',
      layerButton: _this.getClassName() + '-layerbutton',
      active: _this.getClassName() + '-active',
      checkbox: _this.getClassName() + '-checkbox'
    };

    /**
     * @type {ButtonBox}
     * @private
     */
    _this.menu_ = new _ButtonBox.ButtonBox({
      element: _this.get$Element(),
      className: _this.getClassName(),
      title: _this.getLocaliser().selectL10N(_this.getTitle()),
      collapsible: _this.collapsible_,
      collapsed: _this.collapsed_
    });

    _this.menu_.on('change:collapsed', function () {
      return _this.dispatchEvent('change:size');
    });

    _this.get$Element().append(_this.menu_.get$Element());

    /**
     * @type {boolean}
     * @private
     */
    _this.toggle_ = options.toggle || true;

    /**
     * @type {number}
     * @private
     */
    _this.minVisibleButtons_ = options.minVisibleEntries || 5;

    /**
     * @type {boolean}
     * @private
     */
    _this.visible_ = true;
    return _this;
  }

  /**
   * @returns {boolean}
   */


  _createClass(LayerSelector, [{
    key: 'getCollapsible',
    value: function getCollapsible() {
      return this.collapsible_;
    }

    /**
     * @returns {boolean}
     */

  }, {
    key: 'getCollapsed',
    value: function getCollapsed() {
      return this.menu_.getCollapsed();
    }

    /**
     * @param {boolean} collapsed
     */

  }, {
    key: 'setCollapsed',
    value: function setCollapsed(collapsed, silent) {
      if (collapsed !== this.menu_.getCollapsed()) {
        this.menu_.setCollapsed(collapsed, silent);
      }
    }
  }, {
    key: 'addWindowToButton',
    value: function addWindowToButton($button, layer) {
      var _this2 = this;

      var windowConfig = layer.get('window');

      var window = new _Window.Window({
        map: this.getMap()
      });

      if (!this.$windowContainer_) {
        this.$windowContainer_ = (0, _jquery2.default)('<span>');
        this.get$Element().append(this.$windowContainer_);
      }

      this.$windowContainer_.append(window.get$Element());

      window.get$Element().attr('data-layer-0', layer.get('id'));

      var content = void 0;

      var showWindow = function showWindow() {
        if (_this2.getMap().get('localiser').isRtl()) {
          window.get$Body().prop('dir', 'rtl');
        } else {
          window.get$Body().prop('dir', undefined);
        }
        window.get$Body().html(content);
        window.setVisible(true);
      };

      var hideWindow = function hideWindow() {
        window.setVisible(false);
      };

      this.listenAt($button).on('click', function () {
        if (layer.getVisible()) {
          if (!content) {
            var url = _URLHelper.URL.extractFromConfig(windowConfig, 'url', undefined, _this2.getMap());
            _jquery2.default.get(url.finalize(), function (data) {
              content = data;
              showWindow();
            });
          } else {
            showWindow();
          }
        } else {
          hideWindow();
        }
      });
    }

    /**
     * this method builds a button for a layer. It toggles visibility if you click on it
     * @param {ol.layer.Base} layer
     * @param {jQuery} $target
     */

  }, {
    key: 'buildLayerButton',
    value: function buildLayerButton(layer, $target) {
      var _this3 = this;

      if (layer.get('available')) {
        var $button = (0, _jquery2.default)('<button>').addClass(this.classNames_.layerButton).attr('id', layer.get('id')).html(layer.get('title'));

        if (this.getMap().get('localiser').isRtl()) {
          $button.prop('dir', 'rtl');
        }

        var activeClassName = this.classNames_.menu + '-active';

        this.listenAt($button).on('click', function () {
          if (_this3.toggle_) {
            layer.setVisible(!layer.getVisible());
          } else {
            layer.setVisible(true);
          }
          _this3.dispatchEvent({
            type: 'click:layer',
            layer: layer
          });
        });

        if (layer.getVisible()) {
          $button.addClass(activeClassName);
        }

        this.listenAt(layer).on('change:visible', function () {
          $button.toggleClass(activeClassName, layer.getVisible());
          if (!layer.getVisible()) {
            $button.removeClass('g4u-layer-loading');
          }
        });

        if (layer.get('window')) {
          this.addWindowToButton($button, layer);
        }

        this.listenAt(layer).on('loadcountstart', function () {
          $button.addClass('g4u-layer-loading');
        });

        this.listenAt(layer).on('loadcountend', function () {
          $button.removeClass('g4u-layer-loading');
        });

        $target.append($button);

        return $button;
      }
    }

    /**
     * builds a category button which collapses on click
     * @param {GroupLayer} categoryLayer
     * @param {jQuery} $target
     */

  }, {
    key: 'buildCategoryButton',
    value: function buildCategoryButton(categoryLayer, $target) {
      var _this4 = this;

      var $nextTarget = $target;

      if (categoryLayer.get('available')) {
        var activateChildren = categoryLayer.get('activateChildren') !== false;

        var menu = new _ButtonBox.ButtonBox({
          className: this.classNames_.menu,
          title: this.getLocaliser().selectL10N(categoryLayer.get('title')),
          rtl: this.getMap().get('localiser').isRtl(),
          titleButton: activateChildren,
          collapsed: !categoryLayer.countChildrenVisible() && categoryLayer.get('collapsed') !== false,
          id: categoryLayer.get('id')
        });

        var countChildren = categoryLayer.countChildren();
        var countVisibleChildren = categoryLayer.countChildrenVisible();

        var updateButtonActivities = function updateButtonActivities() {
          if (countVisibleChildren === 0) {
            menu.setCollapseButtonActive(false);
            if (activateChildren) {
              menu.setTitleButtonActive(false);
            }
          } else if (countVisibleChildren === countChildren) {
            menu.setCollapseButtonActive(true);
            if (activateChildren) {
              menu.setTitleButtonActive(true);
            }
          } else {
            menu.setCollapseButtonActive(true);
            if (activateChildren) {
              menu.setTitleButtonActive(false);
            }
          }
        };

        updateButtonActivities();

        var forEachChildLayer = function forEachChildLayer(childLayer) {
          _this4.listenAt(childLayer).on(['change:visible', 'change:childVisible'], function (e) {
            var changedLayer = e.child || childLayer;

            if (changedLayer.getVisible()) {
              countVisibleChildren++;
            } else {
              countVisibleChildren--;
            }

            updateButtonActivities();
          });
        };

        categoryLayer.getLayers().forEach(forEachChildLayer);

        this.listenAt(categoryLayer.getLayers()).on('add', function (e) {
          return forEachChildLayer(e.element);
        });

        this.listenAt(menu).on('title:click', function () {
          var visible = countVisibleChildren < countChildren;
          categoryLayer.recursiveForEach(function (childLayer) {
            if (!(childLayer instanceof _GroupLayer.GroupLayer)) {
              childLayer.setVisible(visible);
            }
          });
          _this4.dispatchEvent({
            type: 'click:layer',
            layer: categoryLayer
          });
        });

        $target.append(menu.get$Element());

        $nextTarget = menu.get$Body();

        this.listenAt(menu).on('change:collapsed', function () {
          _this4.dispatchEvent('change:size');
          _this4.changed();
        });

        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          for (var _iterator = categoryLayer.getLayers().getArray()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var childLayer = _step.value;

            this.chooseButtonBuilder(childLayer, $nextTarget);
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator.return) {
              _iterator.return();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }

        return menu;
      } else {
        var _iteratorNormalCompletion2 = true;
        var _didIteratorError2 = false;
        var _iteratorError2 = undefined;

        try {
          for (var _iterator2 = categoryLayer.getLayers().getArray()[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
            var _childLayer = _step2.value;

            this.chooseButtonBuilder(_childLayer, $nextTarget);
          }
        } catch (err) {
          _didIteratorError2 = true;
          _iteratorError2 = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion2 && _iterator2.return) {
              _iterator2.return();
            }
          } finally {
            if (_didIteratorError2) {
              throw _iteratorError2;
            }
          }
        }
      }
    }
  }, {
    key: 'buildWMSButton',
    value: function buildWMSButton(wmsLayer, $target) {
      var _this5 = this;

      if (wmsLayer.get('available')) {
        var _ret = function () {
          var layerButtons = wmsLayer.get('buttons');

          if (layerButtons && layerButtons.length) {
            var _ret2 = function () {
              var countActiveButtons = 0;
              var wmsSource = wmsLayer.getSource();

              var allLayersParams = [];
              var allQueryLayersParams = [];

              var featureInfoCheckable = wmsSource.isFeatureInfoCheckable();

              var menu = new _ButtonBox.ButtonBox({
                className: _this5.classNames_.menu,
                title: _this5.getLocaliser().selectL10N(wmsLayer.get('title')),
                titleButton: true,
                collapsed: wmsLayer.get('collapsed') !== false,
                id: wmsLayer.get('id')
              });

              $target.append(menu.get$Element());

              _this5.listenAt(menu).on('change:collapsed', function () {
                _this5.dispatchEvent('change:size');
                _this5.changed();
              });

              var activeClassName = _this5.classNames_.menu + '-active';

              var _loop = function _loop(layerButton) {
                allLayersParams = allLayersParams.concat(layerButton.LAYERS);
                allQueryLayersParams = allQueryLayersParams.concat(layerButton.QUERY_LAYERS);

                var $button = (0, _jquery2.default)('<button>').addClass(_this5.classNames_.layerButton).html(_this5.getLocaliser().selectL10N(layerButton.title));
                var $checkbox = (0, _jquery2.default)('<input type="checkbox">').addClass(_this5.classNames_.checkbox);

                menu.get$Body().append($button);

                var toggleButtonActive = void 0,
                    setCheckboxActive = void 0;

                toggleButtonActive = function toggleButtonActive() {
                  var active = !wmsSource.getWMSLayersVisible(layerButton.LAYERS);

                  if (active) {
                    countActiveButtons++;
                  } else {
                    countActiveButtons--;
                  }

                  $button.toggleClass(activeClassName, active);

                  wmsSource.toggleWMSLayers(layerButton.LAYERS, active);

                  if (!active && featureInfoCheckable) {
                    setCheckboxActive(false);
                  }

                  if (countActiveButtons === 0) {
                    wmsLayer.setVisible(false);
                    menu.setCollapseButtonActive(false);
                    menu.setTitleButtonActive(false);
                  } else if (countActiveButtons === layerButtons.length) {
                    wmsLayer.setVisible(true);
                    menu.setCollapseButtonActive(true);
                    menu.setTitleButtonActive(true);
                  } else {
                    wmsLayer.setVisible(true);
                    menu.setCollapseButtonActive(true);
                    menu.setTitleButtonActive(false);
                  }
                  _this5.dispatchEvent({
                    type: 'click:layer',
                    layer: wmsLayer,
                    wmsLayer: true
                  });
                };

                setCheckboxActive = function setCheckboxActive(checkboxActive) {
                  if (checkboxActive && !wmsSource.getWMSLayersVisible(layerButton.LAYERS)) {
                    toggleButtonActive();
                  }
                  wmsSource.toggleWMSQueryLayers(layerButton.QUERY_LAYERS, checkboxActive);
                  $checkbox.prop('checked', checkboxActive);
                };

                _this5.listenAt($button).on('click', function () {
                  toggleButtonActive();
                });

                if (featureInfoCheckable) {
                  $button.append($checkbox);
                  _this5.listenAt($checkbox).on('click', function (e) {
                    setCheckboxActive($checkbox.is(':checked'));
                    e.stopPropagation();
                  });
                }
              };

              var _iteratorNormalCompletion3 = true;
              var _didIteratorError3 = false;
              var _iteratorError3 = undefined;

              try {
                for (var _iterator3 = layerButtons[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                  var layerButton = _step3.value;

                  _loop(layerButton);
                }
              } catch (err) {
                _didIteratorError3 = true;
                _iteratorError3 = err;
              } finally {
                try {
                  if (!_iteratorNormalCompletion3 && _iterator3.return) {
                    _iterator3.return();
                  }
                } finally {
                  if (_didIteratorError3) {
                    throw _iteratorError3;
                  }
                }
              }

              _this5.listenAt(menu).on('title:click', function () {
                var activateAll = countActiveButtons < layerButtons.length;
                if (activateAll) {
                  wmsSource.toggleWMSLayers(allLayersParams, true);
                  countActiveButtons = layerButtons.length;
                } else {
                  wmsSource.toggleWMSLayers(allLayersParams, false);
                  if (featureInfoCheckable) {
                    wmsSource.toggleWMSQueryLayers(allQueryLayersParams, false);
                    menu.get$Body().find('input[type=checkbox]').prop('checked', false);
                  }
                  countActiveButtons = 0;
                }

                menu.get$Body().find('button').toggleClass(activeClassName, activateAll);
                wmsLayer.setVisible(activateAll);
                menu.setCollapseButtonActive(activateAll);
                menu.setTitleButtonActive(activateAll);

                _this5.dispatchEvent({
                  type: 'click:category',
                  layer: wmsLayer,
                  wmsLayer: true
                });
              });

              return {
                v: {
                  v: menu
                }
              };
            }();

            if ((typeof _ret2 === 'undefined' ? 'undefined' : _typeof(_ret2)) === "object") return _ret2.v;
          } else {
            return {
              v: _this5.buildLayerButton(wmsLayer, $target)
            };
          }
        }();

        if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === "object") return _ret.v;
      }
    }

    /**
     * This method chooses the right builder function
     * @param {ol.layer.Base} layer
     * @param {jQuery} $target
     */

  }, {
    key: 'chooseButtonBuilder',
    value: function chooseButtonBuilder(layer, $target) {
      if (layer instanceof _GroupLayer.GroupLayer) {
        return this.buildCategoryButton(layer, $target);
      } else if (layer.getSource && layer.getSource() && layer.getSource().isFeatureInfoCheckable) {
        return this.buildWMSButton(layer, $target);
      } else {
        return this.buildLayerButton(layer, $target);
      }
    }

    /**
     * @param {G4UMap} map
     */

  }, {
    key: 'setMap',
    value: function setMap(map) {
      if (this.getMap()) {
        this.clear();
      }

      _get(LayerSelector.prototype.__proto__ || Object.getPrototypeOf(LayerSelector.prototype), 'setMap', this).call(this, map);

      if (map) {
        this.build();
      }
    }
  }, {
    key: 'clear',
    value: function clear() {
      this.detachAllListeners();
      this.menu_.get$Body().empty();
    }
  }, {
    key: 'build',
    value: function build() {
      var _this6 = this;

      this.layers_ = this.getMap().get(this.layerGroupName_).getLayers();
      if (this.layers_.getLength() >= this.minLayerAmount_) {
        this.setVisible(true);
        var menuFunctions = new _ButtonBox.ButtonBox({ className: this.classNames_.menu });
        var _iteratorNormalCompletion4 = true;
        var _didIteratorError4 = false;
        var _iteratorError4 = undefined;

        try {
          for (var _iterator4 = this.layers_.getArray()[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
            var layer = _step4.value;

            this.chooseButtonBuilder(layer, this.menu_.get$Body());
          }
        } catch (err) {
          _didIteratorError4 = true;
          _iteratorError4 = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion4 && _iterator4.return) {
              _iterator4.return();
            }
          } finally {
            if (_didIteratorError4) {
              throw _iteratorError4;
            }
          }
        }

        menuFunctions.giveLastVisible(this.get$Element().children(':last-child').children(':last-child'));
        this.listenAt(this.menu_).on('change:collapsed', function () {
          return _this6.dispatchEvent('change:size');
        });
      } else {
        this.setVisible(false);
      }
    }
  }, {
    key: 'rebuild',
    value: function rebuild() {
      this.clear();
      this.build();
    }

    /**
     * Returns true if the control is squeezable in the given dimension. Used by Positioning.
     * @param {string} dimension
     * @returns {boolean}
     */

  }, {
    key: 'isSqueezable',
    value: function isSqueezable(dimension) {
      return dimension === 'height';
    }

    /**
     * Squeezes the control in the given dimension by the provided value. Used by Positioning
     * Returns the value the control could get squeezed by.
     * @param {string} dimension
     * @param {number} value
     * @returns {number}
     */

  }, {
    key: 'squeezeBy',
    value: function squeezeBy(dimension, value) {
      if (dimension === 'height') {
        var $contentBox = this.get$Element().find('.' + this.getClassName() + '-content');
        var $buttons = $contentBox.find('button:visible').filter('.' + this.getClassName() + '-layerbutton,.' + this.getClassName() + '-menu-titlebutton');

        if ($buttons.length > 1) {
          var height = $contentBox.height();
          var buttonHeight = (0, _utilities.offset)($buttons.eq(1), $buttons.eq(0)).top;

          var newHeight = Math.max(buttonHeight * this.minVisibleButtons_, height - value);

          if (height > newHeight) {
            $contentBox.css('max-height', newHeight);
            return height - newHeight;
          }
        }
      }

      return 0;
    }
  }, {
    key: 'beforePositioning',
    value: function beforePositioning() {
      this.scrolled_ = this.menu_.get$Body().scrollTop();
    }

    /**
     * used by positioning
     * @param {{scroll: number}} state
     */

  }, {
    key: 'afterPositioning',
    value: function afterPositioning() {
      this.menu_.get$Body().scrollTop(this.scrolled_);
    }

    /**
     * Removes the squeeze. Used by Positioning.
     * @param {string} dimension
     */

  }, {
    key: 'release',
    value: function release(dimension) {
      if (dimension === 'height') {
        this.get$Element().find('.' + this.getClassName() + '-content').css('max-height', '');
      }
    }
  }]);

  return LayerSelector;
}((0, _utilities.mixin)(_Control.Control, _ListenerOrganizerMixin.ListenerOrganizerMixin));

/***/ }),
/* 298 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.LinkButton = undefined;

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _Control2 = __webpack_require__(21);

var _html = __webpack_require__(35);

var _globals = __webpack_require__(11);

__webpack_require__(532);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {g4uControlOptions} LinkButtonOptions
 * @property {string} [url]
 * @property {string} [linkTarget] set the link target (e.g. '_blank')
 */

/**
 * provides a button which links to another page
 */
var LinkButton = exports.LinkButton = function (_Control) {
  _inherits(LinkButton, _Control);

  /**
   * @param {LinkButtonOptions} options
   */
  function LinkButton() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, LinkButton);

    options.className = options.className || 'g4u-link-button';
    options.singleButton = true;
    options.element = (0, _jquery2.default)('<a></a>').get(0);

    /**
     * @type {string}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (LinkButton.__proto__ || Object.getPrototypeOf(LinkButton)).call(this, options));

    _this.url_ = options.hasOwnProperty('url') ? options.url : '';

    _this.setTitle(_this.getTitle() || _this.getLocaliser().localiseUsingDictionary('LinkButton title'));
    _this.setTipLabel(_this.getTipLabel() || _this.getLocaliser().localiseUsingDictionary('LinkButton tipLabel'));

    _this.get$Element().attr('href', _this.url_).addClass(_this.className_);
    if (options.hasOwnProperty('target')) {
      _this.get$Element().attr('target', options.target);
    }
    var $button = (0, _jquery2.default)('<button>').addClass(_globals.cssClasses.mainButton).html(_this.getTitle());

    (0, _html.addTooltip)($button, _this.getTipLabel());

    _this.get$Element().append($button);

    if (options.hasOwnProperty('linkTarget')) {
      _this.get$Element().attr('target', options.linkTarget);
    }
    return _this;
  }

  return LinkButton;
}(_Control2.Control);

/***/ }),
/* 299 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Logo = undefined;

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _Control2 = __webpack_require__(21);

__webpack_require__(533);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {g4uControlOptions} LogoOptions
 * @property {string} [src='images/g4u-logo.png'] path to the image
 * @property {number} [width]
 * @property {number} [height]
 * @property {number} [opacity]
 * @property {string} [mode='both'] possible values: print, screen, both
 */

/**
 * This is a class which provides a logo on the map.
 */
var Logo = exports.Logo = function (_Control) {
  _inherits(Logo, _Control);

  /**
   * @param {LogoOptions} options
   */
  function Logo() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, Logo);

    options.className = options.className || 'g4u-logo';
    options.element = (0, _jquery2.default)('<img>').get(0);
    options.singleButton = false;

    /**
     * @type {string}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (Logo.__proto__ || Object.getPrototypeOf(Logo)).call(this, options));

    _this.logo_ = options.hasOwnProperty('src') ? options.src : 'images/g4u-logo.png';

    _this.get$Element().on('load', function () {
      return _this.changed;
    }).prop('src', _this.logo_).addClass(_this.className_);

    if (options.mode === 'both' || options.mode === 'screen') {
      _this.get$Element().addClass(_this.className_ + '-screen');
    }

    if (options.mode === 'both' || options.mode === 'print') {
      _this.get$Element().addClass(_this.className_ + '-print');
    }

    if (options.width) {
      _this.get$Element().width(options.width);
    }

    if (options.height) {
      _this.get$Element().height(options.height);
    }

    if (options.opacity) {
      _this.get$Element().css('opacity', options.opacity.toString());
    }
    return _this;
  }

  return Logo;
}(_Control2.Control);

/***/ }),
/* 300 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MobileControls = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _ShiftableComposedControl = __webpack_require__(304);

var _WindowDecorator = __webpack_require__(185);

__webpack_require__(536);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * This class represents the mobile menu containing all the controls.
 */
var MobileControls = exports.MobileControls = function (_ShiftableComposedCon) {
  _inherits(MobileControls, _ShiftableComposedCon);

  /**
   * @param {ShiftableComposedControlOptions} options
   */
  function MobileControls() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, MobileControls);

    options.className = options.className || 'g4u-mobilecontrols';
    options.element = (0, _jquery2.default)('<div>').get(0);
    options.containerClassName = options.className + '-container';
    options.visibleControls = options.visibleControls || 6;

    return _possibleConstructorReturn(this, (MobileControls.__proto__ || Object.getPrototypeOf(MobileControls)).call(this, options));
  }

  /**
   * @param {Control} control
   * @param {g4uControlOptions} options
   */


  _createClass(MobileControls, [{
    key: 'addControl',
    value: function addControl(control, options) {
      if (control.isWindowed() || control.isSingleButton()) {
        _get(MobileControls.prototype.__proto__ || Object.getPrototypeOf(MobileControls.prototype), 'addControl', this).call(this, control, options);
      } else {
        _get(MobileControls.prototype.__proto__ || Object.getPrototypeOf(MobileControls.prototype), 'addControl', this).call(this, new _WindowDecorator.WindowDecorator({
          component: control
        }), options);
      }
    }

    /**
     * @param {G4UMap} map
     */

  }, {
    key: 'setMap',
    value: function setMap(map) {
      var _this2 = this;

      if (this.getMap()) {
        this.getMap().un('change:mobile', this.handler_);
      }

      _get(MobileControls.prototype.__proto__ || Object.getPrototypeOf(MobileControls.prototype), 'setMap', this).call(this, map);

      if (map) {
        this.handler_ = function () {
          if (!map.get('mobile')) {
            var _iteratorNormalCompletion = true;
            var _didIteratorError = false;
            var _iteratorError = undefined;

            try {
              for (var _iterator = _this2.getControls().filter(function (c) {
                return c.setWindowVisible;
              })[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                var control = _step.value;

                control.setWindowVisible(false);
              }
            } catch (err) {
              _didIteratorError = true;
              _iteratorError = err;
            } finally {
              try {
                if (!_iteratorNormalCompletion && _iterator.return) {
                  _iterator.return();
                }
              } finally {
                if (_didIteratorError) {
                  throw _iteratorError;
                }
              }
            }
          }
        };
        map.on('change:mobile', this.handler_);
      }
    }
  }]);

  return MobileControls;
}(_ShiftableComposedControl.ShiftableComposedControl);

/***/ }),
/* 301 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MousePosition = undefined;

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _utilities = __webpack_require__(5);

var _RewireMixin = __webpack_require__(92);

__webpack_require__(537);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {g4uControlOptions} MousePositionOptions
 * @property {function} [coordinateFormat]
 */

/**
 * @extends Control
 */
var MousePosition = exports.MousePosition = function (_mixin) {
  _inherits(MousePosition, _mixin);

  /**
   * @param {MousePositionOptions} [options={}]
   */
  function MousePosition() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, MousePosition);

    options.className = options.hasOwnProperty('className') ? options.className : 'g4u-mouseposition';

    var truncateToString = function truncateToString(x, length) {
      var lead = x.toString().match(/^[^.]*/)[0];
      if (lead.length >= length) {
        return lead;
      } else {
        return x.toFixed(length - lead.length);
      }
    };

    var digits = options.digits || 8;

    options.coordinateFormat = function (c) {
      return truncateToString(c[0], digits) + ', ' + truncateToString(c[1], digits);
    };

    var dashs = '&ndash;' + '.' + '&ndash;'.repeat(digits - 1);
    options.undefinedHTML = dashs + ', ' + dashs;

    return _possibleConstructorReturn(this, (MousePosition.__proto__ || Object.getPrototypeOf(MousePosition)).call(this, options));
  }

  return MousePosition;
}((0, _utilities.mixin)(_openlayers2.default.control.MousePosition, _RewireMixin.RewireMixin));

/***/ }),
/* 302 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.OverviewMap = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _RewireMixin = __webpack_require__(92);

var _ListenerOrganizerMixin = __webpack_require__(48);

var _utilities = __webpack_require__(5);

__webpack_require__(539);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {g4uControlOptions} OverviewMapOptions
 * @property {Localizable} [tipLabel]
 * @property {ol.layer.Group} [layerGroup]
 */

/**
 * @extends Control
 */
var OverviewMap = exports.OverviewMap = function (_mixin) {
  _inherits(OverviewMap, _mixin);

  /**
   * @param {OverviewMapOptions} [options={}]
   */
  function OverviewMap() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, OverviewMap);

    if (options.hasOwnProperty('title')) {
      options.tipLabel = options.localiser.selectL10N(options.title);
    } else {
      options.tipLabel = options.hasOwnProperty('tipLabel') ? options.localiser.selectL10N(options.tipLabel) : options.localiser.localiseUsingDictionary('OverviewMap tipLabel');
    }

    options.layers = [];

    return _possibleConstructorReturn(this, (OverviewMap.__proto__ || Object.getPrototypeOf(OverviewMap)).call(this, options));
  }

  _createClass(OverviewMap, [{
    key: 'setMap',
    value: function setMap(map) {
      var _this2 = this;

      if (this.getMap()) {
        this.detachAllListeners();
      }
      _get(OverviewMap.prototype.__proto__ || Object.getPrototypeOf(OverviewMap.prototype), 'setMap', this).call(this, map);
      if (map) {
        this.getOverviewMap().setLayerGroup(map.get('baseLayers'));

        var $overviewmap = this.get$Element().find('.ol-overviewmap-map');

        $overviewmap = $overviewmap.add($overviewmap.find('.ol-overviewmap-box'));

        var dontClick = false;

        this.listenAt($overviewmap).on('click', function (e) {
          if (!dontClick) {
            map.getView().setCenter(_this2.getOverviewMap().getEventCoordinate(e));
          }
        });

        var mouseDown = false;

        this.listenAt($overviewmap).on('mousedown', function () {
          dontClick = false;
          mouseDown = true;
        });

        this.listenAt($overviewmap).on('mouseup', function (e) {
          mouseDown = false;
        });

        this.listenAt($overviewmap).on('mousemove', function (e) {
          if (mouseDown) {
            map.getView().setCenter(_this2.getOverviewMap().getEventCoordinate(e));
          }
        });

        this.getOverviewMap().getView().on('change:center', function () {
          mouseDown = false;
          dontClick = true;
        });

        var $button = this.get$Element().find('button');
        this.listenAt($button).on('click', function () {
          return _this2.dispatchEvent('change:size');
        });
      }
    }
  }]);

  return OverviewMap;
}((0, _utilities.mixin)((0, _utilities.mixin)(_openlayers2.default.control.OverviewMap, _RewireMixin.RewireMixin), _ListenerOrganizerMixin.ListenerOrganizerMixin));

/***/ }),
/* 303 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ScaleLine = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _utilities = __webpack_require__(5);

var _RewireMixin = __webpack_require__(92);

__webpack_require__(541);

var _ListenerOrganizerMixin = __webpack_require__(48);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @extends Control
 */
var ScaleLine = exports.ScaleLine = function (_mixin) {
  _inherits(ScaleLine, _mixin);

  /**
   * @param {g4uControlOptions} [options={}]
   */
  function ScaleLine() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, ScaleLine);

    options.className = options.hasOwnProperty('className') ? options.className : 'g4u-scale-line';
    return _possibleConstructorReturn(this, (ScaleLine.__proto__ || Object.getPrototypeOf(ScaleLine)).call(this, options));
  }

  _createClass(ScaleLine, [{
    key: 'setMap',
    value: function setMap(map) {
      var _this2 = this;

      if (this.getMap()) {
        this.detachAllListeners();
      }
      _get(ScaleLine.prototype.__proto__ || Object.getPrototypeOf(ScaleLine.prototype), 'setMap', this).call(this, map);
      if (map) {
        this.listenAt(map.getView()).on('change:resolution', function () {
          return _this2.dispatchEvent('change:size');
        });
      }
    }
  }]);

  return ScaleLine;
}((0, _utilities.mixin)((0, _utilities.mixin)(_openlayers2.default.control.ScaleLine, _RewireMixin.RewireMixin), _ListenerOrganizerMixin.ListenerOrganizerMixin));

/***/ }),
/* 304 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ShiftableComposedControl = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _ComposedControl2 = __webpack_require__(128);

var _globals = __webpack_require__(11);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {ComposedControlOptions} ShiftableComposedControlOptions
 * @property {number} visibleControls specifies amount visible controls
 */

/**
 * This class displays only a given amount of the containing controls and arrows to switch through these
 */
var ShiftableComposedControl = exports.ShiftableComposedControl = function (_ComposedControl) {
  _inherits(ShiftableComposedControl, _ComposedControl);

  /**
   * @param {ShiftableComposedControlOptions} options
   */
  function ShiftableComposedControl() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, ShiftableComposedControl);

    /**
     * @type {number}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (ShiftableComposedControl.__proto__ || Object.getPrototypeOf(ShiftableComposedControl)).call(this, options));

    _this.visibleControls_ = options.visibleControls;

    /**
     * @type {number}
     * @private
     */
    _this.position_ = 1;

    var $shiftContainer = (0, _jquery2.default)('<div>').addClass(_this.className_ + '-shift');
    _this.get$Element().append($shiftContainer.append(_this.get$Container()));

    /**
     * @type {jQuery}
     * @private
     */
    _this.$moveLeftButton_ = (0, _jquery2.default)('<button>').addClass(_this.className_ + '-move-left').addClass(_this.classNameItem_).addClass(_this.classNameItemFirst_).addClass(_globals.cssClasses.hidden);
    _this.$moveLeftButton_.on('click', function () {
      return _this.shiftControls(-(_this.visibleControls_ - 2));
    });

    $shiftContainer.prepend(_this.$moveLeftButton_);
    _this.$moveLeftButton_.addClass(_globals.cssClasses.hidden);

    /**
     * @type {jQuery}
     * @private
     */
    _this.$moveRightButton_ = (0, _jquery2.default)('<button>').addClass(_this.className_ + '-move-right').addClass(_this.classNameItem_).addClass(_this.classNameItemLast_);
    _this.$moveRightButton_.on('click', function () {
      return _this.shiftControls(_this.visibleControls_ - 2);
    });

    $shiftContainer.append(_this.$moveRightButton_);
    _this.$moveRightButton_.addClass(_globals.cssClasses.hidden);
    return _this;
  }

  /**
   * @param {Control} control
   * @param {g4uControlOptions} options
   */


  _createClass(ShiftableComposedControl, [{
    key: 'addControl',
    value: function addControl(control, options) {
      _get(ShiftableComposedControl.prototype.__proto__ || Object.getPrototypeOf(ShiftableComposedControl.prototype), 'addControl', this).call(this, control, options);

      if (this.controls_.length > this.visibleControls_) {
        var $lastInsertedControl = this.get$Container().children(':last-child');
        $lastInsertedControl.addClass(_globals.cssClasses.hidden);
        (0, _jquery2.default)(this.get$Container().children()[this.visibleControls_ - 1]).addClass(_globals.cssClasses.hidden);
        this.$moveRightButton_.removeClass(_globals.cssClasses.hidden);
      }
    }

    /**
     * Shift the controls the given amount of steps to the left. if the value is negative, the controls are shifted to
     * the right
     * @param shift
     */

  }, {
    key: 'shiftControls',
    value: function shiftControls(shift) {
      if (shift < 0) {
        if (this.position_ > 1) {
          // shift 'left'

          // show move right button
          if (this.$moveRightButton_.hasClass(_globals.cssClasses.hidden)) {
            this.get$Container().children(':last-child').addClass(_globals.cssClasses.hidden);
            this.$moveRightButton_.removeClass(_globals.cssClasses.hidden);
          }

          // shift visible controls
          this.position_--;
          (0, _jquery2.default)(this.get$Container().children()[this.position_]).removeClass(_globals.cssClasses.hidden);
          (0, _jquery2.default)(this.get$Container().children()[this.position_ + this.visibleControls_ - 2]).addClass(_globals.cssClasses.hidden);

          // show first button instead of move left
          if (this.position_ === 1) {
            this.get$Container().children(':first-child').removeClass(_globals.cssClasses.hidden);
            this.$moveLeftButton_.addClass(_globals.cssClasses.hidden);
          }

          // recurse
          this.shiftControls(shift + 1);
        }
      } else if (shift > 0) {
        if (this.position_ + this.visibleControls_ < this.controls_.length + 1) {
          // shift 'right'

          // show move left button
          if (this.$moveLeftButton_.hasClass(_globals.cssClasses.hidden)) {
            this.get$Container().children(':first-child').addClass(_globals.cssClasses.hidden);
            this.$moveLeftButton_.removeClass(_globals.cssClasses.hidden);
          }

          // shift visible controls
          this.position_++;
          (0, _jquery2.default)(this.get$Container().children()[this.position_ - 1]).addClass(_globals.cssClasses.hidden);
          (0, _jquery2.default)(this.get$Container().children()[this.position_ + this.visibleControls_ - 3]).removeClass(_globals.cssClasses.hidden);

          // show last button instead of move right
          if (this.position_ + this.visibleControls_ >= this.controls_.length) {
            this.get$Container().children(':last-child').removeClass(_globals.cssClasses.hidden);
            this.$moveRightButton_.addClass(_globals.cssClasses.hidden);
          }

          // recurse
          this.shiftControls(shift - 1);
        }
      }
    }
  }]);

  return ShiftableComposedControl;
}(_ComposedControl2.ComposedControl);

/***/ }),
/* 305 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
//
// Hard coded default configuration for the client
//

// Element is a Keyword for the composition of config objects. Every attribute with 'Element' in its name
// isn't copied but used as a default case for elements of an array with the same name (-Element)

var defaults = exports.defaults = {};

defaults.baselayer = {
  title: {
    'de': 'Standardtitel',
    'en': 'Default title'
  },
  type: 'OSM',
  source: {
    projection: 'EPSG:3857',
    url: {
      'de': '//{a-c}.tile.openstreetmap.de/tiles/osmde//{z}/{x}/{y}.png',
      'en': '//{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png'
    },
    attribution: {
      'de': 'Karte von <a target="_blank" href="http://www.openstreetmap.org/">OpenStreetMap</a>, ' + 'Lizenz: <a target="_blank" href="http://opendatacommons.org/licenses/odbl/">ODbL</a>',
      'en': 'Map from <a target="_blank" href="http://www.openstreetmap.org/">OpenStreetMap</a>, ' + 'licence: <a target="_blank" href="http://opendatacommons.org/licenses/odbl/">ODbL</a>'
    }
  }
};

defaults.config = {
  target: '#g4u-map',
  interfaceProjection: 'EPSG:4326',
  view: {
    center: [7.086134, 50.714689], // always in interfaceProjection
    zoom: 18,
    minZoom: 0,
    maxZoom: 18
  },
  layers: {
    // baselayers
    baseLayers: [{
      // this default-case only comes into action if there is NO baselayer defined
      id: 0,
      title: defaults.baselayer.title,
      type: defaults.baselayer.type,
      source: {
        projection: defaults.baselayer.source.projection,
        url: defaults.baselayer.source.url,
        attribution: defaults.baselayer.source.attribution
      },
      visible: true
    }],
    featureLayers: [], // this default-case only comes into action if there is NO featurelayer defined
    featureLayersElement: {
      // these are the default values for the properties of every featurelayer defined
      title: 'Default title',
      type: 'KML',
      source: {
        loadingStrategy: 'ALL'
      }
    }
  },
  // (standard-) controls
  controls: {},
  move: {
    animationDuration: 2000,
    pixelPadding: 60,
    meterMinSize: 300
  },
  styleMap: {
    '#defaultStyle': {
      fill: {
        color: 'rgba(0,0,0,0)'
      },
      stroke: {
        color: 'rgba(255,255,255,1)',
        width: 2
      },
      circle: {
        radius: 5,
        fill: {
          color: 'rgba(0,0,0,0)'
        },
        stroke: {
          color: 'rgba(255,255,255,1)',
          width: 2
        }
      }
    }
  }
};

/***/ }),
/* 306 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _G4UMap = __webpack_require__(127);

Object.defineProperty(exports, 'G4UMap', {
  enumerable: true,
  get: function get() {
    return _G4UMap.G4UMap;
  }
});

var _moduleRegistration = __webpack_require__(188);

Object.defineProperty(exports, 'registerModule', {
  enumerable: true,
  get: function get() {
    return _moduleRegistration.registerModule;
  }
});

var _SourceServerVector = __webpack_require__(131);

Object.defineProperty(exports, 'SourceServerVector', {
  enumerable: true,
  get: function get() {
    return _SourceServerVector.SourceServerVector;
  }
});

var _GroupLayer = __webpack_require__(73);

Object.defineProperty(exports, 'GroupLayer', {
  enumerable: true,
  get: function get() {
    return _GroupLayer.GroupLayer;
  }
});

/***/ }),
/* 307 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ButtonBox = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _globals = __webpack_require__(11);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {object} ButtonBoxOptions
 * @property {string} [className='g4u-menu']
 * @property {HTMLElement|jQuery} [content] the content of the body of the button box
 * @property {boolean} [collapsible]
 * @property {boolean} [collapsed]
 * @property {boolean} [rtl]
 * @property {boolean} [titleButton=false] displays an extra button with a title firing an 'title:click' event
 * @property {string} [title] the title appearing on the button
 */

/**
 * An Element to easily construct nested HTML Menus
 * It contains of a button followed by a body below the button. The button can toggle the visibility of the body.
 * If multiple elements with the same classname are nested it gives the last visible element a special class name.
 * It can also marks one or multiple element in the tree to be active (same classname is needed, too).
 * After a ButtonBox has been added all child elements the method finish should be called.
 */
var ButtonBox = exports.ButtonBox = function (_ol$Object) {
  _inherits(ButtonBox, _ol$Object);

  /**
   * @param {ButtonBoxOptions} [options={}]
   */
  function ButtonBox() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, ButtonBox);

    /**
     * @type {string}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (ButtonBox.__proto__ || Object.getPrototypeOf(ButtonBox)).call(this));

    _this.className_ = options.className || 'g4u-menu';

    _this.classNames_ = {
      body: _this.className_ + '-content',
      collapseButton: _this.className_ + '-collapsebutton',
      titleButton: _this.className_ + '-titlebutton',
      title: _this.className_ + '-title',
      active: _this.className_ + '-active',
      collapsed: _this.className_ + '-collapsed',
      lastVisible: _this.className_ + '-last-visible'
    };

    /**
     * @type {jQuery}
     * @private
     */
    _this.$element_ = (0, _jquery2.default)('<div>').addClass(_this.className_);

    if (options.hasOwnProperty('id')) {
      _this.$element_.attr('id', options.id);
    }

    /**
     * @type {boolean}
     * @private
     */
    _this.titleButton_ = options.titleButton || false;

    /**
     * @type {boolean}
     * @private
     */
    _this.collapsible_ = options.hasOwnProperty('collapsible') ? options.collapsible : true;

    /**
     * @type {boolean}
     * @private
     */
    _this.collapsed_ = options.hasOwnProperty('collapsed') ? options.collapsed : false;

    /**
     * @type {jQuery}
     * @private
     */
    _this.$body_ = (0, _jquery2.default)('<div>').addClass(_this.classNames_.body);

    if (options.hasOwnProperty('content')) {
      _this.$body_.append(options.content);
    }

    if (options.hasOwnProperty('title')) {
      /**
       * @type {jQuery}
       * @private
       */
      _this.$title_ = (0, _jquery2.default)('<div>').addClass(_this.classNames_.title);

      _this.$element_.append(_this.$title_);

      if (_this.collapsible_) {
        var $collapseButton = (0, _jquery2.default)('<button>').addClass(_this.classNames_.collapseButton);

        $collapseButton.on('click', function () {
          _this.setCollapsed(!_this.collapsed_);
          $collapseButton.blur();
        });

        if (_this.titleButton_) {
          var $titleButton = (0, _jquery2.default)('<button>').addClass(_this.classNames_.titleButton).on('click', function () {
            _this.dispatchEvent('title:click');
            $titleButton.blur();
          }).html(options.title);

          if (options.rtl) {
            $titleButton.prop('dir', 'rtl');
          }

          _this.$title_.append($collapseButton).append($titleButton);
        } else {
          $collapseButton.addClass(_this.classNames_.titleButton).html(options.title);

          if (options.rtl) {
            $collapseButton.prop('dir', 'rtl');
          }

          _this.$title_.append($collapseButton);
        }
      } else {
        _this.$title_.html(options.title);

        if (options.rtl) {
          _this.$title_.prop('dir', 'rtl');
        }
      }
    } else {
      _this.collapsible_ = false;
      _this.collapsed_ = false;
    }

    _this.$element_.append(_this.$body_);

    // this.collapsed_ will be setted in the following functions
    if (!_this.collapsed_) {
      _this.setCollapsed(false);
    } else {
      _this.setCollapsed(true);
    }
    return _this;
  }

  /**
   * @param {boolean} collapsed
   */


  _createClass(ButtonBox, [{
    key: 'setCollapsed',
    value: function setCollapsed(collapsed, silent) {
      if (collapsed) {
        this.$body_.addClass(_globals.cssClasses.hidden);
        this.$element_.addClass(this.classNames_.collapsed);
      } else {
        this.$body_.removeClass(_globals.cssClasses.hidden);
        this.$element_.removeClass(this.classNames_.collapsed);
      }

      this.collapsed_ = collapsed;

      this.lastVisibleClass_();
      if (!silent) {
        this.dispatchEvent('change:collapsed');
      }
    }

    /**
     * @returns {boolean}
     */

  }, {
    key: 'getCollapsed',
    value: function getCollapsed() {
      return this.collapsed_;
    }

    /**
     * distribute the last visible class to the correct element
     * @private
     */

  }, {
    key: 'lastVisibleClass_',
    value: function lastVisibleClass_() {
      // first take the last visible class name away
      if (this.takeLastVisible(this.$element_)) {
        // if the last visible class name was taken, distribute it to the correct element
        this.giveLastVisible(this.$element_);
      }
    }

    /**
     * Returns the body element
     * @returns {jQuery}
     */

  }, {
    key: 'get$Body',
    value: function get$Body() {
      return this.$body_;
    }

    /**
     * Returns the element itself
     * @returns {jQuery}
     */

  }, {
    key: 'get$Element',
    value: function get$Element() {
      return this.$element_;
    }

    /**
     * finds and returns the last child in the body of the given element if it is of the same classname as this ButtonBox
     * @param {jQuery} $element
     * @returns {jQuery}
     * @private
     */

  }, {
    key: 'get$LastChild_',
    value: function get$LastChild_($element) {
      return $element.children('.' + this.classNames_.body).children(':last-child');
    }
  }, {
    key: 'setCollapseButtonActive',
    value: function setCollapseButtonActive(active) {
      this.$title_.children('.' + this.classNames_.collapseButton).toggleClass(this.classNames_.active, active);
    }
  }, {
    key: 'setTitleButtonActive',
    value: function setTitleButtonActive(active) {
      this.$title_.children('.' + this.classNames_.titleButton).toggleClass(this.classNames_.active, active);
    }

    /**
     * Gives the last element in the element the last visible class
     * @param $element
     */

  }, {
    key: 'giveLastVisible',
    value: function giveLastVisible($element) {
      if ($element.hasClass(this.classNames_.collapsed)) {
        // if the element is collapsed itself is the last visible element
        $element.addClass(this.classNames_.lastVisible);
      } else {
        if ($element.hasClass(this.className_)) {
          // the element is a button box (with the same className) and not collapsed
          var $lastChild = this.get$LastChild_($element);
          if ($lastChild) {
            // -> recursively call this method on the last element
            this.giveLastVisible($lastChild);
          } else {
            // no last element exists
            $element.addClass(this.classNames_.lastVisible);
          }
        } else {
          // the element is no buttonbox with the same classname it is declared the last visible element
          $element.addClass(this.classNames_.lastVisible);
        }
      }
    }

    /**
     * Searches for the last visible class in its child elements and removes it.
     * Returns true if it was removed.
     * @param {jQuery} $element
     * @returns {boolean}
     */

  }, {
    key: 'takeLastVisible',
    value: function takeLastVisible($element) {
      if ($element.hasClass(this.classNames_.lastVisible)) {
        $element.removeClass(this.classNames_.lastVisible);
        return true;
      } else if ($element.hasClass(this.className_)) {
        var $lastChild = this.get$LastChild_($element);
        // reverse call
        if ($lastChild) {
          return this.takeLastVisible($lastChild);
        } else {
          return false;
        }
      } else {
        return false;
      }
    }

    /**
     * This method should be called after all child elements have been added to the button box
     */

  }, {
    key: 'finish',
    value: function finish() {
      this.takeLastVisible(this.$element_);
      this.giveLastVisible(this.$element_);
    }
  }]);

  return ButtonBox;
}(_openlayers2.default.Object);

/***/ }),
/* 308 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Dropdown = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _globals = __webpack_require__(11);

__webpack_require__(63);

__webpack_require__(525);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {object} DropdownOptions
 * @property {string} [className='g4u-dropdown']
 * @property {string} [ghostentry='no entries'] This text is shown if the dropdown has no entries
 * @property {number} [slideDuration=400] standard slideDuration
 */

/**
 * @typedef {Object} Entry
 * @property {jQuery} $element
 * @property {*} value
 */

_jquery2.default.extend(_jquery2.default.easing, {
  easeOutCirc: function easeOutCirc(x, t, b, c, d) {
    return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;
  },
  easeInCirc: function easeInCirc(x, t, b, c, d) {
    return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;
  }
});

/**
 * A HTML Dropdown select.
 * The text entries in the list can be setted and changed and given a click handler.
 * @fires 'leave:backwards' This event is raised if the dropdown is left via the up arrow or shift+tab
 * @fires 'leave:forwards' This event is raised if the dropdown is left via the down arrow or tab
 */

var Dropdown = exports.Dropdown = function (_ol$Object) {
  _inherits(Dropdown, _ol$Object);

  /**
   * @param {DropdownOptions} [options={}]
   */
  function Dropdown() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, Dropdown);

    /**
     * @type {string}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (Dropdown.__proto__ || Object.getPrototypeOf(Dropdown)).call(this));

    _this.className_ = options.className || 'g4u-dropdown';

    /**
     * @type {Object.<string, string>}
     * @private
     */
    _this.classNames_ = {
      entry: _this.className_ + '-entry',
      selected: _this.className_ + '-selected',
      ghost: _this.className_ + '-ghostentry'
    };

    /**
     * @type {jQuery}
     * @private
     */
    _this.$element_ = (0, _jquery2.default)('<div>').addClass(_this.className_);

    /**
     * @type {jQuery}
     */
    _this.$ghostentry = (0, _jquery2.default)('<button tabindex="-1">').addClass(_this.classNames_.ghost).html(options.ghostentry || 'no entries');

    /**
     * @type {number}
     * @private
     */
    _this.slideDuration_ = options.slideDuration || 400;

    /**
     * @type {Entry[]}
     * @private
     */
    _this.entriesArray_ = [];

    /**
     * @type {number}
     * @private
     */
    _this.selectedIndex_ = -1;

    // key handling

    _this.setUpKeyboardHandling_();

    _this.$element_.on('focus', function () {
      if (_this.selectedIndex_ > -1) {
        _this.entriesArray_[_this.selectedIndex_].$element.focus();
      }
    });

    _this.$element_.get(0).addEventListener('mousemove', function (e) {
      e.stopPropagation();
    }, false);

    _this.slideUp(true);
    return _this;
  }

  /**
   * returns the value of the selected list element
   * @returns {*}
   */


  _createClass(Dropdown, [{
    key: 'getValue',
    value: function getValue() {
      if (this.selectedIndex_ >= 0) {
        return this.entriesArray_[this.selectedIndex_].value;
      }
    }

    /**
     * returns the text of the current selected list element
     */

  }, {
    key: 'getText',
    value: function getText() {
      if (this.selectedIndex_ >= 0) {
        return this.entriesArray_[this.selectedIndex_].text;
      }
    }

    /**
     * @private
     */

  }, {
    key: 'setUpKeyboardHandling_',
    value: function setUpKeyboardHandling_() {
      var _this2 = this;

      this.$element_.on('keydown', function (e) {
        switch (e.which) {
          case _globals.keyCodes.ARROW_DOWN:
            e.preventDefault();
            e.stopPropagation();
            if (_this2.selectedIndex_ < _this2.entriesArray_.length - 1) {
              _this2.entriesArray_[_this2.selectedIndex_ + 1].$element.addClass(_this2.classNames_.selected);
              _this2.entriesArray_[_this2.selectedIndex_ + 1].$element.focus();
              _this2.entriesArray_[_this2.selectedIndex_].$element.removeClass(_this2.classNames_.selected);
              _this2.selectedIndex_ += 1;
            }
            break;
          case _globals.keyCodes.ARROW_UP:
            e.preventDefault();
            e.stopPropagation();
            if (_this2.selectedIndex_ > 0) {
              _this2.entriesArray_[_this2.selectedIndex_ - 1].$element.addClass(_this2.classNames_.selected);
              _this2.entriesArray_[_this2.selectedIndex_ - 1].$element.focus();
              _this2.entriesArray_[_this2.selectedIndex_].$element.removeClass(_this2.classNames_.selected);
              _this2.selectedIndex_ -= 1;
            } else {
              _this2.entriesArray_[_this2.selectedIndex_].$element.removeClass(_this2.classNames_.selected);
              _this2.selectedIndex_ = -1;
              _this2.dispatchEvent({
                type: 'leave:backwards',
                originalEvent: e
              });
            }
            break;
          case _globals.keyCodes.TAB:
            if (!e.shiftKey) {
              _this2.dispatchEvent({
                type: 'leave:forwards',
                originalEvent: e
              });
            } else {
              _this2.dispatchEvent({
                type: 'leave:backwards',
                originalEvent: e
              });
            }
            break;
          case _globals.keyCodes.ENTER:
            e.stopPropagation();
            e.preventDefault();
            _this2.select$Entry_(_this2.entriesArray_[_this2.selectedIndex_].$element);
        }
      });
    }

    /**
     * return the whole element
     * @returns {jQuery}
     */

  }, {
    key: 'get$Element',
    value: function get$Element() {
      return this.$element_;
    }

    /**
     * Returns the amount of dropdown entries
     * @returns {Number}
     */

  }, {
    key: 'getLength',
    value: function getLength() {
      return this.entriesArray_.length;
    }

    /**
     * Adds an entry to the end of the dropdown list
     * @param {*} value
     * @param {string} [text=value]
     * @param {boolean} [optSelected=false]
     */

  }, {
    key: 'addEntry',
    value: function addEntry(value, text) {
      var optSelected = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

      text = text || value;

      var index = this.getLength();
      this.setLength(index + 1);

      var entry = this.entriesArray_[index];
      entry.text = text;
      entry.$element.html(text);
      entry.value = value;

      if (optSelected) {
        entry.$element.addClass(this.classNames_.selected);
        this.selectedIndex_ = index;
      }
    }
  }, {
    key: 'setActivated',
    value: function setActivated(value, active) {
      this.entriesArray_.find(function (o) {
        return o.value === value;
      }).$element.toggleClass(_globals.cssClasses.active, active);
    }

    /**
     * This function takes an array of entries (strings).
     * The length of the dropdown is set to the length of the arrays (they have to have the same length).
     * @param {any[]} values
     * @param {string[]} [texts=values]
     */

  }, {
    key: 'setEntries',
    value: function setEntries(values, texts) {
      texts = texts || values;
      this.setLength(values.length);

      for (var i = 0, ii = values.length; i < ii; i++) {
        this.entriesArray_[i].text = texts[i];
        this.entriesArray_[i].$element.html(texts[i]);
        this.entriesArray_[i].value = values[i];
      }
    }
  }, {
    key: 'select$Entry_',
    value: function select$Entry_($entry) {
      if (!$entry.hasClass(this.classNames_.selected)) {
        $entry.addClass(this.classNames_.selected);
        if (this.selectedIndex_ > -1) {
          this.entriesArray_[this.selectedIndex_].$element.removeClass(this.classNames_.selected);
        }
      }
      this.selectedIndex_ = this.entriesArray_.findIndex(function (el) {
        return el.$element === $entry;
      });
      this.dispatchEvent('select');
    }

    /**
     * This function corrects the number of entries in the dropdown. The content of the entries is not respected.
     * New entries are slided down, to be removed entries are slided up then removed.
     * @param {number} length
     */

  }, {
    key: 'setLength',
    value: function setLength(length) {
      var _this3 = this;

      if (this.selectedIndex_ > -1) {
        this.entriesArray_[this.selectedIndex_].$element.removeClass(this.classNames_.selected);
        this.selectedIndex_ = -1;
      }

      var i = void 0,
          ii = void 0;

      if (this.entriesArray_.length === 0) {
        // removing ghost entry
        this.$element_.empty();
      }

      if (length > this.entriesArray_.length) {
        var _loop = function _loop() {
          var $entry = (0, _jquery2.default)('<button tabindex="-1">').addClass(_this3.classNames_.entry).hide();

          $entry.on('click', function () {
            return _this3.select$Entry_($entry);
          });
          $entry.focus();

          _this3.$element_.append($entry);

          _this3.entriesArray_.push({
            $element: $entry
          });

          $entry.slideDown({ duration: _this3.slideDuration_ });
        };

        // adding entries and dropdown handlers
        for (i = this.entriesArray_.length, ii = length; i < ii; i++) {
          _loop();
        }
      } else if (length < this.entriesArray_.length) {
        // removing entries
        for (i = this.entriesArray_.length - 1, ii = length; i >= ii; i--) {
          this.entriesArray_[i].$element.slideUp({
            duration: this.slideDuration_,
            complete: function complete() {
              _this3.entriesArray_.pop();
              _this3.$element_.children().last().remove();
            }
          });
        }
        if (this.selectedIndex_ >= length) {
          // correcting selected element
          this.selectedIndex_ = length - 1;
        }
      }
    }
  }, {
    key: 'showGhostEntry',
    value: function showGhostEntry() {
      this.setLength(0);
      this.$element_.append(this.$ghostentry);
      this.slideDown();
    }
  }, {
    key: 'focus',
    value: function focus() {
      if (this.entriesArray_.length >= 0) {
        if (this.selectedIndex_ < 0) {
          this.selectedIndex_ = 0;
          this.entriesArray_[0].$element.addClass(this.classNames_.selected);
        }
        this.entriesArray_[this.selectedIndex_].$element.focus();
      }
    }

    /**
     * @param {boolean} [immediately=false] if setted to true the animation is skipped
     * @returns {Promise}
     */

  }, {
    key: 'slideUp',
    value: function slideUp() {
      var _this4 = this;

      var immediately = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;

      return new Promise(function (resolve) {
        var duration = 0;
        if (!immediately) {
          duration = _this4.slideDuration_;
        }
        _this4.$element_.slideUp({
          duration: duration,
          complete: function complete() {
            _this4.$element_.addClass(_globals.cssClasses.hidden);
            resolve();
          },
          easing: 'easeInCirc'
        });
      });
    }

    /**
     * @param {boolean} [immediately=false] if setted to true the animation is skipped
     * @returns {Promise}
     */

  }, {
    key: 'slideDown',
    value: function slideDown() {
      var _this5 = this;

      var immediately = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;

      return new Promise(function (resolve) {
        if (_this5.$element_.children().length > 0) {
          var duration = 0;
          if (!immediately) {
            duration = _this5.slideDuration_;
          }
          _this5.$element_.removeClass(_globals.cssClasses.hidden);
          _this5.$element_.slideDown({
            easing: 'easeOutCirc',
            complete: resolve,
            duration: duration
          });
        }
      });
    }

    /**
     * Removes all entries
     */

  }, {
    key: 'clear',
    value: function clear() {
      this.slideUp();
      this.$element_.empty();
      this.entriesArray_ = [];
      this.selectedIndex_ = -1;
    }

    /**
     * Returns true if the dropdown has selectable elements
     * @returns {boolean}
     */

  }, {
    key: 'isSelectable',
    value: function isSelectable() {
      return this.entriesArray_.length > 0;
    }
  }]);

  return Dropdown;
}(_openlayers2.default.Object);

/***/ }),
/* 309 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var History = exports.History = function () {
  function History() {
    var _this = this;

    _classCallCheck(this, History);

    this.callbacks_ = [];

    if (window.history.state !== 'future') {
      window.history.replaceState('base', '');
      window.history.pushState('future', '');
    }

    window.addEventListener('popstate', function (e) {
      if (e.state === 'base') {
        var cb = _this.callbacks_.pop();
        if (cb) {
          cb.call();
          window.history.forward();
        } else {
          window.history.back();
        }
      }
    });
  }

  _createClass(History, [{
    key: 'push',
    value: function push(callback) {
      this.callbacks_.push(callback);
    }
  }, {
    key: 'pop',
    value: function pop() {
      this.callbacks_.pop().call();
    }
  }]);

  return History;
}();

/***/ }),
/* 310 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Shield = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

var _globals = __webpack_require__(11);

var _html = __webpack_require__(35);

__webpack_require__(542);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {object} ShieldOptions
 * @property {G4UMap} map
 * @property {string} [className='g4u-shield']
 */

/**
 * @typedef {object} ElementPosition
 * @property {jQuery} $actualElement
 * @property {jQuery} $oldParent
 * @property {number} oldIndex
 */

/**
 * @typedef {object} OnTopOptions
 * @property {boolean} [findParentWindow=false]
 */

/**
 * A shield that sets itself in front of all other elements in a context if activated, hides itself if deactivated.
 * It can get another element in front of it (Attention: it gets removed from its context temporarly)
 */
var Shield = exports.Shield = function (_ol$Object) {
  _inherits(Shield, _ol$Object);

  /**
   * @param {ShieldOptions} options
   */
  function Shield(options) {
    _classCallCheck(this, Shield);

    /**
     * @type {string}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (Shield.__proto__ || Object.getPrototypeOf(Shield)).call(this));

    _this.className_ = options.className || 'g4u-shield';

    /**
     * @type {G4UMap}
     * @private
     */
    _this.map_ = options.map;

    /**
     * @type {jQuery}
     * @private
     */
    _this.$context_ = (0, _jquery2.default)(_this.map_.getTarget());

    /**
     * @type {jQuery}
     * @private
     */
    _this.$element_ = (0, _jquery2.default)('<div>').addClass(_this.className_);

    _this.$context_.append(_this.$element_);

    _this.setActive(options.hasOwnProperty('active') ? options.active : false);

    _this.$element_.on('keydown', function (e) {
      if (e.which === _globals.keyCodes.ESCAPE) {
        if (_this.getActive()) {
          _this.setActive(false);
        }
      }
    });

    /**
     * @type {Map<jQuery, ElementPosition>}
     * @private
     */
    _this.elementsOnTop_ = new Map();
    return _this;
  }

  /**
   * @param {boolean} active
   */


  _createClass(Shield, [{
    key: 'setActive',
    value: function setActive(active) {
      var oldValue = this.active_;
      if (oldValue !== active) {
        if (active) {
          this.$element_.removeClass(_globals.cssClasses.hidden);
          (0, _html.getInFront)(this.$element_, this.$context_);
        } else {
          this.$element_.addClass(_globals.cssClasses.hidden);
        }
        this.active_ = active;
        this.dispatchEvent({
          type: 'change:active',
          oldValue: oldValue,
          key: 'active'
        });
      }
    }

    /**
     * @returns {boolean}
     */

  }, {
    key: 'getActive',
    value: function getActive() {
      return this.active_;
    }

    /**
     * Gets the given element in front of the shield. The element is removed from its context temporarily
     * @param {jQuery} $element
     * @param {OnTopOptions} [options]
     */

  }, {
    key: 'add$OnTop',
    value: function add$OnTop($element) {
      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      var $actualElement = $element;

      if (!options.hasOwnProperty('findParentWindow') || options.findParentWindow) {
        var $window = $element.parents().filter('.g4u-window');
        if ($window.length > 0) {
          $actualElement = $window;
        }
      }

      var $oldParent = $actualElement.parent();

      this.elementsOnTop_.set($element[0], {
        $actualElement: $actualElement,
        $oldParent: $oldParent,
        oldIndex: $oldParent.children().index($actualElement)
      });

      this.$element_.append($actualElement);
      (0, _html.getInFront)($actualElement, this.$element_);

      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = Array.from($oldParent[0].classList)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var className = _step.value;

          this.$element_.addClass(className);
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }
    }

    /**
     * Returns the given element in front of the shield to the previous context
     * @param {jQuery} $element
     * @returns {Promise}
     */

  }, {
    key: 'remove$OnTop',
    value: function remove$OnTop($element) {
      var element = $element[0];

      var _elementsOnTop_$get = this.elementsOnTop_.get(element),
          $actualElement = _elementsOnTop_$get.$actualElement,
          $oldParent = _elementsOnTop_$get.$oldParent,
          oldIndex = _elementsOnTop_$get.oldIndex;

      if (oldIndex === 0) {
        $oldParent.prepend($actualElement);
      } else {
        $oldParent.children().eq(oldIndex - 1).after($actualElement);
      }

      var _iteratorNormalCompletion2 = true;
      var _didIteratorError2 = false;
      var _iteratorError2 = undefined;

      try {
        for (var _iterator2 = Array.from($oldParent[0].classList)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
          var className = _step2.value;

          this.$element_.removeClass(className);
        }
      } catch (err) {
        _didIteratorError2 = true;
        _iteratorError2 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion2 && _iterator2.return) {
            _iterator2.return();
          }
        } finally {
          if (_didIteratorError2) {
            throw _iteratorError2;
          }
        }
      }

      this.elementsOnTop_.delete(element);
    }

    /**
     * Returns all children in front of the shield
     * @returns {jQuery}
     */

  }, {
    key: 'get$ElementsInFront',
    value: function get$ElementsInFront() {
      return this.$element_.children();
    }
  }]);

  return Shield;
}(_openlayers2.default.Object);

/***/ }),
/* 311 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.FeatureSelect = undefined;

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _sortBy = __webpack_require__(269);

var _sortBy2 = _interopRequireDefault(_sortBy);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * This interaction is a little further customized select interaction.
 * Selected features get sorted by geometry type.
 */
var FeatureSelect = exports.FeatureSelect = function (_ol$interaction$Selec) {
  _inherits(FeatureSelect, _ol$interaction$Selec);

  /**
   * @param {object} [options={}]
   */
  function FeatureSelect() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, FeatureSelect);

    var _this = _possibleConstructorReturn(this, (FeatureSelect.__proto__ || Object.getPrototypeOf(FeatureSelect)).call(this, options));

    var sort = function sort(f) {
      if (f.getGeometry() instanceof _openlayers2.default.geom.Point || f.getGeometry() instanceof _openlayers2.default.geom.MultiPoint) {
        return 1;
      } else if (f.getGeometry() instanceof _openlayers2.default.geom.LineString || f.getGeometry() instanceof _openlayers2.default.geom.MultiLineString) {
        return 2;
      } else {
        return 3;
      }
    };

    _this.on('select', function (e) {
      e.selected = (0, _sortBy2.default)(e.selected, sort);
      e.deselected = (0, _sortBy2.default)(e.deselected, sort);
    });
    return _this;
  }

  return FeatureSelect;
}(_openlayers2.default.interaction.Select);

/***/ }),
/* 312 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MapEventInteraction = undefined;

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var MapEventInteraction = exports.MapEventInteraction = function (_ol$interaction$Inter) {
  _inherits(MapEventInteraction, _ol$interaction$Inter);

  function MapEventInteraction() {
    var _this;

    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, MapEventInteraction);

    var type = options.type || 'singleclick';
    return _this = _possibleConstructorReturn(this, (MapEventInteraction.__proto__ || Object.getPrototypeOf(MapEventInteraction)).call(this, {
      handleEvent: function handleEvent(e) {
        if (_this.getActive() && e.type === type && (0, _jquery2.default)(e.originalEvent.target).is('.ol-viewport > canvas')) {
          _this.dispatchEvent({
            type: 'mapevent',
            mapEvent: e
          });
        }
        return true;
      }
    }));
  }

  return MapEventInteraction;
}(_openlayers2.default.interaction.Interaction);

/***/ }),
/* 313 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.BaseTileLayer = undefined;

var _TileLayer = __webpack_require__(187);

var _BaseLayerMixin = __webpack_require__(129);

var _utilities = __webpack_require__(5);

var BaseTileLayer = exports.BaseTileLayer = (0, _utilities.mixin)(_TileLayer.TileLayer, _BaseLayerMixin.BaseLayerMixin);

/***/ }),
/* 314 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.EmptyBaseLayer = undefined;

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _ImageLayer = __webpack_require__(186);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var EmptyBaseLayer = exports.EmptyBaseLayer = function (_BaseLayerImage) {
  _inherits(EmptyBaseLayer, _BaseLayerImage);

  /**
   * @param {object} [options={}]
   */
  function EmptyBaseLayer() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, EmptyBaseLayer);

    options.source = new _openlayers2.default.source.ImageCanvas({
      state: 'ready',
      canvasFunction: function canvasFunction() {} // not loading any canvas
    });
    return _possibleConstructorReturn(this, (EmptyBaseLayer.__proto__ || Object.getPrototypeOf(EmptyBaseLayer)).call(this, options));
  }

  return EmptyBaseLayer;
}(_ImageLayer.BaseLayerImage);

/***/ }),
/* 315 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.BaseSilentGroupLayer = exports.SilentGroupLayer = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _ProvideMapMixin = __webpack_require__(83);

var _BaseLayerMixin = __webpack_require__(129);

var _utilities = __webpack_require__(5);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var SilentGroupLayer = exports.SilentGroupLayer = function (_mixin) {
  _inherits(SilentGroupLayer, _mixin);

  /**
   * @param {object} [options={}]
   */
  function SilentGroupLayer() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, SilentGroupLayer);

    var _this = _possibleConstructorReturn(this, (SilentGroupLayer.__proto__ || Object.getPrototypeOf(SilentGroupLayer)).call(this, options));

    var listenerKeys = new WeakMap();

    _this.getLayers().on('add', /** ol.CollectionEvent */function (e) {
      var layer = e.element;
      if (layer.provideMap) {
        layer.provideMap(_this.getProvidedMap());
      }
      listenerKeys.set(layer, layer.on(['change:visible', 'change:childVisible'], function () {
        _this.dispatchEvent({
          type: 'change:childVisible',
          child: layer
        });
      }));
    });

    _this.getLayers().on('remove', /** ol.CollectionEvent */function (e) {
      var layer = e.element;
      if (layer.provideMap) {
        layer.provideMap(null);
      }
      _openlayers2.default.Observable.unByKey(listenerKeys.get(layer));
      listenerKeys.delete(layer);
    });
    return _this;
  }

  /**
   * The provideMap methods of all contained children are called recursively
   * @param {G4UMap} map
   */


  _createClass(SilentGroupLayer, [{
    key: 'provideMap',
    value: function provideMap(map) {
      _get(SilentGroupLayer.prototype.__proto__ || Object.getPrototypeOf(SilentGroupLayer.prototype), 'provideMap', this).call(this, map);

      this.getLayers().forEach(function (layer) {
        if (layer.provideMap) {
          layer.provideMap(map);
        }
      });
    }
  }]);

  return SilentGroupLayer;
}((0, _utilities.mixin)(_openlayers2.default.layer.Group, _ProvideMapMixin.ProvideMapMixin));

var BaseSilentGroupLayer = exports.BaseSilentGroupLayer = function (_mixin2) {
  _inherits(BaseSilentGroupLayer, _mixin2);

  function BaseSilentGroupLayer() {
    _classCallCheck(this, BaseSilentGroupLayer);

    return _possibleConstructorReturn(this, (BaseSilentGroupLayer.__proto__ || Object.getPrototypeOf(BaseSilentGroupLayer)).apply(this, arguments));
  }

  return BaseSilentGroupLayer;
}((0, _utilities.mixin)(SilentGroupLayer, _BaseLayerMixin.BaseLayerMixin));

/***/ }),
/* 316 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createMapInternal = createMapInternal;

var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

__webpack_require__(551);

__webpack_require__(63);

var _G4UMap = __webpack_require__(127);

var _Debug = __webpack_require__(15);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

window.jQuery = window.jQuery || _jquery2.default;

function createMapInternal(element, clientConfPath, layerConfPath, options) {
  if (Array.isArray(options)) {
    // backwards compatibility
    options = { modules: options };
  }

  return new Promise(function (resolve, reject) {
    (0, _jquery2.default)(document).ready(function () {
      if (!_jquery2.default) {
        reject('jQuery not available.');
      } else {
        var v = (0, _jquery2.default)().jquery.split('.');
        if (+v[0] < 2 && +v[1] < 9) {
          _Debug.Debug.error('You are using an outdated version of jQuery. Please use version 1.9 or higher.');
        }
      }

      if (!_openlayers2.default) {
        reject('OpenLayers not available.');
      }

      if (!_openlayers2.default.has.CANVAS) {
        (0, _jquery2.default)('.g4u-browser-support-message').show();
        reject('Browser does not support Canvas.');
      }

      (0, _jquery2.default)(element).empty();

      // for remote analysis and debugging - not used inside of the software
      window.map = new _G4UMap.G4UMap(element, clientConfPath, layerConfPath, options);

      window.map.asSoonAs('ready', true, function () {
        resolve(window.map);
      });
    });
  });
}

/***/ }),
/* 317 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


var _openlayers = __webpack_require__(2);

var _openlayers2 = _interopRequireDefault(_openlayers);

var _jquery = __webpack_require__(1);

var _jquery2 = _interopRequireDefault(_jquery);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * extends the openlayers ol.Object class. Waits till a property is set to a specific value and calls the given
 * callback function. If the value already has the desired value the callback is called immediately.
 * @param {string} propName
 * @param {*} value
 * @param {function} cb
 */
_openlayers2.default.Object.prototype.asSoonAs = function (propName, value, cb) {
  var _this = this;

  if (!_jquery2.default.isFunction(cb)) {
    throw new Error('You need to provide a callback to asSoonAs.');
  }
  if (this.get(propName) === value) {
    // run callback
    cb();
  } else {
    this.once('change:' + propName, function () {
      // recursive call
      _this.asSoonAs(propName, value, cb);
    });
  }
};

/***/ }),
/* 318 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.QueryVectorSource = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _SourceServerVector2 = __webpack_require__(131);

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * @typedef {SourceServerVectorOptions} QuerySourceOptions
 * @property {String[]} [queryValues=[]]
 */

/**
 * A source for a VectorLayer which address is controlled by the urlapi and which is not shown in the LayerSelector
 */
var QueryVectorSource = exports.QueryVectorSource = function (_SourceServerVector) {
  _inherits(QueryVectorSource, _SourceServerVector);

  /**
   * @param {QuerySourceOptions} options
   */
  function QueryVectorSource() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    _classCallCheck(this, QueryVectorSource);

    /**
     * @type {number}
     * @private
     */
    var _this = _possibleConstructorReturn(this, (QueryVectorSource.__proto__ || Object.getPrototypeOf(QueryVectorSource)).call(this, options));

    _this.changedQueryValuesCount_ = 0;

    _this.setQueryValues(options.queryValues || []);
    return _this;
  }

  /**
   * @param {string[]} values
   */


  _createClass(QueryVectorSource, [{
    key: 'setQueryValues',
    value: function setQueryValues(values) {
      /**
       * @type {string[]}
       * @private
       */
      this.queryValues_ = values;
      this.urlTemplate.expandTemplate('apiValue', this.queryValues_, true);

      this.changedQueryValuesCount_++;
      this.changed();
    }
  }, {
    key: 'addFeatures',
    value: function addFeatures(features) {
      if (this.changedQueryValuesCount_ > 0) {
        this.changedQueryValuesCount_--;
        this.clear();
      }
      _get(QueryVectorSource.prototype.__proto__ || Object.getPrototypeOf(QueryVectorSource.prototype), 'addFeatures', this).call(this, features);
    }

    /**
     * @returns {string[]}
     */

  }, {
    key: 'getQueryValues',
    value: function getQueryValues() {
      return this.queryValues_;
    }
  }]);

  return QueryVectorSource;
}(_SourceServerVector2.SourceServerVector);

/***/ }),
/* 319 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.QueryTileWMSSource = exports.QueryImageWMSSource = exports.QueryWMSMixin = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _utilities = __webpack_require__(5);

var _ImageWMSSource = __webpack_require__(189);

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * A source for a VectorLayer which address is controlled by the urlapi and which is not shown in the LayerSelector
 */
var QueryWMSMixin = exports.QueryWMSMixin = function () {
  function QueryWMSMixin() {
    _classCallCheck(this, QueryWMSMixin);
  }

  _createClass(QueryWMSMixin, [{
    key: 'initialize',
    value: function initialize(options) {
      this.setQueryValues(options.queryValues || []);
    }

    /**
     * @param {string[]} values
     */

  }, {
    key: 'setQueryValues',
    value: function setQueryValues(values) {
      /**
       * @type {string[]}
       * @private
       */
      this.queryValues_ = values;

      this.updateParams(Object.assign({}, this.getParams(), { LAYERS: values }));

      this.changed();
    }

    /**
     * @returns {string[]}
     */

  }, {
    key: 'getQueryValues',
    value: function getQueryValues() {
      return this.queryValues_;
    }
  }]);

  return QueryWMSMixin;
}();

var QueryImageWMSSource = exports.QueryImageWMSSource = (0, _utilities.mixin)(_ImageWMSSource.ImageWMSSource, QueryWMSMixin);

var QueryTileWMSSource = exports.QueryTileWMSSource = (0, _utilities.mixin)(_ImageWMSSource.TileWMSSource, QueryWMSMixin);

/***/ }),
/* 320 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(330);
module.exports = __webpack_require__(38).RegExp.escape;


/***/ }),
/* 321 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(7);
var isArray = __webpack_require__(100);
var SPECIES = __webpack_require__(9)('species');

module.exports = function (original) {
  var C;
  if (isArray(original)) {
    C = original.constructor;
    // cross-realm fallback
    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;
    if (isObject(C)) {
      C = C[SPECIES];
      if (C === null) C = undefined;
    }
  } return C === undefined ? Array : C;
};


/***/ }),
/* 322 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()
var fails = __webpack_require__(6);
var getTime = Date.prototype.getTime;
var $toISOString = Date.prototype.toISOString;

var lz = function (num) {
  return num > 9 ? num : '0' + num;
};

// PhantomJS / old WebKit has a broken implementations
module.exports = (fails(function () {
  return $toISOString.call(new Date(-5e13 - 1)) != '0385-07-25T07:06:39.999Z';
}) || !fails(function () {
  $toISOString.call(new Date(NaN));
})) ? function toISOString() {
  if (!isFinite(getTime.call(this))) throw RangeError('Invalid time value');
  var d = this;
  var y = d.getUTCFullYear();
  var m = d.getUTCMilliseconds();
  var s = y < 0 ? '-' : y > 9999 ? '+' : '';
  return s + ('00000' + Math.abs(y)).slice(s ? -6 : -4) +
    '-' + lz(d.getUTCMonth() + 1) + '-' + lz(d.getUTCDate()) +
    'T' + lz(d.getUTCHours()) + ':' + lz(d.getUTCMinutes()) +
    ':' + lz(d.getUTCSeconds()) + '.' + (m > 99 ? m : '0' + lz(m)) + 'Z';
} : $toISOString;


/***/ }),
/* 323 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var anObject = __webpack_require__(3);
var toPrimitive = __webpack_require__(42);
var NUMBER = 'number';

module.exports = function (hint) {
  if (hint !== 'string' && hint !== NUMBER && hint !== 'default') throw TypeError('Incorrect hint');
  return toPrimitive(anObject(this), hint != NUMBER);
};


/***/ }),
/* 324 */
/***/ (function(module, exports, __webpack_require__) {

// all enumerable object keys, includes symbols
var getKeys = __webpack_require__(51);
var gOPS = __webpack_require__(104);
var pIE = __webpack_require__(86);
module.exports = function (it) {
  var result = getKeys(it);
  var getSymbols = gOPS.f;
  if (getSymbols) {
    var symbols = getSymbols(it);
    var isEnum = pIE.f;
    var i = 0;
    var key;
    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);
  } return result;
};


/***/ }),
/* 325 */
/***/ (function(module, exports, __webpack_require__) {

var getKeys = __webpack_require__(51);
var toIObject = __webpack_require__(26);
module.exports = function (object, el) {
  var O = toIObject(object);
  var keys = getKeys(O);
  var length = keys.length;
  var index = 0;
  var key;
  while (length > index) if (O[key = keys[index++]] === el) return key;
};


/***/ }),
/* 326 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var path = __webpack_require__(327);
var invoke = __webpack_require__(99);
var aFunction = __webpack_require__(19);
module.exports = function (/* ...pargs */) {
  var fn = aFunction(this);
  var length = arguments.length;
  var pargs = Array(length);
  var i = 0;
  var _ = path._;
  var holder = false;
  while (length > i) if ((pargs[i] = arguments[i++]) === _) holder = true;
  return function (/* ...args */) {
    var that = this;
    var aLen = arguments.length;
    var j = 0;
    var k = 0;
    var args;
    if (!holder && !aLen) return invoke(fn, pargs, that);
    args = pargs.slice();
    if (holder) for (;length > j; j++) if (args[j] === _) args[j] = arguments[k++];
    while (aLen > k) args.push(arguments[k++]);
    return invoke(fn, args, that);
  };
};


/***/ }),
/* 327 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(4);


/***/ }),
/* 328 */
/***/ (function(module, exports) {

module.exports = function (regExp, replace) {
  var replacer = replace === Object(replace) ? function (part) {
    return replace[part];
  } : replace;
  return function (it) {
    return String(it).replace(regExp, replacer);
  };
};


/***/ }),
/* 329 */
/***/ (function(module, exports) {

// 7.2.9 SameValue(x, y)
module.exports = Object.is || function is(x, y) {
  // eslint-disable-next-line no-self-compare
  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;
};


/***/ }),
/* 330 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/benjamingr/RexExp.escape
var $export = __webpack_require__(0);
var $re = __webpack_require__(328)(/[\\^$*+?.()|[\]{}]/g, '\\$&');

$export($export.S, 'RegExp', { escape: function escape(it) { return $re(it); } });


/***/ }),
/* 331 */
/***/ (function(module, exports, __webpack_require__) {

// 22.1.3.3 Array.prototype.copyWithin(target, start, end = this.length)
var $export = __webpack_require__(0);

$export($export.P, 'Array', { copyWithin: __webpack_require__(191) });

__webpack_require__(49)('copyWithin');


/***/ }),
/* 332 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $every = __webpack_require__(37)(4);

$export($export.P + $export.F * !__webpack_require__(33)([].every, true), 'Array', {
  // 22.1.3.5 / 15.4.4.16 Array.prototype.every(callbackfn [, thisArg])
  every: function every(callbackfn /* , thisArg */) {
    return $every(this, callbackfn, arguments[1]);
  }
});


/***/ }),
/* 333 */
/***/ (function(module, exports, __webpack_require__) {

// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)
var $export = __webpack_require__(0);

$export($export.P, 'Array', { fill: __webpack_require__(132) });

__webpack_require__(49)('fill');


/***/ }),
/* 334 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $filter = __webpack_require__(37)(2);

$export($export.P + $export.F * !__webpack_require__(33)([].filter, true), 'Array', {
  // 22.1.3.7 / 15.4.4.20 Array.prototype.filter(callbackfn [, thisArg])
  filter: function filter(callbackfn /* , thisArg */) {
    return $filter(this, callbackfn, arguments[1]);
  }
});


/***/ }),
/* 335 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)
var $export = __webpack_require__(0);
var $find = __webpack_require__(37)(6);
var KEY = 'findIndex';
var forced = true;
// Shouldn't skip holes
if (KEY in []) Array(1)[KEY](function () { forced = false; });
$export($export.P + $export.F * forced, 'Array', {
  findIndex: function findIndex(callbackfn /* , that = undefined */) {
    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});
__webpack_require__(49)(KEY);


/***/ }),
/* 336 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)
var $export = __webpack_require__(0);
var $find = __webpack_require__(37)(5);
var KEY = 'find';
var forced = true;
// Shouldn't skip holes
if (KEY in []) Array(1)[KEY](function () { forced = false; });
$export($export.P + $export.F * forced, 'Array', {
  find: function find(callbackfn /* , that = undefined */) {
    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});
__webpack_require__(49)(KEY);


/***/ }),
/* 337 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $forEach = __webpack_require__(37)(0);
var STRICT = __webpack_require__(33)([].forEach, true);

$export($export.P + $export.F * !STRICT, 'Array', {
  // 22.1.3.10 / 15.4.4.18 Array.prototype.forEach(callbackfn [, thisArg])
  forEach: function forEach(callbackfn /* , thisArg */) {
    return $forEach(this, callbackfn, arguments[1]);
  }
});


/***/ }),
/* 338 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ctx = __webpack_require__(32);
var $export = __webpack_require__(0);
var toObject = __webpack_require__(16);
var call = __webpack_require__(201);
var isArrayIter = __webpack_require__(140);
var toLength = __webpack_require__(14);
var createProperty = __webpack_require__(134);
var getIterFn = __webpack_require__(156);

$export($export.S + $export.F * !__webpack_require__(102)(function (iter) { Array.from(iter); }), 'Array', {
  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)
  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {
    var O = toObject(arrayLike);
    var C = typeof this == 'function' ? this : Array;
    var aLen = arguments.length;
    var mapfn = aLen > 1 ? arguments[1] : undefined;
    var mapping = mapfn !== undefined;
    var index = 0;
    var iterFn = getIterFn(O);
    var length, result, step, iterator;
    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);
    // if object isn't iterable or it's array with default iterator - use simple case
    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {
      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {
        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);
      }
    } else {
      length = toLength(O.length);
      for (result = new C(length); length > index; index++) {
        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);
      }
    }
    result.length = index;
    return result;
  }
});


/***/ }),
/* 339 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $indexOf = __webpack_require__(95)(false);
var $native = [].indexOf;
var NEGATIVE_ZERO = !!$native && 1 / [1].indexOf(1, -0) < 0;

$export($export.P + $export.F * (NEGATIVE_ZERO || !__webpack_require__(33)($native)), 'Array', {
  // 22.1.3.11 / 15.4.4.14 Array.prototype.indexOf(searchElement [, fromIndex])
  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {
    return NEGATIVE_ZERO
      // convert -0 to +0
      ? $native.apply(this, arguments) || 0
      : $indexOf(this, searchElement, arguments[1]);
  }
});


/***/ }),
/* 340 */
/***/ (function(module, exports, __webpack_require__) {

// 22.1.2.2 / 15.4.3.2 Array.isArray(arg)
var $export = __webpack_require__(0);

$export($export.S, 'Array', { isArray: __webpack_require__(100) });


/***/ }),
/* 341 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 22.1.3.13 Array.prototype.join(separator)
var $export = __webpack_require__(0);
var toIObject = __webpack_require__(26);
var arrayJoin = [].join;

// fallback for not array-like strings
$export($export.P + $export.F * (__webpack_require__(85) != Object || !__webpack_require__(33)(arrayJoin)), 'Array', {
  join: function join(separator) {
    return arrayJoin.call(toIObject(this), separator === undefined ? ',' : separator);
  }
});


/***/ }),
/* 342 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var toIObject = __webpack_require__(26);
var toInteger = __webpack_require__(41);
var toLength = __webpack_require__(14);
var $native = [].lastIndexOf;
var NEGATIVE_ZERO = !!$native && 1 / [1].lastIndexOf(1, -0) < 0;

$export($export.P + $export.F * (NEGATIVE_ZERO || !__webpack_require__(33)($native)), 'Array', {
  // 22.1.3.14 / 15.4.4.15 Array.prototype.lastIndexOf(searchElement [, fromIndex])
  lastIndexOf: function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {
    // convert -0 to +0
    if (NEGATIVE_ZERO) return $native.apply(this, arguments) || 0;
    var O = toIObject(this);
    var length = toLength(O.length);
    var index = length - 1;
    if (arguments.length > 1) index = Math.min(index, toInteger(arguments[1]));
    if (index < 0) index = length + index;
    for (;index >= 0; index--) if (index in O) if (O[index] === searchElement) return index || 0;
    return -1;
  }
});


/***/ }),
/* 343 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $map = __webpack_require__(37)(1);

$export($export.P + $export.F * !__webpack_require__(33)([].map, true), 'Array', {
  // 22.1.3.15 / 15.4.4.19 Array.prototype.map(callbackfn [, thisArg])
  map: function map(callbackfn /* , thisArg */) {
    return $map(this, callbackfn, arguments[1]);
  }
});


/***/ }),
/* 344 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var createProperty = __webpack_require__(134);

// WebKit Array.of isn't generic
$export($export.S + $export.F * __webpack_require__(6)(function () {
  function F() { /* empty */ }
  return !(Array.of.call(F) instanceof F);
}), 'Array', {
  // 22.1.2.3 Array.of( ...items)
  of: function of(/* ...args */) {
    var index = 0;
    var aLen = arguments.length;
    var result = new (typeof this == 'function' ? this : Array)(aLen);
    while (aLen > index) createProperty(result, index, arguments[index++]);
    result.length = aLen;
    return result;
  }
});


/***/ }),
/* 345 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $reduce = __webpack_require__(193);

$export($export.P + $export.F * !__webpack_require__(33)([].reduceRight, true), 'Array', {
  // 22.1.3.19 / 15.4.4.22 Array.prototype.reduceRight(callbackfn [, initialValue])
  reduceRight: function reduceRight(callbackfn /* , initialValue */) {
    return $reduce(this, callbackfn, arguments.length, arguments[1], true);
  }
});


/***/ }),
/* 346 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $reduce = __webpack_require__(193);

$export($export.P + $export.F * !__webpack_require__(33)([].reduce, true), 'Array', {
  // 22.1.3.18 / 15.4.4.21 Array.prototype.reduce(callbackfn [, initialValue])
  reduce: function reduce(callbackfn /* , initialValue */) {
    return $reduce(this, callbackfn, arguments.length, arguments[1], false);
  }
});


/***/ }),
/* 347 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var html = __webpack_require__(138);
var cof = __webpack_require__(31);
var toAbsoluteIndex = __webpack_require__(61);
var toLength = __webpack_require__(14);
var arraySlice = [].slice;

// fallback for not array-like ES3 strings and DOM objects
$export($export.P + $export.F * __webpack_require__(6)(function () {
  if (html) arraySlice.call(html);
}), 'Array', {
  slice: function slice(begin, end) {
    var len = toLength(this.length);
    var klass = cof(this);
    end = end === undefined ? len : end;
    if (klass == 'Array') return arraySlice.call(this, begin, end);
    var start = toAbsoluteIndex(begin, len);
    var upTo = toAbsoluteIndex(end, len);
    var size = toLength(upTo - start);
    var cloned = Array(size);
    var i = 0;
    for (; i < size; i++) cloned[i] = klass == 'String'
      ? this.charAt(start + i)
      : this[start + i];
    return cloned;
  }
});


/***/ }),
/* 348 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $some = __webpack_require__(37)(3);

$export($export.P + $export.F * !__webpack_require__(33)([].some, true), 'Array', {
  // 22.1.3.23 / 15.4.4.17 Array.prototype.some(callbackfn [, thisArg])
  some: function some(callbackfn /* , thisArg */) {
    return $some(this, callbackfn, arguments[1]);
  }
});


/***/ }),
/* 349 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var aFunction = __webpack_require__(19);
var toObject = __webpack_require__(16);
var fails = __webpack_require__(6);
var $sort = [].sort;
var test = [1, 2, 3];

$export($export.P + $export.F * (fails(function () {
  // IE8-
  test.sort(undefined);
}) || !fails(function () {
  // V8 bug
  test.sort(null);
  // Old WebKit
}) || !__webpack_require__(33)($sort)), 'Array', {
  // 22.1.3.25 Array.prototype.sort(comparefn)
  sort: function sort(comparefn) {
    return comparefn === undefined
      ? $sort.call(toObject(this))
      : $sort.call(toObject(this), aFunction(comparefn));
  }
});


/***/ }),
/* 350 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(60)('Array');


/***/ }),
/* 351 */
/***/ (function(module, exports, __webpack_require__) {

// 20.3.3.1 / 15.9.4.4 Date.now()
var $export = __webpack_require__(0);

$export($export.S, 'Date', { now: function () { return new Date().getTime(); } });


/***/ }),
/* 352 */
/***/ (function(module, exports, __webpack_require__) {

// 20.3.4.36 / 15.9.5.43 Date.prototype.toISOString()
var $export = __webpack_require__(0);
var toISOString = __webpack_require__(322);

// PhantomJS / old WebKit has a broken implementations
$export($export.P + $export.F * (Date.prototype.toISOString !== toISOString), 'Date', {
  toISOString: toISOString
});


/***/ }),
/* 353 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var toObject = __webpack_require__(16);
var toPrimitive = __webpack_require__(42);

$export($export.P + $export.F * __webpack_require__(6)(function () {
  return new Date(NaN).toJSON() !== null
    || Date.prototype.toJSON.call({ toISOString: function () { return 1; } }) !== 1;
}), 'Date', {
  // eslint-disable-next-line no-unused-vars
  toJSON: function toJSON(key) {
    var O = toObject(this);
    var pv = toPrimitive(O);
    return typeof pv == 'number' && !isFinite(pv) ? null : O.toISOString();
  }
});


/***/ }),
/* 354 */
/***/ (function(module, exports, __webpack_require__) {

var TO_PRIMITIVE = __webpack_require__(9)('toPrimitive');
var proto = Date.prototype;

if (!(TO_PRIMITIVE in proto)) __webpack_require__(23)(proto, TO_PRIMITIVE, __webpack_require__(323));


/***/ }),
/* 355 */
/***/ (function(module, exports, __webpack_require__) {

var DateProto = Date.prototype;
var INVALID_DATE = 'Invalid Date';
var TO_STRING = 'toString';
var $toString = DateProto[TO_STRING];
var getTime = DateProto.getTime;
if (new Date(NaN) + '' != INVALID_DATE) {
  __webpack_require__(24)(DateProto, TO_STRING, function toString() {
    var value = getTime.call(this);
    // eslint-disable-next-line no-self-compare
    return value === value ? $toString.call(this) : INVALID_DATE;
  });
}


/***/ }),
/* 356 */
/***/ (function(module, exports, __webpack_require__) {

// 19.2.3.2 / 15.3.4.5 Function.prototype.bind(thisArg, args...)
var $export = __webpack_require__(0);

$export($export.P, 'Function', { bind: __webpack_require__(194) });


/***/ }),
/* 357 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isObject = __webpack_require__(7);
var getPrototypeOf = __webpack_require__(29);
var HAS_INSTANCE = __webpack_require__(9)('hasInstance');
var FunctionProto = Function.prototype;
// 19.2.3.6 Function.prototype[@@hasInstance](V)
if (!(HAS_INSTANCE in FunctionProto)) __webpack_require__(13).f(FunctionProto, HAS_INSTANCE, { value: function (O) {
  if (typeof this != 'function' || !isObject(O)) return false;
  if (!isObject(this.prototype)) return O instanceof this;
  // for environment w/o native `@@hasInstance` logic enough `instanceof`, but add this:
  while (O = getPrototypeOf(O)) if (this.prototype === O) return true;
  return false;
} });


/***/ }),
/* 358 */
/***/ (function(module, exports, __webpack_require__) {

var dP = __webpack_require__(13).f;
var FProto = Function.prototype;
var nameRE = /^\s*function ([^ (]*)/;
var NAME = 'name';

// 19.2.4.2 name
NAME in FProto || __webpack_require__(12) && dP(FProto, NAME, {
  configurable: true,
  get: function () {
    try {
      return ('' + this).match(nameRE)[1];
    } catch (e) {
      return '';
    }
  }
});


/***/ }),
/* 359 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.3 Math.acosh(x)
var $export = __webpack_require__(0);
var log1p = __webpack_require__(204);
var sqrt = Math.sqrt;
var $acosh = Math.acosh;

$export($export.S + $export.F * !($acosh
  // V8 bug: https://code.google.com/p/v8/issues/detail?id=3509
  && Math.floor($acosh(Number.MAX_VALUE)) == 710
  // Tor Browser bug: Math.acosh(Infinity) -> NaN
  && $acosh(Infinity) == Infinity
), 'Math', {
  acosh: function acosh(x) {
    return (x = +x) < 1 ? NaN : x > 94906265.62425156
      ? Math.log(x) + Math.LN2
      : log1p(x - 1 + sqrt(x - 1) * sqrt(x + 1));
  }
});


/***/ }),
/* 360 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.5 Math.asinh(x)
var $export = __webpack_require__(0);
var $asinh = Math.asinh;

function asinh(x) {
  return !isFinite(x = +x) || x == 0 ? x : x < 0 ? -asinh(-x) : Math.log(x + Math.sqrt(x * x + 1));
}

// Tor Browser bug: Math.asinh(0) -> -0
$export($export.S + $export.F * !($asinh && 1 / $asinh(0) > 0), 'Math', { asinh: asinh });


/***/ }),
/* 361 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.7 Math.atanh(x)
var $export = __webpack_require__(0);
var $atanh = Math.atanh;

// Tor Browser bug: Math.atanh(-0) -> 0
$export($export.S + $export.F * !($atanh && 1 / $atanh(-0) < 0), 'Math', {
  atanh: function atanh(x) {
    return (x = +x) == 0 ? x : Math.log((1 + x) / (1 - x)) / 2;
  }
});


/***/ }),
/* 362 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.9 Math.cbrt(x)
var $export = __webpack_require__(0);
var sign = __webpack_require__(144);

$export($export.S, 'Math', {
  cbrt: function cbrt(x) {
    return sign(x = +x) * Math.pow(Math.abs(x), 1 / 3);
  }
});


/***/ }),
/* 363 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.11 Math.clz32(x)
var $export = __webpack_require__(0);

$export($export.S, 'Math', {
  clz32: function clz32(x) {
    return (x >>>= 0) ? 31 - Math.floor(Math.log(x + 0.5) * Math.LOG2E) : 32;
  }
});


/***/ }),
/* 364 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.12 Math.cosh(x)
var $export = __webpack_require__(0);
var exp = Math.exp;

$export($export.S, 'Math', {
  cosh: function cosh(x) {
    return (exp(x = +x) + exp(-x)) / 2;
  }
});


/***/ }),
/* 365 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.14 Math.expm1(x)
var $export = __webpack_require__(0);
var $expm1 = __webpack_require__(143);

$export($export.S + $export.F * ($expm1 != Math.expm1), 'Math', { expm1: $expm1 });


/***/ }),
/* 366 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.16 Math.fround(x)
var $export = __webpack_require__(0);

$export($export.S, 'Math', { fround: __webpack_require__(203) });


/***/ }),
/* 367 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.17 Math.hypot([value1[, value2[, … ]]])
var $export = __webpack_require__(0);
var abs = Math.abs;

$export($export.S, 'Math', {
  hypot: function hypot(value1, value2) { // eslint-disable-line no-unused-vars
    var sum = 0;
    var i = 0;
    var aLen = arguments.length;
    var larg = 0;
    var arg, div;
    while (i < aLen) {
      arg = abs(arguments[i++]);
      if (larg < arg) {
        div = larg / arg;
        sum = sum * div * div + 1;
        larg = arg;
      } else if (arg > 0) {
        div = arg / larg;
        sum += div * div;
      } else sum += arg;
    }
    return larg === Infinity ? Infinity : larg * Math.sqrt(sum);
  }
});


/***/ }),
/* 368 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.18 Math.imul(x, y)
var $export = __webpack_require__(0);
var $imul = Math.imul;

// some WebKit versions fails with big numbers, some has wrong arity
$export($export.S + $export.F * __webpack_require__(6)(function () {
  return $imul(0xffffffff, 5) != -5 || $imul.length != 2;
}), 'Math', {
  imul: function imul(x, y) {
    var UINT16 = 0xffff;
    var xn = +x;
    var yn = +y;
    var xl = UINT16 & xn;
    var yl = UINT16 & yn;
    return 0 | xl * yl + ((UINT16 & xn >>> 16) * yl + xl * (UINT16 & yn >>> 16) << 16 >>> 0);
  }
});


/***/ }),
/* 369 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.21 Math.log10(x)
var $export = __webpack_require__(0);

$export($export.S, 'Math', {
  log10: function log10(x) {
    return Math.log(x) * Math.LOG10E;
  }
});


/***/ }),
/* 370 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.20 Math.log1p(x)
var $export = __webpack_require__(0);

$export($export.S, 'Math', { log1p: __webpack_require__(204) });


/***/ }),
/* 371 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.22 Math.log2(x)
var $export = __webpack_require__(0);

$export($export.S, 'Math', {
  log2: function log2(x) {
    return Math.log(x) / Math.LN2;
  }
});


/***/ }),
/* 372 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.28 Math.sign(x)
var $export = __webpack_require__(0);

$export($export.S, 'Math', { sign: __webpack_require__(144) });


/***/ }),
/* 373 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.30 Math.sinh(x)
var $export = __webpack_require__(0);
var expm1 = __webpack_require__(143);
var exp = Math.exp;

// V8 near Chromium 38 has a problem with very small numbers
$export($export.S + $export.F * __webpack_require__(6)(function () {
  return !Math.sinh(-2e-17) != -2e-17;
}), 'Math', {
  sinh: function sinh(x) {
    return Math.abs(x = +x) < 1
      ? (expm1(x) - expm1(-x)) / 2
      : (exp(x - 1) - exp(-x - 1)) * (Math.E / 2);
  }
});


/***/ }),
/* 374 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.33 Math.tanh(x)
var $export = __webpack_require__(0);
var expm1 = __webpack_require__(143);
var exp = Math.exp;

$export($export.S, 'Math', {
  tanh: function tanh(x) {
    var a = expm1(x = +x);
    var b = expm1(-x);
    return a == Infinity ? 1 : b == Infinity ? -1 : (a - b) / (exp(x) + exp(-x));
  }
});


/***/ }),
/* 375 */
/***/ (function(module, exports, __webpack_require__) {

// 20.2.2.34 Math.trunc(x)
var $export = __webpack_require__(0);

$export($export.S, 'Math', {
  trunc: function trunc(it) {
    return (it > 0 ? Math.floor : Math.ceil)(it);
  }
});


/***/ }),
/* 376 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var global = __webpack_require__(4);
var has = __webpack_require__(22);
var cof = __webpack_require__(31);
var inheritIfRequired = __webpack_require__(139);
var toPrimitive = __webpack_require__(42);
var fails = __webpack_require__(6);
var gOPN = __webpack_require__(57).f;
var gOPD = __webpack_require__(28).f;
var dP = __webpack_require__(13).f;
var $trim = __webpack_require__(76).trim;
var NUMBER = 'Number';
var $Number = global[NUMBER];
var Base = $Number;
var proto = $Number.prototype;
// Opera ~12 has broken Object#toString
var BROKEN_COF = cof(__webpack_require__(56)(proto)) == NUMBER;
var TRIM = 'trim' in String.prototype;

// 7.1.3 ToNumber(argument)
var toNumber = function (argument) {
  var it = toPrimitive(argument, false);
  if (typeof it == 'string' && it.length > 2) {
    it = TRIM ? it.trim() : $trim(it, 3);
    var first = it.charCodeAt(0);
    var third, radix, maxCode;
    if (first === 43 || first === 45) {
      third = it.charCodeAt(2);
      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix
    } else if (first === 48) {
      switch (it.charCodeAt(1)) {
        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal /^0b[01]+$/i
        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal /^0o[0-7]+$/i
        default: return +it;
      }
      for (var digits = it.slice(2), i = 0, l = digits.length, code; i < l; i++) {
        code = digits.charCodeAt(i);
        // parseInt parses a string to a first unavailable symbol
        // but ToNumber should return NaN if a string contains unavailable symbols
        if (code < 48 || code > maxCode) return NaN;
      } return parseInt(digits, radix);
    }
  } return +it;
};

if (!$Number(' 0o1') || !$Number('0b1') || $Number('+0x1')) {
  $Number = function Number(value) {
    var it = arguments.length < 1 ? 0 : value;
    var that = this;
    return that instanceof $Number
      // check on 1..constructor(foo) case
      && (BROKEN_COF ? fails(function () { proto.valueOf.call(that); }) : cof(that) != NUMBER)
        ? inheritIfRequired(new Base(toNumber(it)), that, $Number) : toNumber(it);
  };
  for (var keys = __webpack_require__(12) ? gOPN(Base) : (
    // ES3:
    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +
    // ES6 (in case, if modules with ES6 Number statics required before):
    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +
    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'
  ).split(','), j = 0, key; keys.length > j; j++) {
    if (has(Base, key = keys[j]) && !has($Number, key)) {
      dP($Number, key, gOPD(Base, key));
    }
  }
  $Number.prototype = proto;
  proto.constructor = $Number;
  __webpack_require__(24)(global, NUMBER, $Number);
}


/***/ }),
/* 377 */
/***/ (function(module, exports, __webpack_require__) {

// 20.1.2.1 Number.EPSILON
var $export = __webpack_require__(0);

$export($export.S, 'Number', { EPSILON: Math.pow(2, -52) });


/***/ }),
/* 378 */
/***/ (function(module, exports, __webpack_require__) {

// 20.1.2.2 Number.isFinite(number)
var $export = __webpack_require__(0);
var _isFinite = __webpack_require__(4).isFinite;

$export($export.S, 'Number', {
  isFinite: function isFinite(it) {
    return typeof it == 'number' && _isFinite(it);
  }
});


/***/ }),
/* 379 */
/***/ (function(module, exports, __webpack_require__) {

// 20.1.2.3 Number.isInteger(number)
var $export = __webpack_require__(0);

$export($export.S, 'Number', { isInteger: __webpack_require__(200) });


/***/ }),
/* 380 */
/***/ (function(module, exports, __webpack_require__) {

// 20.1.2.4 Number.isNaN(number)
var $export = __webpack_require__(0);

$export($export.S, 'Number', {
  isNaN: function isNaN(number) {
    // eslint-disable-next-line no-self-compare
    return number != number;
  }
});


/***/ }),
/* 381 */
/***/ (function(module, exports, __webpack_require__) {

// 20.1.2.5 Number.isSafeInteger(number)
var $export = __webpack_require__(0);
var isInteger = __webpack_require__(200);
var abs = Math.abs;

$export($export.S, 'Number', {
  isSafeInteger: function isSafeInteger(number) {
    return isInteger(number) && abs(number) <= 0x1fffffffffffff;
  }
});


/***/ }),
/* 382 */
/***/ (function(module, exports, __webpack_require__) {

// 20.1.2.6 Number.MAX_SAFE_INTEGER
var $export = __webpack_require__(0);

$export($export.S, 'Number', { MAX_SAFE_INTEGER: 0x1fffffffffffff });


/***/ }),
/* 383 */
/***/ (function(module, exports, __webpack_require__) {

// 20.1.2.10 Number.MIN_SAFE_INTEGER
var $export = __webpack_require__(0);

$export($export.S, 'Number', { MIN_SAFE_INTEGER: -0x1fffffffffffff });


/***/ }),
/* 384 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
var $parseFloat = __webpack_require__(212);
// 20.1.2.12 Number.parseFloat(string)
$export($export.S + $export.F * (Number.parseFloat != $parseFloat), 'Number', { parseFloat: $parseFloat });


/***/ }),
/* 385 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
var $parseInt = __webpack_require__(213);
// 20.1.2.13 Number.parseInt(string, radix)
$export($export.S + $export.F * (Number.parseInt != $parseInt), 'Number', { parseInt: $parseInt });


/***/ }),
/* 386 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var toInteger = __webpack_require__(41);
var aNumberValue = __webpack_require__(190);
var repeat = __webpack_require__(151);
var $toFixed = 1.0.toFixed;
var floor = Math.floor;
var data = [0, 0, 0, 0, 0, 0];
var ERROR = 'Number.toFixed: incorrect invocation!';
var ZERO = '0';

var multiply = function (n, c) {
  var i = -1;
  var c2 = c;
  while (++i < 6) {
    c2 += n * data[i];
    data[i] = c2 % 1e7;
    c2 = floor(c2 / 1e7);
  }
};
var divide = function (n) {
  var i = 6;
  var c = 0;
  while (--i >= 0) {
    c += data[i];
    data[i] = floor(c / n);
    c = (c % n) * 1e7;
  }
};
var numToString = function () {
  var i = 6;
  var s = '';
  while (--i >= 0) {
    if (s !== '' || i === 0 || data[i] !== 0) {
      var t = String(data[i]);
      s = s === '' ? t : s + repeat.call(ZERO, 7 - t.length) + t;
    }
  } return s;
};
var pow = function (x, n, acc) {
  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);
};
var log = function (x) {
  var n = 0;
  var x2 = x;
  while (x2 >= 4096) {
    n += 12;
    x2 /= 4096;
  }
  while (x2 >= 2) {
    n += 1;
    x2 /= 2;
  } return n;
};

$export($export.P + $export.F * (!!$toFixed && (
  0.00008.toFixed(3) !== '0.000' ||
  0.9.toFixed(0) !== '1' ||
  1.255.toFixed(2) !== '1.25' ||
  1000000000000000128.0.toFixed(0) !== '1000000000000000128'
) || !__webpack_require__(6)(function () {
  // V8 ~ Android 4.3-
  $toFixed.call({});
})), 'Number', {
  toFixed: function toFixed(fractionDigits) {
    var x = aNumberValue(this, ERROR);
    var f = toInteger(fractionDigits);
    var s = '';
    var m = ZERO;
    var e, z, j, k;
    if (f < 0 || f > 20) throw RangeError(ERROR);
    // eslint-disable-next-line no-self-compare
    if (x != x) return 'NaN';
    if (x <= -1e21 || x >= 1e21) return String(x);
    if (x < 0) {
      s = '-';
      x = -x;
    }
    if (x > 1e-21) {
      e = log(x * pow(2, 69, 1)) - 69;
      z = e < 0 ? x * pow(2, -e, 1) : x / pow(2, e, 1);
      z *= 0x10000000000000;
      e = 52 - e;
      if (e > 0) {
        multiply(0, z);
        j = f;
        while (j >= 7) {
          multiply(1e7, 0);
          j -= 7;
        }
        multiply(pow(10, j, 1), 0);
        j = e - 1;
        while (j >= 23) {
          divide(1 << 23);
          j -= 23;
        }
        divide(1 << j);
        multiply(1, 1);
        divide(2);
        m = numToString();
      } else {
        multiply(0, z);
        multiply(1 << -e, 0);
        m = numToString() + repeat.call(ZERO, f);
      }
    }
    if (f > 0) {
      k = m.length;
      m = s + (k <= f ? '0.' + repeat.call(ZERO, f - k) + m : m.slice(0, k - f) + '.' + m.slice(k - f));
    } else {
      m = s + m;
    } return m;
  }
});


/***/ }),
/* 387 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $fails = __webpack_require__(6);
var aNumberValue = __webpack_require__(190);
var $toPrecision = 1.0.toPrecision;

$export($export.P + $export.F * ($fails(function () {
  // IE7-
  return $toPrecision.call(1, undefined) !== '1';
}) || !$fails(function () {
  // V8 ~ Android 4.3-
  $toPrecision.call({});
})), 'Number', {
  toPrecision: function toPrecision(precision) {
    var that = aNumberValue(this, 'Number#toPrecision: incorrect invocation!');
    return precision === undefined ? $toPrecision.call(that) : $toPrecision.call(that, precision);
  }
});


/***/ }),
/* 388 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.3.1 Object.assign(target, source)
var $export = __webpack_require__(0);

$export($export.S + $export.F, 'Object', { assign: __webpack_require__(206) });


/***/ }),
/* 389 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])
$export($export.S, 'Object', { create: __webpack_require__(56) });


/***/ }),
/* 390 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)
$export($export.S + $export.F * !__webpack_require__(12), 'Object', { defineProperties: __webpack_require__(207) });


/***/ }),
/* 391 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)
$export($export.S + $export.F * !__webpack_require__(12), 'Object', { defineProperty: __webpack_require__(13).f });


/***/ }),
/* 392 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.5 Object.freeze(O)
var isObject = __webpack_require__(7);
var meta = __webpack_require__(50).onFreeze;

__webpack_require__(40)('freeze', function ($freeze) {
  return function freeze(it) {
    return $freeze && isObject(it) ? $freeze(meta(it)) : it;
  };
});


/***/ }),
/* 393 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)
var toIObject = __webpack_require__(26);
var $getOwnPropertyDescriptor = __webpack_require__(28).f;

__webpack_require__(40)('getOwnPropertyDescriptor', function () {
  return function getOwnPropertyDescriptor(it, key) {
    return $getOwnPropertyDescriptor(toIObject(it), key);
  };
});


/***/ }),
/* 394 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.7 Object.getOwnPropertyNames(O)
__webpack_require__(40)('getOwnPropertyNames', function () {
  return __webpack_require__(208).f;
});


/***/ }),
/* 395 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.9 Object.getPrototypeOf(O)
var toObject = __webpack_require__(16);
var $getPrototypeOf = __webpack_require__(29);

__webpack_require__(40)('getPrototypeOf', function () {
  return function getPrototypeOf(it) {
    return $getPrototypeOf(toObject(it));
  };
});


/***/ }),
/* 396 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.11 Object.isExtensible(O)
var isObject = __webpack_require__(7);

__webpack_require__(40)('isExtensible', function ($isExtensible) {
  return function isExtensible(it) {
    return isObject(it) ? $isExtensible ? $isExtensible(it) : true : false;
  };
});


/***/ }),
/* 397 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.12 Object.isFrozen(O)
var isObject = __webpack_require__(7);

__webpack_require__(40)('isFrozen', function ($isFrozen) {
  return function isFrozen(it) {
    return isObject(it) ? $isFrozen ? $isFrozen(it) : false : true;
  };
});


/***/ }),
/* 398 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.13 Object.isSealed(O)
var isObject = __webpack_require__(7);

__webpack_require__(40)('isSealed', function ($isSealed) {
  return function isSealed(it) {
    return isObject(it) ? $isSealed ? $isSealed(it) : false : true;
  };
});


/***/ }),
/* 399 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.3.10 Object.is(value1, value2)
var $export = __webpack_require__(0);
$export($export.S, 'Object', { is: __webpack_require__(329) });


/***/ }),
/* 400 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.14 Object.keys(O)
var toObject = __webpack_require__(16);
var $keys = __webpack_require__(51);

__webpack_require__(40)('keys', function () {
  return function keys(it) {
    return $keys(toObject(it));
  };
});


/***/ }),
/* 401 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.15 Object.preventExtensions(O)
var isObject = __webpack_require__(7);
var meta = __webpack_require__(50).onFreeze;

__webpack_require__(40)('preventExtensions', function ($preventExtensions) {
  return function preventExtensions(it) {
    return $preventExtensions && isObject(it) ? $preventExtensions(meta(it)) : it;
  };
});


/***/ }),
/* 402 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.2.17 Object.seal(O)
var isObject = __webpack_require__(7);
var meta = __webpack_require__(50).onFreeze;

__webpack_require__(40)('seal', function ($seal) {
  return function seal(it) {
    return $seal && isObject(it) ? $seal(meta(it)) : it;
  };
});


/***/ }),
/* 403 */
/***/ (function(module, exports, __webpack_require__) {

// 19.1.3.19 Object.setPrototypeOf(O, proto)
var $export = __webpack_require__(0);
$export($export.S, 'Object', { setPrototypeOf: __webpack_require__(147).set });


/***/ }),
/* 404 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 19.1.3.6 Object.prototype.toString()
var classof = __webpack_require__(84);
var test = {};
test[__webpack_require__(9)('toStringTag')] = 'z';
if (test + '' != '[object z]') {
  __webpack_require__(24)(Object.prototype, 'toString', function toString() {
    return '[object ' + classof(this) + ']';
  }, true);
}


/***/ }),
/* 405 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
var $parseFloat = __webpack_require__(212);
// 18.2.4 parseFloat(string)
$export($export.G + $export.F * (parseFloat != $parseFloat), { parseFloat: $parseFloat });


/***/ }),
/* 406 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
var $parseInt = __webpack_require__(213);
// 18.2.5 parseInt(string, radix)
$export($export.G + $export.F * (parseInt != $parseInt), { parseInt: $parseInt });


/***/ }),
/* 407 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var LIBRARY = __webpack_require__(55);
var global = __webpack_require__(4);
var ctx = __webpack_require__(32);
var classof = __webpack_require__(84);
var $export = __webpack_require__(0);
var isObject = __webpack_require__(7);
var aFunction = __webpack_require__(19);
var anInstance = __webpack_require__(53);
var forOf = __webpack_require__(54);
var speciesConstructor = __webpack_require__(108);
var task = __webpack_require__(153).set;
var microtask = __webpack_require__(145)();
var newPromiseCapabilityModule = __webpack_require__(146);
var perform = __webpack_require__(214);
var promiseResolve = __webpack_require__(215);
var PROMISE = 'Promise';
var TypeError = global.TypeError;
var process = global.process;
var $Promise = global[PROMISE];
var isNode = classof(process) == 'process';
var empty = function () { /* empty */ };
var Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;
var newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;

var USE_NATIVE = !!function () {
  try {
    // correct subclassing with @@species support
    var promise = $Promise.resolve(1);
    var FakePromise = (promise.constructor = {})[__webpack_require__(9)('species')] = function (exec) {
      exec(empty, empty);
    };
    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test
    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise;
  } catch (e) { /* empty */ }
}();

// helpers
var sameConstructor = LIBRARY ? function (a, b) {
  // with library wrapper special case
  return a === b || a === $Promise && b === Wrapper;
} : function (a, b) {
  return a === b;
};
var isThenable = function (it) {
  var then;
  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;
};
var notify = function (promise, isReject) {
  if (promise._n) return;
  promise._n = true;
  var chain = promise._c;
  microtask(function () {
    var value = promise._v;
    var ok = promise._s == 1;
    var i = 0;
    var run = function (reaction) {
      var handler = ok ? reaction.ok : reaction.fail;
      var resolve = reaction.resolve;
      var reject = reaction.reject;
      var domain = reaction.domain;
      var result, then;
      try {
        if (handler) {
          if (!ok) {
            if (promise._h == 2) onHandleUnhandled(promise);
            promise._h = 1;
          }
          if (handler === true) result = value;
          else {
            if (domain) domain.enter();
            result = handler(value);
            if (domain) domain.exit();
          }
          if (result === reaction.promise) {
            reject(TypeError('Promise-chain cycle'));
          } else if (then = isThenable(result)) {
            then.call(result, resolve, reject);
          } else resolve(result);
        } else reject(value);
      } catch (e) {
        reject(e);
      }
    };
    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach
    promise._c = [];
    promise._n = false;
    if (isReject && !promise._h) onUnhandled(promise);
  });
};
var onUnhandled = function (promise) {
  task.call(global, function () {
    var value = promise._v;
    var unhandled = isUnhandled(promise);
    var result, handler, console;
    if (unhandled) {
      result = perform(function () {
        if (isNode) {
          process.emit('unhandledRejection', value, promise);
        } else if (handler = global.onunhandledrejection) {
          handler({ promise: promise, reason: value });
        } else if ((console = global.console) && console.error) {
          console.error('Unhandled promise rejection', value);
        }
      });
      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should
      promise._h = isNode || isUnhandled(promise) ? 2 : 1;
    } promise._a = undefined;
    if (unhandled && result.e) throw result.v;
  });
};
var isUnhandled = function (promise) {
  if (promise._h == 1) return false;
  var chain = promise._a || promise._c;
  var i = 0;
  var reaction;
  while (chain.length > i) {
    reaction = chain[i++];
    if (reaction.fail || !isUnhandled(reaction.promise)) return false;
  } return true;
};
var onHandleUnhandled = function (promise) {
  task.call(global, function () {
    var handler;
    if (isNode) {
      process.emit('rejectionHandled', promise);
    } else if (handler = global.onrejectionhandled) {
      handler({ promise: promise, reason: promise._v });
    }
  });
};
var $reject = function (value) {
  var promise = this;
  if (promise._d) return;
  promise._d = true;
  promise = promise._w || promise; // unwrap
  promise._v = value;
  promise._s = 2;
  if (!promise._a) promise._a = promise._c.slice();
  notify(promise, true);
};
var $resolve = function (value) {
  var promise = this;
  var then;
  if (promise._d) return;
  promise._d = true;
  promise = promise._w || promise; // unwrap
  try {
    if (promise === value) throw TypeError("Promise can't be resolved itself");
    if (then = isThenable(value)) {
      microtask(function () {
        var wrapper = { _w: promise, _d: false }; // wrap
        try {
          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));
        } catch (e) {
          $reject.call(wrapper, e);
        }
      });
    } else {
      promise._v = value;
      promise._s = 1;
      notify(promise, false);
    }
  } catch (e) {
    $reject.call({ _w: promise, _d: false }, e); // wrap
  }
};

// constructor polyfill
if (!USE_NATIVE) {
  // 25.4.3.1 Promise(executor)
  $Promise = function Promise(executor) {
    anInstance(this, $Promise, PROMISE, '_h');
    aFunction(executor);
    Internal.call(this);
    try {
      executor(ctx($resolve, this, 1), ctx($reject, this, 1));
    } catch (err) {
      $reject.call(this, err);
    }
  };
  // eslint-disable-next-line no-unused-vars
  Internal = function Promise(executor) {
    this._c = [];             // <- awaiting reactions
    this._a = undefined;      // <- checked in isUnhandled reactions
    this._s = 0;              // <- state
    this._d = false;          // <- done
    this._v = undefined;      // <- value
    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled
    this._n = false;          // <- notify
  };
  Internal.prototype = __webpack_require__(59)($Promise.prototype, {
    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)
    then: function then(onFulfilled, onRejected) {
      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));
      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;
      reaction.fail = typeof onRejected == 'function' && onRejected;
      reaction.domain = isNode ? process.domain : undefined;
      this._c.push(reaction);
      if (this._a) this._a.push(reaction);
      if (this._s) notify(this, false);
      return reaction.promise;
    },
    // 25.4.5.1 Promise.prototype.catch(onRejected)
    'catch': function (onRejected) {
      return this.then(undefined, onRejected);
    }
  });
  OwnPromiseCapability = function () {
    var promise = new Internal();
    this.promise = promise;
    this.resolve = ctx($resolve, promise, 1);
    this.reject = ctx($reject, promise, 1);
  };
  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {
    return sameConstructor($Promise, C)
      ? new OwnPromiseCapability(C)
      : newGenericPromiseCapability(C);
  };
}

$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });
__webpack_require__(75)($Promise, PROMISE);
__webpack_require__(60)(PROMISE);
Wrapper = __webpack_require__(38)[PROMISE];

// statics
$export($export.S + $export.F * !USE_NATIVE, PROMISE, {
  // 25.4.4.5 Promise.reject(r)
  reject: function reject(r) {
    var capability = newPromiseCapability(this);
    var $$reject = capability.reject;
    $$reject(r);
    return capability.promise;
  }
});
$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {
  // 25.4.4.6 Promise.resolve(x)
  resolve: function resolve(x) {
    // instanceof instead of internal slot check because we should fix it without replacement native Promise core
    if (x instanceof $Promise && sameConstructor(x.constructor, this)) return x;
    return promiseResolve(this, x);
  }
});
$export($export.S + $export.F * !(USE_NATIVE && __webpack_require__(102)(function (iter) {
  $Promise.all(iter)['catch'](empty);
})), PROMISE, {
  // 25.4.4.1 Promise.all(iterable)
  all: function all(iterable) {
    var C = this;
    var capability = newPromiseCapability(C);
    var resolve = capability.resolve;
    var reject = capability.reject;
    var result = perform(function () {
      var values = [];
      var index = 0;
      var remaining = 1;
      forOf(iterable, false, function (promise) {
        var $index = index++;
        var alreadyCalled = false;
        values.push(undefined);
        remaining++;
        C.resolve(promise).then(function (value) {
          if (alreadyCalled) return;
          alreadyCalled = true;
          values[$index] = value;
          --remaining || resolve(values);
        }, reject);
      });
      --remaining || resolve(values);
    });
    if (result.e) reject(result.v);
    return capability.promise;
  },
  // 25.4.4.4 Promise.race(iterable)
  race: function race(iterable) {
    var C = this;
    var capability = newPromiseCapability(C);
    var reject = capability.reject;
    var result = perform(function () {
      forOf(iterable, false, function (promise) {
        C.resolve(promise).then(capability.resolve, reject);
      });
    });
    if (result.e) reject(result.v);
    return capability.promise;
  }
});


/***/ }),
/* 408 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.1 Reflect.apply(target, thisArgument, argumentsList)
var $export = __webpack_require__(0);
var aFunction = __webpack_require__(19);
var anObject = __webpack_require__(3);
var rApply = (__webpack_require__(4).Reflect || {}).apply;
var fApply = Function.apply;
// MS Edge argumentsList argument is optional
$export($export.S + $export.F * !__webpack_require__(6)(function () {
  rApply(function () { /* empty */ });
}), 'Reflect', {
  apply: function apply(target, thisArgument, argumentsList) {
    var T = aFunction(target);
    var L = anObject(argumentsList);
    return rApply ? rApply(T, thisArgument, L) : fApply.call(T, thisArgument, L);
  }
});


/***/ }),
/* 409 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.2 Reflect.construct(target, argumentsList [, newTarget])
var $export = __webpack_require__(0);
var create = __webpack_require__(56);
var aFunction = __webpack_require__(19);
var anObject = __webpack_require__(3);
var isObject = __webpack_require__(7);
var fails = __webpack_require__(6);
var bind = __webpack_require__(194);
var rConstruct = (__webpack_require__(4).Reflect || {}).construct;

// MS Edge supports only 2 arguments and argumentsList argument is optional
// FF Nightly sets third argument as `new.target`, but does not create `this` from it
var NEW_TARGET_BUG = fails(function () {
  function F() { /* empty */ }
  return !(rConstruct(function () { /* empty */ }, [], F) instanceof F);
});
var ARGS_BUG = !fails(function () {
  rConstruct(function () { /* empty */ });
});

$export($export.S + $export.F * (NEW_TARGET_BUG || ARGS_BUG), 'Reflect', {
  construct: function construct(Target, args /* , newTarget */) {
    aFunction(Target);
    anObject(args);
    var newTarget = arguments.length < 3 ? Target : aFunction(arguments[2]);
    if (ARGS_BUG && !NEW_TARGET_BUG) return rConstruct(Target, args, newTarget);
    if (Target == newTarget) {
      // w/o altered newTarget, optimization for 0-4 arguments
      switch (args.length) {
        case 0: return new Target();
        case 1: return new Target(args[0]);
        case 2: return new Target(args[0], args[1]);
        case 3: return new Target(args[0], args[1], args[2]);
        case 4: return new Target(args[0], args[1], args[2], args[3]);
      }
      // w/o altered newTarget, lot of arguments case
      var $args = [null];
      $args.push.apply($args, args);
      return new (bind.apply(Target, $args))();
    }
    // with altered newTarget, not support built-in constructors
    var proto = newTarget.prototype;
    var instance = create(isObject(proto) ? proto : Object.prototype);
    var result = Function.apply.call(Target, instance, args);
    return isObject(result) ? result : instance;
  }
});


/***/ }),
/* 410 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.3 Reflect.defineProperty(target, propertyKey, attributes)
var dP = __webpack_require__(13);
var $export = __webpack_require__(0);
var anObject = __webpack_require__(3);
var toPrimitive = __webpack_require__(42);

// MS Edge has broken Reflect.defineProperty - throwing instead of returning false
$export($export.S + $export.F * __webpack_require__(6)(function () {
  // eslint-disable-next-line no-undef
  Reflect.defineProperty(dP.f({}, 1, { value: 1 }), 1, { value: 2 });
}), 'Reflect', {
  defineProperty: function defineProperty(target, propertyKey, attributes) {
    anObject(target);
    propertyKey = toPrimitive(propertyKey, true);
    anObject(attributes);
    try {
      dP.f(target, propertyKey, attributes);
      return true;
    } catch (e) {
      return false;
    }
  }
});


/***/ }),
/* 411 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.4 Reflect.deleteProperty(target, propertyKey)
var $export = __webpack_require__(0);
var gOPD = __webpack_require__(28).f;
var anObject = __webpack_require__(3);

$export($export.S, 'Reflect', {
  deleteProperty: function deleteProperty(target, propertyKey) {
    var desc = gOPD(anObject(target), propertyKey);
    return desc && !desc.configurable ? false : delete target[propertyKey];
  }
});


/***/ }),
/* 412 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 26.1.5 Reflect.enumerate(target)
var $export = __webpack_require__(0);
var anObject = __webpack_require__(3);
var Enumerate = function (iterated) {
  this._t = anObject(iterated); // target
  this._i = 0;                  // next index
  var keys = this._k = [];      // keys
  var key;
  for (key in iterated) keys.push(key);
};
__webpack_require__(141)(Enumerate, 'Object', function () {
  var that = this;
  var keys = that._k;
  var key;
  do {
    if (that._i >= keys.length) return { value: undefined, done: true };
  } while (!((key = keys[that._i++]) in that._t));
  return { value: key, done: false };
});

$export($export.S, 'Reflect', {
  enumerate: function enumerate(target) {
    return new Enumerate(target);
  }
});


/***/ }),
/* 413 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.7 Reflect.getOwnPropertyDescriptor(target, propertyKey)
var gOPD = __webpack_require__(28);
var $export = __webpack_require__(0);
var anObject = __webpack_require__(3);

$export($export.S, 'Reflect', {
  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(target, propertyKey) {
    return gOPD.f(anObject(target), propertyKey);
  }
});


/***/ }),
/* 414 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.8 Reflect.getPrototypeOf(target)
var $export = __webpack_require__(0);
var getProto = __webpack_require__(29);
var anObject = __webpack_require__(3);

$export($export.S, 'Reflect', {
  getPrototypeOf: function getPrototypeOf(target) {
    return getProto(anObject(target));
  }
});


/***/ }),
/* 415 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.6 Reflect.get(target, propertyKey [, receiver])
var gOPD = __webpack_require__(28);
var getPrototypeOf = __webpack_require__(29);
var has = __webpack_require__(22);
var $export = __webpack_require__(0);
var isObject = __webpack_require__(7);
var anObject = __webpack_require__(3);

function get(target, propertyKey /* , receiver */) {
  var receiver = arguments.length < 3 ? target : arguments[2];
  var desc, proto;
  if (anObject(target) === receiver) return target[propertyKey];
  if (desc = gOPD.f(target, propertyKey)) return has(desc, 'value')
    ? desc.value
    : desc.get !== undefined
      ? desc.get.call(receiver)
      : undefined;
  if (isObject(proto = getPrototypeOf(target))) return get(proto, propertyKey, receiver);
}

$export($export.S, 'Reflect', { get: get });


/***/ }),
/* 416 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.9 Reflect.has(target, propertyKey)
var $export = __webpack_require__(0);

$export($export.S, 'Reflect', {
  has: function has(target, propertyKey) {
    return propertyKey in target;
  }
});


/***/ }),
/* 417 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.10 Reflect.isExtensible(target)
var $export = __webpack_require__(0);
var anObject = __webpack_require__(3);
var $isExtensible = Object.isExtensible;

$export($export.S, 'Reflect', {
  isExtensible: function isExtensible(target) {
    anObject(target);
    return $isExtensible ? $isExtensible(target) : true;
  }
});


/***/ }),
/* 418 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.11 Reflect.ownKeys(target)
var $export = __webpack_require__(0);

$export($export.S, 'Reflect', { ownKeys: __webpack_require__(211) });


/***/ }),
/* 419 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.12 Reflect.preventExtensions(target)
var $export = __webpack_require__(0);
var anObject = __webpack_require__(3);
var $preventExtensions = Object.preventExtensions;

$export($export.S, 'Reflect', {
  preventExtensions: function preventExtensions(target) {
    anObject(target);
    try {
      if ($preventExtensions) $preventExtensions(target);
      return true;
    } catch (e) {
      return false;
    }
  }
});


/***/ }),
/* 420 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.14 Reflect.setPrototypeOf(target, proto)
var $export = __webpack_require__(0);
var setProto = __webpack_require__(147);

if (setProto) $export($export.S, 'Reflect', {
  setPrototypeOf: function setPrototypeOf(target, proto) {
    setProto.check(target, proto);
    try {
      setProto.set(target, proto);
      return true;
    } catch (e) {
      return false;
    }
  }
});


/***/ }),
/* 421 */
/***/ (function(module, exports, __webpack_require__) {

// 26.1.13 Reflect.set(target, propertyKey, V [, receiver])
var dP = __webpack_require__(13);
var gOPD = __webpack_require__(28);
var getPrototypeOf = __webpack_require__(29);
var has = __webpack_require__(22);
var $export = __webpack_require__(0);
var createDesc = __webpack_require__(58);
var anObject = __webpack_require__(3);
var isObject = __webpack_require__(7);

function set(target, propertyKey, V /* , receiver */) {
  var receiver = arguments.length < 4 ? target : arguments[3];
  var ownDesc = gOPD.f(anObject(target), propertyKey);
  var existingDescriptor, proto;
  if (!ownDesc) {
    if (isObject(proto = getPrototypeOf(target))) {
      return set(proto, propertyKey, V, receiver);
    }
    ownDesc = createDesc(0);
  }
  if (has(ownDesc, 'value')) {
    if (ownDesc.writable === false || !isObject(receiver)) return false;
    existingDescriptor = gOPD.f(receiver, propertyKey) || createDesc(0);
    existingDescriptor.value = V;
    dP.f(receiver, propertyKey, existingDescriptor);
    return true;
  }
  return ownDesc.set === undefined ? false : (ownDesc.set.call(receiver, V), true);
}

$export($export.S, 'Reflect', { set: set });


/***/ }),
/* 422 */
/***/ (function(module, exports, __webpack_require__) {

var global = __webpack_require__(4);
var inheritIfRequired = __webpack_require__(139);
var dP = __webpack_require__(13).f;
var gOPN = __webpack_require__(57).f;
var isRegExp = __webpack_require__(101);
var $flags = __webpack_require__(98);
var $RegExp = global.RegExp;
var Base = $RegExp;
var proto = $RegExp.prototype;
var re1 = /a/g;
var re2 = /a/g;
// "new" creates a new object, old webkit buggy here
var CORRECT_NEW = new $RegExp(re1) !== re1;

if (__webpack_require__(12) && (!CORRECT_NEW || __webpack_require__(6)(function () {
  re2[__webpack_require__(9)('match')] = false;
  // RegExp constructor can alter flags and IsRegExp works correct with @@match
  return $RegExp(re1) != re1 || $RegExp(re2) == re2 || $RegExp(re1, 'i') != '/a/i';
}))) {
  $RegExp = function RegExp(p, f) {
    var tiRE = this instanceof $RegExp;
    var piRE = isRegExp(p);
    var fiU = f === undefined;
    return !tiRE && piRE && p.constructor === $RegExp && fiU ? p
      : inheritIfRequired(CORRECT_NEW
        ? new Base(piRE && !fiU ? p.source : p, f)
        : Base((piRE = p instanceof $RegExp) ? p.source : p, piRE && fiU ? $flags.call(p) : f)
      , tiRE ? this : proto, $RegExp);
  };
  var proxy = function (key) {
    key in $RegExp || dP($RegExp, key, {
      configurable: true,
      get: function () { return Base[key]; },
      set: function (it) { Base[key] = it; }
    });
  };
  for (var keys = gOPN(Base), i = 0; keys.length > i;) proxy(keys[i++]);
  proto.constructor = $RegExp;
  $RegExp.prototype = proto;
  __webpack_require__(24)(global, 'RegExp', $RegExp);
}

__webpack_require__(60)('RegExp');


/***/ }),
/* 423 */
/***/ (function(module, exports, __webpack_require__) {

// @@match logic
__webpack_require__(97)('match', 1, function (defined, MATCH, $match) {
  // 21.1.3.11 String.prototype.match(regexp)
  return [function match(regexp) {
    'use strict';
    var O = defined(this);
    var fn = regexp == undefined ? undefined : regexp[MATCH];
    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[MATCH](String(O));
  }, $match];
});


/***/ }),
/* 424 */
/***/ (function(module, exports, __webpack_require__) {

// @@replace logic
__webpack_require__(97)('replace', 2, function (defined, REPLACE, $replace) {
  // 21.1.3.14 String.prototype.replace(searchValue, replaceValue)
  return [function replace(searchValue, replaceValue) {
    'use strict';
    var O = defined(this);
    var fn = searchValue == undefined ? undefined : searchValue[REPLACE];
    return fn !== undefined
      ? fn.call(searchValue, O, replaceValue)
      : $replace.call(String(O), searchValue, replaceValue);
  }, $replace];
});


/***/ }),
/* 425 */
/***/ (function(module, exports, __webpack_require__) {

// @@search logic
__webpack_require__(97)('search', 1, function (defined, SEARCH, $search) {
  // 21.1.3.15 String.prototype.search(regexp)
  return [function search(regexp) {
    'use strict';
    var O = defined(this);
    var fn = regexp == undefined ? undefined : regexp[SEARCH];
    return fn !== undefined ? fn.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));
  }, $search];
});


/***/ }),
/* 426 */
/***/ (function(module, exports, __webpack_require__) {

// @@split logic
__webpack_require__(97)('split', 2, function (defined, SPLIT, $split) {
  'use strict';
  var isRegExp = __webpack_require__(101);
  var _split = $split;
  var $push = [].push;
  var $SPLIT = 'split';
  var LENGTH = 'length';
  var LAST_INDEX = 'lastIndex';
  if (
    'abbc'[$SPLIT](/(b)*/)[1] == 'c' ||
    'test'[$SPLIT](/(?:)/, -1)[LENGTH] != 4 ||
    'ab'[$SPLIT](/(?:ab)*/)[LENGTH] != 2 ||
    '.'[$SPLIT](/(.?)(.?)/)[LENGTH] != 4 ||
    '.'[$SPLIT](/()()/)[LENGTH] > 1 ||
    ''[$SPLIT](/.?/)[LENGTH]
  ) {
    var NPCG = /()??/.exec('')[1] === undefined; // nonparticipating capturing group
    // based on es5-shim implementation, need to rework it
    $split = function (separator, limit) {
      var string = String(this);
      if (separator === undefined && limit === 0) return [];
      // If `separator` is not a regex, use native split
      if (!isRegExp(separator)) return _split.call(string, separator, limit);
      var output = [];
      var flags = (separator.ignoreCase ? 'i' : '') +
                  (separator.multiline ? 'm' : '') +
                  (separator.unicode ? 'u' : '') +
                  (separator.sticky ? 'y' : '');
      var lastLastIndex = 0;
      var splitLimit = limit === undefined ? 4294967295 : limit >>> 0;
      // Make `global` and avoid `lastIndex` issues by working with a copy
      var separatorCopy = new RegExp(separator.source, flags + 'g');
      var separator2, match, lastIndex, lastLength, i;
      // Doesn't need flags gy, but they don't hurt
      if (!NPCG) separator2 = new RegExp('^' + separatorCopy.source + '$(?!\\s)', flags);
      while (match = separatorCopy.exec(string)) {
        // `separatorCopy.lastIndex` is not reliable cross-browser
        lastIndex = match.index + match[0][LENGTH];
        if (lastIndex > lastLastIndex) {
          output.push(string.slice(lastLastIndex, match.index));
          // Fix browsers whose `exec` methods don't consistently return `undefined` for NPCG
          // eslint-disable-next-line no-loop-func
          if (!NPCG && match[LENGTH] > 1) match[0].replace(separator2, function () {
            for (i = 1; i < arguments[LENGTH] - 2; i++) if (arguments[i] === undefined) match[i] = undefined;
          });
          if (match[LENGTH] > 1 && match.index < string[LENGTH]) $push.apply(output, match.slice(1));
          lastLength = match[0][LENGTH];
          lastLastIndex = lastIndex;
          if (output[LENGTH] >= splitLimit) break;
        }
        if (separatorCopy[LAST_INDEX] === match.index) separatorCopy[LAST_INDEX]++; // Avoid an infinite loop
      }
      if (lastLastIndex === string[LENGTH]) {
        if (lastLength || !separatorCopy.test('')) output.push('');
      } else output.push(string.slice(lastLastIndex));
      return output[LENGTH] > splitLimit ? output.slice(0, splitLimit) : output;
    };
  // Chakra, V8
  } else if ('0'[$SPLIT](undefined, 0)[LENGTH]) {
    $split = function (separator, limit) {
      return separator === undefined && limit === 0 ? [] : _split.call(this, separator, limit);
    };
  }
  // 21.1.3.17 String.prototype.split(separator, limit)
  return [function split(separator, limit) {
    var O = defined(this);
    var fn = separator == undefined ? undefined : separator[SPLIT];
    return fn !== undefined ? fn.call(separator, O, limit) : $split.call(String(O), separator, limit);
  }, $split];
});


/***/ }),
/* 427 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

__webpack_require__(220);
var anObject = __webpack_require__(3);
var $flags = __webpack_require__(98);
var DESCRIPTORS = __webpack_require__(12);
var TO_STRING = 'toString';
var $toString = /./[TO_STRING];

var define = function (fn) {
  __webpack_require__(24)(RegExp.prototype, TO_STRING, fn, true);
};

// 21.2.5.14 RegExp.prototype.toString()
if (__webpack_require__(6)(function () { return $toString.call({ source: 'a', flags: 'b' }) != '/a/b'; })) {
  define(function toString() {
    var R = anObject(this);
    return '/'.concat(R.source, '/',
      'flags' in R ? R.flags : !DESCRIPTORS && R instanceof RegExp ? $flags.call(R) : undefined);
  });
// FF44- RegExp#toString has a wrong name
} else if ($toString.name != TO_STRING) {
  define(function toString() {
    return $toString.call(this);
  });
}


/***/ }),
/* 428 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.2 String.prototype.anchor(name)
__webpack_require__(25)('anchor', function (createHTML) {
  return function anchor(name) {
    return createHTML(this, 'a', 'name', name);
  };
});


/***/ }),
/* 429 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.3 String.prototype.big()
__webpack_require__(25)('big', function (createHTML) {
  return function big() {
    return createHTML(this, 'big', '', '');
  };
});


/***/ }),
/* 430 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.4 String.prototype.blink()
__webpack_require__(25)('blink', function (createHTML) {
  return function blink() {
    return createHTML(this, 'blink', '', '');
  };
});


/***/ }),
/* 431 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.5 String.prototype.bold()
__webpack_require__(25)('bold', function (createHTML) {
  return function bold() {
    return createHTML(this, 'b', '', '');
  };
});


/***/ }),
/* 432 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $at = __webpack_require__(149)(false);
$export($export.P, 'String', {
  // 21.1.3.3 String.prototype.codePointAt(pos)
  codePointAt: function codePointAt(pos) {
    return $at(this, pos);
  }
});


/***/ }),
/* 433 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// 21.1.3.6 String.prototype.endsWith(searchString [, endPosition])

var $export = __webpack_require__(0);
var toLength = __webpack_require__(14);
var context = __webpack_require__(150);
var ENDS_WITH = 'endsWith';
var $endsWith = ''[ENDS_WITH];

$export($export.P + $export.F * __webpack_require__(137)(ENDS_WITH), 'String', {
  endsWith: function endsWith(searchString /* , endPosition = @length */) {
    var that = context(this, searchString, ENDS_WITH);
    var endPosition = arguments.length > 1 ? arguments[1] : undefined;
    var len = toLength(that.length);
    var end = endPosition === undefined ? len : Math.min(toLength(endPosition), len);
    var search = String(searchString);
    return $endsWith
      ? $endsWith.call(that, search, end)
      : that.slice(end - search.length, end) === search;
  }
});


/***/ }),
/* 434 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.6 String.prototype.fixed()
__webpack_require__(25)('fixed', function (createHTML) {
  return function fixed() {
    return createHTML(this, 'tt', '', '');
  };
});


/***/ }),
/* 435 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.7 String.prototype.fontcolor(color)
__webpack_require__(25)('fontcolor', function (createHTML) {
  return function fontcolor(color) {
    return createHTML(this, 'font', 'color', color);
  };
});


/***/ }),
/* 436 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.8 String.prototype.fontsize(size)
__webpack_require__(25)('fontsize', function (createHTML) {
  return function fontsize(size) {
    return createHTML(this, 'font', 'size', size);
  };
});


/***/ }),
/* 437 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
var toAbsoluteIndex = __webpack_require__(61);
var fromCharCode = String.fromCharCode;
var $fromCodePoint = String.fromCodePoint;

// length should be 1, old FF problem
$export($export.S + $export.F * (!!$fromCodePoint && $fromCodePoint.length != 1), 'String', {
  // 21.1.2.2 String.fromCodePoint(...codePoints)
  fromCodePoint: function fromCodePoint(x) { // eslint-disable-line no-unused-vars
    var res = [];
    var aLen = arguments.length;
    var i = 0;
    var code;
    while (aLen > i) {
      code = +arguments[i++];
      if (toAbsoluteIndex(code, 0x10ffff) !== code) throw RangeError(code + ' is not a valid code point');
      res.push(code < 0x10000
        ? fromCharCode(code)
        : fromCharCode(((code -= 0x10000) >> 10) + 0xd800, code % 0x400 + 0xdc00)
      );
    } return res.join('');
  }
});


/***/ }),
/* 438 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// 21.1.3.7 String.prototype.includes(searchString, position = 0)

var $export = __webpack_require__(0);
var context = __webpack_require__(150);
var INCLUDES = 'includes';

$export($export.P + $export.F * __webpack_require__(137)(INCLUDES), 'String', {
  includes: function includes(searchString /* , position = 0 */) {
    return !!~context(this, searchString, INCLUDES)
      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);
  }
});


/***/ }),
/* 439 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.9 String.prototype.italics()
__webpack_require__(25)('italics', function (createHTML) {
  return function italics() {
    return createHTML(this, 'i', '', '');
  };
});


/***/ }),
/* 440 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $at = __webpack_require__(149)(true);

// 21.1.3.27 String.prototype[@@iterator]()
__webpack_require__(142)(String, 'String', function (iterated) {
  this._t = String(iterated); // target
  this._i = 0;                // next index
// 21.1.5.2.1 %StringIteratorPrototype%.next()
}, function () {
  var O = this._t;
  var index = this._i;
  var point;
  if (index >= O.length) return { value: undefined, done: true };
  point = $at(O, index);
  this._i += point.length;
  return { value: point, done: false };
});


/***/ }),
/* 441 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.10 String.prototype.link(url)
__webpack_require__(25)('link', function (createHTML) {
  return function link(url) {
    return createHTML(this, 'a', 'href', url);
  };
});


/***/ }),
/* 442 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
var toIObject = __webpack_require__(26);
var toLength = __webpack_require__(14);

$export($export.S, 'String', {
  // 21.1.2.4 String.raw(callSite, ...substitutions)
  raw: function raw(callSite) {
    var tpl = toIObject(callSite.raw);
    var len = toLength(tpl.length);
    var aLen = arguments.length;
    var res = [];
    var i = 0;
    while (len > i) {
      res.push(String(tpl[i++]));
      if (i < aLen) res.push(String(arguments[i]));
    } return res.join('');
  }
});


/***/ }),
/* 443 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);

$export($export.P, 'String', {
  // 21.1.3.13 String.prototype.repeat(count)
  repeat: __webpack_require__(151)
});


/***/ }),
/* 444 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.11 String.prototype.small()
__webpack_require__(25)('small', function (createHTML) {
  return function small() {
    return createHTML(this, 'small', '', '');
  };
});


/***/ }),
/* 445 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// 21.1.3.18 String.prototype.startsWith(searchString [, position ])

var $export = __webpack_require__(0);
var toLength = __webpack_require__(14);
var context = __webpack_require__(150);
var STARTS_WITH = 'startsWith';
var $startsWith = ''[STARTS_WITH];

$export($export.P + $export.F * __webpack_require__(137)(STARTS_WITH), 'String', {
  startsWith: function startsWith(searchString /* , position = 0 */) {
    var that = context(this, searchString, STARTS_WITH);
    var index = toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length));
    var search = String(searchString);
    return $startsWith
      ? $startsWith.call(that, search, index)
      : that.slice(index, index + search.length) === search;
  }
});


/***/ }),
/* 446 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.12 String.prototype.strike()
__webpack_require__(25)('strike', function (createHTML) {
  return function strike() {
    return createHTML(this, 'strike', '', '');
  };
});


/***/ }),
/* 447 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.13 String.prototype.sub()
__webpack_require__(25)('sub', function (createHTML) {
  return function sub() {
    return createHTML(this, 'sub', '', '');
  };
});


/***/ }),
/* 448 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// B.2.3.14 String.prototype.sup()
__webpack_require__(25)('sup', function (createHTML) {
  return function sup() {
    return createHTML(this, 'sup', '', '');
  };
});


/***/ }),
/* 449 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// 21.1.3.25 String.prototype.trim()
__webpack_require__(76)('trim', function ($trim) {
  return function trim() {
    return $trim(this, 3);
  };
});


/***/ }),
/* 450 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// ECMAScript 6 symbols shim
var global = __webpack_require__(4);
var has = __webpack_require__(22);
var DESCRIPTORS = __webpack_require__(12);
var $export = __webpack_require__(0);
var redefine = __webpack_require__(24);
var META = __webpack_require__(50).KEY;
var $fails = __webpack_require__(6);
var shared = __webpack_require__(107);
var setToStringTag = __webpack_require__(75);
var uid = __webpack_require__(62);
var wks = __webpack_require__(9);
var wksExt = __webpack_require__(218);
var wksDefine = __webpack_require__(155);
var keyOf = __webpack_require__(325);
var enumKeys = __webpack_require__(324);
var isArray = __webpack_require__(100);
var anObject = __webpack_require__(3);
var toIObject = __webpack_require__(26);
var toPrimitive = __webpack_require__(42);
var createDesc = __webpack_require__(58);
var _create = __webpack_require__(56);
var gOPNExt = __webpack_require__(208);
var $GOPD = __webpack_require__(28);
var $DP = __webpack_require__(13);
var $keys = __webpack_require__(51);
var gOPD = $GOPD.f;
var dP = $DP.f;
var gOPN = gOPNExt.f;
var $Symbol = global.Symbol;
var $JSON = global.JSON;
var _stringify = $JSON && $JSON.stringify;
var PROTOTYPE = 'prototype';
var HIDDEN = wks('_hidden');
var TO_PRIMITIVE = wks('toPrimitive');
var isEnum = {}.propertyIsEnumerable;
var SymbolRegistry = shared('symbol-registry');
var AllSymbols = shared('symbols');
var OPSymbols = shared('op-symbols');
var ObjectProto = Object[PROTOTYPE];
var USE_NATIVE = typeof $Symbol == 'function';
var QObject = global.QObject;
// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173
var setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;

// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687
var setSymbolDesc = DESCRIPTORS && $fails(function () {
  return _create(dP({}, 'a', {
    get: function () { return dP(this, 'a', { value: 7 }).a; }
  })).a != 7;
}) ? function (it, key, D) {
  var protoDesc = gOPD(ObjectProto, key);
  if (protoDesc) delete ObjectProto[key];
  dP(it, key, D);
  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);
} : dP;

var wrap = function (tag) {
  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);
  sym._k = tag;
  return sym;
};

var isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {
  return typeof it == 'symbol';
} : function (it) {
  return it instanceof $Symbol;
};

var $defineProperty = function defineProperty(it, key, D) {
  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);
  anObject(it);
  key = toPrimitive(key, true);
  anObject(D);
  if (has(AllSymbols, key)) {
    if (!D.enumerable) {
      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));
      it[HIDDEN][key] = true;
    } else {
      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;
      D = _create(D, { enumerable: createDesc(0, false) });
    } return setSymbolDesc(it, key, D);
  } return dP(it, key, D);
};
var $defineProperties = function defineProperties(it, P) {
  anObject(it);
  var keys = enumKeys(P = toIObject(P));
  var i = 0;
  var l = keys.length;
  var key;
  while (l > i) $defineProperty(it, key = keys[i++], P[key]);
  return it;
};
var $create = function create(it, P) {
  return P === undefined ? _create(it) : $defineProperties(_create(it), P);
};
var $propertyIsEnumerable = function propertyIsEnumerable(key) {
  var E = isEnum.call(this, key = toPrimitive(key, true));
  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;
  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;
};
var $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {
  it = toIObject(it);
  key = toPrimitive(key, true);
  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;
  var D = gOPD(it, key);
  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;
  return D;
};
var $getOwnPropertyNames = function getOwnPropertyNames(it) {
  var names = gOPN(toIObject(it));
  var result = [];
  var i = 0;
  var key;
  while (names.length > i) {
    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);
  } return result;
};
var $getOwnPropertySymbols = function getOwnPropertySymbols(it) {
  var IS_OP = it === ObjectProto;
  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));
  var result = [];
  var i = 0;
  var key;
  while (names.length > i) {
    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);
  } return result;
};

// 19.4.1.1 Symbol([description])
if (!USE_NATIVE) {
  $Symbol = function Symbol() {
    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');
    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);
    var $set = function (value) {
      if (this === ObjectProto) $set.call(OPSymbols, value);
      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;
      setSymbolDesc(this, tag, createDesc(1, value));
    };
    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });
    return wrap(tag);
  };
  redefine($Symbol[PROTOTYPE], 'toString', function toString() {
    return this._k;
  });

  $GOPD.f = $getOwnPropertyDescriptor;
  $DP.f = $defineProperty;
  __webpack_require__(57).f = gOPNExt.f = $getOwnPropertyNames;
  __webpack_require__(86).f = $propertyIsEnumerable;
  __webpack_require__(104).f = $getOwnPropertySymbols;

  if (DESCRIPTORS && !__webpack_require__(55)) {
    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);
  }

  wksExt.f = function (name) {
    return wrap(wks(name));
  };
}

$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });

for (var es6Symbols = (
  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14
  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'
).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);

for (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);

$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {
  // 19.4.2.1 Symbol.for(key)
  'for': function (key) {
    return has(SymbolRegistry, key += '')
      ? SymbolRegistry[key]
      : SymbolRegistry[key] = $Symbol(key);
  },
  // 19.4.2.5 Symbol.keyFor(sym)
  keyFor: function keyFor(key) {
    if (isSymbol(key)) return keyOf(SymbolRegistry, key);
    throw TypeError(key + ' is not a symbol!');
  },
  useSetter: function () { setter = true; },
  useSimple: function () { setter = false; }
});

$export($export.S + $export.F * !USE_NATIVE, 'Object', {
  // 19.1.2.2 Object.create(O [, Properties])
  create: $create,
  // 19.1.2.4 Object.defineProperty(O, P, Attributes)
  defineProperty: $defineProperty,
  // 19.1.2.3 Object.defineProperties(O, Properties)
  defineProperties: $defineProperties,
  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)
  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,
  // 19.1.2.7 Object.getOwnPropertyNames(O)
  getOwnPropertyNames: $getOwnPropertyNames,
  // 19.1.2.8 Object.getOwnPropertySymbols(O)
  getOwnPropertySymbols: $getOwnPropertySymbols
});

// 24.3.2 JSON.stringify(value [, replacer [, space]])
$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {
  var S = $Symbol();
  // MS Edge converts symbol values to JSON as {}
  // WebKit converts symbol values to JSON as null
  // V8 throws on boxed symbols
  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';
})), 'JSON', {
  stringify: function stringify(it) {
    if (it === undefined || isSymbol(it)) return; // IE8 returns string on undefined
    var args = [it];
    var i = 1;
    var replacer, $replacer;
    while (arguments.length > i) args.push(arguments[i++]);
    replacer = args[1];
    if (typeof replacer == 'function') $replacer = replacer;
    if ($replacer || !isArray(replacer)) replacer = function (key, value) {
      if ($replacer) value = $replacer.call(this, key, value);
      if (!isSymbol(value)) return value;
    };
    args[1] = replacer;
    return _stringify.apply($JSON, args);
  }
});

// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)
$Symbol[PROTOTYPE][TO_PRIMITIVE] || __webpack_require__(23)($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);
// 19.4.3.5 Symbol.prototype[@@toStringTag]
setToStringTag($Symbol, 'Symbol');
// 20.2.1.9 Math[@@toStringTag]
setToStringTag(Math, 'Math', true);
// 24.3.3 JSON[@@toStringTag]
setToStringTag(global.JSON, 'JSON', true);


/***/ }),
/* 451 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var $typed = __webpack_require__(109);
var buffer = __webpack_require__(154);
var anObject = __webpack_require__(3);
var toAbsoluteIndex = __webpack_require__(61);
var toLength = __webpack_require__(14);
var isObject = __webpack_require__(7);
var ArrayBuffer = __webpack_require__(4).ArrayBuffer;
var speciesConstructor = __webpack_require__(108);
var $ArrayBuffer = buffer.ArrayBuffer;
var $DataView = buffer.DataView;
var $isView = $typed.ABV && ArrayBuffer.isView;
var $slice = $ArrayBuffer.prototype.slice;
var VIEW = $typed.VIEW;
var ARRAY_BUFFER = 'ArrayBuffer';

$export($export.G + $export.W + $export.F * (ArrayBuffer !== $ArrayBuffer), { ArrayBuffer: $ArrayBuffer });

$export($export.S + $export.F * !$typed.CONSTR, ARRAY_BUFFER, {
  // 24.1.3.1 ArrayBuffer.isView(arg)
  isView: function isView(it) {
    return $isView && $isView(it) || isObject(it) && VIEW in it;
  }
});

$export($export.P + $export.U + $export.F * __webpack_require__(6)(function () {
  return !new $ArrayBuffer(2).slice(1, undefined).byteLength;
}), ARRAY_BUFFER, {
  // 24.1.4.3 ArrayBuffer.prototype.slice(start, end)
  slice: function slice(start, end) {
    if ($slice !== undefined && end === undefined) return $slice.call(anObject(this), start); // FF fix
    var len = anObject(this).byteLength;
    var first = toAbsoluteIndex(start, len);
    var final = toAbsoluteIndex(end === undefined ? len : end, len);
    var result = new (speciesConstructor(this, $ArrayBuffer))(toLength(final - first));
    var viewS = new $DataView(this);
    var viewT = new $DataView(result);
    var index = 0;
    while (first < final) {
      viewT.setUint8(index++, viewS.getUint8(first++));
    } return result;
  }
});

__webpack_require__(60)(ARRAY_BUFFER);


/***/ }),
/* 452 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
$export($export.G + $export.W + $export.F * !__webpack_require__(109).ABV, {
  DataView: __webpack_require__(154).DataView
});


/***/ }),
/* 453 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(45)('Float32', 4, function (init) {
  return function Float32Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});


/***/ }),
/* 454 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(45)('Float64', 8, function (init) {
  return function Float64Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});


/***/ }),
/* 455 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(45)('Int16', 2, function (init) {
  return function Int16Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});


/***/ }),
/* 456 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(45)('Int32', 4, function (init) {
  return function Int32Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});


/***/ }),
/* 457 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(45)('Int8', 1, function (init) {
  return function Int8Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});


/***/ }),
/* 458 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(45)('Uint16', 2, function (init) {
  return function Uint16Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});


/***/ }),
/* 459 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(45)('Uint32', 4, function (init) {
  return function Uint32Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});


/***/ }),
/* 460 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(45)('Uint8', 1, function (init) {
  return function Uint8Array(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
});


/***/ }),
/* 461 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(45)('Uint8', 1, function (init) {
  return function Uint8ClampedArray(data, byteOffset, length) {
    return init(this, data, byteOffset, length);
  };
}, true);


/***/ }),
/* 462 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var weak = __webpack_require__(197);
var validate = __webpack_require__(77);
var WEAK_SET = 'WeakSet';

// 23.4 WeakSet Objects
__webpack_require__(96)(WEAK_SET, function (get) {
  return function WeakSet() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };
}, {
  // 23.4.3.1 WeakSet.prototype.add(value)
  add: function add(value) {
    return weak.def(validate(this, WEAK_SET), value, true);
  }
}, weak, false, true);


/***/ }),
/* 463 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://tc39.github.io/proposal-flatMap/#sec-Array.prototype.flatMap
var $export = __webpack_require__(0);
var flattenIntoArray = __webpack_require__(198);
var toObject = __webpack_require__(16);
var toLength = __webpack_require__(14);
var aFunction = __webpack_require__(19);
var arraySpeciesCreate = __webpack_require__(133);

$export($export.P, 'Array', {
  flatMap: function flatMap(callbackfn /* , thisArg */) {
    var O = toObject(this);
    var sourceLen, A;
    aFunction(callbackfn);
    sourceLen = toLength(O.length);
    A = arraySpeciesCreate(O, 0);
    flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments[1]);
    return A;
  }
});

__webpack_require__(49)('flatMap');


/***/ }),
/* 464 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://tc39.github.io/proposal-flatMap/#sec-Array.prototype.flatten
var $export = __webpack_require__(0);
var flattenIntoArray = __webpack_require__(198);
var toObject = __webpack_require__(16);
var toLength = __webpack_require__(14);
var toInteger = __webpack_require__(41);
var arraySpeciesCreate = __webpack_require__(133);

$export($export.P, 'Array', {
  flatten: function flatten(/* depthArg = 1 */) {
    var depthArg = arguments[0];
    var O = toObject(this);
    var sourceLen = toLength(O.length);
    var A = arraySpeciesCreate(O, 0);
    flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger(depthArg));
    return A;
  }
});

__webpack_require__(49)('flatten');


/***/ }),
/* 465 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/tc39/Array.prototype.includes
var $export = __webpack_require__(0);
var $includes = __webpack_require__(95)(true);

$export($export.P, 'Array', {
  includes: function includes(el /* , fromIndex = 0 */) {
    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);
  }
});

__webpack_require__(49)('includes');


/***/ }),
/* 466 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/rwaldron/tc39-notes/blob/master/es6/2014-09/sept-25.md#510-globalasap-for-enqueuing-a-microtask
var $export = __webpack_require__(0);
var microtask = __webpack_require__(145)();
var process = __webpack_require__(4).process;
var isNode = __webpack_require__(31)(process) == 'process';

$export($export.G, {
  asap: function asap(fn) {
    var domain = isNode && process.domain;
    microtask(domain ? domain.bind(fn) : fn);
  }
});


/***/ }),
/* 467 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/ljharb/proposal-is-error
var $export = __webpack_require__(0);
var cof = __webpack_require__(31);

$export($export.S, 'Error', {
  isError: function isError(it) {
    return cof(it) === 'Error';
  }
});


/***/ }),
/* 468 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/tc39/proposal-global
var $export = __webpack_require__(0);

$export($export.G, { global: __webpack_require__(4) });


/***/ }),
/* 469 */
/***/ (function(module, exports, __webpack_require__) {

// https://tc39.github.io/proposal-setmap-offrom/#sec-map.from
__webpack_require__(105)('Map');


/***/ }),
/* 470 */
/***/ (function(module, exports, __webpack_require__) {

// https://tc39.github.io/proposal-setmap-offrom/#sec-map.of
__webpack_require__(106)('Map');


/***/ }),
/* 471 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/DavidBruant/Map-Set.prototype.toJSON
var $export = __webpack_require__(0);

$export($export.P + $export.R, 'Map', { toJSON: __webpack_require__(196)('Map') });


/***/ }),
/* 472 */
/***/ (function(module, exports, __webpack_require__) {

// https://rwaldron.github.io/proposal-math-extensions/
var $export = __webpack_require__(0);

$export($export.S, 'Math', {
  clamp: function clamp(x, lower, upper) {
    return Math.min(upper, Math.max(lower, x));
  }
});


/***/ }),
/* 473 */
/***/ (function(module, exports, __webpack_require__) {

// https://rwaldron.github.io/proposal-math-extensions/
var $export = __webpack_require__(0);

$export($export.S, 'Math', { DEG_PER_RAD: Math.PI / 180 });


/***/ }),
/* 474 */
/***/ (function(module, exports, __webpack_require__) {

// https://rwaldron.github.io/proposal-math-extensions/
var $export = __webpack_require__(0);
var RAD_PER_DEG = 180 / Math.PI;

$export($export.S, 'Math', {
  degrees: function degrees(radians) {
    return radians * RAD_PER_DEG;
  }
});


/***/ }),
/* 475 */
/***/ (function(module, exports, __webpack_require__) {

// https://rwaldron.github.io/proposal-math-extensions/
var $export = __webpack_require__(0);
var scale = __webpack_require__(205);
var fround = __webpack_require__(203);

$export($export.S, 'Math', {
  fscale: function fscale(x, inLow, inHigh, outLow, outHigh) {
    return fround(scale(x, inLow, inHigh, outLow, outHigh));
  }
});


/***/ }),
/* 476 */
/***/ (function(module, exports, __webpack_require__) {

// https://gist.github.com/BrendanEich/4294d5c212a6d2254703
var $export = __webpack_require__(0);

$export($export.S, 'Math', {
  iaddh: function iaddh(x0, x1, y0, y1) {
    var $x0 = x0 >>> 0;
    var $x1 = x1 >>> 0;
    var $y0 = y0 >>> 0;
    return $x1 + (y1 >>> 0) + (($x0 & $y0 | ($x0 | $y0) & ~($x0 + $y0 >>> 0)) >>> 31) | 0;
  }
});


/***/ }),
/* 477 */
/***/ (function(module, exports, __webpack_require__) {

// https://gist.github.com/BrendanEich/4294d5c212a6d2254703
var $export = __webpack_require__(0);

$export($export.S, 'Math', {
  imulh: function imulh(u, v) {
    var UINT16 = 0xffff;
    var $u = +u;
    var $v = +v;
    var u0 = $u & UINT16;
    var v0 = $v & UINT16;
    var u1 = $u >> 16;
    var v1 = $v >> 16;
    var t = (u1 * v0 >>> 0) + (u0 * v0 >>> 16);
    return u1 * v1 + (t >> 16) + ((u0 * v1 >>> 0) + (t & UINT16) >> 16);
  }
});


/***/ }),
/* 478 */
/***/ (function(module, exports, __webpack_require__) {

// https://gist.github.com/BrendanEich/4294d5c212a6d2254703
var $export = __webpack_require__(0);

$export($export.S, 'Math', {
  isubh: function isubh(x0, x1, y0, y1) {
    var $x0 = x0 >>> 0;
    var $x1 = x1 >>> 0;
    var $y0 = y0 >>> 0;
    return $x1 - (y1 >>> 0) - ((~$x0 & $y0 | ~($x0 ^ $y0) & $x0 - $y0 >>> 0) >>> 31) | 0;
  }
});


/***/ }),
/* 479 */
/***/ (function(module, exports, __webpack_require__) {

// https://rwaldron.github.io/proposal-math-extensions/
var $export = __webpack_require__(0);

$export($export.S, 'Math', { RAD_PER_DEG: 180 / Math.PI });


/***/ }),
/* 480 */
/***/ (function(module, exports, __webpack_require__) {

// https://rwaldron.github.io/proposal-math-extensions/
var $export = __webpack_require__(0);
var DEG_PER_RAD = Math.PI / 180;

$export($export.S, 'Math', {
  radians: function radians(degrees) {
    return degrees * DEG_PER_RAD;
  }
});


/***/ }),
/* 481 */
/***/ (function(module, exports, __webpack_require__) {

// https://rwaldron.github.io/proposal-math-extensions/
var $export = __webpack_require__(0);

$export($export.S, 'Math', { scale: __webpack_require__(205) });


/***/ }),
/* 482 */
/***/ (function(module, exports, __webpack_require__) {

// http://jfbastien.github.io/papers/Math.signbit.html
var $export = __webpack_require__(0);

$export($export.S, 'Math', { signbit: function signbit(x) {
  // eslint-disable-next-line no-self-compare
  return (x = +x) != x ? x : x == 0 ? 1 / x == Infinity : x > 0;
} });


/***/ }),
/* 483 */
/***/ (function(module, exports, __webpack_require__) {

// https://gist.github.com/BrendanEich/4294d5c212a6d2254703
var $export = __webpack_require__(0);

$export($export.S, 'Math', {
  umulh: function umulh(u, v) {
    var UINT16 = 0xffff;
    var $u = +u;
    var $v = +v;
    var u0 = $u & UINT16;
    var v0 = $v & UINT16;
    var u1 = $u >>> 16;
    var v1 = $v >>> 16;
    var t = (u1 * v0 >>> 0) + (u0 * v0 >>> 16);
    return u1 * v1 + (t >>> 16) + ((u0 * v1 >>> 0) + (t & UINT16) >>> 16);
  }
});


/***/ }),
/* 484 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var toObject = __webpack_require__(16);
var aFunction = __webpack_require__(19);
var $defineProperty = __webpack_require__(13);

// B.2.2.2 Object.prototype.__defineGetter__(P, getter)
__webpack_require__(12) && $export($export.P + __webpack_require__(103), 'Object', {
  __defineGetter__: function __defineGetter__(P, getter) {
    $defineProperty.f(toObject(this), P, { get: aFunction(getter), enumerable: true, configurable: true });
  }
});


/***/ }),
/* 485 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var toObject = __webpack_require__(16);
var aFunction = __webpack_require__(19);
var $defineProperty = __webpack_require__(13);

// B.2.2.3 Object.prototype.__defineSetter__(P, setter)
__webpack_require__(12) && $export($export.P + __webpack_require__(103), 'Object', {
  __defineSetter__: function __defineSetter__(P, setter) {
    $defineProperty.f(toObject(this), P, { set: aFunction(setter), enumerable: true, configurable: true });
  }
});


/***/ }),
/* 486 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/tc39/proposal-object-values-entries
var $export = __webpack_require__(0);
var $entries = __webpack_require__(210)(true);

$export($export.S, 'Object', {
  entries: function entries(it) {
    return $entries(it);
  }
});


/***/ }),
/* 487 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/tc39/proposal-object-getownpropertydescriptors
var $export = __webpack_require__(0);
var ownKeys = __webpack_require__(211);
var toIObject = __webpack_require__(26);
var gOPD = __webpack_require__(28);
var createProperty = __webpack_require__(134);

$export($export.S, 'Object', {
  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {
    var O = toIObject(object);
    var getDesc = gOPD.f;
    var keys = ownKeys(O);
    var result = {};
    var i = 0;
    var key, desc;
    while (keys.length > i) {
      desc = getDesc(O, key = keys[i++]);
      if (desc !== undefined) createProperty(result, key, desc);
    }
    return result;
  }
});


/***/ }),
/* 488 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var toObject = __webpack_require__(16);
var toPrimitive = __webpack_require__(42);
var getPrototypeOf = __webpack_require__(29);
var getOwnPropertyDescriptor = __webpack_require__(28).f;

// B.2.2.4 Object.prototype.__lookupGetter__(P)
__webpack_require__(12) && $export($export.P + __webpack_require__(103), 'Object', {
  __lookupGetter__: function __lookupGetter__(P) {
    var O = toObject(this);
    var K = toPrimitive(P, true);
    var D;
    do {
      if (D = getOwnPropertyDescriptor(O, K)) return D.get;
    } while (O = getPrototypeOf(O));
  }
});


/***/ }),
/* 489 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $export = __webpack_require__(0);
var toObject = __webpack_require__(16);
var toPrimitive = __webpack_require__(42);
var getPrototypeOf = __webpack_require__(29);
var getOwnPropertyDescriptor = __webpack_require__(28).f;

// B.2.2.5 Object.prototype.__lookupSetter__(P)
__webpack_require__(12) && $export($export.P + __webpack_require__(103), 'Object', {
  __lookupSetter__: function __lookupSetter__(P) {
    var O = toObject(this);
    var K = toPrimitive(P, true);
    var D;
    do {
      if (D = getOwnPropertyDescriptor(O, K)) return D.set;
    } while (O = getPrototypeOf(O));
  }
});


/***/ }),
/* 490 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/tc39/proposal-object-values-entries
var $export = __webpack_require__(0);
var $values = __webpack_require__(210)(false);

$export($export.S, 'Object', {
  values: function values(it) {
    return $values(it);
  }
});


/***/ }),
/* 491 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/zenparsing/es-observable
var $export = __webpack_require__(0);
var global = __webpack_require__(4);
var core = __webpack_require__(38);
var microtask = __webpack_require__(145)();
var OBSERVABLE = __webpack_require__(9)('observable');
var aFunction = __webpack_require__(19);
var anObject = __webpack_require__(3);
var anInstance = __webpack_require__(53);
var redefineAll = __webpack_require__(59);
var hide = __webpack_require__(23);
var forOf = __webpack_require__(54);
var RETURN = forOf.RETURN;

var getMethod = function (fn) {
  return fn == null ? undefined : aFunction(fn);
};

var cleanupSubscription = function (subscription) {
  var cleanup = subscription._c;
  if (cleanup) {
    subscription._c = undefined;
    cleanup();
  }
};

var subscriptionClosed = function (subscription) {
  return subscription._o === undefined;
};

var closeSubscription = function (subscription) {
  if (!subscriptionClosed(subscription)) {
    subscription._o = undefined;
    cleanupSubscription(subscription);
  }
};

var Subscription = function (observer, subscriber) {
  anObject(observer);
  this._c = undefined;
  this._o = observer;
  observer = new SubscriptionObserver(this);
  try {
    var cleanup = subscriber(observer);
    var subscription = cleanup;
    if (cleanup != null) {
      if (typeof cleanup.unsubscribe === 'function') cleanup = function () { subscription.unsubscribe(); };
      else aFunction(cleanup);
      this._c = cleanup;
    }
  } catch (e) {
    observer.error(e);
    return;
  } if (subscriptionClosed(this)) cleanupSubscription(this);
};

Subscription.prototype = redefineAll({}, {
  unsubscribe: function unsubscribe() { closeSubscription(this); }
});

var SubscriptionObserver = function (subscription) {
  this._s = subscription;
};

SubscriptionObserver.prototype = redefineAll({}, {
  next: function next(value) {
    var subscription = this._s;
    if (!subscriptionClosed(subscription)) {
      var observer = subscription._o;
      try {
        var m = getMethod(observer.next);
        if (m) return m.call(observer, value);
      } catch (e) {
        try {
          closeSubscription(subscription);
        } finally {
          throw e;
        }
      }
    }
  },
  error: function error(value) {
    var subscription = this._s;
    if (subscriptionClosed(subscription)) throw value;
    var observer = subscription._o;
    subscription._o = undefined;
    try {
      var m = getMethod(observer.error);
      if (!m) throw value;
      value = m.call(observer, value);
    } catch (e) {
      try {
        cleanupSubscription(subscription);
      } finally {
        throw e;
      }
    } cleanupSubscription(subscription);
    return value;
  },
  complete: function complete(value) {
    var subscription = this._s;
    if (!subscriptionClosed(subscription)) {
      var observer = subscription._o;
      subscription._o = undefined;
      try {
        var m = getMethod(observer.complete);
        value = m ? m.call(observer, value) : undefined;
      } catch (e) {
        try {
          cleanupSubscription(subscription);
        } finally {
          throw e;
        }
      } cleanupSubscription(subscription);
      return value;
    }
  }
});

var $Observable = function Observable(subscriber) {
  anInstance(this, $Observable, 'Observable', '_f')._f = aFunction(subscriber);
};

redefineAll($Observable.prototype, {
  subscribe: function subscribe(observer) {
    return new Subscription(observer, this._f);
  },
  forEach: function forEach(fn) {
    var that = this;
    return new (core.Promise || global.Promise)(function (resolve, reject) {
      aFunction(fn);
      var subscription = that.subscribe({
        next: function (value) {
          try {
            return fn(value);
          } catch (e) {
            reject(e);
            subscription.unsubscribe();
          }
        },
        error: reject,
        complete: resolve
      });
    });
  }
});

redefineAll($Observable, {
  from: function from(x) {
    var C = typeof this === 'function' ? this : $Observable;
    var method = getMethod(anObject(x)[OBSERVABLE]);
    if (method) {
      var observable = anObject(method.call(x));
      return observable.constructor === C ? observable : new C(function (observer) {
        return observable.subscribe(observer);
      });
    }
    return new C(function (observer) {
      var done = false;
      microtask(function () {
        if (!done) {
          try {
            if (forOf(x, false, function (it) {
              observer.next(it);
              if (done) return RETURN;
            }) === RETURN) return;
          } catch (e) {
            if (done) throw e;
            observer.error(e);
            return;
          } observer.complete();
        }
      });
      return function () { done = true; };
    });
  },
  of: function of() {
    for (var i = 0, l = arguments.length, items = Array(l); i < l;) items[i] = arguments[i++];
    return new (typeof this === 'function' ? this : $Observable)(function (observer) {
      var done = false;
      microtask(function () {
        if (!done) {
          for (var j = 0; j < items.length; ++j) {
            observer.next(items[j]);
            if (done) return;
          } observer.complete();
        }
      });
      return function () { done = true; };
    });
  }
});

hide($Observable.prototype, OBSERVABLE, function () { return this; });

$export($export.G, { Observable: $Observable });

__webpack_require__(60)('Observable');


/***/ }),
/* 492 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// https://github.com/tc39/proposal-promise-finally

var $export = __webpack_require__(0);
var core = __webpack_require__(38);
var global = __webpack_require__(4);
var speciesConstructor = __webpack_require__(108);
var promiseResolve = __webpack_require__(215);

$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {
  var C = speciesConstructor(this, core.Promise || global.Promise);
  var isFunction = typeof onFinally == 'function';
  return this.then(
    isFunction ? function (x) {
      return promiseResolve(C, onFinally()).then(function () { return x; });
    } : onFinally,
    isFunction ? function (e) {
      return promiseResolve(C, onFinally()).then(function () { throw e; });
    } : onFinally
  );
} });


/***/ }),
/* 493 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/tc39/proposal-promise-try
var $export = __webpack_require__(0);
var newPromiseCapability = __webpack_require__(146);
var perform = __webpack_require__(214);

$export($export.S, 'Promise', { 'try': function (callbackfn) {
  var promiseCapability = newPromiseCapability.f(this);
  var result = perform(callbackfn);
  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);
  return promiseCapability.promise;
} });


/***/ }),
/* 494 */
/***/ (function(module, exports, __webpack_require__) {

var metadata = __webpack_require__(44);
var anObject = __webpack_require__(3);
var toMetaKey = metadata.key;
var ordinaryDefineOwnMetadata = metadata.set;

metadata.exp({ defineMetadata: function defineMetadata(metadataKey, metadataValue, target, targetKey) {
  ordinaryDefineOwnMetadata(metadataKey, metadataValue, anObject(target), toMetaKey(targetKey));
} });


/***/ }),
/* 495 */
/***/ (function(module, exports, __webpack_require__) {

var metadata = __webpack_require__(44);
var anObject = __webpack_require__(3);
var toMetaKey = metadata.key;
var getOrCreateMetadataMap = metadata.map;
var store = metadata.store;

metadata.exp({ deleteMetadata: function deleteMetadata(metadataKey, target /* , targetKey */) {
  var targetKey = arguments.length < 3 ? undefined : toMetaKey(arguments[2]);
  var metadataMap = getOrCreateMetadataMap(anObject(target), targetKey, false);
  if (metadataMap === undefined || !metadataMap['delete'](metadataKey)) return false;
  if (metadataMap.size) return true;
  var targetMetadata = store.get(target);
  targetMetadata['delete'](targetKey);
  return !!targetMetadata.size || store['delete'](target);
} });


/***/ }),
/* 496 */
/***/ (function(module, exports, __webpack_require__) {

var Set = __webpack_require__(221);
var from = __webpack_require__(192);
var metadata = __webpack_require__(44);
var anObject = __webpack_require__(3);
var getPrototypeOf = __webpack_require__(29);
var ordinaryOwnMetadataKeys = metadata.keys;
var toMetaKey = metadata.key;

var ordinaryMetadataKeys = function (O, P) {
  var oKeys = ordinaryOwnMetadataKeys(O, P);
  var parent = getPrototypeOf(O);
  if (parent === null) return oKeys;
  var pKeys = ordinaryMetadataKeys(parent, P);
  return pKeys.length ? oKeys.length ? from(new Set(oKeys.concat(pKeys))) : pKeys : oKeys;
};

metadata.exp({ getMetadataKeys: function getMetadataKeys(target /* , targetKey */) {
  return ordinaryMetadataKeys(anObject(target), arguments.length < 2 ? undefined : toMetaKey(arguments[1]));
} });


/***/ }),
/* 497 */
/***/ (function(module, exports, __webpack_require__) {

var metadata = __webpack_require__(44);
var anObject = __webpack_require__(3);
var getPrototypeOf = __webpack_require__(29);
var ordinaryHasOwnMetadata = metadata.has;
var ordinaryGetOwnMetadata = metadata.get;
var toMetaKey = metadata.key;

var ordinaryGetMetadata = function (MetadataKey, O, P) {
  var hasOwn = ordinaryHasOwnMetadata(MetadataKey, O, P);
  if (hasOwn) return ordinaryGetOwnMetadata(MetadataKey, O, P);
  var parent = getPrototypeOf(O);
  return parent !== null ? ordinaryGetMetadata(MetadataKey, parent, P) : undefined;
};

metadata.exp({ getMetadata: function getMetadata(metadataKey, target /* , targetKey */) {
  return ordinaryGetMetadata(metadataKey, anObject(target), arguments.length < 3 ? undefined : toMetaKey(arguments[2]));
} });


/***/ }),
/* 498 */
/***/ (function(module, exports, __webpack_require__) {

var metadata = __webpack_require__(44);
var anObject = __webpack_require__(3);
var ordinaryOwnMetadataKeys = metadata.keys;
var toMetaKey = metadata.key;

metadata.exp({ getOwnMetadataKeys: function getOwnMetadataKeys(target /* , targetKey */) {
  return ordinaryOwnMetadataKeys(anObject(target), arguments.length < 2 ? undefined : toMetaKey(arguments[1]));
} });


/***/ }),
/* 499 */
/***/ (function(module, exports, __webpack_require__) {

var metadata = __webpack_require__(44);
var anObject = __webpack_require__(3);
var ordinaryGetOwnMetadata = metadata.get;
var toMetaKey = metadata.key;

metadata.exp({ getOwnMetadata: function getOwnMetadata(metadataKey, target /* , targetKey */) {
  return ordinaryGetOwnMetadata(metadataKey, anObject(target)
    , arguments.length < 3 ? undefined : toMetaKey(arguments[2]));
} });


/***/ }),
/* 500 */
/***/ (function(module, exports, __webpack_require__) {

var metadata = __webpack_require__(44);
var anObject = __webpack_require__(3);
var getPrototypeOf = __webpack_require__(29);
var ordinaryHasOwnMetadata = metadata.has;
var toMetaKey = metadata.key;

var ordinaryHasMetadata = function (MetadataKey, O, P) {
  var hasOwn = ordinaryHasOwnMetadata(MetadataKey, O, P);
  if (hasOwn) return true;
  var parent = getPrototypeOf(O);
  return parent !== null ? ordinaryHasMetadata(MetadataKey, parent, P) : false;
};

metadata.exp({ hasMetadata: function hasMetadata(metadataKey, target /* , targetKey */) {
  return ordinaryHasMetadata(metadataKey, anObject(target), arguments.length < 3 ? undefined : toMetaKey(arguments[2]));
} });


/***/ }),
/* 501 */
/***/ (function(module, exports, __webpack_require__) {

var metadata = __webpack_require__(44);
var anObject = __webpack_require__(3);
var ordinaryHasOwnMetadata = metadata.has;
var toMetaKey = metadata.key;

metadata.exp({ hasOwnMetadata: function hasOwnMetadata(metadataKey, target /* , targetKey */) {
  return ordinaryHasOwnMetadata(metadataKey, anObject(target)
    , arguments.length < 3 ? undefined : toMetaKey(arguments[2]));
} });


/***/ }),
/* 502 */
/***/ (function(module, exports, __webpack_require__) {

var $metadata = __webpack_require__(44);
var anObject = __webpack_require__(3);
var aFunction = __webpack_require__(19);
var toMetaKey = $metadata.key;
var ordinaryDefineOwnMetadata = $metadata.set;

$metadata.exp({ metadata: function metadata(metadataKey, metadataValue) {
  return function decorator(target, targetKey) {
    ordinaryDefineOwnMetadata(
      metadataKey, metadataValue,
      (targetKey !== undefined ? anObject : aFunction)(target),
      toMetaKey(targetKey)
    );
  };
} });


/***/ }),
/* 503 */
/***/ (function(module, exports, __webpack_require__) {

// https://tc39.github.io/proposal-setmap-offrom/#sec-set.from
__webpack_require__(105)('Set');


/***/ }),
/* 504 */
/***/ (function(module, exports, __webpack_require__) {

// https://tc39.github.io/proposal-setmap-offrom/#sec-set.of
__webpack_require__(106)('Set');


/***/ }),
/* 505 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/DavidBruant/Map-Set.prototype.toJSON
var $export = __webpack_require__(0);

$export($export.P + $export.R, 'Set', { toJSON: __webpack_require__(196)('Set') });


/***/ }),
/* 506 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/mathiasbynens/String.prototype.at
var $export = __webpack_require__(0);
var $at = __webpack_require__(149)(true);

$export($export.P, 'String', {
  at: function at(pos) {
    return $at(this, pos);
  }
});


/***/ }),
/* 507 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://tc39.github.io/String.prototype.matchAll/
var $export = __webpack_require__(0);
var defined = __webpack_require__(39);
var toLength = __webpack_require__(14);
var isRegExp = __webpack_require__(101);
var getFlags = __webpack_require__(98);
var RegExpProto = RegExp.prototype;

var $RegExpStringIterator = function (regexp, string) {
  this._r = regexp;
  this._s = string;
};

__webpack_require__(141)($RegExpStringIterator, 'RegExp String', function next() {
  var match = this._r.exec(this._s);
  return { value: match, done: match === null };
});

$export($export.P, 'String', {
  matchAll: function matchAll(regexp) {
    defined(this);
    if (!isRegExp(regexp)) throw TypeError(regexp + ' is not a regexp!');
    var S = String(this);
    var flags = 'flags' in RegExpProto ? String(regexp.flags) : getFlags.call(regexp);
    var rx = new RegExp(regexp.source, ~flags.indexOf('g') ? flags : 'g' + flags);
    rx.lastIndex = toLength(regexp.lastIndex);
    return new $RegExpStringIterator(rx, S);
  }
});


/***/ }),
/* 508 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/tc39/proposal-string-pad-start-end
var $export = __webpack_require__(0);
var $pad = __webpack_require__(216);

$export($export.P, 'String', {
  padEnd: function padEnd(maxLength /* , fillString = ' ' */) {
    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, false);
  }
});


/***/ }),
/* 509 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/tc39/proposal-string-pad-start-end
var $export = __webpack_require__(0);
var $pad = __webpack_require__(216);

$export($export.P, 'String', {
  padStart: function padStart(maxLength /* , fillString = ' ' */) {
    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, true);
  }
});


/***/ }),
/* 510 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/sebmarkbage/ecmascript-string-left-right-trim
__webpack_require__(76)('trimLeft', function ($trim) {
  return function trimLeft() {
    return $trim(this, 1);
  };
}, 'trimStart');


/***/ }),
/* 511 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://github.com/sebmarkbage/ecmascript-string-left-right-trim
__webpack_require__(76)('trimRight', function ($trim) {
  return function trimRight() {
    return $trim(this, 2);
  };
}, 'trimEnd');


/***/ }),
/* 512 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(155)('asyncIterator');


/***/ }),
/* 513 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(155)('observable');


/***/ }),
/* 514 */
/***/ (function(module, exports, __webpack_require__) {

// https://github.com/tc39/proposal-global
var $export = __webpack_require__(0);

$export($export.S, 'System', { global: __webpack_require__(4) });


/***/ }),
/* 515 */
/***/ (function(module, exports, __webpack_require__) {

// https://tc39.github.io/proposal-setmap-offrom/#sec-weakmap.from
__webpack_require__(105)('WeakMap');


/***/ }),
/* 516 */
/***/ (function(module, exports, __webpack_require__) {

// https://tc39.github.io/proposal-setmap-offrom/#sec-weakmap.of
__webpack_require__(106)('WeakMap');


/***/ }),
/* 517 */
/***/ (function(module, exports, __webpack_require__) {

// https://tc39.github.io/proposal-setmap-offrom/#sec-weakset.from
__webpack_require__(105)('WeakSet');


/***/ }),
/* 518 */
/***/ (function(module, exports, __webpack_require__) {

// https://tc39.github.io/proposal-setmap-offrom/#sec-weakset.of
__webpack_require__(106)('WeakSet');


/***/ }),
/* 519 */
/***/ (function(module, exports, __webpack_require__) {

var $iterators = __webpack_require__(157);
var getKeys = __webpack_require__(51);
var redefine = __webpack_require__(24);
var global = __webpack_require__(4);
var hide = __webpack_require__(23);
var Iterators = __webpack_require__(74);
var wks = __webpack_require__(9);
var ITERATOR = wks('iterator');
var TO_STRING_TAG = wks('toStringTag');
var ArrayValues = Iterators.Array;

var DOMIterables = {
  CSSRuleList: true, // TODO: Not spec compliant, should be false.
  CSSStyleDeclaration: false,
  CSSValueList: false,
  ClientRectList: false,
  DOMRectList: false,
  DOMStringList: false,
  DOMTokenList: true,
  DataTransferItemList: false,
  FileList: false,
  HTMLAllCollection: false,
  HTMLCollection: false,
  HTMLFormElement: false,
  HTMLSelectElement: false,
  MediaList: true, // TODO: Not spec compliant, should be false.
  MimeTypeArray: false,
  NamedNodeMap: false,
  NodeList: true,
  PaintRequestList: false,
  Plugin: false,
  PluginArray: false,
  SVGLengthList: false,
  SVGNumberList: false,
  SVGPathSegList: false,
  SVGPointList: false,
  SVGStringList: false,
  SVGTransformList: false,
  SourceBufferList: false,
  StyleSheetList: true, // TODO: Not spec compliant, should be false.
  TextTrackCueList: false,
  TextTrackList: false,
  TouchList: false
};

for (var collections = getKeys(DOMIterables), i = 0; i < collections.length; i++) {
  var NAME = collections[i];
  var explicit = DOMIterables[NAME];
  var Collection = global[NAME];
  var proto = Collection && Collection.prototype;
  var key;
  if (proto) {
    if (!proto[ITERATOR]) hide(proto, ITERATOR, ArrayValues);
    if (!proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);
    Iterators[NAME] = ArrayValues;
    if (explicit) for (key in $iterators) if (!proto[key]) redefine(proto, key, $iterators[key], true);
  }
}


/***/ }),
/* 520 */
/***/ (function(module, exports, __webpack_require__) {

var $export = __webpack_require__(0);
var $task = __webpack_require__(153);
$export($export.G + $export.B, {
  setImmediate: $task.set,
  clearImmediate: $task.clear
});


/***/ }),
/* 521 */
/***/ (function(module, exports, __webpack_require__) {

// ie9- setTimeout & setInterval additional parameters fix
var global = __webpack_require__(4);
var $export = __webpack_require__(0);
var invoke = __webpack_require__(99);
var partial = __webpack_require__(326);
var navigator = global.navigator;
var MSIE = !!navigator && /MSIE .\./.test(navigator.userAgent); // <- dirty ie9- check
var wrap = function (set) {
  return MSIE ? function (fn, time /* , ...args */) {
    return set(invoke(
      partial,
      [].slice.call(arguments, 2),
      // eslint-disable-next-line no-new-func
      typeof fn == 'function' ? fn : Function(fn)
    ), time);
  } : set;
};
$export($export.G + $export.B + $export.F * MSIE, {
  setTimeout: wrap(global.setTimeout),
  setInterval: wrap(global.setInterval)
});


/***/ }),
/* 522 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(450);
__webpack_require__(389);
__webpack_require__(391);
__webpack_require__(390);
__webpack_require__(393);
__webpack_require__(395);
__webpack_require__(400);
__webpack_require__(394);
__webpack_require__(392);
__webpack_require__(402);
__webpack_require__(401);
__webpack_require__(397);
__webpack_require__(398);
__webpack_require__(396);
__webpack_require__(388);
__webpack_require__(399);
__webpack_require__(403);
__webpack_require__(404);
__webpack_require__(356);
__webpack_require__(358);
__webpack_require__(357);
__webpack_require__(406);
__webpack_require__(405);
__webpack_require__(376);
__webpack_require__(386);
__webpack_require__(387);
__webpack_require__(377);
__webpack_require__(378);
__webpack_require__(379);
__webpack_require__(380);
__webpack_require__(381);
__webpack_require__(382);
__webpack_require__(383);
__webpack_require__(384);
__webpack_require__(385);
__webpack_require__(359);
__webpack_require__(360);
__webpack_require__(361);
__webpack_require__(362);
__webpack_require__(363);
__webpack_require__(364);
__webpack_require__(365);
__webpack_require__(366);
__webpack_require__(367);
__webpack_require__(368);
__webpack_require__(369);
__webpack_require__(370);
__webpack_require__(371);
__webpack_require__(372);
__webpack_require__(373);
__webpack_require__(374);
__webpack_require__(375);
__webpack_require__(437);
__webpack_require__(442);
__webpack_require__(449);
__webpack_require__(440);
__webpack_require__(432);
__webpack_require__(433);
__webpack_require__(438);
__webpack_require__(443);
__webpack_require__(445);
__webpack_require__(428);
__webpack_require__(429);
__webpack_require__(430);
__webpack_require__(431);
__webpack_require__(434);
__webpack_require__(435);
__webpack_require__(436);
__webpack_require__(439);
__webpack_require__(441);
__webpack_require__(444);
__webpack_require__(446);
__webpack_require__(447);
__webpack_require__(448);
__webpack_require__(351);
__webpack_require__(353);
__webpack_require__(352);
__webpack_require__(355);
__webpack_require__(354);
__webpack_require__(340);
__webpack_require__(338);
__webpack_require__(344);
__webpack_require__(341);
__webpack_require__(347);
__webpack_require__(349);
__webpack_require__(337);
__webpack_require__(343);
__webpack_require__(334);
__webpack_require__(348);
__webpack_require__(332);
__webpack_require__(346);
__webpack_require__(345);
__webpack_require__(339);
__webpack_require__(342);
__webpack_require__(331);
__webpack_require__(333);
__webpack_require__(336);
__webpack_require__(335);
__webpack_require__(350);
__webpack_require__(157);
__webpack_require__(422);
__webpack_require__(427);
__webpack_require__(220);
__webpack_require__(423);
__webpack_require__(424);
__webpack_require__(425);
__webpack_require__(426);
__webpack_require__(407);
__webpack_require__(219);
__webpack_require__(221);
__webpack_require__(222);
__webpack_require__(462);
__webpack_require__(451);
__webpack_require__(452);
__webpack_require__(457);
__webpack_require__(460);
__webpack_require__(461);
__webpack_require__(455);
__webpack_require__(458);
__webpack_require__(456);
__webpack_require__(459);
__webpack_require__(453);
__webpack_require__(454);
__webpack_require__(408);
__webpack_require__(409);
__webpack_require__(410);
__webpack_require__(411);
__webpack_require__(412);
__webpack_require__(415);
__webpack_require__(413);
__webpack_require__(414);
__webpack_require__(416);
__webpack_require__(417);
__webpack_require__(418);
__webpack_require__(419);
__webpack_require__(421);
__webpack_require__(420);
__webpack_require__(465);
__webpack_require__(463);
__webpack_require__(464);
__webpack_require__(506);
__webpack_require__(509);
__webpack_require__(508);
__webpack_require__(510);
__webpack_require__(511);
__webpack_require__(507);
__webpack_require__(512);
__webpack_require__(513);
__webpack_require__(487);
__webpack_require__(490);
__webpack_require__(486);
__webpack_require__(484);
__webpack_require__(485);
__webpack_require__(488);
__webpack_require__(489);
__webpack_require__(471);
__webpack_require__(505);
__webpack_require__(470);
__webpack_require__(504);
__webpack_require__(516);
__webpack_require__(518);
__webpack_require__(469);
__webpack_require__(503);
__webpack_require__(515);
__webpack_require__(517);
__webpack_require__(468);
__webpack_require__(514);
__webpack_require__(467);
__webpack_require__(472);
__webpack_require__(473);
__webpack_require__(474);
__webpack_require__(475);
__webpack_require__(476);
__webpack_require__(478);
__webpack_require__(477);
__webpack_require__(479);
__webpack_require__(480);
__webpack_require__(481);
__webpack_require__(483);
__webpack_require__(482);
__webpack_require__(492);
__webpack_require__(493);
__webpack_require__(494);
__webpack_require__(495);
__webpack_require__(497);
__webpack_require__(496);
__webpack_require__(499);
__webpack_require__(498);
__webpack_require__(500);
__webpack_require__(501);
__webpack_require__(502);
__webpack_require__(466);
__webpack_require__(491);
__webpack_require__(521);
__webpack_require__(520);
__webpack_require__(519);
module.exports = __webpack_require__(38);


/***/ }),
/* 523 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 524 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 525 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 526 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 527 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 528 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 529 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 530 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 531 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 532 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 533 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 534 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 535 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 536 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 537 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 538 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 539 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 540 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 541 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 542 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 543 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 544 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 545 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 546 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 547 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 548 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "g4u.d.ts";

/***/ }),
/* 549 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "conf/layers.commented.json";

/***/ }),
/* 550 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "conf/client.commented.json";

/***/ }),
/* 551 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "images/g4u-logo.png";

/***/ }),
/* 552 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "files/l10n.json";

/***/ }),
/* 553 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;/*! iScroll v5.2.0 ~ (c) 2008-2016 Matteo Spinelli ~ http://cubiq.org/license */
(function (window, document, Math) {
var rAF = window.requestAnimationFrame	||
	window.webkitRequestAnimationFrame	||
	window.mozRequestAnimationFrame		||
	window.oRequestAnimationFrame		||
	window.msRequestAnimationFrame		||
	function (callback) { window.setTimeout(callback, 1000 / 60); };

var utils = (function () {
	var me = {};

	var _elementStyle = document.createElement('div').style;
	var _vendor = (function () {
		var vendors = ['t', 'webkitT', 'MozT', 'msT', 'OT'],
			transform,
			i = 0,
			l = vendors.length;

		for ( ; i < l; i++ ) {
			transform = vendors[i] + 'ransform';
			if ( transform in _elementStyle ) return vendors[i].substr(0, vendors[i].length-1);
		}

		return false;
	})();

	function _prefixStyle (style) {
		if ( _vendor === false ) return false;
		if ( _vendor === '' ) return style;
		return _vendor + style.charAt(0).toUpperCase() + style.substr(1);
	}

	me.getTime = Date.now || function getTime () { return new Date().getTime(); };

	me.extend = function (target, obj) {
		for ( var i in obj ) {
			target[i] = obj[i];
		}
	};

	me.addEvent = function (el, type, fn, capture) {
		el.addEventListener(type, fn, !!capture);
	};

	me.removeEvent = function (el, type, fn, capture) {
		el.removeEventListener(type, fn, !!capture);
	};

	me.prefixPointerEvent = function (pointerEvent) {
		return window.MSPointerEvent ?
			'MSPointer' + pointerEvent.charAt(7).toUpperCase() + pointerEvent.substr(8):
			pointerEvent;
	};

	me.momentum = function (current, start, time, lowerMargin, wrapperSize, deceleration) {
		var distance = current - start,
			speed = Math.abs(distance) / time,
			destination,
			duration;

		deceleration = deceleration === undefined ? 0.0006 : deceleration;

		destination = current + ( speed * speed ) / ( 2 * deceleration ) * ( distance < 0 ? -1 : 1 );
		duration = speed / deceleration;

		if ( destination < lowerMargin ) {
			destination = wrapperSize ? lowerMargin - ( wrapperSize / 2.5 * ( speed / 8 ) ) : lowerMargin;
			distance = Math.abs(destination - current);
			duration = distance / speed;
		} else if ( destination > 0 ) {
			destination = wrapperSize ? wrapperSize / 2.5 * ( speed / 8 ) : 0;
			distance = Math.abs(current) + destination;
			duration = distance / speed;
		}

		return {
			destination: Math.round(destination),
			duration: duration
		};
	};

	var _transform = _prefixStyle('transform');

	me.extend(me, {
		hasTransform: _transform !== false,
		hasPerspective: _prefixStyle('perspective') in _elementStyle,
		hasTouch: 'ontouchstart' in window,
		hasPointer: !!(window.PointerEvent || window.MSPointerEvent), // IE10 is prefixed
		hasTransition: _prefixStyle('transition') in _elementStyle
	});

	/*
	This should find all Android browsers lower than build 535.19 (both stock browser and webview)
	- galaxy S2 is ok
    - 2.3.6 : `AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1`
    - 4.0.4 : `AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`
   - galaxy S3 is badAndroid (stock brower, webview)
     `AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`
   - galaxy S4 is badAndroid (stock brower, webview)
     `AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30`
   - galaxy S5 is OK
     `AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Mobile Safari/537.36 (Chrome/)`
   - galaxy S6 is OK
     `AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Mobile Safari/537.36 (Chrome/)`
  */
	me.isBadAndroid = (function() {
		var appVersion = window.navigator.appVersion;
		// Android browser is not a chrome browser.
		if (/Android/.test(appVersion) && !(/Chrome\/\d/.test(appVersion))) {
			var safariVersion = appVersion.match(/Safari\/(\d+.\d)/);
			if(safariVersion && typeof safariVersion === "object" && safariVersion.length >= 2) {
				return parseFloat(safariVersion[1]) < 535.19;
			} else {
				return true;
			}
		} else {
			return false;
		}
	})();

	me.extend(me.style = {}, {
		transform: _transform,
		transitionTimingFunction: _prefixStyle('transitionTimingFunction'),
		transitionDuration: _prefixStyle('transitionDuration'),
		transitionDelay: _prefixStyle('transitionDelay'),
		transformOrigin: _prefixStyle('transformOrigin')
	});

	me.hasClass = function (e, c) {
		var re = new RegExp("(^|\\s)" + c + "(\\s|$)");
		return re.test(e.className);
	};

	me.addClass = function (e, c) {
		if ( me.hasClass(e, c) ) {
			return;
		}

		var newclass = e.className.split(' ');
		newclass.push(c);
		e.className = newclass.join(' ');
	};

	me.removeClass = function (e, c) {
		if ( !me.hasClass(e, c) ) {
			return;
		}

		var re = new RegExp("(^|\\s)" + c + "(\\s|$)", 'g');
		e.className = e.className.replace(re, ' ');
	};

	me.offset = function (el) {
		var left = -el.offsetLeft,
			top = -el.offsetTop;

		// jshint -W084
		while (el = el.offsetParent) {
			left -= el.offsetLeft;
			top -= el.offsetTop;
		}
		// jshint +W084

		return {
			left: left,
			top: top
		};
	};

	me.preventDefaultException = function (el, exceptions) {
		for ( var i in exceptions ) {
			if ( exceptions[i].test(el[i]) ) {
				return true;
			}
		}

		return false;
	};

	me.extend(me.eventType = {}, {
		touchstart: 1,
		touchmove: 1,
		touchend: 1,

		mousedown: 2,
		mousemove: 2,
		mouseup: 2,

		pointerdown: 3,
		pointermove: 3,
		pointerup: 3,

		MSPointerDown: 3,
		MSPointerMove: 3,
		MSPointerUp: 3
	});

	me.extend(me.ease = {}, {
		quadratic: {
			style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',
			fn: function (k) {
				return k * ( 2 - k );
			}
		},
		circular: {
			style: 'cubic-bezier(0.1, 0.57, 0.1, 1)',	// Not properly "circular" but this looks better, it should be (0.075, 0.82, 0.165, 1)
			fn: function (k) {
				return Math.sqrt( 1 - ( --k * k ) );
			}
		},
		back: {
			style: 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',
			fn: function (k) {
				var b = 4;
				return ( k = k - 1 ) * k * ( ( b + 1 ) * k + b ) + 1;
			}
		},
		bounce: {
			style: '',
			fn: function (k) {
				if ( ( k /= 1 ) < ( 1 / 2.75 ) ) {
					return 7.5625 * k * k;
				} else if ( k < ( 2 / 2.75 ) ) {
					return 7.5625 * ( k -= ( 1.5 / 2.75 ) ) * k + 0.75;
				} else if ( k < ( 2.5 / 2.75 ) ) {
					return 7.5625 * ( k -= ( 2.25 / 2.75 ) ) * k + 0.9375;
				} else {
					return 7.5625 * ( k -= ( 2.625 / 2.75 ) ) * k + 0.984375;
				}
			}
		},
		elastic: {
			style: '',
			fn: function (k) {
				var f = 0.22,
					e = 0.4;

				if ( k === 0 ) { return 0; }
				if ( k == 1 ) { return 1; }

				return ( e * Math.pow( 2, - 10 * k ) * Math.sin( ( k - f / 4 ) * ( 2 * Math.PI ) / f ) + 1 );
			}
		}
	});

	me.tap = function (e, eventName) {
		var ev = document.createEvent('Event');
		ev.initEvent(eventName, true, true);
		ev.pageX = e.pageX;
		ev.pageY = e.pageY;
		e.target.dispatchEvent(ev);
	};

	me.click = function (e) {
		var target = e.target,
			ev;

		if ( !(/(SELECT|INPUT|TEXTAREA)/i).test(target.tagName) ) {
			ev = document.createEvent('MouseEvents');
			ev.initMouseEvent('click', true, true, e.view, 1,
				target.screenX, target.screenY, target.clientX, target.clientY,
				e.ctrlKey, e.altKey, e.shiftKey, e.metaKey,
				0, null);

			ev._constructed = true;
			target.dispatchEvent(ev);
		}
	};

	return me;
})();
function IScroll (el, options) {
	this.wrapper = typeof el == 'string' ? document.querySelector(el) : el;
	this.scroller = this.wrapper.children[0];
	this.scrollerStyle = this.scroller.style;		// cache style for better performance

	this.options = {

		resizeScrollbars: true,

		mouseWheelSpeed: 20,

		snapThreshold: 0.334,

// INSERT POINT: OPTIONS
		disablePointer : !utils.hasPointer,
		disableTouch : utils.hasPointer || !utils.hasTouch,
		disableMouse : utils.hasPointer || utils.hasTouch,
		startX: 0,
		startY: 0,
		scrollY: true,
		directionLockThreshold: 5,
		momentum: true,

		bounce: true,
		bounceTime: 600,
		bounceEasing: '',

		preventDefault: true,
		preventDefaultException: { tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT)$/ },

		HWCompositing: true,
		useTransition: true,
		useTransform: true,
		bindToWrapper: typeof window.onmousedown === "undefined"
	};

	for ( var i in options ) {
		this.options[i] = options[i];
	}

	// Normalize options
	this.translateZ = this.options.HWCompositing && utils.hasPerspective ? ' translateZ(0)' : '';

	this.options.useTransition = utils.hasTransition && this.options.useTransition;
	this.options.useTransform = utils.hasTransform && this.options.useTransform;

	this.options.eventPassthrough = this.options.eventPassthrough === true ? 'vertical' : this.options.eventPassthrough;
	this.options.preventDefault = !this.options.eventPassthrough && this.options.preventDefault;

	// If you want eventPassthrough I have to lock one of the axes
	this.options.scrollY = this.options.eventPassthrough == 'vertical' ? false : this.options.scrollY;
	this.options.scrollX = this.options.eventPassthrough == 'horizontal' ? false : this.options.scrollX;

	// With eventPassthrough we also need lockDirection mechanism
	this.options.freeScroll = this.options.freeScroll && !this.options.eventPassthrough;
	this.options.directionLockThreshold = this.options.eventPassthrough ? 0 : this.options.directionLockThreshold;

	this.options.bounceEasing = typeof this.options.bounceEasing == 'string' ? utils.ease[this.options.bounceEasing] || utils.ease.circular : this.options.bounceEasing;

	this.options.resizePolling = this.options.resizePolling === undefined ? 60 : this.options.resizePolling;

	if ( this.options.tap === true ) {
		this.options.tap = 'tap';
	}

	if ( this.options.shrinkScrollbars == 'scale' ) {
		this.options.useTransition = false;
	}

	this.options.invertWheelDirection = this.options.invertWheelDirection ? -1 : 1;

// INSERT POINT: NORMALIZATION

	// Some defaults
	this.x = 0;
	this.y = 0;
	this.directionX = 0;
	this.directionY = 0;
	this._events = {};

// INSERT POINT: DEFAULTS

	this._init();
	this.refresh();

	this.scrollTo(this.options.startX, this.options.startY);
	this.enable();
}

IScroll.prototype = {
	version: '5.2.0',

	_init: function () {
		this._initEvents();

		if ( this.options.scrollbars || this.options.indicators ) {
			this._initIndicators();
		}

		if ( this.options.mouseWheel ) {
			this._initWheel();
		}

		if ( this.options.snap ) {
			this._initSnap();
		}

		if ( this.options.keyBindings ) {
			this._initKeys();
		}

// INSERT POINT: _init

	},

	destroy: function () {
		this._initEvents(true);
		clearTimeout(this.resizeTimeout);
 		this.resizeTimeout = null;
		this._execEvent('destroy');
	},

	_transitionEnd: function (e) {
		if ( e.target != this.scroller || !this.isInTransition ) {
			return;
		}

		this._transitionTime();
		if ( !this.resetPosition(this.options.bounceTime) ) {
			this.isInTransition = false;
			this._execEvent('scrollEnd');
		}
	},

	_start: function (e) {
		// React to left mouse button only
		if ( utils.eventType[e.type] != 1 ) {
		  // for button property
		  // http://unixpapa.com/js/mouse.html
		  var button;
	    if (!e.which) {
	      /* IE case */
	      button = (e.button < 2) ? 0 :
	               ((e.button == 4) ? 1 : 2);
	    } else {
	      /* All others */
	      button = e.button;
	    }
			if ( button !== 0 ) {
				return;
			}
		}

		if ( !this.enabled || (this.initiated && utils.eventType[e.type] !== this.initiated) ) {
			return;
		}

		if ( this.options.preventDefault && !utils.isBadAndroid && !utils.preventDefaultException(e.target, this.options.preventDefaultException) ) {
			e.preventDefault();
		}

		var point = e.touches ? e.touches[0] : e,
			pos;

		this.initiated	= utils.eventType[e.type];
		this.moved		= false;
		this.distX		= 0;
		this.distY		= 0;
		this.directionX = 0;
		this.directionY = 0;
		this.directionLocked = 0;

		this.startTime = utils.getTime();

		if ( this.options.useTransition && this.isInTransition ) {
			this._transitionTime();
			this.isInTransition = false;
			pos = this.getComputedPosition();
			this._translate(Math.round(pos.x), Math.round(pos.y));
			this._execEvent('scrollEnd');
		} else if ( !this.options.useTransition && this.isAnimating ) {
			this.isAnimating = false;
			this._execEvent('scrollEnd');
		}

		this.startX    = this.x;
		this.startY    = this.y;
		this.absStartX = this.x;
		this.absStartY = this.y;
		this.pointX    = point.pageX;
		this.pointY    = point.pageY;

		this._execEvent('beforeScrollStart');
	},

	_move: function (e) {
		if ( !this.enabled || utils.eventType[e.type] !== this.initiated ) {
			return;
		}

		if ( this.options.preventDefault ) {	// increases performance on Android? TODO: check!
			e.preventDefault();
		}

		var point		= e.touches ? e.touches[0] : e,
			deltaX		= point.pageX - this.pointX,
			deltaY		= point.pageY - this.pointY,
			timestamp	= utils.getTime(),
			newX, newY,
			absDistX, absDistY;

		this.pointX		= point.pageX;
		this.pointY		= point.pageY;

		this.distX		+= deltaX;
		this.distY		+= deltaY;
		absDistX		= Math.abs(this.distX);
		absDistY		= Math.abs(this.distY);

		// We need to move at least 10 pixels for the scrolling to initiate
		if ( timestamp - this.endTime > 300 && (absDistX < 10 && absDistY < 10) ) {
			return;
		}

		// If you are scrolling in one direction lock the other
		if ( !this.directionLocked && !this.options.freeScroll ) {
			if ( absDistX > absDistY + this.options.directionLockThreshold ) {
				this.directionLocked = 'h';		// lock horizontally
			} else if ( absDistY >= absDistX + this.options.directionLockThreshold ) {
				this.directionLocked = 'v';		// lock vertically
			} else {
				this.directionLocked = 'n';		// no lock
			}
		}

		if ( this.directionLocked == 'h' ) {
			if ( this.options.eventPassthrough == 'vertical' ) {
				e.preventDefault();
			} else if ( this.options.eventPassthrough == 'horizontal' ) {
				this.initiated = false;
				return;
			}

			deltaY = 0;
		} else if ( this.directionLocked == 'v' ) {
			if ( this.options.eventPassthrough == 'horizontal' ) {
				e.preventDefault();
			} else if ( this.options.eventPassthrough == 'vertical' ) {
				this.initiated = false;
				return;
			}

			deltaX = 0;
		}

		deltaX = this.hasHorizontalScroll ? deltaX : 0;
		deltaY = this.hasVerticalScroll ? deltaY : 0;

		newX = this.x + deltaX;
		newY = this.y + deltaY;

		// Slow down if outside of the boundaries
		if ( newX > 0 || newX < this.maxScrollX ) {
			newX = this.options.bounce ? this.x + deltaX / 3 : newX > 0 ? 0 : this.maxScrollX;
		}
		if ( newY > 0 || newY < this.maxScrollY ) {
			newY = this.options.bounce ? this.y + deltaY / 3 : newY > 0 ? 0 : this.maxScrollY;
		}

		this.directionX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;
		this.directionY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;

		if ( !this.moved ) {
			this._execEvent('scrollStart');
		}

		this.moved = true;

		this._translate(newX, newY);

/* REPLACE START: _move */

		if ( timestamp - this.startTime > 300 ) {
			this.startTime = timestamp;
			this.startX = this.x;
			this.startY = this.y;
		}

/* REPLACE END: _move */

	},

	_end: function (e) {
		if ( !this.enabled || utils.eventType[e.type] !== this.initiated ) {
			return;
		}

		if ( this.options.preventDefault && !utils.preventDefaultException(e.target, this.options.preventDefaultException) ) {
			e.preventDefault();
		}

		var point = e.changedTouches ? e.changedTouches[0] : e,
			momentumX,
			momentumY,
			duration = utils.getTime() - this.startTime,
			newX = Math.round(this.x),
			newY = Math.round(this.y),
			distanceX = Math.abs(newX - this.startX),
			distanceY = Math.abs(newY - this.startY),
			time = 0,
			easing = '';

		this.isInTransition = 0;
		this.initiated = 0;
		this.endTime = utils.getTime();

		// reset if we are outside of the boundaries
		if ( this.resetPosition(this.options.bounceTime) ) {
			return;
		}

		this.scrollTo(newX, newY);	// ensures that the last position is rounded

		// we scrolled less than 10 pixels
		if ( !this.moved ) {
			if ( this.options.tap ) {
				utils.tap(e, this.options.tap);
			}

			if ( this.options.click ) {
				utils.click(e);
			}

			this._execEvent('scrollCancel');
			return;
		}

		if ( this._events.flick && duration < 200 && distanceX < 100 && distanceY < 100 ) {
			this._execEvent('flick');
			return;
		}

		// start momentum animation if needed
		if ( this.options.momentum && duration < 300 ) {
			momentumX = this.hasHorizontalScroll ? utils.momentum(this.x, this.startX, duration, this.maxScrollX, this.options.bounce ? this.wrapperWidth : 0, this.options.deceleration) : { destination: newX, duration: 0 };
			momentumY = this.hasVerticalScroll ? utils.momentum(this.y, this.startY, duration, this.maxScrollY, this.options.bounce ? this.wrapperHeight : 0, this.options.deceleration) : { destination: newY, duration: 0 };
			newX = momentumX.destination;
			newY = momentumY.destination;
			time = Math.max(momentumX.duration, momentumY.duration);
			this.isInTransition = 1;
		}


		if ( this.options.snap ) {
			var snap = this._nearestSnap(newX, newY);
			this.currentPage = snap;
			time = this.options.snapSpeed || Math.max(
					Math.max(
						Math.min(Math.abs(newX - snap.x), 1000),
						Math.min(Math.abs(newY - snap.y), 1000)
					), 300);
			newX = snap.x;
			newY = snap.y;

			this.directionX = 0;
			this.directionY = 0;
			easing = this.options.bounceEasing;
		}

// INSERT POINT: _end

		if ( newX != this.x || newY != this.y ) {
			// change easing function when scroller goes out of the boundaries
			if ( newX > 0 || newX < this.maxScrollX || newY > 0 || newY < this.maxScrollY ) {
				easing = utils.ease.quadratic;
			}

			this.scrollTo(newX, newY, time, easing);
			return;
		}

		this._execEvent('scrollEnd');
	},

	_resize: function () {
		var that = this;

		clearTimeout(this.resizeTimeout);

		this.resizeTimeout = setTimeout(function () {
			that.refresh();
		}, this.options.resizePolling);
	},

	resetPosition: function (time) {
		var x = this.x,
			y = this.y;

		time = time || 0;

		if ( !this.hasHorizontalScroll || this.x > 0 ) {
			x = 0;
		} else if ( this.x < this.maxScrollX ) {
			x = this.maxScrollX;
		}

		if ( !this.hasVerticalScroll || this.y > 0 ) {
			y = 0;
		} else if ( this.y < this.maxScrollY ) {
			y = this.maxScrollY;
		}

		if ( x == this.x && y == this.y ) {
			return false;
		}

		this.scrollTo(x, y, time, this.options.bounceEasing);

		return true;
	},

	disable: function () {
		this.enabled = false;
	},

	enable: function () {
		this.enabled = true;
	},

	refresh: function () {
		var rf = this.wrapper.offsetHeight;		// Force reflow

		this.wrapperWidth	= this.wrapper.clientWidth;
		this.wrapperHeight	= this.wrapper.clientHeight;

/* REPLACE START: refresh */

		this.scrollerWidth	= this.scroller.offsetWidth;
		this.scrollerHeight	= this.scroller.offsetHeight;

		this.maxScrollX		= this.wrapperWidth - this.scrollerWidth;
		this.maxScrollY		= this.wrapperHeight - this.scrollerHeight;

/* REPLACE END: refresh */

		this.hasHorizontalScroll	= this.options.scrollX && this.maxScrollX < 0;
		this.hasVerticalScroll		= this.options.scrollY && this.maxScrollY < 0;

		if ( !this.hasHorizontalScroll ) {
			this.maxScrollX = 0;
			this.scrollerWidth = this.wrapperWidth;
		}

		if ( !this.hasVerticalScroll ) {
			this.maxScrollY = 0;
			this.scrollerHeight = this.wrapperHeight;
		}

		this.endTime = 0;
		this.directionX = 0;
		this.directionY = 0;

		this.wrapperOffset = utils.offset(this.wrapper);

		this._execEvent('refresh');

		this.resetPosition();

// INSERT POINT: _refresh

	},

	on: function (type, fn) {
		if ( !this._events[type] ) {
			this._events[type] = [];
		}

		this._events[type].push(fn);
	},

	off: function (type, fn) {
		if ( !this._events[type] ) {
			return;
		}

		var index = this._events[type].indexOf(fn);

		if ( index > -1 ) {
			this._events[type].splice(index, 1);
		}
	},

	_execEvent: function (type) {
		if ( !this._events[type] ) {
			return;
		}

		var i = 0,
			l = this._events[type].length;

		if ( !l ) {
			return;
		}

		for ( ; i < l; i++ ) {
			this._events[type][i].apply(this, [].slice.call(arguments, 1));
		}
	},

	scrollBy: function (x, y, time, easing) {
		x = this.x + x;
		y = this.y + y;
		time = time || 0;

		this.scrollTo(x, y, time, easing);
	},

	scrollTo: function (x, y, time, easing) {
		easing = easing || utils.ease.circular;

		this.isInTransition = this.options.useTransition && time > 0;
		var transitionType = this.options.useTransition && easing.style;
		if ( !time || transitionType ) {
				if(transitionType) {
					this._transitionTimingFunction(easing.style);
					this._transitionTime(time);
				}
			this._translate(x, y);
		} else {
			this._animate(x, y, time, easing.fn);
		}
	},

	scrollToElement: function (el, time, offsetX, offsetY, easing) {
		el = el.nodeType ? el : this.scroller.querySelector(el);

		if ( !el ) {
			return;
		}

		var pos = utils.offset(el);

		pos.left -= this.wrapperOffset.left;
		pos.top  -= this.wrapperOffset.top;

		// if offsetX/Y are true we center the element to the screen
		if ( offsetX === true ) {
			offsetX = Math.round(el.offsetWidth / 2 - this.wrapper.offsetWidth / 2);
		}
		if ( offsetY === true ) {
			offsetY = Math.round(el.offsetHeight / 2 - this.wrapper.offsetHeight / 2);
		}

		pos.left -= offsetX || 0;
		pos.top  -= offsetY || 0;

		pos.left = pos.left > 0 ? 0 : pos.left < this.maxScrollX ? this.maxScrollX : pos.left;
		pos.top  = pos.top  > 0 ? 0 : pos.top  < this.maxScrollY ? this.maxScrollY : pos.top;

		time = time === undefined || time === null || time === 'auto' ? Math.max(Math.abs(this.x-pos.left), Math.abs(this.y-pos.top)) : time;

		this.scrollTo(pos.left, pos.top, time, easing);
	},

	_transitionTime: function (time) {
		time = time || 0;

		var durationProp = utils.style.transitionDuration;
		this.scrollerStyle[durationProp] = time + 'ms';

		if ( !time && utils.isBadAndroid ) {
			this.scrollerStyle[durationProp] = '0.0001ms';
			// remove 0.0001ms
			var self = this;
			rAF(function() {
				if(self.scrollerStyle[durationProp] === '0.0001ms') {
					self.scrollerStyle[durationProp] = '0s';
				}
			});
		}


		if ( this.indicators ) {
			for ( var i = this.indicators.length; i--; ) {
				this.indicators[i].transitionTime(time);
			}
		}


// INSERT POINT: _transitionTime

	},

	_transitionTimingFunction: function (easing) {
		this.scrollerStyle[utils.style.transitionTimingFunction] = easing;


		if ( this.indicators ) {
			for ( var i = this.indicators.length; i--; ) {
				this.indicators[i].transitionTimingFunction(easing);
			}
		}


// INSERT POINT: _transitionTimingFunction

	},

	_translate: function (x, y) {
		if ( this.options.useTransform ) {

/* REPLACE START: _translate */

			this.scrollerStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.translateZ;

/* REPLACE END: _translate */

		} else {
			x = Math.round(x);
			y = Math.round(y);
			this.scrollerStyle.left = x + 'px';
			this.scrollerStyle.top = y + 'px';
		}

		this.x = x;
		this.y = y;


	if ( this.indicators ) {
		for ( var i = this.indicators.length; i--; ) {
			this.indicators[i].updatePosition();
		}
	}


// INSERT POINT: _translate

	},

	_initEvents: function (remove) {
		var eventType = remove ? utils.removeEvent : utils.addEvent,
			target = this.options.bindToWrapper ? this.wrapper : window;

		eventType(window, 'orientationchange', this);
		eventType(window, 'resize', this);

		if ( this.options.click ) {
			eventType(this.wrapper, 'click', this, true);
		}

		if ( !this.options.disableMouse ) {
			eventType(this.wrapper, 'mousedown', this);
			eventType(target, 'mousemove', this);
			eventType(target, 'mousecancel', this);
			eventType(target, 'mouseup', this);
		}

		if ( utils.hasPointer && !this.options.disablePointer ) {
			eventType(this.wrapper, utils.prefixPointerEvent('pointerdown'), this);
			eventType(target, utils.prefixPointerEvent('pointermove'), this);
			eventType(target, utils.prefixPointerEvent('pointercancel'), this);
			eventType(target, utils.prefixPointerEvent('pointerup'), this);
		}

		if ( utils.hasTouch && !this.options.disableTouch ) {
			eventType(this.wrapper, 'touchstart', this);
			eventType(target, 'touchmove', this);
			eventType(target, 'touchcancel', this);
			eventType(target, 'touchend', this);
		}

		eventType(this.scroller, 'transitionend', this);
		eventType(this.scroller, 'webkitTransitionEnd', this);
		eventType(this.scroller, 'oTransitionEnd', this);
		eventType(this.scroller, 'MSTransitionEnd', this);
	},

	getComputedPosition: function () {
		var matrix = window.getComputedStyle(this.scroller, null),
			x, y;

		if ( this.options.useTransform ) {
			matrix = matrix[utils.style.transform].split(')')[0].split(', ');
			x = +(matrix[12] || matrix[4]);
			y = +(matrix[13] || matrix[5]);
		} else {
			x = +matrix.left.replace(/[^-\d.]/g, '');
			y = +matrix.top.replace(/[^-\d.]/g, '');
		}

		return { x: x, y: y };
	},
	_initIndicators: function () {
		var interactive = this.options.interactiveScrollbars,
			customStyle = typeof this.options.scrollbars != 'string',
			indicators = [],
			indicator;

		var that = this;

		this.indicators = [];

		if ( this.options.scrollbars ) {
			// Vertical scrollbar
			if ( this.options.scrollY ) {
				indicator = {
					el: createDefaultScrollbar('v', interactive, this.options.scrollbars),
					interactive: interactive,
					defaultScrollbars: true,
					customStyle: customStyle,
					resize: this.options.resizeScrollbars,
					shrink: this.options.shrinkScrollbars,
					fade: this.options.fadeScrollbars,
					listenX: false
				};

				this.wrapper.appendChild(indicator.el);
				indicators.push(indicator);
			}

			// Horizontal scrollbar
			if ( this.options.scrollX ) {
				indicator = {
					el: createDefaultScrollbar('h', interactive, this.options.scrollbars),
					interactive: interactive,
					defaultScrollbars: true,
					customStyle: customStyle,
					resize: this.options.resizeScrollbars,
					shrink: this.options.shrinkScrollbars,
					fade: this.options.fadeScrollbars,
					listenY: false
				};

				this.wrapper.appendChild(indicator.el);
				indicators.push(indicator);
			}
		}

		if ( this.options.indicators ) {
			// TODO: check concat compatibility
			indicators = indicators.concat(this.options.indicators);
		}

		for ( var i = indicators.length; i--; ) {
			this.indicators.push( new Indicator(this, indicators[i]) );
		}

		// TODO: check if we can use array.map (wide compatibility and performance issues)
		function _indicatorsMap (fn) {
			if (that.indicators) {
				for ( var i = that.indicators.length; i--; ) {
					fn.call(that.indicators[i]);
				}
			}
		}

		if ( this.options.fadeScrollbars ) {
			this.on('scrollEnd', function () {
				_indicatorsMap(function () {
					this.fade();
				});
			});

			this.on('scrollCancel', function () {
				_indicatorsMap(function () {
					this.fade();
				});
			});

			this.on('scrollStart', function () {
				_indicatorsMap(function () {
					this.fade(1);
				});
			});

			this.on('beforeScrollStart', function () {
				_indicatorsMap(function () {
					this.fade(1, true);
				});
			});
		}


		this.on('refresh', function () {
			_indicatorsMap(function () {
				this.refresh();
			});
		});

		this.on('destroy', function () {
			_indicatorsMap(function () {
				this.destroy();
			});

			delete this.indicators;
		});
	},

	_initWheel: function () {
		utils.addEvent(this.wrapper, 'wheel', this);
		utils.addEvent(this.wrapper, 'mousewheel', this);
		utils.addEvent(this.wrapper, 'DOMMouseScroll', this);

		this.on('destroy', function () {
			clearTimeout(this.wheelTimeout);
			this.wheelTimeout = null;
			utils.removeEvent(this.wrapper, 'wheel', this);
			utils.removeEvent(this.wrapper, 'mousewheel', this);
			utils.removeEvent(this.wrapper, 'DOMMouseScroll', this);
		});
	},

	_wheel: function (e) {
		if ( !this.enabled ) {
			return;
		}

		e.preventDefault();

		var wheelDeltaX, wheelDeltaY,
			newX, newY,
			that = this;

		if ( this.wheelTimeout === undefined ) {
			that._execEvent('scrollStart');
		}

		// Execute the scrollEnd event after 400ms the wheel stopped scrolling
		clearTimeout(this.wheelTimeout);
		this.wheelTimeout = setTimeout(function () {
			if(!that.options.snap) {
				that._execEvent('scrollEnd');
			}
			that.wheelTimeout = undefined;
		}, 400);

		if ( 'deltaX' in e ) {
			if (e.deltaMode === 1) {
				wheelDeltaX = -e.deltaX * this.options.mouseWheelSpeed;
				wheelDeltaY = -e.deltaY * this.options.mouseWheelSpeed;
			} else {
				wheelDeltaX = -e.deltaX;
				wheelDeltaY = -e.deltaY;
			}
		} else if ( 'wheelDeltaX' in e ) {
			wheelDeltaX = e.wheelDeltaX / 120 * this.options.mouseWheelSpeed;
			wheelDeltaY = e.wheelDeltaY / 120 * this.options.mouseWheelSpeed;
		} else if ( 'wheelDelta' in e ) {
			wheelDeltaX = wheelDeltaY = e.wheelDelta / 120 * this.options.mouseWheelSpeed;
		} else if ( 'detail' in e ) {
			wheelDeltaX = wheelDeltaY = -e.detail / 3 * this.options.mouseWheelSpeed;
		} else {
			return;
		}

		wheelDeltaX *= this.options.invertWheelDirection;
		wheelDeltaY *= this.options.invertWheelDirection;

		if ( !this.hasVerticalScroll ) {
			wheelDeltaX = wheelDeltaY;
			wheelDeltaY = 0;
		}

		if ( this.options.snap ) {
			newX = this.currentPage.pageX;
			newY = this.currentPage.pageY;

			if ( wheelDeltaX > 0 ) {
				newX--;
			} else if ( wheelDeltaX < 0 ) {
				newX++;
			}

			if ( wheelDeltaY > 0 ) {
				newY--;
			} else if ( wheelDeltaY < 0 ) {
				newY++;
			}

			this.goToPage(newX, newY);

			return;
		}

		newX = this.x + Math.round(this.hasHorizontalScroll ? wheelDeltaX : 0);
		newY = this.y + Math.round(this.hasVerticalScroll ? wheelDeltaY : 0);

		this.directionX = wheelDeltaX > 0 ? -1 : wheelDeltaX < 0 ? 1 : 0;
		this.directionY = wheelDeltaY > 0 ? -1 : wheelDeltaY < 0 ? 1 : 0;

		if ( newX > 0 ) {
			newX = 0;
		} else if ( newX < this.maxScrollX ) {
			newX = this.maxScrollX;
		}

		if ( newY > 0 ) {
			newY = 0;
		} else if ( newY < this.maxScrollY ) {
			newY = this.maxScrollY;
		}

		this.scrollTo(newX, newY, 0);

// INSERT POINT: _wheel
	},

	_initSnap: function () {
		this.currentPage = {};

		if ( typeof this.options.snap == 'string' ) {
			this.options.snap = this.scroller.querySelectorAll(this.options.snap);
		}

		this.on('refresh', function () {
			var i = 0, l,
				m = 0, n,
				cx, cy,
				x = 0, y,
				stepX = this.options.snapStepX || this.wrapperWidth,
				stepY = this.options.snapStepY || this.wrapperHeight,
				el;

			this.pages = [];

			if ( !this.wrapperWidth || !this.wrapperHeight || !this.scrollerWidth || !this.scrollerHeight ) {
				return;
			}

			if ( this.options.snap === true ) {
				cx = Math.round( stepX / 2 );
				cy = Math.round( stepY / 2 );

				while ( x > -this.scrollerWidth ) {
					this.pages[i] = [];
					l = 0;
					y = 0;

					while ( y > -this.scrollerHeight ) {
						this.pages[i][l] = {
							x: Math.max(x, this.maxScrollX),
							y: Math.max(y, this.maxScrollY),
							width: stepX,
							height: stepY,
							cx: x - cx,
							cy: y - cy
						};

						y -= stepY;
						l++;
					}

					x -= stepX;
					i++;
				}
			} else {
				el = this.options.snap;
				l = el.length;
				n = -1;

				for ( ; i < l; i++ ) {
					if ( i === 0 || el[i].offsetLeft <= el[i-1].offsetLeft ) {
						m = 0;
						n++;
					}

					if ( !this.pages[m] ) {
						this.pages[m] = [];
					}

					x = Math.max(-el[i].offsetLeft, this.maxScrollX);
					y = Math.max(-el[i].offsetTop, this.maxScrollY);
					cx = x - Math.round(el[i].offsetWidth / 2);
					cy = y - Math.round(el[i].offsetHeight / 2);

					this.pages[m][n] = {
						x: x,
						y: y,
						width: el[i].offsetWidth,
						height: el[i].offsetHeight,
						cx: cx,
						cy: cy
					};

					if ( x > this.maxScrollX ) {
						m++;
					}
				}
			}

			this.goToPage(this.currentPage.pageX || 0, this.currentPage.pageY || 0, 0);

			// Update snap threshold if needed
			if ( this.options.snapThreshold % 1 === 0 ) {
				this.snapThresholdX = this.options.snapThreshold;
				this.snapThresholdY = this.options.snapThreshold;
			} else {
				this.snapThresholdX = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width * this.options.snapThreshold);
				this.snapThresholdY = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height * this.options.snapThreshold);
			}
		});

		this.on('flick', function () {
			var time = this.options.snapSpeed || Math.max(
					Math.max(
						Math.min(Math.abs(this.x - this.startX), 1000),
						Math.min(Math.abs(this.y - this.startY), 1000)
					), 300);

			this.goToPage(
				this.currentPage.pageX + this.directionX,
				this.currentPage.pageY + this.directionY,
				time
			);
		});
	},

	_nearestSnap: function (x, y) {
		if ( !this.pages.length ) {
			return { x: 0, y: 0, pageX: 0, pageY: 0 };
		}

		var i = 0,
			l = this.pages.length,
			m = 0;

		// Check if we exceeded the snap threshold
		if ( Math.abs(x - this.absStartX) < this.snapThresholdX &&
			Math.abs(y - this.absStartY) < this.snapThresholdY ) {
			return this.currentPage;
		}

		if ( x > 0 ) {
			x = 0;
		} else if ( x < this.maxScrollX ) {
			x = this.maxScrollX;
		}

		if ( y > 0 ) {
			y = 0;
		} else if ( y < this.maxScrollY ) {
			y = this.maxScrollY;
		}

		for ( ; i < l; i++ ) {
			if ( x >= this.pages[i][0].cx ) {
				x = this.pages[i][0].x;
				break;
			}
		}

		l = this.pages[i].length;

		for ( ; m < l; m++ ) {
			if ( y >= this.pages[0][m].cy ) {
				y = this.pages[0][m].y;
				break;
			}
		}

		if ( i == this.currentPage.pageX ) {
			i += this.directionX;

			if ( i < 0 ) {
				i = 0;
			} else if ( i >= this.pages.length ) {
				i = this.pages.length - 1;
			}

			x = this.pages[i][0].x;
		}

		if ( m == this.currentPage.pageY ) {
			m += this.directionY;

			if ( m < 0 ) {
				m = 0;
			} else if ( m >= this.pages[0].length ) {
				m = this.pages[0].length - 1;
			}

			y = this.pages[0][m].y;
		}

		return {
			x: x,
			y: y,
			pageX: i,
			pageY: m
		};
	},

	goToPage: function (x, y, time, easing) {
		easing = easing || this.options.bounceEasing;

		if ( x >= this.pages.length ) {
			x = this.pages.length - 1;
		} else if ( x < 0 ) {
			x = 0;
		}

		if ( y >= this.pages[x].length ) {
			y = this.pages[x].length - 1;
		} else if ( y < 0 ) {
			y = 0;
		}

		var posX = this.pages[x][y].x,
			posY = this.pages[x][y].y;

		time = time === undefined ? this.options.snapSpeed || Math.max(
			Math.max(
				Math.min(Math.abs(posX - this.x), 1000),
				Math.min(Math.abs(posY - this.y), 1000)
			), 300) : time;

		this.currentPage = {
			x: posX,
			y: posY,
			pageX: x,
			pageY: y
		};

		this.scrollTo(posX, posY, time, easing);
	},

	next: function (time, easing) {
		var x = this.currentPage.pageX,
			y = this.currentPage.pageY;

		x++;

		if ( x >= this.pages.length && this.hasVerticalScroll ) {
			x = 0;
			y++;
		}

		this.goToPage(x, y, time, easing);
	},

	prev: function (time, easing) {
		var x = this.currentPage.pageX,
			y = this.currentPage.pageY;

		x--;

		if ( x < 0 && this.hasVerticalScroll ) {
			x = 0;
			y--;
		}

		this.goToPage(x, y, time, easing);
	},

	_initKeys: function (e) {
		// default key bindings
		var keys = {
			pageUp: 33,
			pageDown: 34,
			end: 35,
			home: 36,
			left: 37,
			up: 38,
			right: 39,
			down: 40
		};
		var i;

		// if you give me characters I give you keycode
		if ( typeof this.options.keyBindings == 'object' ) {
			for ( i in this.options.keyBindings ) {
				if ( typeof this.options.keyBindings[i] == 'string' ) {
					this.options.keyBindings[i] = this.options.keyBindings[i].toUpperCase().charCodeAt(0);
				}
			}
		} else {
			this.options.keyBindings = {};
		}

		for ( i in keys ) {
			this.options.keyBindings[i] = this.options.keyBindings[i] || keys[i];
		}

		utils.addEvent(window, 'keydown', this);

		this.on('destroy', function () {
			utils.removeEvent(window, 'keydown', this);
		});
	},

	_key: function (e) {
		if ( !this.enabled ) {
			return;
		}

		var snap = this.options.snap,	// we are using this alot, better to cache it
			newX = snap ? this.currentPage.pageX : this.x,
			newY = snap ? this.currentPage.pageY : this.y,
			now = utils.getTime(),
			prevTime = this.keyTime || 0,
			acceleration = 0.250,
			pos;

		if ( this.options.useTransition && this.isInTransition ) {
			pos = this.getComputedPosition();

			this._translate(Math.round(pos.x), Math.round(pos.y));
			this.isInTransition = false;
		}

		this.keyAcceleration = now - prevTime < 200 ? Math.min(this.keyAcceleration + acceleration, 50) : 0;

		switch ( e.keyCode ) {
			case this.options.keyBindings.pageUp:
				if ( this.hasHorizontalScroll && !this.hasVerticalScroll ) {
					newX += snap ? 1 : this.wrapperWidth;
				} else {
					newY += snap ? 1 : this.wrapperHeight;
				}
				break;
			case this.options.keyBindings.pageDown:
				if ( this.hasHorizontalScroll && !this.hasVerticalScroll ) {
					newX -= snap ? 1 : this.wrapperWidth;
				} else {
					newY -= snap ? 1 : this.wrapperHeight;
				}
				break;
			case this.options.keyBindings.end:
				newX = snap ? this.pages.length-1 : this.maxScrollX;
				newY = snap ? this.pages[0].length-1 : this.maxScrollY;
				break;
			case this.options.keyBindings.home:
				newX = 0;
				newY = 0;
				break;
			case this.options.keyBindings.left:
				newX += snap ? -1 : 5 + this.keyAcceleration>>0;
				break;
			case this.options.keyBindings.up:
				newY += snap ? 1 : 5 + this.keyAcceleration>>0;
				break;
			case this.options.keyBindings.right:
				newX -= snap ? -1 : 5 + this.keyAcceleration>>0;
				break;
			case this.options.keyBindings.down:
				newY -= snap ? 1 : 5 + this.keyAcceleration>>0;
				break;
			default:
				return;
		}

		if ( snap ) {
			this.goToPage(newX, newY);
			return;
		}

		if ( newX > 0 ) {
			newX = 0;
			this.keyAcceleration = 0;
		} else if ( newX < this.maxScrollX ) {
			newX = this.maxScrollX;
			this.keyAcceleration = 0;
		}

		if ( newY > 0 ) {
			newY = 0;
			this.keyAcceleration = 0;
		} else if ( newY < this.maxScrollY ) {
			newY = this.maxScrollY;
			this.keyAcceleration = 0;
		}

		this.scrollTo(newX, newY, 0);

		this.keyTime = now;
	},

	_animate: function (destX, destY, duration, easingFn) {
		var that = this,
			startX = this.x,
			startY = this.y,
			startTime = utils.getTime(),
			destTime = startTime + duration;

		function step () {
			var now = utils.getTime(),
				newX, newY,
				easing;

			if ( now >= destTime ) {
				that.isAnimating = false;
				that._translate(destX, destY);

				if ( !that.resetPosition(that.options.bounceTime) ) {
					that._execEvent('scrollEnd');
				}

				return;
			}

			now = ( now - startTime ) / duration;
			easing = easingFn(now);
			newX = ( destX - startX ) * easing + startX;
			newY = ( destY - startY ) * easing + startY;
			that._translate(newX, newY);

			if ( that.isAnimating ) {
				rAF(step);
			}
		}

		this.isAnimating = true;
		step();
	},
	handleEvent: function (e) {
		switch ( e.type ) {
			case 'touchstart':
			case 'pointerdown':
			case 'MSPointerDown':
			case 'mousedown':
				this._start(e);
				break;
			case 'touchmove':
			case 'pointermove':
			case 'MSPointerMove':
			case 'mousemove':
				this._move(e);
				break;
			case 'touchend':
			case 'pointerup':
			case 'MSPointerUp':
			case 'mouseup':
			case 'touchcancel':
			case 'pointercancel':
			case 'MSPointerCancel':
			case 'mousecancel':
				this._end(e);
				break;
			case 'orientationchange':
			case 'resize':
				this._resize();
				break;
			case 'transitionend':
			case 'webkitTransitionEnd':
			case 'oTransitionEnd':
			case 'MSTransitionEnd':
				this._transitionEnd(e);
				break;
			case 'wheel':
			case 'DOMMouseScroll':
			case 'mousewheel':
				this._wheel(e);
				break;
			case 'keydown':
				this._key(e);
				break;
			case 'click':
				if ( this.enabled && !e._constructed ) {
					e.preventDefault();
					e.stopPropagation();
				}
				break;
		}
	}
};
function createDefaultScrollbar (direction, interactive, type) {
	var scrollbar = document.createElement('div'),
		indicator = document.createElement('div');

	if ( type === true ) {
		scrollbar.style.cssText = 'position:absolute;z-index:9999';
		indicator.style.cssText = '-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px';
	}

	indicator.className = 'iScrollIndicator';

	if ( direction == 'h' ) {
		if ( type === true ) {
			scrollbar.style.cssText += ';height:7px;left:2px;right:2px;bottom:0';
			indicator.style.height = '100%';
		}
		scrollbar.className = 'iScrollHorizontalScrollbar';
	} else {
		if ( type === true ) {
			scrollbar.style.cssText += ';width:7px;bottom:2px;top:2px;right:1px';
			indicator.style.width = '100%';
		}
		scrollbar.className = 'iScrollVerticalScrollbar';
	}

	scrollbar.style.cssText += ';overflow:hidden';

	if ( !interactive ) {
		scrollbar.style.pointerEvents = 'none';
	}

	scrollbar.appendChild(indicator);

	return scrollbar;
}

function Indicator (scroller, options) {
	this.wrapper = typeof options.el == 'string' ? document.querySelector(options.el) : options.el;
	this.wrapperStyle = this.wrapper.style;
	this.indicator = this.wrapper.children[0];
	this.indicatorStyle = this.indicator.style;
	this.scroller = scroller;

	this.options = {
		listenX: true,
		listenY: true,
		interactive: false,
		resize: true,
		defaultScrollbars: false,
		shrink: false,
		fade: false,
		speedRatioX: 0,
		speedRatioY: 0
	};

	for ( var i in options ) {
		this.options[i] = options[i];
	}

	this.sizeRatioX = 1;
	this.sizeRatioY = 1;
	this.maxPosX = 0;
	this.maxPosY = 0;

	if ( this.options.interactive ) {
		if ( !this.options.disableTouch ) {
			utils.addEvent(this.indicator, 'touchstart', this);
			utils.addEvent(window, 'touchend', this);
		}
		if ( !this.options.disablePointer ) {
			utils.addEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);
			utils.addEvent(window, utils.prefixPointerEvent('pointerup'), this);
		}
		if ( !this.options.disableMouse ) {
			utils.addEvent(this.indicator, 'mousedown', this);
			utils.addEvent(window, 'mouseup', this);
		}
	}

	if ( this.options.fade ) {
		this.wrapperStyle[utils.style.transform] = this.scroller.translateZ;
		var durationProp = utils.style.transitionDuration;
		this.wrapperStyle[durationProp] = utils.isBadAndroid ? '0.0001ms' : '0ms';
		// remove 0.0001ms
		var self = this;
		if(utils.isBadAndroid) {
			rAF(function() {
				if(self.wrapperStyle[durationProp] === '0.0001ms') {
					self.wrapperStyle[durationProp] = '0s';
				}
			});
		}
		this.wrapperStyle.opacity = '0';
	}
}

Indicator.prototype = {
	handleEvent: function (e) {
		switch ( e.type ) {
			case 'touchstart':
			case 'pointerdown':
			case 'MSPointerDown':
			case 'mousedown':
				this._start(e);
				break;
			case 'touchmove':
			case 'pointermove':
			case 'MSPointerMove':
			case 'mousemove':
				this._move(e);
				break;
			case 'touchend':
			case 'pointerup':
			case 'MSPointerUp':
			case 'mouseup':
			case 'touchcancel':
			case 'pointercancel':
			case 'MSPointerCancel':
			case 'mousecancel':
				this._end(e);
				break;
		}
	},

	destroy: function () {
		if ( this.options.fadeScrollbars ) {
			clearTimeout(this.fadeTimeout);
			this.fadeTimeout = null;
		}
		if ( this.options.interactive ) {
			utils.removeEvent(this.indicator, 'touchstart', this);
			utils.removeEvent(this.indicator, utils.prefixPointerEvent('pointerdown'), this);
			utils.removeEvent(this.indicator, 'mousedown', this);

			utils.removeEvent(window, 'touchmove', this);
			utils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);
			utils.removeEvent(window, 'mousemove', this);

			utils.removeEvent(window, 'touchend', this);
			utils.removeEvent(window, utils.prefixPointerEvent('pointerup'), this);
			utils.removeEvent(window, 'mouseup', this);
		}

		if ( this.options.defaultScrollbars ) {
			this.wrapper.parentNode.removeChild(this.wrapper);
		}
	},

	_start: function (e) {
		var point = e.touches ? e.touches[0] : e;

		e.preventDefault();
		e.stopPropagation();

		this.transitionTime();

		this.initiated = true;
		this.moved = false;
		this.lastPointX	= point.pageX;
		this.lastPointY	= point.pageY;

		this.startTime	= utils.getTime();

		if ( !this.options.disableTouch ) {
			utils.addEvent(window, 'touchmove', this);
		}
		if ( !this.options.disablePointer ) {
			utils.addEvent(window, utils.prefixPointerEvent('pointermove'), this);
		}
		if ( !this.options.disableMouse ) {
			utils.addEvent(window, 'mousemove', this);
		}

		this.scroller._execEvent('beforeScrollStart');
	},

	_move: function (e) {
		var point = e.touches ? e.touches[0] : e,
			deltaX, deltaY,
			newX, newY,
			timestamp = utils.getTime();

		if ( !this.moved ) {
			this.scroller._execEvent('scrollStart');
		}

		this.moved = true;

		deltaX = point.pageX - this.lastPointX;
		this.lastPointX = point.pageX;

		deltaY = point.pageY - this.lastPointY;
		this.lastPointY = point.pageY;

		newX = this.x + deltaX;
		newY = this.y + deltaY;

		this._pos(newX, newY);

// INSERT POINT: indicator._move

		e.preventDefault();
		e.stopPropagation();
	},

	_end: function (e) {
		if ( !this.initiated ) {
			return;
		}

		this.initiated = false;

		e.preventDefault();
		e.stopPropagation();

		utils.removeEvent(window, 'touchmove', this);
		utils.removeEvent(window, utils.prefixPointerEvent('pointermove'), this);
		utils.removeEvent(window, 'mousemove', this);

		if ( this.scroller.options.snap ) {
			var snap = this.scroller._nearestSnap(this.scroller.x, this.scroller.y);

			var time = this.options.snapSpeed || Math.max(
					Math.max(
						Math.min(Math.abs(this.scroller.x - snap.x), 1000),
						Math.min(Math.abs(this.scroller.y - snap.y), 1000)
					), 300);

			if ( this.scroller.x != snap.x || this.scroller.y != snap.y ) {
				this.scroller.directionX = 0;
				this.scroller.directionY = 0;
				this.scroller.currentPage = snap;
				this.scroller.scrollTo(snap.x, snap.y, time, this.scroller.options.bounceEasing);
			}
		}

		if ( this.moved ) {
			this.scroller._execEvent('scrollEnd');
		}
	},

	transitionTime: function (time) {
		time = time || 0;
		var durationProp = utils.style.transitionDuration;
		this.indicatorStyle[durationProp] = time + 'ms';

		if ( !time && utils.isBadAndroid ) {
			this.indicatorStyle[durationProp] = '0.0001ms';
			// remove 0.0001ms
			var self = this;
			rAF(function() {
				if(self.indicatorStyle[durationProp] === '0.0001ms') {
					self.indicatorStyle[durationProp] = '0s';
				}
			});
		}
	},

	transitionTimingFunction: function (easing) {
		this.indicatorStyle[utils.style.transitionTimingFunction] = easing;
	},

	refresh: function () {
		this.transitionTime();

		if ( this.options.listenX && !this.options.listenY ) {
			this.indicatorStyle.display = this.scroller.hasHorizontalScroll ? 'block' : 'none';
		} else if ( this.options.listenY && !this.options.listenX ) {
			this.indicatorStyle.display = this.scroller.hasVerticalScroll ? 'block' : 'none';
		} else {
			this.indicatorStyle.display = this.scroller.hasHorizontalScroll || this.scroller.hasVerticalScroll ? 'block' : 'none';
		}

		if ( this.scroller.hasHorizontalScroll && this.scroller.hasVerticalScroll ) {
			utils.addClass(this.wrapper, 'iScrollBothScrollbars');
			utils.removeClass(this.wrapper, 'iScrollLoneScrollbar');

			if ( this.options.defaultScrollbars && this.options.customStyle ) {
				if ( this.options.listenX ) {
					this.wrapper.style.right = '8px';
				} else {
					this.wrapper.style.bottom = '8px';
				}
			}
		} else {
			utils.removeClass(this.wrapper, 'iScrollBothScrollbars');
			utils.addClass(this.wrapper, 'iScrollLoneScrollbar');

			if ( this.options.defaultScrollbars && this.options.customStyle ) {
				if ( this.options.listenX ) {
					this.wrapper.style.right = '2px';
				} else {
					this.wrapper.style.bottom = '2px';
				}
			}
		}

		var r = this.wrapper.offsetHeight;	// force refresh

		if ( this.options.listenX ) {
			this.wrapperWidth = this.wrapper.clientWidth;
			if ( this.options.resize ) {
				this.indicatorWidth = Math.max(Math.round(this.wrapperWidth * this.wrapperWidth / (this.scroller.scrollerWidth || this.wrapperWidth || 1)), 8);
				this.indicatorStyle.width = this.indicatorWidth + 'px';
			} else {
				this.indicatorWidth = this.indicator.clientWidth;
			}

			this.maxPosX = this.wrapperWidth - this.indicatorWidth;

			if ( this.options.shrink == 'clip' ) {
				this.minBoundaryX = -this.indicatorWidth + 8;
				this.maxBoundaryX = this.wrapperWidth - 8;
			} else {
				this.minBoundaryX = 0;
				this.maxBoundaryX = this.maxPosX;
			}

			this.sizeRatioX = this.options.speedRatioX || (this.scroller.maxScrollX && (this.maxPosX / this.scroller.maxScrollX));
		}

		if ( this.options.listenY ) {
			this.wrapperHeight = this.wrapper.clientHeight;
			if ( this.options.resize ) {
				this.indicatorHeight = Math.max(Math.round(this.wrapperHeight * this.wrapperHeight / (this.scroller.scrollerHeight || this.wrapperHeight || 1)), 8);
				this.indicatorStyle.height = this.indicatorHeight + 'px';
			} else {
				this.indicatorHeight = this.indicator.clientHeight;
			}

			this.maxPosY = this.wrapperHeight - this.indicatorHeight;

			if ( this.options.shrink == 'clip' ) {
				this.minBoundaryY = -this.indicatorHeight + 8;
				this.maxBoundaryY = this.wrapperHeight - 8;
			} else {
				this.minBoundaryY = 0;
				this.maxBoundaryY = this.maxPosY;
			}

			this.maxPosY = this.wrapperHeight - this.indicatorHeight;
			this.sizeRatioY = this.options.speedRatioY || (this.scroller.maxScrollY && (this.maxPosY / this.scroller.maxScrollY));
		}

		this.updatePosition();
	},

	updatePosition: function () {
		var x = this.options.listenX && Math.round(this.sizeRatioX * this.scroller.x) || 0,
			y = this.options.listenY && Math.round(this.sizeRatioY * this.scroller.y) || 0;

		if ( !this.options.ignoreBoundaries ) {
			if ( x < this.minBoundaryX ) {
				if ( this.options.shrink == 'scale' ) {
					this.width = Math.max(this.indicatorWidth + x, 8);
					this.indicatorStyle.width = this.width + 'px';
				}
				x = this.minBoundaryX;
			} else if ( x > this.maxBoundaryX ) {
				if ( this.options.shrink == 'scale' ) {
					this.width = Math.max(this.indicatorWidth - (x - this.maxPosX), 8);
					this.indicatorStyle.width = this.width + 'px';
					x = this.maxPosX + this.indicatorWidth - this.width;
				} else {
					x = this.maxBoundaryX;
				}
			} else if ( this.options.shrink == 'scale' && this.width != this.indicatorWidth ) {
				this.width = this.indicatorWidth;
				this.indicatorStyle.width = this.width + 'px';
			}

			if ( y < this.minBoundaryY ) {
				if ( this.options.shrink == 'scale' ) {
					this.height = Math.max(this.indicatorHeight + y * 3, 8);
					this.indicatorStyle.height = this.height + 'px';
				}
				y = this.minBoundaryY;
			} else if ( y > this.maxBoundaryY ) {
				if ( this.options.shrink == 'scale' ) {
					this.height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, 8);
					this.indicatorStyle.height = this.height + 'px';
					y = this.maxPosY + this.indicatorHeight - this.height;
				} else {
					y = this.maxBoundaryY;
				}
			} else if ( this.options.shrink == 'scale' && this.height != this.indicatorHeight ) {
				this.height = this.indicatorHeight;
				this.indicatorStyle.height = this.height + 'px';
			}
		}

		this.x = x;
		this.y = y;

		if ( this.scroller.options.useTransform ) {
			this.indicatorStyle[utils.style.transform] = 'translate(' + x + 'px,' + y + 'px)' + this.scroller.translateZ;
		} else {
			this.indicatorStyle.left = x + 'px';
			this.indicatorStyle.top = y + 'px';
		}
	},

	_pos: function (x, y) {
		if ( x < 0 ) {
			x = 0;
		} else if ( x > this.maxPosX ) {
			x = this.maxPosX;
		}

		if ( y < 0 ) {
			y = 0;
		} else if ( y > this.maxPosY ) {
			y = this.maxPosY;
		}

		x = this.options.listenX ? Math.round(x / this.sizeRatioX) : this.scroller.x;
		y = this.options.listenY ? Math.round(y / this.sizeRatioY) : this.scroller.y;

		this.scroller.scrollTo(x, y);
	},

	fade: function (val, hold) {
		if ( hold && !this.visible ) {
			return;
		}

		clearTimeout(this.fadeTimeout);
		this.fadeTimeout = null;

		var time = val ? 250 : 500,
			delay = val ? 0 : 300;

		val = val ? '1' : '0';

		this.wrapperStyle[utils.style.transitionDuration] = time + 'ms';

		this.fadeTimeout = setTimeout((function (val) {
			this.wrapperStyle.opacity = val;
			this.visible = +val;
		}).bind(this, val), delay);
	}
};

IScroll.utils = utils;

if ( typeof module != 'undefined' && module.exports ) {
	module.exports = IScroll;
} else if ( true ) {
        !(__WEBPACK_AMD_DEFINE_RESULT__ = function () { return IScroll; }.call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
} else {
	window.IScroll = IScroll;
}

})(window, document, Math);


/***/ }),
/* 554 */
/***/ (function(module, exports, __webpack_require__) {

var getNative = __webpack_require__(66),
    root = __webpack_require__(46);

/* Built-in method references that are verified to be native. */
var DataView = getNative(root, 'DataView');

module.exports = DataView;


/***/ }),
/* 555 */
/***/ (function(module, exports, __webpack_require__) {

var hashClear = __webpack_require__(613),
    hashDelete = __webpack_require__(614),
    hashGet = __webpack_require__(615),
    hashHas = __webpack_require__(616),
    hashSet = __webpack_require__(617);

/**
 * Creates a hash object.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function Hash(entries) {
  var index = -1,
      length = entries == null ? 0 : entries.length;

  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

// Add methods to `Hash`.
Hash.prototype.clear = hashClear;
Hash.prototype['delete'] = hashDelete;
Hash.prototype.get = hashGet;
Hash.prototype.has = hashHas;
Hash.prototype.set = hashSet;

module.exports = Hash;


/***/ }),
/* 556 */
/***/ (function(module, exports, __webpack_require__) {

var getNative = __webpack_require__(66),
    root = __webpack_require__(46);

/* Built-in method references that are verified to be native. */
var Promise = getNative(root, 'Promise');

module.exports = Promise;


/***/ }),
/* 557 */
/***/ (function(module, exports, __webpack_require__) {

var root = __webpack_require__(46);

/** Built-in value references. */
var Uint8Array = root.Uint8Array;

module.exports = Uint8Array;


/***/ }),
/* 558 */
/***/ (function(module, exports, __webpack_require__) {

var getNative = __webpack_require__(66),
    root = __webpack_require__(46);

/* Built-in method references that are verified to be native. */
var WeakMap = getNative(root, 'WeakMap');

module.exports = WeakMap;


/***/ }),
/* 559 */
/***/ (function(module, exports) {

/**
 * A specialized version of `baseAggregator` for arrays.
 *
 * @private
 * @param {Array} [array] The array to iterate over.
 * @param {Function} setter The function to set `accumulator` values.
 * @param {Function} iteratee The iteratee to transform keys.
 * @param {Object} accumulator The initial aggregated object.
 * @returns {Function} Returns `accumulator`.
 */
function arrayAggregator(array, setter, iteratee, accumulator) {
  var index = -1,
      length = array == null ? 0 : array.length;

  while (++index < length) {
    var value = array[index];
    setter(accumulator, value, iteratee(value), array);
  }
  return accumulator;
}

module.exports = arrayAggregator;


/***/ }),
/* 560 */
/***/ (function(module, exports) {

/**
 * A specialized version of `_.forEach` for arrays without support for
 * iteratee shorthands.
 *
 * @private
 * @param {Array} [array] The array to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array} Returns `array`.
 */
function arrayEach(array, iteratee) {
  var index = -1,
      length = array == null ? 0 : array.length;

  while (++index < length) {
    if (iteratee(array[index], index, array) === false) {
      break;
    }
  }
  return array;
}

module.exports = arrayEach;


/***/ }),
/* 561 */
/***/ (function(module, exports) {

/**
 * A specialized version of `_.forEachRight` for arrays without support for
 * iteratee shorthands.
 *
 * @private
 * @param {Array} [array] The array to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array} Returns `array`.
 */
function arrayEachRight(array, iteratee) {
  var length = array == null ? 0 : array.length;

  while (length--) {
    if (iteratee(array[length], length, array) === false) {
      break;
    }
  }
  return array;
}

module.exports = arrayEachRight;


/***/ }),
/* 562 */
/***/ (function(module, exports) {

/**
 * A specialized version of `_.every` for arrays without support for
 * iteratee shorthands.
 *
 * @private
 * @param {Array} [array] The array to iterate over.
 * @param {Function} predicate The function invoked per iteration.
 * @returns {boolean} Returns `true` if all elements pass the predicate check,
 *  else `false`.
 */
function arrayEvery(array, predicate) {
  var index = -1,
      length = array == null ? 0 : array.length;

  while (++index < length) {
    if (!predicate(array[index], index, array)) {
      return false;
    }
  }
  return true;
}

module.exports = arrayEvery;


/***/ }),
/* 563 */
/***/ (function(module, exports, __webpack_require__) {

var baseTimes = __webpack_require__(241),
    isArguments = __webpack_require__(174),
    isArray = __webpack_require__(10),
    isBuffer = __webpack_require__(264),
    isIndex = __webpack_require__(67),
    isTypedArray = __webpack_require__(267);

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Creates an array of the enumerable property names of the array-like `value`.
 *
 * @private
 * @param {*} value The value to query.
 * @param {boolean} inherited Specify returning inherited property names.
 * @returns {Array} Returns the array of property names.
 */
function arrayLikeKeys(value, inherited) {
  var isArr = isArray(value),
      isArg = !isArr && isArguments(value),
      isBuff = !isArr && !isArg && isBuffer(value),
      isType = !isArr && !isArg && !isBuff && isTypedArray(value),
      skipIndexes = isArr || isArg || isBuff || isType,
      result = skipIndexes ? baseTimes(value.length, String) : [],
      length = result.length;

  for (var key in value) {
    if ((inherited || hasOwnProperty.call(value, key)) &&
        !(skipIndexes && (
           // Safari 9 has enumerable `arguments.length` in strict mode.
           key == 'length' ||
           // Node.js 0.10 has enumerable non-index properties on buffers.
           (isBuff && (key == 'offset' || key == 'parent')) ||
           // PhantomJS 2 has enumerable non-index properties on typed arrays.
           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||
           // Skip index properties.
           isIndex(key, length)
        ))) {
      result.push(key);
    }
  }
  return result;
}

module.exports = arrayLikeKeys;


/***/ }),
/* 564 */
/***/ (function(module, exports) {

/**
 * A specialized version of `_.reduce` for arrays without support for
 * iteratee shorthands.
 *
 * @private
 * @param {Array} [array] The array to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @param {*} [accumulator] The initial value.
 * @param {boolean} [initAccum] Specify using the first element of `array` as
 *  the initial value.
 * @returns {*} Returns the accumulated value.
 */
function arrayReduce(array, iteratee, accumulator, initAccum) {
  var index = -1,
      length = array == null ? 0 : array.length;

  if (initAccum && length) {
    accumulator = array[++index];
  }
  while (++index < length) {
    accumulator = iteratee(accumulator, array[index], index, array);
  }
  return accumulator;
}

module.exports = arrayReduce;


/***/ }),
/* 565 */
/***/ (function(module, exports) {

/**
 * A specialized version of `_.reduceRight` for arrays without support for
 * iteratee shorthands.
 *
 * @private
 * @param {Array} [array] The array to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @param {*} [accumulator] The initial value.
 * @param {boolean} [initAccum] Specify using the last element of `array` as
 *  the initial value.
 * @returns {*} Returns the accumulated value.
 */
function arrayReduceRight(array, iteratee, accumulator, initAccum) {
  var length = array == null ? 0 : array.length;
  if (initAccum && length) {
    accumulator = array[--length];
  }
  while (length--) {
    accumulator = iteratee(accumulator, array[length], length, array);
  }
  return accumulator;
}

module.exports = arrayReduceRight;


/***/ }),
/* 566 */
/***/ (function(module, exports, __webpack_require__) {

var baseClamp = __webpack_require__(163),
    copyArray = __webpack_require__(120),
    shuffleSelf = __webpack_require__(124);

/**
 * A specialized version of `_.sampleSize` for arrays.
 *
 * @private
 * @param {Array} array The array to sample.
 * @param {number} n The number of elements to sample.
 * @returns {Array} Returns the random elements.
 */
function arraySampleSize(array, n) {
  return shuffleSelf(copyArray(array), baseClamp(n, 0, array.length));
}

module.exports = arraySampleSize;


/***/ }),
/* 567 */
/***/ (function(module, exports, __webpack_require__) {

var copyArray = __webpack_require__(120),
    shuffleSelf = __webpack_require__(124);

/**
 * A specialized version of `_.shuffle` for arrays.
 *
 * @private
 * @param {Array} array The array to shuffle.
 * @returns {Array} Returns the new shuffled array.
 */
function arrayShuffle(array) {
  return shuffleSelf(copyArray(array));
}

module.exports = arrayShuffle;


/***/ }),
/* 568 */
/***/ (function(module, exports, __webpack_require__) {

var baseProperty = __webpack_require__(166);

/**
 * Gets the size of an ASCII `string`.
 *
 * @private
 * @param {string} string The string inspect.
 * @returns {number} Returns the string size.
 */
var asciiSize = baseProperty('length');

module.exports = asciiSize;


/***/ }),
/* 569 */
/***/ (function(module, exports, __webpack_require__) {

var baseEach = __webpack_require__(52);

/**
 * Aggregates elements of `collection` on `accumulator` with keys transformed
 * by `iteratee` and values set by `setter`.
 *
 * @private
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} setter The function to set `accumulator` values.
 * @param {Function} iteratee The iteratee to transform keys.
 * @param {Object} accumulator The initial aggregated object.
 * @returns {Function} Returns `accumulator`.
 */
function baseAggregator(collection, setter, iteratee, accumulator) {
  baseEach(collection, function(value, key, collection) {
    setter(accumulator, value, iteratee(value), collection);
  });
  return accumulator;
}

module.exports = baseAggregator;


/***/ }),
/* 570 */
/***/ (function(module, exports, __webpack_require__) {

var get = __webpack_require__(262);

/**
 * The base implementation of `_.at` without support for individual paths.
 *
 * @private
 * @param {Object} object The object to iterate over.
 * @param {string[]} paths The property paths to pick.
 * @returns {Array} Returns the picked elements.
 */
function baseAt(object, paths) {
  var index = -1,
      length = paths.length,
      result = Array(length),
      skip = object == null;

  while (++index < length) {
    result[index] = skip ? undefined : get(object, paths[index]);
  }
  return result;
}

module.exports = baseAt;


/***/ }),
/* 571 */
/***/ (function(module, exports, __webpack_require__) {

var baseEach = __webpack_require__(52);

/**
 * The base implementation of `_.every` without support for iteratee shorthands.
 *
 * @private
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} predicate The function invoked per iteration.
 * @returns {boolean} Returns `true` if all elements pass the predicate check,
 *  else `false`
 */
function baseEvery(collection, predicate) {
  var result = true;
  baseEach(collection, function(value, index, collection) {
    result = !!predicate(value, index, collection);
    return result;
  });
  return result;
}

module.exports = baseEvery;


/***/ }),
/* 572 */
/***/ (function(module, exports, __webpack_require__) {

var toInteger = __webpack_require__(18),
    toLength = __webpack_require__(729);

/**
 * The base implementation of `_.fill` without an iteratee call guard.
 *
 * @private
 * @param {Array} array The array to fill.
 * @param {*} value The value to fill `array` with.
 * @param {number} [start=0] The start position.
 * @param {number} [end=array.length] The end position.
 * @returns {Array} Returns `array`.
 */
function baseFill(array, value, start, end) {
  var length = array.length;

  start = toInteger(start);
  if (start < 0) {
    start = -start > length ? 0 : (length + start);
  }
  end = (end === undefined || end > length) ? length : toInteger(end);
  if (end < 0) {
    end += length;
  }
  end = start > end ? 0 : toLength(end);
  while (start < end) {
    array[start++] = value;
  }
  return array;
}

module.exports = baseFill;


/***/ }),
/* 573 */
/***/ (function(module, exports, __webpack_require__) {

var createBaseFor = __webpack_require__(246);

/**
 * The base implementation of `baseForOwn` which iterates over `object`
 * properties returned by `keysFunc` and invokes `iteratee` for each property.
 * Iteratee functions may exit iteration early by explicitly returning `false`.
 *
 * @private
 * @param {Object} object The object to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @param {Function} keysFunc The function to get the keys of `object`.
 * @returns {Object} Returns `object`.
 */
var baseFor = createBaseFor();

module.exports = baseFor;


/***/ }),
/* 574 */
/***/ (function(module, exports, __webpack_require__) {

var baseFor = __webpack_require__(573),
    keys = __webpack_require__(81);

/**
 * The base implementation of `_.forOwn` without support for iteratee shorthands.
 *
 * @private
 * @param {Object} object The object to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Object} Returns `object`.
 */
function baseForOwn(object, iteratee) {
  return object && baseFor(object, iteratee, keys);
}

module.exports = baseForOwn;


/***/ }),
/* 575 */
/***/ (function(module, exports, __webpack_require__) {

var baseForRight = __webpack_require__(576),
    keys = __webpack_require__(81);

/**
 * The base implementation of `_.forOwnRight` without support for iteratee shorthands.
 *
 * @private
 * @param {Object} object The object to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Object} Returns `object`.
 */
function baseForOwnRight(object, iteratee) {
  return object && baseForRight(object, iteratee, keys);
}

module.exports = baseForOwnRight;


/***/ }),
/* 576 */
/***/ (function(module, exports, __webpack_require__) {

var createBaseFor = __webpack_require__(246);

/**
 * This function is like `baseFor` except that it iterates over properties
 * in the opposite order.
 *
 * @private
 * @param {Object} object The object to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @param {Function} keysFunc The function to get the keys of `object`.
 * @returns {Object} Returns `object`.
 */
var baseForRight = createBaseFor(true);

module.exports = baseForRight;


/***/ }),
/* 577 */
/***/ (function(module, exports, __webpack_require__) {

var arrayPush = __webpack_require__(162),
    isArray = __webpack_require__(10);

/**
 * The base implementation of `getAllKeys` and `getAllKeysIn` which uses
 * `keysFunc` and `symbolsFunc` to get the enumerable property names and
 * symbols of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {Function} keysFunc The function to get the keys of `object`.
 * @param {Function} symbolsFunc The function to get the symbols of `object`.
 * @returns {Array} Returns the array of property names and symbols.
 */
function baseGetAllKeys(object, keysFunc, symbolsFunc) {
  var result = keysFunc(object);
  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));
}

module.exports = baseGetAllKeys;


/***/ }),
/* 578 */
/***/ (function(module, exports) {

/**
 * The base implementation of `_.hasIn` without support for deep paths.
 *
 * @private
 * @param {Object} [object] The object to query.
 * @param {Array|string} key The key to check.
 * @returns {boolean} Returns `true` if `key` exists, else `false`.
 */
function baseHasIn(object, key) {
  return object != null && key in Object(object);
}

module.exports = baseHasIn;


/***/ }),
/* 579 */
/***/ (function(module, exports) {

/**
 * This function is like `baseIndexOf` except that it accepts a comparator.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {*} value The value to search for.
 * @param {number} fromIndex The index to search from.
 * @param {Function} comparator The comparator invoked per element.
 * @returns {number} Returns the index of the matched value, else `-1`.
 */
function baseIndexOfWith(array, value, fromIndex, comparator) {
  var index = fromIndex - 1,
      length = array.length;

  while (++index < length) {
    if (comparator(array[index], value)) {
      return index;
    }
  }
  return -1;
}

module.exports = baseIndexOfWith;


/***/ }),
/* 580 */
/***/ (function(module, exports, __webpack_require__) {

var apply = __webpack_require__(112),
    castPath = __webpack_require__(90),
    last = __webpack_require__(34),
    parent = __webpack_require__(255),
    toKey = __webpack_require__(69);

/**
 * The base implementation of `_.invoke` without support for individual
 * method arguments.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {Array|string} path The path of the method to invoke.
 * @param {Array} args The arguments to invoke the method with.
 * @returns {*} Returns the result of the invoked method.
 */
function baseInvoke(object, path, args) {
  path = castPath(path, object);
  object = parent(object, path);
  var func = object == null ? object : object[toKey(last(path))];
  return func == null ? undefined : apply(func, object, args);
}

module.exports = baseInvoke;


/***/ }),
/* 581 */
/***/ (function(module, exports, __webpack_require__) {

var baseGetTag = __webpack_require__(78),
    isObjectLike = __webpack_require__(71);

/** `Object#toString` result references. */
var argsTag = '[object Arguments]';

/**
 * The base implementation of `_.isArguments`.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an `arguments` object,
 */
function baseIsArguments(value) {
  return isObjectLike(value) && baseGetTag(value) == argsTag;
}

module.exports = baseIsArguments;


/***/ }),
/* 582 */
/***/ (function(module, exports, __webpack_require__) {

var Stack = __webpack_require__(226),
    equalArrays = __webpack_require__(249),
    equalByTag = __webpack_require__(603),
    equalObjects = __webpack_require__(604),
    getTag = __webpack_require__(251),
    isArray = __webpack_require__(10),
    isBuffer = __webpack_require__(264),
    isTypedArray = __webpack_require__(267);

/** Used to compose bitmasks for value comparisons. */
var COMPARE_PARTIAL_FLAG = 1;

/** `Object#toString` result references. */
var argsTag = '[object Arguments]',
    arrayTag = '[object Array]',
    objectTag = '[object Object]';

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * A specialized version of `baseIsEqual` for arrays and objects which performs
 * deep comparisons and tracks traversed objects enabling objects with circular
 * references to be compared.
 *
 * @private
 * @param {Object} object The object to compare.
 * @param {Object} other The other object to compare.
 * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
 * @param {Function} customizer The function to customize comparisons.
 * @param {Function} equalFunc The function to determine equivalents of values.
 * @param {Object} [stack] Tracks traversed `object` and `other` objects.
 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
 */
function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {
  var objIsArr = isArray(object),
      othIsArr = isArray(other),
      objTag = objIsArr ? arrayTag : getTag(object),
      othTag = othIsArr ? arrayTag : getTag(other);

  objTag = objTag == argsTag ? objectTag : objTag;
  othTag = othTag == argsTag ? objectTag : othTag;

  var objIsObj = objTag == objectTag,
      othIsObj = othTag == objectTag,
      isSameTag = objTag == othTag;

  if (isSameTag && isBuffer(object)) {
    if (!isBuffer(other)) {
      return false;
    }
    objIsArr = true;
    objIsObj = false;
  }
  if (isSameTag && !objIsObj) {
    stack || (stack = new Stack);
    return (objIsArr || isTypedArray(object))
      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)
      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);
  }
  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {
    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),
        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');

    if (objIsWrapped || othIsWrapped) {
      var objUnwrapped = objIsWrapped ? object.value() : object,
          othUnwrapped = othIsWrapped ? other.value() : other;

      stack || (stack = new Stack);
      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);
    }
  }
  if (!isSameTag) {
    return false;
  }
  stack || (stack = new Stack);
  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);
}

module.exports = baseIsEqualDeep;


/***/ }),
/* 583 */
/***/ (function(module, exports, __webpack_require__) {

var Stack = __webpack_require__(226),
    baseIsEqual = __webpack_require__(232);

/** Used to compose bitmasks for value comparisons. */
var COMPARE_PARTIAL_FLAG = 1,
    COMPARE_UNORDERED_FLAG = 2;

/**
 * The base implementation of `_.isMatch` without support for iteratee shorthands.
 *
 * @private
 * @param {Object} object The object to inspect.
 * @param {Object} source The object of property values to match.
 * @param {Array} matchData The property names, values, and compare flags to match.
 * @param {Function} [customizer] The function to customize comparisons.
 * @returns {boolean} Returns `true` if `object` is a match, else `false`.
 */
function baseIsMatch(object, source, matchData, customizer) {
  var index = matchData.length,
      length = index,
      noCustomizer = !customizer;

  if (object == null) {
    return !length;
  }
  object = Object(object);
  while (index--) {
    var data = matchData[index];
    if ((noCustomizer && data[2])
          ? data[1] !== object[data[0]]
          : !(data[0] in object)
        ) {
      return false;
    }
  }
  while (++index < length) {
    data = matchData[index];
    var key = data[0],
        objValue = object[key],
        srcValue = data[1];

    if (noCustomizer && data[2]) {
      if (objValue === undefined && !(key in object)) {
        return false;
      }
    } else {
      var stack = new Stack;
      if (customizer) {
        var result = customizer(objValue, srcValue, key, object, source, stack);
      }
      if (!(result === undefined
            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)
            : result
          )) {
        return false;
      }
    }
  }
  return true;
}

module.exports = baseIsMatch;


/***/ }),
/* 584 */
/***/ (function(module, exports, __webpack_require__) {

var isFunction = __webpack_require__(265),
    isMasked = __webpack_require__(620),
    isObject = __webpack_require__(80),
    toSource = __webpack_require__(257);

/**
 * Used to match `RegExp`
 * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).
 */
var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;

/** Used to detect host constructors (Safari). */
var reIsHostCtor = /^\[object .+?Constructor\]$/;

/** Used for built-in method references. */
var funcProto = Function.prototype,
    objectProto = Object.prototype;

/** Used to resolve the decompiled source of functions. */
var funcToString = funcProto.toString;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/** Used to detect if a method is native. */
var reIsNative = RegExp('^' +
  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\$&')
  .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$'
);

/**
 * The base implementation of `_.isNative` without bad shim checks.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a native function,
 *  else `false`.
 */
function baseIsNative(value) {
  if (!isObject(value) || isMasked(value)) {
    return false;
  }
  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;
  return pattern.test(toSource(value));
}

module.exports = baseIsNative;


/***/ }),
/* 585 */
/***/ (function(module, exports, __webpack_require__) {

var baseGetTag = __webpack_require__(78),
    isLength = __webpack_require__(175),
    isObjectLike = __webpack_require__(71);

/** `Object#toString` result references. */
var argsTag = '[object Arguments]',
    arrayTag = '[object Array]',
    boolTag = '[object Boolean]',
    dateTag = '[object Date]',
    errorTag = '[object Error]',
    funcTag = '[object Function]',
    mapTag = '[object Map]',
    numberTag = '[object Number]',
    objectTag = '[object Object]',
    regexpTag = '[object RegExp]',
    setTag = '[object Set]',
    stringTag = '[object String]',
    weakMapTag = '[object WeakMap]';

var arrayBufferTag = '[object ArrayBuffer]',
    dataViewTag = '[object DataView]',
    float32Tag = '[object Float32Array]',
    float64Tag = '[object Float64Array]',
    int8Tag = '[object Int8Array]',
    int16Tag = '[object Int16Array]',
    int32Tag = '[object Int32Array]',
    uint8Tag = '[object Uint8Array]',
    uint8ClampedTag = '[object Uint8ClampedArray]',
    uint16Tag = '[object Uint16Array]',
    uint32Tag = '[object Uint32Array]';

/** Used to identify `toStringTag` values of typed arrays. */
var typedArrayTags = {};
typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =
typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =
typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =
typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =
typedArrayTags[uint32Tag] = true;
typedArrayTags[argsTag] = typedArrayTags[arrayTag] =
typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =
typedArrayTags[dataViewTag] = typedArrayTags[dateTag] =
typedArrayTags[errorTag] = typedArrayTags[funcTag] =
typedArrayTags[mapTag] = typedArrayTags[numberTag] =
typedArrayTags[objectTag] = typedArrayTags[regexpTag] =
typedArrayTags[setTag] = typedArrayTags[stringTag] =
typedArrayTags[weakMapTag] = false;

/**
 * The base implementation of `_.isTypedArray` without Node.js optimizations.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
 */
function baseIsTypedArray(value) {
  return isObjectLike(value) &&
    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];
}

module.exports = baseIsTypedArray;


/***/ }),
/* 586 */
/***/ (function(module, exports, __webpack_require__) {

var baseIsMatch = __webpack_require__(583),
    getMatchData = __webpack_require__(607),
    matchesStrictComparable = __webpack_require__(253);

/**
 * The base implementation of `_.matches` which doesn't clone `source`.
 *
 * @private
 * @param {Object} source The object of property values to match.
 * @returns {Function} Returns the new spec function.
 */
function baseMatches(source) {
  var matchData = getMatchData(source);
  if (matchData.length == 1 && matchData[0][2]) {
    return matchesStrictComparable(matchData[0][0], matchData[0][1]);
  }
  return function(object) {
    return object === source || baseIsMatch(object, source, matchData);
  };
}

module.exports = baseMatches;


/***/ }),
/* 587 */
/***/ (function(module, exports, __webpack_require__) {

var baseIsEqual = __webpack_require__(232),
    get = __webpack_require__(262),
    hasIn = __webpack_require__(680),
    isKey = __webpack_require__(171),
    isStrictComparable = __webpack_require__(252),
    matchesStrictComparable = __webpack_require__(253),
    toKey = __webpack_require__(69);

/** Used to compose bitmasks for value comparisons. */
var COMPARE_PARTIAL_FLAG = 1,
    COMPARE_UNORDERED_FLAG = 2;

/**
 * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.
 *
 * @private
 * @param {string} path The path of the property to get.
 * @param {*} srcValue The value to match.
 * @returns {Function} Returns the new spec function.
 */
function baseMatchesProperty(path, srcValue) {
  if (isKey(path) && isStrictComparable(srcValue)) {
    return matchesStrictComparable(toKey(path), srcValue);
  }
  return function(object) {
    var objValue = get(object, path);
    return (objValue === undefined && objValue === srcValue)
      ? hasIn(object, path)
      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);
  };
}

module.exports = baseMatchesProperty;


/***/ }),
/* 588 */
/***/ (function(module, exports, __webpack_require__) {

var isIndex = __webpack_require__(67);

/**
 * The base implementation of `_.nth` which doesn't coerce arguments.
 *
 * @private
 * @param {Array} array The array to query.
 * @param {number} n The index of the element to return.
 * @returns {*} Returns the nth element of `array`.
 */
function baseNth(array, n) {
  var length = array.length;
  if (!length) {
    return;
  }
  n += n < 0 ? length : 0;
  return isIndex(n, length) ? array[n] : undefined;
}

module.exports = baseNth;


/***/ }),
/* 589 */
/***/ (function(module, exports, __webpack_require__) {

var baseGet = __webpack_require__(164);

/**
 * A specialized version of `baseProperty` which supports deep paths.
 *
 * @private
 * @param {Array|string} path The path of the property to get.
 * @returns {Function} Returns the new accessor function.
 */
function basePropertyDeep(path) {
  return function(object) {
    return baseGet(object, path);
  };
}

module.exports = basePropertyDeep;


/***/ }),
/* 590 */
/***/ (function(module, exports, __webpack_require__) {

var arraySample = __webpack_require__(227),
    values = __webpack_require__(126);

/**
 * The base implementation of `_.sample`.
 *
 * @private
 * @param {Array|Object} collection The collection to sample.
 * @returns {*} Returns the random element.
 */
function baseSample(collection) {
  return arraySample(values(collection));
}

module.exports = baseSample;


/***/ }),
/* 591 */
/***/ (function(module, exports, __webpack_require__) {

var baseClamp = __webpack_require__(163),
    shuffleSelf = __webpack_require__(124),
    values = __webpack_require__(126);

/**
 * The base implementation of `_.sampleSize` without param guards.
 *
 * @private
 * @param {Array|Object} collection The collection to sample.
 * @param {number} n The number of elements to sample.
 * @returns {Array} Returns the random elements.
 */
function baseSampleSize(collection, n) {
  var array = values(collection);
  return shuffleSelf(array, baseClamp(n, 0, array.length));
}

module.exports = baseSampleSize;


/***/ }),
/* 592 */
/***/ (function(module, exports, __webpack_require__) {

var assignValue = __webpack_require__(229),
    castPath = __webpack_require__(90),
    isIndex = __webpack_require__(67),
    isObject = __webpack_require__(80),
    toKey = __webpack_require__(69);

/**
 * The base implementation of `_.set`.
 *
 * @private
 * @param {Object} object The object to modify.
 * @param {Array|string} path The path of the property to set.
 * @param {*} value The value to set.
 * @param {Function} [customizer] The function to customize path creation.
 * @returns {Object} Returns `object`.
 */
function baseSet(object, path, value, customizer) {
  if (!isObject(object)) {
    return object;
  }
  path = castPath(path, object);

  var index = -1,
      length = path.length,
      lastIndex = length - 1,
      nested = object;

  while (nested != null && ++index < length) {
    var key = toKey(path[index]),
        newValue = value;

    if (index != lastIndex) {
      var objValue = nested[key];
      newValue = customizer ? customizer(objValue, key, nested) : undefined;
      if (newValue === undefined) {
        newValue = isObject(objValue)
          ? objValue
          : (isIndex(path[index + 1]) ? [] : {});
      }
    }
    assignValue(nested, key, newValue);
    nested = nested[key];
  }
  return object;
}

module.exports = baseSet;


/***/ }),
/* 593 */
/***/ (function(module, exports, __webpack_require__) {

var constant = __webpack_require__(656),
    defineProperty = __webpack_require__(248),
    identity = __webpack_require__(79);

/**
 * The base implementation of `setToString` without support for hot loop shorting.
 *
 * @private
 * @param {Function} func The function to modify.
 * @param {Function} string The `toString` result.
 * @returns {Function} Returns `func`.
 */
var baseSetToString = !defineProperty ? identity : function(func, string) {
  return defineProperty(func, 'toString', {
    'configurable': true,
    'enumerable': false,
    'value': constant(string),
    'writable': true
  });
};

module.exports = baseSetToString;


/***/ }),
/* 594 */
/***/ (function(module, exports, __webpack_require__) {

var shuffleSelf = __webpack_require__(124),
    values = __webpack_require__(126);

/**
 * The base implementation of `_.shuffle`.
 *
 * @private
 * @param {Array|Object} collection The collection to shuffle.
 * @returns {Array} Returns the new shuffled array.
 */
function baseShuffle(collection) {
  return shuffleSelf(values(collection));
}

module.exports = baseShuffle;


/***/ }),
/* 595 */
/***/ (function(module, exports, __webpack_require__) {

var baseEach = __webpack_require__(52);

/**
 * The base implementation of `_.some` without support for iteratee shorthands.
 *
 * @private
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} predicate The function invoked per iteration.
 * @returns {boolean} Returns `true` if any element passes the predicate check,
 *  else `false`.
 */
function baseSome(collection, predicate) {
  var result;

  baseEach(collection, function(value, index, collection) {
    result = predicate(value, index, collection);
    return !result;
  });
  return !!result;
}

module.exports = baseSome;


/***/ }),
/* 596 */
/***/ (function(module, exports) {

/**
 * The base implementation of `_.sortBy` which uses `comparer` to define the
 * sort order of `array` and replaces criteria objects with their corresponding
 * values.
 *
 * @private
 * @param {Array} array The array to sort.
 * @param {Function} comparer The function to define sort order.
 * @returns {Array} Returns `array`.
 */
function baseSortBy(array, comparer) {
  var length = array.length;

  array.sort(comparer);
  while (length--) {
    array[length] = array[length].value;
  }
  return array;
}

module.exports = baseSortBy;


/***/ }),
/* 597 */
/***/ (function(module, exports, __webpack_require__) {

var Symbol = __webpack_require__(87),
    arrayMap = __webpack_require__(27),
    isArray = __webpack_require__(10),
    isSymbol = __webpack_require__(72);

/** Used as references for various `Number` constants. */
var INFINITY = 1 / 0;

/** Used to convert symbols to primitives and strings. */
var symbolProto = Symbol ? Symbol.prototype : undefined,
    symbolToString = symbolProto ? symbolProto.toString : undefined;

/**
 * The base implementation of `_.toString` which doesn't convert nullish
 * values to empty strings.
 *
 * @private
 * @param {*} value The value to process.
 * @returns {string} Returns the string.
 */
function baseToString(value) {
  // Exit early for strings to avoid a performance hit in some environments.
  if (typeof value == 'string') {
    return value;
  }
  if (isArray(value)) {
    // Recursively convert values (susceptible to call stack limits).
    return arrayMap(value, baseToString) + '';
  }
  if (isSymbol(value)) {
    return symbolToString ? symbolToString.call(value) : '';
  }
  var result = (value + '');
  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;
}

module.exports = baseToString;


/***/ }),
/* 598 */
/***/ (function(module, exports, __webpack_require__) {

var castPath = __webpack_require__(90),
    last = __webpack_require__(34),
    parent = __webpack_require__(255),
    toKey = __webpack_require__(69);

/**
 * The base implementation of `_.unset`.
 *
 * @private
 * @param {Object} object The object to modify.
 * @param {Array|string} path The property path to unset.
 * @returns {boolean} Returns `true` if the property is deleted, else `false`.
 */
function baseUnset(object, path) {
  path = castPath(path, object);
  object = parent(object, path);
  return object == null || delete object[toKey(last(path))];
}

module.exports = baseUnset;


/***/ }),
/* 599 */
/***/ (function(module, exports, __webpack_require__) {

var arrayMap = __webpack_require__(27);

/**
 * The base implementation of `_.values` and `_.valuesIn` which creates an
 * array of `object` property values corresponding to the property names
 * of `props`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {Array} props The property names to get values for.
 * @returns {Object} Returns the array of property values.
 */
function baseValues(object, props) {
  return arrayMap(props, function(key) {
    return object[key];
  });
}

module.exports = baseValues;


/***/ }),
/* 600 */
/***/ (function(module, exports, __webpack_require__) {

var compareAscending = __webpack_require__(244);

/**
 * Used by `_.orderBy` to compare multiple properties of a value to another
 * and stable sort them.
 *
 * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,
 * specify an order of "desc" for descending or "asc" for ascending sort order
 * of corresponding values.
 *
 * @private
 * @param {Object} object The object to compare.
 * @param {Object} other The other object to compare.
 * @param {boolean[]|string[]} orders The order to sort by for each property.
 * @returns {number} Returns the sort order indicator for `object`.
 */
function compareMultiple(object, other, orders) {
  var index = -1,
      objCriteria = object.criteria,
      othCriteria = other.criteria,
      length = objCriteria.length,
      ordersLength = orders.length;

  while (++index < length) {
    var result = compareAscending(objCriteria[index], othCriteria[index]);
    if (result) {
      if (index >= ordersLength) {
        return result;
      }
      var order = orders[index];
      return result * (order == 'desc' ? -1 : 1);
    }
  }
  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications
  // that causes it, under certain circumstances, to provide the same value for
  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247
  // for more details.
  //
  // This also ensures a stable sort in V8 and other engines.
  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.
  return object.index - other.index;
}

module.exports = compareMultiple;


/***/ }),
/* 601 */
/***/ (function(module, exports, __webpack_require__) {

var root = __webpack_require__(46);

/** Used to detect overreaching core-js shims. */
var coreJsData = root['__core-js_shared__'];

module.exports = coreJsData;


/***/ }),
/* 602 */
/***/ (function(module, exports, __webpack_require__) {

var Set = __webpack_require__(225),
    noop = __webpack_require__(693),
    setToArray = __webpack_require__(172);

/** Used as references for various `Number` constants. */
var INFINITY = 1 / 0;

/**
 * Creates a set object of `values`.
 *
 * @private
 * @param {Array} values The values to add to the set.
 * @returns {Object} Returns the new set.
 */
var createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {
  return new Set(values);
};

module.exports = createSet;


/***/ }),
/* 603 */
/***/ (function(module, exports, __webpack_require__) {

var Symbol = __webpack_require__(87),
    Uint8Array = __webpack_require__(557),
    eq = __webpack_require__(70),
    equalArrays = __webpack_require__(249),
    mapToArray = __webpack_require__(632),
    setToArray = __webpack_require__(172);

/** Used to compose bitmasks for value comparisons. */
var COMPARE_PARTIAL_FLAG = 1,
    COMPARE_UNORDERED_FLAG = 2;

/** `Object#toString` result references. */
var boolTag = '[object Boolean]',
    dateTag = '[object Date]',
    errorTag = '[object Error]',
    mapTag = '[object Map]',
    numberTag = '[object Number]',
    regexpTag = '[object RegExp]',
    setTag = '[object Set]',
    stringTag = '[object String]',
    symbolTag = '[object Symbol]';

var arrayBufferTag = '[object ArrayBuffer]',
    dataViewTag = '[object DataView]';

/** Used to convert symbols to primitives and strings. */
var symbolProto = Symbol ? Symbol.prototype : undefined,
    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;

/**
 * A specialized version of `baseIsEqualDeep` for comparing objects of
 * the same `toStringTag`.
 *
 * **Note:** This function only supports comparing values with tags of
 * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.
 *
 * @private
 * @param {Object} object The object to compare.
 * @param {Object} other The other object to compare.
 * @param {string} tag The `toStringTag` of the objects to compare.
 * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
 * @param {Function} customizer The function to customize comparisons.
 * @param {Function} equalFunc The function to determine equivalents of values.
 * @param {Object} stack Tracks traversed `object` and `other` objects.
 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
 */
function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {
  switch (tag) {
    case dataViewTag:
      if ((object.byteLength != other.byteLength) ||
          (object.byteOffset != other.byteOffset)) {
        return false;
      }
      object = object.buffer;
      other = other.buffer;

    case arrayBufferTag:
      if ((object.byteLength != other.byteLength) ||
          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {
        return false;
      }
      return true;

    case boolTag:
    case dateTag:
    case numberTag:
      // Coerce booleans to `1` or `0` and dates to milliseconds.
      // Invalid dates are coerced to `NaN`.
      return eq(+object, +other);

    case errorTag:
      return object.name == other.name && object.message == other.message;

    case regexpTag:
    case stringTag:
      // Coerce regexes to strings and treat strings, primitives and objects,
      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring
      // for more details.
      return object == (other + '');

    case mapTag:
      var convert = mapToArray;

    case setTag:
      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;
      convert || (convert = setToArray);

      if (object.size != other.size && !isPartial) {
        return false;
      }
      // Assume cyclic values are equal.
      var stacked = stack.get(object);
      if (stacked) {
        return stacked == other;
      }
      bitmask |= COMPARE_UNORDERED_FLAG;

      // Recursively compare objects (susceptible to call stack limits).
      stack.set(object, other);
      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);
      stack['delete'](object);
      return result;

    case symbolTag:
      if (symbolValueOf) {
        return symbolValueOf.call(object) == symbolValueOf.call(other);
      }
  }
  return false;
}

module.exports = equalByTag;


/***/ }),
/* 604 */
/***/ (function(module, exports, __webpack_require__) {

var getAllKeys = __webpack_require__(606);

/** Used to compose bitmasks for value comparisons. */
var COMPARE_PARTIAL_FLAG = 1;

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * A specialized version of `baseIsEqualDeep` for objects with support for
 * partial deep comparisons.
 *
 * @private
 * @param {Object} object The object to compare.
 * @param {Object} other The other object to compare.
 * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.
 * @param {Function} customizer The function to customize comparisons.
 * @param {Function} equalFunc The function to determine equivalents of values.
 * @param {Object} stack Tracks traversed `object` and `other` objects.
 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
 */
function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {
  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,
      objProps = getAllKeys(object),
      objLength = objProps.length,
      othProps = getAllKeys(other),
      othLength = othProps.length;

  if (objLength != othLength && !isPartial) {
    return false;
  }
  var index = objLength;
  while (index--) {
    var key = objProps[index];
    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {
      return false;
    }
  }
  // Assume cyclic values are equal.
  var stacked = stack.get(object);
  if (stacked && stack.get(other)) {
    return stacked == other;
  }
  var result = true;
  stack.set(object, other);
  stack.set(other, object);

  var skipCtor = isPartial;
  while (++index < objLength) {
    key = objProps[index];
    var objValue = object[key],
        othValue = other[key];

    if (customizer) {
      var compared = isPartial
        ? customizer(othValue, objValue, key, other, object, stack)
        : customizer(objValue, othValue, key, object, other, stack);
    }
    // Recursively compare objects (susceptible to call stack limits).
    if (!(compared === undefined
          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))
          : compared
        )) {
      result = false;
      break;
    }
    skipCtor || (skipCtor = key == 'constructor');
  }
  if (result && !skipCtor) {
    var objCtor = object.constructor,
        othCtor = other.constructor;

    // Non `Object` object instances with different constructors are not equal.
    if (objCtor != othCtor &&
        ('constructor' in object && 'constructor' in other) &&
        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&
          typeof othCtor == 'function' && othCtor instanceof othCtor)) {
      result = false;
    }
  }
  stack['delete'](object);
  stack['delete'](other);
  return result;
}

module.exports = equalObjects;


/***/ }),
/* 605 */
/***/ (function(module, exports, __webpack_require__) {

var flatten = __webpack_require__(173),
    overRest = __webpack_require__(254),
    setToString = __webpack_require__(256);

/**
 * A specialized version of `baseRest` which flattens the rest array.
 *
 * @private
 * @param {Function} func The function to apply a rest parameter to.
 * @returns {Function} Returns the new function.
 */
function flatRest(func) {
  return setToString(overRest(func, undefined, flatten), func + '');
}

module.exports = flatRest;


/***/ }),
/* 606 */
/***/ (function(module, exports, __webpack_require__) {

var baseGetAllKeys = __webpack_require__(577),
    getSymbols = __webpack_require__(609),
    keys = __webpack_require__(81);

/**
 * Creates an array of own enumerable property names and symbols of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names and symbols.
 */
function getAllKeys(object) {
  return baseGetAllKeys(object, keys, getSymbols);
}

module.exports = getAllKeys;


/***/ }),
/* 607 */
/***/ (function(module, exports, __webpack_require__) {

var isStrictComparable = __webpack_require__(252),
    keys = __webpack_require__(81);

/**
 * Gets the property names, values, and compare flags of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the match data of `object`.
 */
function getMatchData(object) {
  var result = keys(object),
      length = result.length;

  while (length--) {
    var key = result[length],
        value = object[key];

    result[length] = [key, value, isStrictComparable(value)];
  }
  return result;
}

module.exports = getMatchData;


/***/ }),
/* 608 */
/***/ (function(module, exports, __webpack_require__) {

var Symbol = __webpack_require__(87);

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var nativeObjectToString = objectProto.toString;

/** Built-in value references. */
var symToStringTag = Symbol ? Symbol.toStringTag : undefined;

/**
 * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the raw `toStringTag`.
 */
function getRawTag(value) {
  var isOwn = hasOwnProperty.call(value, symToStringTag),
      tag = value[symToStringTag];

  try {
    value[symToStringTag] = undefined;
    var unmasked = true;
  } catch (e) {}

  var result = nativeObjectToString.call(value);
  if (unmasked) {
    if (isOwn) {
      value[symToStringTag] = tag;
    } else {
      delete value[symToStringTag];
    }
  }
  return result;
}

module.exports = getRawTag;


/***/ }),
/* 609 */
/***/ (function(module, exports, __webpack_require__) {

var arrayFilter = __webpack_require__(64),
    stubArray = __webpack_require__(721);

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Built-in value references. */
var propertyIsEnumerable = objectProto.propertyIsEnumerable;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeGetSymbols = Object.getOwnPropertySymbols;

/**
 * Creates an array of the own enumerable symbols of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of symbols.
 */
var getSymbols = !nativeGetSymbols ? stubArray : function(object) {
  if (object == null) {
    return [];
  }
  object = Object(object);
  return arrayFilter(nativeGetSymbols(object), function(symbol) {
    return propertyIsEnumerable.call(object, symbol);
  });
};

module.exports = getSymbols;


/***/ }),
/* 610 */
/***/ (function(module, exports) {

/**
 * Gets the value at `key` of `object`.
 *
 * @private
 * @param {Object} [object] The object to query.
 * @param {string} key The key of the property to get.
 * @returns {*} Returns the property value.
 */
function getValue(object, key) {
  return object == null ? undefined : object[key];
}

module.exports = getValue;


/***/ }),
/* 611 */
/***/ (function(module, exports, __webpack_require__) {

var castPath = __webpack_require__(90),
    isArguments = __webpack_require__(174),
    isArray = __webpack_require__(10),
    isIndex = __webpack_require__(67),
    isLength = __webpack_require__(175),
    toKey = __webpack_require__(69);

/**
 * Checks if `path` exists on `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {Array|string} path The path to check.
 * @param {Function} hasFunc The function to check properties.
 * @returns {boolean} Returns `true` if `path` exists, else `false`.
 */
function hasPath(object, path, hasFunc) {
  path = castPath(path, object);

  var index = -1,
      length = path.length,
      result = false;

  while (++index < length) {
    var key = toKey(path[index]);
    if (!(result = object != null && hasFunc(object, key))) {
      break;
    }
    object = object[key];
  }
  if (result || ++index != length) {
    return result;
  }
  length = object == null ? 0 : object.length;
  return !!length && isLength(length) && isIndex(key, length) &&
    (isArray(object) || isArguments(object));
}

module.exports = hasPath;


/***/ }),
/* 612 */
/***/ (function(module, exports) {

/** Used to compose unicode character classes. */
var rsAstralRange = '\\ud800-\\udfff',
    rsComboMarksRange = '\\u0300-\\u036f',
    reComboHalfMarksRange = '\\ufe20-\\ufe2f',
    rsComboSymbolsRange = '\\u20d0-\\u20ff',
    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,
    rsVarRange = '\\ufe0e\\ufe0f';

/** Used to compose unicode capture groups. */
var rsZWJ = '\\u200d';

/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */
var reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');

/**
 * Checks if `string` contains Unicode symbols.
 *
 * @private
 * @param {string} string The string to inspect.
 * @returns {boolean} Returns `true` if a symbol is found, else `false`.
 */
function hasUnicode(string) {
  return reHasUnicode.test(string);
}

module.exports = hasUnicode;


/***/ }),
/* 613 */
/***/ (function(module, exports, __webpack_require__) {

var nativeCreate = __webpack_require__(123);

/**
 * Removes all key-value entries from the hash.
 *
 * @private
 * @name clear
 * @memberOf Hash
 */
function hashClear() {
  this.__data__ = nativeCreate ? nativeCreate(null) : {};
  this.size = 0;
}

module.exports = hashClear;


/***/ }),
/* 614 */
/***/ (function(module, exports) {

/**
 * Removes `key` and its value from the hash.
 *
 * @private
 * @name delete
 * @memberOf Hash
 * @param {Object} hash The hash to modify.
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function hashDelete(key) {
  var result = this.has(key) && delete this.__data__[key];
  this.size -= result ? 1 : 0;
  return result;
}

module.exports = hashDelete;


/***/ }),
/* 615 */
/***/ (function(module, exports, __webpack_require__) {

var nativeCreate = __webpack_require__(123);

/** Used to stand-in for `undefined` hash values. */
var HASH_UNDEFINED = '__lodash_hash_undefined__';

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Gets the hash value for `key`.
 *
 * @private
 * @name get
 * @memberOf Hash
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function hashGet(key) {
  var data = this.__data__;
  if (nativeCreate) {
    var result = data[key];
    return result === HASH_UNDEFINED ? undefined : result;
  }
  return hasOwnProperty.call(data, key) ? data[key] : undefined;
}

module.exports = hashGet;


/***/ }),
/* 616 */
/***/ (function(module, exports, __webpack_require__) {

var nativeCreate = __webpack_require__(123);

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Checks if a hash value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf Hash
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function hashHas(key) {
  var data = this.__data__;
  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);
}

module.exports = hashHas;


/***/ }),
/* 617 */
/***/ (function(module, exports, __webpack_require__) {

var nativeCreate = __webpack_require__(123);

/** Used to stand-in for `undefined` hash values. */
var HASH_UNDEFINED = '__lodash_hash_undefined__';

/**
 * Sets the hash `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf Hash
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the hash instance.
 */
function hashSet(key, value) {
  var data = this.__data__;
  this.size += this.has(key) ? 0 : 1;
  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;
  return this;
}

module.exports = hashSet;


/***/ }),
/* 618 */
/***/ (function(module, exports, __webpack_require__) {

var Symbol = __webpack_require__(87),
    isArguments = __webpack_require__(174),
    isArray = __webpack_require__(10);

/** Built-in value references. */
var spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;

/**
 * Checks if `value` is a flattenable `arguments` object or array.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.
 */
function isFlattenable(value) {
  return isArray(value) || isArguments(value) ||
    !!(spreadableSymbol && value && value[spreadableSymbol]);
}

module.exports = isFlattenable;


/***/ }),
/* 619 */
/***/ (function(module, exports) {

/**
 * Checks if `value` is suitable for use as unique object key.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is suitable, else `false`.
 */
function isKeyable(value) {
  var type = typeof value;
  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')
    ? (value !== '__proto__')
    : (value === null);
}

module.exports = isKeyable;


/***/ }),
/* 620 */
/***/ (function(module, exports, __webpack_require__) {

var coreJsData = __webpack_require__(601);

/** Used to detect methods masquerading as native. */
var maskSrcKey = (function() {
  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');
  return uid ? ('Symbol(src)_1.' + uid) : '';
}());

/**
 * Checks if `func` has its source masked.
 *
 * @private
 * @param {Function} func The function to check.
 * @returns {boolean} Returns `true` if `func` is masked, else `false`.
 */
function isMasked(func) {
  return !!maskSrcKey && (maskSrcKey in func);
}

module.exports = isMasked;


/***/ }),
/* 621 */
/***/ (function(module, exports) {

/** Used for built-in method references. */
var objectProto = Object.prototype;

/**
 * Checks if `value` is likely a prototype object.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.
 */
function isPrototype(value) {
  var Ctor = value && value.constructor,
      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;

  return value === proto;
}

module.exports = isPrototype;


/***/ }),
/* 622 */
/***/ (function(module, exports) {

/**
 * Removes all key-value entries from the list cache.
 *
 * @private
 * @name clear
 * @memberOf ListCache
 */
function listCacheClear() {
  this.__data__ = [];
  this.size = 0;
}

module.exports = listCacheClear;


/***/ }),
/* 623 */
/***/ (function(module, exports, __webpack_require__) {

var assocIndexOf = __webpack_require__(113);

/** Used for built-in method references. */
var arrayProto = Array.prototype;

/** Built-in value references. */
var splice = arrayProto.splice;

/**
 * Removes `key` and its value from the list cache.
 *
 * @private
 * @name delete
 * @memberOf ListCache
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function listCacheDelete(key) {
  var data = this.__data__,
      index = assocIndexOf(data, key);

  if (index < 0) {
    return false;
  }
  var lastIndex = data.length - 1;
  if (index == lastIndex) {
    data.pop();
  } else {
    splice.call(data, index, 1);
  }
  --this.size;
  return true;
}

module.exports = listCacheDelete;


/***/ }),
/* 624 */
/***/ (function(module, exports, __webpack_require__) {

var assocIndexOf = __webpack_require__(113);

/**
 * Gets the list cache value for `key`.
 *
 * @private
 * @name get
 * @memberOf ListCache
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function listCacheGet(key) {
  var data = this.__data__,
      index = assocIndexOf(data, key);

  return index < 0 ? undefined : data[index][1];
}

module.exports = listCacheGet;


/***/ }),
/* 625 */
/***/ (function(module, exports, __webpack_require__) {

var assocIndexOf = __webpack_require__(113);

/**
 * Checks if a list cache value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf ListCache
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function listCacheHas(key) {
  return assocIndexOf(this.__data__, key) > -1;
}

module.exports = listCacheHas;


/***/ }),
/* 626 */
/***/ (function(module, exports, __webpack_require__) {

var assocIndexOf = __webpack_require__(113);

/**
 * Sets the list cache `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf ListCache
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the list cache instance.
 */
function listCacheSet(key, value) {
  var data = this.__data__,
      index = assocIndexOf(data, key);

  if (index < 0) {
    ++this.size;
    data.push([key, value]);
  } else {
    data[index][1] = value;
  }
  return this;
}

module.exports = listCacheSet;


/***/ }),
/* 627 */
/***/ (function(module, exports, __webpack_require__) {

var Hash = __webpack_require__(555),
    ListCache = __webpack_require__(110),
    Map = __webpack_require__(158);

/**
 * Removes all key-value entries from the map.
 *
 * @private
 * @name clear
 * @memberOf MapCache
 */
function mapCacheClear() {
  this.size = 0;
  this.__data__ = {
    'hash': new Hash,
    'map': new (Map || ListCache),
    'string': new Hash
  };
}

module.exports = mapCacheClear;


/***/ }),
/* 628 */
/***/ (function(module, exports, __webpack_require__) {

var getMapData = __webpack_require__(122);

/**
 * Removes `key` and its value from the map.
 *
 * @private
 * @name delete
 * @memberOf MapCache
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function mapCacheDelete(key) {
  var result = getMapData(this, key)['delete'](key);
  this.size -= result ? 1 : 0;
  return result;
}

module.exports = mapCacheDelete;


/***/ }),
/* 629 */
/***/ (function(module, exports, __webpack_require__) {

var getMapData = __webpack_require__(122);

/**
 * Gets the map value for `key`.
 *
 * @private
 * @name get
 * @memberOf MapCache
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function mapCacheGet(key) {
  return getMapData(this, key).get(key);
}

module.exports = mapCacheGet;


/***/ }),
/* 630 */
/***/ (function(module, exports, __webpack_require__) {

var getMapData = __webpack_require__(122);

/**
 * Checks if a map value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf MapCache
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function mapCacheHas(key) {
  return getMapData(this, key).has(key);
}

module.exports = mapCacheHas;


/***/ }),
/* 631 */
/***/ (function(module, exports, __webpack_require__) {

var getMapData = __webpack_require__(122);

/**
 * Sets the map `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf MapCache
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the map cache instance.
 */
function mapCacheSet(key, value) {
  var data = getMapData(this, key),
      size = data.size;

  data.set(key, value);
  this.size += data.size == size ? 0 : 1;
  return this;
}

module.exports = mapCacheSet;


/***/ }),
/* 632 */
/***/ (function(module, exports) {

/**
 * Converts `map` to its key-value pairs.
 *
 * @private
 * @param {Object} map The map to convert.
 * @returns {Array} Returns the key-value pairs.
 */
function mapToArray(map) {
  var index = -1,
      result = Array(map.size);

  map.forEach(function(value, key) {
    result[++index] = [key, value];
  });
  return result;
}

module.exports = mapToArray;


/***/ }),
/* 633 */
/***/ (function(module, exports, __webpack_require__) {

var memoize = __webpack_require__(691);

/** Used as the maximum memoize cache size. */
var MAX_MEMOIZE_SIZE = 500;

/**
 * A specialized version of `_.memoize` which clears the memoized function's
 * cache when it exceeds `MAX_MEMOIZE_SIZE`.
 *
 * @private
 * @param {Function} func The function to have its output memoized.
 * @returns {Function} Returns the new memoized function.
 */
function memoizeCapped(func) {
  var result = memoize(func, function(key) {
    if (cache.size === MAX_MEMOIZE_SIZE) {
      cache.clear();
    }
    return key;
  });

  var cache = result.cache;
  return result;
}

module.exports = memoizeCapped;


/***/ }),
/* 634 */
/***/ (function(module, exports, __webpack_require__) {

var overArg = __webpack_require__(637);

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeKeys = overArg(Object.keys, Object);

module.exports = nativeKeys;


/***/ }),
/* 635 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(module) {var freeGlobal = __webpack_require__(250);

/** Detect free variable `exports`. */
var freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;

/** Detect free variable `module`. */
var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;

/** Detect the popular CommonJS extension `module.exports`. */
var moduleExports = freeModule && freeModule.exports === freeExports;

/** Detect free variable `process` from Node.js. */
var freeProcess = moduleExports && freeGlobal.process;

/** Used to access faster Node.js helpers. */
var nodeUtil = (function() {
  try {
    return freeProcess && freeProcess.binding && freeProcess.binding('util');
  } catch (e) {}
}());

module.exports = nodeUtil;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(272)(module)))

/***/ }),
/* 636 */
/***/ (function(module, exports) {

/** Used for built-in method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var nativeObjectToString = objectProto.toString;

/**
 * Converts `value` to a string using `Object.prototype.toString`.
 *
 * @private
 * @param {*} value The value to convert.
 * @returns {string} Returns the converted string.
 */
function objectToString(value) {
  return nativeObjectToString.call(value);
}

module.exports = objectToString;


/***/ }),
/* 637 */
/***/ (function(module, exports) {

/**
 * Creates a unary function that invokes `func` with its argument transformed.
 *
 * @private
 * @param {Function} func The function to wrap.
 * @param {Function} transform The argument transform.
 * @returns {Function} Returns the new function.
 */
function overArg(func, transform) {
  return function(arg) {
    return func(transform(arg));
  };
}

module.exports = overArg;


/***/ }),
/* 638 */
/***/ (function(module, exports) {

/** Used to stand-in for `undefined` hash values. */
var HASH_UNDEFINED = '__lodash_hash_undefined__';

/**
 * Adds `value` to the array cache.
 *
 * @private
 * @name add
 * @memberOf SetCache
 * @alias push
 * @param {*} value The value to cache.
 * @returns {Object} Returns the cache instance.
 */
function setCacheAdd(value) {
  this.__data__.set(value, HASH_UNDEFINED);
  return this;
}

module.exports = setCacheAdd;


/***/ }),
/* 639 */
/***/ (function(module, exports) {

/**
 * Checks if `value` is in the array cache.
 *
 * @private
 * @name has
 * @memberOf SetCache
 * @param {*} value The value to search for.
 * @returns {number} Returns `true` if `value` is found, else `false`.
 */
function setCacheHas(value) {
  return this.__data__.has(value);
}

module.exports = setCacheHas;


/***/ }),
/* 640 */
/***/ (function(module, exports) {

/** Used to detect hot functions by number of calls within a span of milliseconds. */
var HOT_COUNT = 800,
    HOT_SPAN = 16;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeNow = Date.now;

/**
 * Creates a function that'll short out and invoke `identity` instead
 * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`
 * milliseconds.
 *
 * @private
 * @param {Function} func The function to restrict.
 * @returns {Function} Returns the new shortable function.
 */
function shortOut(func) {
  var count = 0,
      lastCalled = 0;

  return function() {
    var stamp = nativeNow(),
        remaining = HOT_SPAN - (stamp - lastCalled);

    lastCalled = stamp;
    if (remaining > 0) {
      if (++count >= HOT_COUNT) {
        return arguments[0];
      }
    } else {
      count = 0;
    }
    return func.apply(undefined, arguments);
  };
}

module.exports = shortOut;


/***/ }),
/* 641 */
/***/ (function(module, exports, __webpack_require__) {

var ListCache = __webpack_require__(110);

/**
 * Removes all key-value entries from the stack.
 *
 * @private
 * @name clear
 * @memberOf Stack
 */
function stackClear() {
  this.__data__ = new ListCache;
  this.size = 0;
}

module.exports = stackClear;


/***/ }),
/* 642 */
/***/ (function(module, exports) {

/**
 * Removes `key` and its value from the stack.
 *
 * @private
 * @name delete
 * @memberOf Stack
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function stackDelete(key) {
  var data = this.__data__,
      result = data['delete'](key);

  this.size = data.size;
  return result;
}

module.exports = stackDelete;


/***/ }),
/* 643 */
/***/ (function(module, exports) {

/**
 * Gets the stack value for `key`.
 *
 * @private
 * @name get
 * @memberOf Stack
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function stackGet(key) {
  return this.__data__.get(key);
}

module.exports = stackGet;


/***/ }),
/* 644 */
/***/ (function(module, exports) {

/**
 * Checks if a stack value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf Stack
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function stackHas(key) {
  return this.__data__.has(key);
}

module.exports = stackHas;


/***/ }),
/* 645 */
/***/ (function(module, exports, __webpack_require__) {

var ListCache = __webpack_require__(110),
    Map = __webpack_require__(158),
    MapCache = __webpack_require__(159);

/** Used as the size to enable large array optimizations. */
var LARGE_ARRAY_SIZE = 200;

/**
 * Sets the stack `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf Stack
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the stack cache instance.
 */
function stackSet(key, value) {
  var data = this.__data__;
  if (data instanceof ListCache) {
    var pairs = data.__data__;
    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {
      pairs.push([key, value]);
      this.size = ++data.size;
      return this;
    }
    data = this.__data__ = new MapCache(pairs);
  }
  data.set(key, value);
  this.size = data.size;
  return this;
}

module.exports = stackSet;


/***/ }),
/* 646 */
/***/ (function(module, exports) {

/**
 * A specialized version of `_.indexOf` which performs strict equality
 * comparisons of values, i.e. `===`.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {*} value The value to search for.
 * @param {number} fromIndex The index to search from.
 * @returns {number} Returns the index of the matched value, else `-1`.
 */
function strictIndexOf(array, value, fromIndex) {
  var index = fromIndex - 1,
      length = array.length;

  while (++index < length) {
    if (array[index] === value) {
      return index;
    }
  }
  return -1;
}

module.exports = strictIndexOf;


/***/ }),
/* 647 */
/***/ (function(module, exports) {

/**
 * A specialized version of `_.lastIndexOf` which performs strict equality
 * comparisons of values, i.e. `===`.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {*} value The value to search for.
 * @param {number} fromIndex The index to search from.
 * @returns {number} Returns the index of the matched value, else `-1`.
 */
function strictLastIndexOf(array, value, fromIndex) {
  var index = fromIndex + 1;
  while (index--) {
    if (array[index] === value) {
      return index;
    }
  }
  return index;
}

module.exports = strictLastIndexOf;


/***/ }),
/* 648 */
/***/ (function(module, exports, __webpack_require__) {

var asciiSize = __webpack_require__(568),
    hasUnicode = __webpack_require__(612),
    unicodeSize = __webpack_require__(650);

/**
 * Gets the number of symbols in `string`.
 *
 * @private
 * @param {string} string The string to inspect.
 * @returns {number} Returns the string size.
 */
function stringSize(string) {
  return hasUnicode(string)
    ? unicodeSize(string)
    : asciiSize(string);
}

module.exports = stringSize;


/***/ }),
/* 649 */
/***/ (function(module, exports, __webpack_require__) {

var memoizeCapped = __webpack_require__(633);

/** Used to match property names within property paths. */
var reLeadingDot = /^\./,
    rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;

/** Used to match backslashes in property paths. */
var reEscapeChar = /\\(\\)?/g;

/**
 * Converts `string` to a property path array.
 *
 * @private
 * @param {string} string The string to convert.
 * @returns {Array} Returns the property path array.
 */
var stringToPath = memoizeCapped(function(string) {
  var result = [];
  if (reLeadingDot.test(string)) {
    result.push('');
  }
  string.replace(rePropName, function(match, number, quote, string) {
    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));
  });
  return result;
});

module.exports = stringToPath;


/***/ }),
/* 650 */
/***/ (function(module, exports) {

/** Used to compose unicode character classes. */
var rsAstralRange = '\\ud800-\\udfff',
    rsComboMarksRange = '\\u0300-\\u036f',
    reComboHalfMarksRange = '\\ufe20-\\ufe2f',
    rsComboSymbolsRange = '\\u20d0-\\u20ff',
    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,
    rsVarRange = '\\ufe0e\\ufe0f';

/** Used to compose unicode capture groups. */
var rsAstral = '[' + rsAstralRange + ']',
    rsCombo = '[' + rsComboRange + ']',
    rsFitz = '\\ud83c[\\udffb-\\udfff]',
    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',
    rsNonAstral = '[^' + rsAstralRange + ']',
    rsRegional = '(?:\\ud83c[\\udde6-\\uddff]){2}',
    rsSurrPair = '[\\ud800-\\udbff][\\udc00-\\udfff]',
    rsZWJ = '\\u200d';

/** Used to compose unicode regexes. */
var reOptMod = rsModifier + '?',
    rsOptVar = '[' + rsVarRange + ']?',
    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',
    rsSeq = rsOptVar + reOptMod + rsOptJoin,
    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';

/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */
var reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');

/**
 * Gets the size of a Unicode `string`.
 *
 * @private
 * @param {string} string The string inspect.
 * @returns {number} Returns the string size.
 */
function unicodeSize(string) {
  var result = reUnicode.lastIndex = 0;
  while (reUnicode.test(string)) {
    ++result;
  }
  return result;
}

module.exports = unicodeSize;


/***/ }),
/* 651 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = {
  'chunk': __webpack_require__(652),
  'compact': __webpack_require__(654),
  'concat': __webpack_require__(655),
  'difference': __webpack_require__(658),
  'differenceBy': __webpack_require__(659),
  'differenceWith': __webpack_require__(660),
  'drop': __webpack_require__(661),
  'dropRight': __webpack_require__(662),
  'dropRightWhile': __webpack_require__(663),
  'dropWhile': __webpack_require__(664),
  'fill': __webpack_require__(668),
  'findIndex': __webpack_require__(258),
  'findLastIndex': __webpack_require__(259),
  'first': __webpack_require__(672),
  'flatten': __webpack_require__(173),
  'flattenDeep': __webpack_require__(676),
  'flattenDepth': __webpack_require__(677),
  'fromPairs': __webpack_require__(678),
  'head': __webpack_require__(263),
  'indexOf': __webpack_require__(682),
  'initial': __webpack_require__(683),
  'intersection': __webpack_require__(684),
  'intersectionBy': __webpack_require__(685),
  'intersectionWith': __webpack_require__(686),
  'join': __webpack_require__(688),
  'last': __webpack_require__(34),
  'lastIndexOf': __webpack_require__(690),
  'nth': __webpack_require__(694),
  'pull': __webpack_require__(698),
  'pullAll': __webpack_require__(268),
  'pullAllBy': __webpack_require__(699),
  'pullAllWith': __webpack_require__(700),
  'pullAt': __webpack_require__(701),
  'remove': __webpack_require__(705),
  'reverse': __webpack_require__(706),
  'slice': __webpack_require__(711),
  'sortedIndex': __webpack_require__(713),
  'sortedIndexBy': __webpack_require__(714),
  'sortedIndexOf': __webpack_require__(715),
  'sortedLastIndex': __webpack_require__(716),
  'sortedLastIndexBy': __webpack_require__(717),
  'sortedLastIndexOf': __webpack_require__(718),
  'sortedUniq': __webpack_require__(719),
  'sortedUniqBy': __webpack_require__(720),
  'tail': __webpack_require__(723),
  'take': __webpack_require__(724),
  'takeRight': __webpack_require__(725),
  'takeRightWhile': __webpack_require__(726),
  'takeWhile': __webpack_require__(727),
  'union': __webpack_require__(732),
  'unionBy': __webpack_require__(733),
  'unionWith': __webpack_require__(734),
  'uniq': __webpack_require__(270),
  'uniqBy': __webpack_require__(735),
  'uniqWith': __webpack_require__(736),
  'unzip': __webpack_require__(176),
  'unzipWith': __webpack_require__(271),
  'without': __webpack_require__(737),
  'xor': __webpack_require__(738),
  'xorBy': __webpack_require__(739),
  'xorWith': __webpack_require__(740),
  'zip': __webpack_require__(741),
  'zipObject': __webpack_require__(742),
  'zipObjectDeep': __webpack_require__(743),
  'zipWith': __webpack_require__(744)
};


/***/ }),
/* 652 */
/***/ (function(module, exports, __webpack_require__) {

var baseSlice = __webpack_require__(43),
    isIterateeCall = __webpack_require__(68),
    toInteger = __webpack_require__(18);

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeCeil = Math.ceil,
    nativeMax = Math.max;

/**
 * Creates an array of elements split into groups the length of `size`.
 * If `array` can't be split evenly, the final chunk will be the remaining
 * elements.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Array
 * @param {Array} array The array to process.
 * @param {number} [size=1] The length of each chunk
 * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
 * @returns {Array} Returns the new array of chunks.
 * @example
 *
 * _.chunk(['a', 'b', 'c', 'd'], 2);
 * // => [['a', 'b'], ['c', 'd']]
 *
 * _.chunk(['a', 'b', 'c', 'd'], 3);
 * // => [['a', 'b', 'c'], ['d']]
 */
function chunk(array, size, guard) {
  if ((guard ? isIterateeCall(array, size, guard) : size === undefined)) {
    size = 1;
  } else {
    size = nativeMax(toInteger(size), 0);
  }
  var length = array == null ? 0 : array.length;
  if (!length || size < 1) {
    return [];
  }
  var index = 0,
      resIndex = 0,
      result = Array(nativeCeil(length / size));

  while (index < length) {
    result[resIndex++] = baseSlice(array, index, (index += size));
  }
  return result;
}

module.exports = chunk;


/***/ }),
/* 653 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = {
  'countBy': __webpack_require__(657),
  'each': __webpack_require__(665),
  'eachRight': __webpack_require__(666),
  'every': __webpack_require__(667),
  'filter': __webpack_require__(669),
  'find': __webpack_require__(670),
  'findLast': __webpack_require__(671),
  'flatMap': __webpack_require__(673),
  'flatMapDeep': __webpack_require__(674),
  'flatMapDepth': __webpack_require__(675),
  'forEach': __webpack_require__(260),
  'forEachRight': __webpack_require__(261),
  'groupBy': __webpack_require__(679),
  'includes': __webpack_require__(681),
  'invokeMap': __webpack_require__(687),
  'keyBy': __webpack_require__(689),
  'map': __webpack_require__(125),
  'orderBy': __webpack_require__(695),
  'partition': __webpack_require__(696),
  'reduce': __webpack_require__(702),
  'reduceRight': __webpack_require__(703),
  'reject': __webpack_require__(704),
  'sample': __webpack_require__(707),
  'sampleSize': __webpack_require__(708),
  'shuffle': __webpack_require__(709),
  'size': __webpack_require__(710),
  'some': __webpack_require__(712),
  'sortBy': __webpack_require__(269)
};


/***/ }),
/* 654 */
/***/ (function(module, exports) {

/**
 * Creates an array with all falsey values removed. The values `false`, `null`,
 * `0`, `""`, `undefined`, and `NaN` are falsey.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Array
 * @param {Array} array The array to compact.
 * @returns {Array} Returns the new array of filtered values.
 * @example
 *
 * _.compact([0, 1, false, 2, '', 3]);
 * // => [1, 2, 3]
 */
function compact(array) {
  var index = -1,
      length = array == null ? 0 : array.length,
      resIndex = 0,
      result = [];

  while (++index < length) {
    var value = array[index];
    if (value) {
      result[resIndex++] = value;
    }
  }
  return result;
}

module.exports = compact;


/***/ }),
/* 655 */
/***/ (function(module, exports, __webpack_require__) {

var arrayPush = __webpack_require__(162),
    baseFlatten = __webpack_require__(20),
    copyArray = __webpack_require__(120),
    isArray = __webpack_require__(10);

/**
 * Creates a new array concatenating `array` with any additional arrays
 * and/or values.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} array The array to concatenate.
 * @param {...*} [values] The values to concatenate.
 * @returns {Array} Returns the new concatenated array.
 * @example
 *
 * var array = [1];
 * var other = _.concat(array, 2, [3], [[4]]);
 *
 * console.log(other);
 * // => [1, 2, 3, [4]]
 *
 * console.log(array);
 * // => [1]
 */
function concat() {
  var length = arguments.length;
  if (!length) {
    return [];
  }
  var args = Array(length - 1),
      array = arguments[0],
      index = length;

  while (index--) {
    args[index - 1] = arguments[index];
  }
  return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));
}

module.exports = concat;


/***/ }),
/* 656 */
/***/ (function(module, exports) {

/**
 * Creates a function that returns `value`.
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Util
 * @param {*} value The value to return from the new function.
 * @returns {Function} Returns the new constant function.
 * @example
 *
 * var objects = _.times(2, _.constant({ 'a': 1 }));
 *
 * console.log(objects);
 * // => [{ 'a': 1 }, { 'a': 1 }]
 *
 * console.log(objects[0] === objects[1]);
 * // => true
 */
function constant(value) {
  return function() {
    return value;
  };
}

module.exports = constant;


/***/ }),
/* 657 */
/***/ (function(module, exports, __webpack_require__) {

var baseAssignValue = __webpack_require__(114),
    createAggregator = __webpack_require__(121);

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Creates an object composed of keys generated from the results of running
 * each element of `collection` thru `iteratee`. The corresponding value of
 * each key is the number of times the key was returned by `iteratee`. The
 * iteratee is invoked with one argument: (value).
 *
 * @static
 * @memberOf _
 * @since 0.5.0
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} [iteratee=_.identity] The iteratee to transform keys.
 * @returns {Object} Returns the composed aggregate object.
 * @example
 *
 * _.countBy([6.1, 4.2, 6.3], Math.floor);
 * // => { '4': 1, '6': 2 }
 *
 * // The `_.property` iteratee shorthand.
 * _.countBy(['one', 'two', 'three'], 'length');
 * // => { '3': 2, '5': 1 }
 */
var countBy = createAggregator(function(result, value, key) {
  if (hasOwnProperty.call(result, key)) {
    ++result[key];
  } else {
    baseAssignValue(result, key, 1);
  }
});

module.exports = countBy;


/***/ }),
/* 658 */
/***/ (function(module, exports, __webpack_require__) {

var baseDifference = __webpack_require__(88),
    baseFlatten = __webpack_require__(20),
    baseRest = __webpack_require__(17),
    isArrayLikeObject = __webpack_require__(30);

/**
 * Creates an array of `array` values not included in the other given arrays
 * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * for equality comparisons. The order and references of result values are
 * determined by the first array.
 *
 * **Note:** Unlike `_.pullAll`, this method returns a new array.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Array
 * @param {Array} array The array to inspect.
 * @param {...Array} [values] The values to exclude.
 * @returns {Array} Returns the new array of filtered values.
 * @see _.without, _.xor
 * @example
 *
 * _.difference([2, 1], [2, 3]);
 * // => [1]
 */
var difference = baseRest(function(array, values) {
  return isArrayLikeObject(array)
    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))
    : [];
});

module.exports = difference;


/***/ }),
/* 659 */
/***/ (function(module, exports, __webpack_require__) {

var baseDifference = __webpack_require__(88),
    baseFlatten = __webpack_require__(20),
    baseIteratee = __webpack_require__(8),
    baseRest = __webpack_require__(17),
    isArrayLikeObject = __webpack_require__(30),
    last = __webpack_require__(34);

/**
 * This method is like `_.difference` except that it accepts `iteratee` which
 * is invoked for each element of `array` and `values` to generate the criterion
 * by which they're compared. The order and references of result values are
 * determined by the first array. The iteratee is invoked with one argument:
 * (value).
 *
 * **Note:** Unlike `_.pullAllBy`, this method returns a new array.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} array The array to inspect.
 * @param {...Array} [values] The values to exclude.
 * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
 * @returns {Array} Returns the new array of filtered values.
 * @example
 *
 * _.differenceBy([2.1, 1.2], [2.3, 3.4], Math.floor);
 * // => [1.2]
 *
 * // The `_.property` iteratee shorthand.
 * _.differenceBy([{ 'x': 2 }, { 'x': 1 }], [{ 'x': 1 }], 'x');
 * // => [{ 'x': 2 }]
 */
var differenceBy = baseRest(function(array, values) {
  var iteratee = last(values);
  if (isArrayLikeObject(iteratee)) {
    iteratee = undefined;
  }
  return isArrayLikeObject(array)
    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), baseIteratee(iteratee, 2))
    : [];
});

module.exports = differenceBy;


/***/ }),
/* 660 */
/***/ (function(module, exports, __webpack_require__) {

var baseDifference = __webpack_require__(88),
    baseFlatten = __webpack_require__(20),
    baseRest = __webpack_require__(17),
    isArrayLikeObject = __webpack_require__(30),
    last = __webpack_require__(34);

/**
 * This method is like `_.difference` except that it accepts `comparator`
 * which is invoked to compare elements of `array` to `values`. The order and
 * references of result values are determined by the first array. The comparator
 * is invoked with two arguments: (arrVal, othVal).
 *
 * **Note:** Unlike `_.pullAllWith`, this method returns a new array.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} array The array to inspect.
 * @param {...Array} [values] The values to exclude.
 * @param {Function} [comparator] The comparator invoked per element.
 * @returns {Array} Returns the new array of filtered values.
 * @example
 *
 * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];
 *
 * _.differenceWith(objects, [{ 'x': 1, 'y': 2 }], _.isEqual);
 * // => [{ 'x': 2, 'y': 1 }]
 */
var differenceWith = baseRest(function(array, values) {
  var comparator = last(values);
  if (isArrayLikeObject(comparator)) {
    comparator = undefined;
  }
  return isArrayLikeObject(array)
    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), undefined, comparator)
    : [];
});

module.exports = differenceWith;


/***/ }),
/* 661 */
/***/ (function(module, exports, __webpack_require__) {

var baseSlice = __webpack_require__(43),
    toInteger = __webpack_require__(18);

/**
 * Creates a slice of `array` with `n` elements dropped from the beginning.
 *
 * @static
 * @memberOf _
 * @since 0.5.0
 * @category Array
 * @param {Array} array The array to query.
 * @param {number} [n=1] The number of elements to drop.
 * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
 * @returns {Array} Returns the slice of `array`.
 * @example
 *
 * _.drop([1, 2, 3]);
 * // => [2, 3]
 *
 * _.drop([1, 2, 3], 2);
 * // => [3]
 *
 * _.drop([1, 2, 3], 5);
 * // => []
 *
 * _.drop([1, 2, 3], 0);
 * // => [1, 2, 3]
 */
function drop(array, n, guard) {
  var length = array == null ? 0 : array.length;
  if (!length) {
    return [];
  }
  n = (guard || n === undefined) ? 1 : toInteger(n);
  return baseSlice(array, n < 0 ? 0 : n, length);
}

module.exports = drop;


/***/ }),
/* 662 */
/***/ (function(module, exports, __webpack_require__) {

var baseSlice = __webpack_require__(43),
    toInteger = __webpack_require__(18);

/**
 * Creates a slice of `array` with `n` elements dropped from the end.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Array
 * @param {Array} array The array to query.
 * @param {number} [n=1] The number of elements to drop.
 * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
 * @returns {Array} Returns the slice of `array`.
 * @example
 *
 * _.dropRight([1, 2, 3]);
 * // => [1, 2]
 *
 * _.dropRight([1, 2, 3], 2);
 * // => [1]
 *
 * _.dropRight([1, 2, 3], 5);
 * // => []
 *
 * _.dropRight([1, 2, 3], 0);
 * // => [1, 2, 3]
 */
function dropRight(array, n, guard) {
  var length = array == null ? 0 : array.length;
  if (!length) {
    return [];
  }
  n = (guard || n === undefined) ? 1 : toInteger(n);
  n = length - n;
  return baseSlice(array, 0, n < 0 ? 0 : n);
}

module.exports = dropRight;


/***/ }),
/* 663 */
/***/ (function(module, exports, __webpack_require__) {

var baseIteratee = __webpack_require__(8),
    baseWhile = __webpack_require__(118);

/**
 * Creates a slice of `array` excluding elements dropped from the end.
 * Elements are dropped until `predicate` returns falsey. The predicate is
 * invoked with three arguments: (value, index, array).
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Array
 * @param {Array} array The array to query.
 * @param {Function} [predicate=_.identity] The function invoked per iteration.
 * @returns {Array} Returns the slice of `array`.
 * @example
 *
 * var users = [
 *   { 'user': 'barney',  'active': true },
 *   { 'user': 'fred',    'active': false },
 *   { 'user': 'pebbles', 'active': false }
 * ];
 *
 * _.dropRightWhile(users, function(o) { return !o.active; });
 * // => objects for ['barney']
 *
 * // The `_.matches` iteratee shorthand.
 * _.dropRightWhile(users, { 'user': 'pebbles', 'active': false });
 * // => objects for ['barney', 'fred']
 *
 * // The `_.matchesProperty` iteratee shorthand.
 * _.dropRightWhile(users, ['active', false]);
 * // => objects for ['barney']
 *
 * // The `_.property` iteratee shorthand.
 * _.dropRightWhile(users, 'active');
 * // => objects for ['barney', 'fred', 'pebbles']
 */
function dropRightWhile(array, predicate) {
  return (array && array.length)
    ? baseWhile(array, baseIteratee(predicate, 3), true, true)
    : [];
}

module.exports = dropRightWhile;


/***/ }),
/* 664 */
/***/ (function(module, exports, __webpack_require__) {

var baseIteratee = __webpack_require__(8),
    baseWhile = __webpack_require__(118);

/**
 * Creates a slice of `array` excluding elements dropped from the beginning.
 * Elements are dropped until `predicate` returns falsey. The predicate is
 * invoked with three arguments: (value, index, array).
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Array
 * @param {Array} array The array to query.
 * @param {Function} [predicate=_.identity] The function invoked per iteration.
 * @returns {Array} Returns the slice of `array`.
 * @example
 *
 * var users = [
 *   { 'user': 'barney',  'active': false },
 *   { 'user': 'fred',    'active': false },
 *   { 'user': 'pebbles', 'active': true }
 * ];
 *
 * _.dropWhile(users, function(o) { return !o.active; });
 * // => objects for ['pebbles']
 *
 * // The `_.matches` iteratee shorthand.
 * _.dropWhile(users, { 'user': 'barney', 'active': false });
 * // => objects for ['fred', 'pebbles']
 *
 * // The `_.matchesProperty` iteratee shorthand.
 * _.dropWhile(users, ['active', false]);
 * // => objects for ['pebbles']
 *
 * // The `_.property` iteratee shorthand.
 * _.dropWhile(users, 'active');
 * // => objects for ['barney', 'fred', 'pebbles']
 */
function dropWhile(array, predicate) {
  return (array && array.length)
    ? baseWhile(array, baseIteratee(predicate, 3), true)
    : [];
}

module.exports = dropWhile;


/***/ }),
/* 665 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(260);


/***/ }),
/* 666 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(261);


/***/ }),
/* 667 */
/***/ (function(module, exports, __webpack_require__) {

var arrayEvery = __webpack_require__(562),
    baseEvery = __webpack_require__(571),
    baseIteratee = __webpack_require__(8),
    isArray = __webpack_require__(10),
    isIterateeCall = __webpack_require__(68);

/**
 * Checks if `predicate` returns truthy for **all** elements of `collection`.
 * Iteration is stopped once `predicate` returns falsey. The predicate is
 * invoked with three arguments: (value, index|key, collection).
 *
 * **Note:** This method returns `true` for
 * [empty collections](https://en.wikipedia.org/wiki/Empty_set) because
 * [everything is true](https://en.wikipedia.org/wiki/Vacuous_truth) of
 * elements of empty collections.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} [predicate=_.identity] The function invoked per iteration.
 * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
 * @returns {boolean} Returns `true` if all elements pass the predicate check,
 *  else `false`.
 * @example
 *
 * _.every([true, 1, null, 'yes'], Boolean);
 * // => false
 *
 * var users = [
 *   { 'user': 'barney', 'age': 36, 'active': false },
 *   { 'user': 'fred',   'age': 40, 'active': false }
 * ];
 *
 * // The `_.matches` iteratee shorthand.
 * _.every(users, { 'user': 'barney', 'active': false });
 * // => false
 *
 * // The `_.matchesProperty` iteratee shorthand.
 * _.every(users, ['active', false]);
 * // => true
 *
 * // The `_.property` iteratee shorthand.
 * _.every(users, 'active');
 * // => false
 */
function every(collection, predicate, guard) {
  var func = isArray(collection) ? arrayEvery : baseEvery;
  if (guard && isIterateeCall(collection, predicate, guard)) {
    predicate = undefined;
  }
  return func(collection, baseIteratee(predicate, 3));
}

module.exports = every;


/***/ }),
/* 668 */
/***/ (function(module, exports, __webpack_require__) {

var baseFill = __webpack_require__(572),
    isIterateeCall = __webpack_require__(68);

/**
 * Fills elements of `array` with `value` from `start` up to, but not
 * including, `end`.
 *
 * **Note:** This method mutates `array`.
 *
 * @static
 * @memberOf _
 * @since 3.2.0
 * @category Array
 * @param {Array} array The array to fill.
 * @param {*} value The value to fill `array` with.
 * @param {number} [start=0] The start position.
 * @param {number} [end=array.length] The end position.
 * @returns {Array} Returns `array`.
 * @example
 *
 * var array = [1, 2, 3];
 *
 * _.fill(array, 'a');
 * console.log(array);
 * // => ['a', 'a', 'a']
 *
 * _.fill(Array(3), 2);
 * // => [2, 2, 2]
 *
 * _.fill([4, 6, 8, 10], '*', 1, 3);
 * // => [4, '*', '*', 10]
 */
function fill(array, value, start, end) {
  var length = array == null ? 0 : array.length;
  if (!length) {
    return [];
  }
  if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {
    start = 0;
    end = length;
  }
  return baseFill(array, value, start, end);
}

module.exports = fill;


/***/ }),
/* 669 */
/***/ (function(module, exports, __webpack_require__) {

var arrayFilter = __webpack_require__(64),
    baseFilter = __webpack_require__(231),
    baseIteratee = __webpack_require__(8),
    isArray = __webpack_require__(10);

/**
 * Iterates over elements of `collection`, returning an array of all elements
 * `predicate` returns truthy for. The predicate is invoked with three
 * arguments: (value, index|key, collection).
 *
 * **Note:** Unlike `_.remove`, this method returns a new array.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} [predicate=_.identity] The function invoked per iteration.
 * @returns {Array} Returns the new filtered array.
 * @see _.reject
 * @example
 *
 * var users = [
 *   { 'user': 'barney', 'age': 36, 'active': true },
 *   { 'user': 'fred',   'age': 40, 'active': false }
 * ];
 *
 * _.filter(users, function(o) { return !o.active; });
 * // => objects for ['fred']
 *
 * // The `_.matches` iteratee shorthand.
 * _.filter(users, { 'age': 36, 'active': true });
 * // => objects for ['barney']
 *
 * // The `_.matchesProperty` iteratee shorthand.
 * _.filter(users, ['active', false]);
 * // => objects for ['fred']
 *
 * // The `_.property` iteratee shorthand.
 * _.filter(users, 'active');
 * // => objects for ['barney']
 */
function filter(collection, predicate) {
  var func = isArray(collection) ? arrayFilter : baseFilter;
  return func(collection, baseIteratee(predicate, 3));
}

module.exports = filter;


/***/ }),
/* 670 */
/***/ (function(module, exports, __webpack_require__) {

var createFind = __webpack_require__(247),
    findIndex = __webpack_require__(258);

/**
 * Iterates over elements of `collection`, returning the first element
 * `predicate` returns truthy for. The predicate is invoked with three
 * arguments: (value, index|key, collection).
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Collection
 * @param {Array|Object} collection The collection to inspect.
 * @param {Function} [predicate=_.identity] The function invoked per iteration.
 * @param {number} [fromIndex=0] The index to search from.
 * @returns {*} Returns the matched element, else `undefined`.
 * @example
 *
 * var users = [
 *   { 'user': 'barney',  'age': 36, 'active': true },
 *   { 'user': 'fred',    'age': 40, 'active': false },
 *   { 'user': 'pebbles', 'age': 1,  'active': true }
 * ];
 *
 * _.find(users, function(o) { return o.age < 40; });
 * // => object for 'barney'
 *
 * // The `_.matches` iteratee shorthand.
 * _.find(users, { 'age': 1, 'active': true });
 * // => object for 'pebbles'
 *
 * // The `_.matchesProperty` iteratee shorthand.
 * _.find(users, ['active', false]);
 * // => object for 'fred'
 *
 * // The `_.property` iteratee shorthand.
 * _.find(users, 'active');
 * // => object for 'barney'
 */
var find = createFind(findIndex);

module.exports = find;


/***/ }),
/* 671 */
/***/ (function(module, exports, __webpack_require__) {

var createFind = __webpack_require__(247),
    findLastIndex = __webpack_require__(259);

/**
 * This method is like `_.find` except that it iterates over elements of
 * `collection` from right to left.
 *
 * @static
 * @memberOf _
 * @since 2.0.0
 * @category Collection
 * @param {Array|Object} collection The collection to inspect.
 * @param {Function} [predicate=_.identity] The function invoked per iteration.
 * @param {number} [fromIndex=collection.length-1] The index to search from.
 * @returns {*} Returns the matched element, else `undefined`.
 * @example
 *
 * _.findLast([1, 2, 3, 4], function(n) {
 *   return n % 2 == 1;
 * });
 * // => 3
 */
var findLast = createFind(findLastIndex);

module.exports = findLast;


/***/ }),
/* 672 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(263);


/***/ }),
/* 673 */
/***/ (function(module, exports, __webpack_require__) {

var baseFlatten = __webpack_require__(20),
    map = __webpack_require__(125);

/**
 * Creates a flattened array of values by running each element in `collection`
 * thru `iteratee` and flattening the mapped results. The iteratee is invoked
 * with three arguments: (value, index|key, collection).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} [iteratee=_.identity] The function invoked per iteration.
 * @returns {Array} Returns the new flattened array.
 * @example
 *
 * function duplicate(n) {
 *   return [n, n];
 * }
 *
 * _.flatMap([1, 2], duplicate);
 * // => [1, 1, 2, 2]
 */
function flatMap(collection, iteratee) {
  return baseFlatten(map(collection, iteratee), 1);
}

module.exports = flatMap;


/***/ }),
/* 674 */
/***/ (function(module, exports, __webpack_require__) {

var baseFlatten = __webpack_require__(20),
    map = __webpack_require__(125);

/** Used as references for various `Number` constants. */
var INFINITY = 1 / 0;

/**
 * This method is like `_.flatMap` except that it recursively flattens the
 * mapped results.
 *
 * @static
 * @memberOf _
 * @since 4.7.0
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} [iteratee=_.identity] The function invoked per iteration.
 * @returns {Array} Returns the new flattened array.
 * @example
 *
 * function duplicate(n) {
 *   return [[[n, n]]];
 * }
 *
 * _.flatMapDeep([1, 2], duplicate);
 * // => [1, 1, 2, 2]
 */
function flatMapDeep(collection, iteratee) {
  return baseFlatten(map(collection, iteratee), INFINITY);
}

module.exports = flatMapDeep;


/***/ }),
/* 675 */
/***/ (function(module, exports, __webpack_require__) {

var baseFlatten = __webpack_require__(20),
    map = __webpack_require__(125),
    toInteger = __webpack_require__(18);

/**
 * This method is like `_.flatMap` except that it recursively flattens the
 * mapped results up to `depth` times.
 *
 * @static
 * @memberOf _
 * @since 4.7.0
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} [iteratee=_.identity] The function invoked per iteration.
 * @param {number} [depth=1] The maximum recursion depth.
 * @returns {Array} Returns the new flattened array.
 * @example
 *
 * function duplicate(n) {
 *   return [[[n, n]]];
 * }
 *
 * _.flatMapDepth([1, 2], duplicate, 2);
 * // => [[1, 1], [2, 2]]
 */
function flatMapDepth(collection, iteratee, depth) {
  depth = depth === undefined ? 1 : toInteger(depth);
  return baseFlatten(map(collection, iteratee), depth);
}

module.exports = flatMapDepth;


/***/ }),
/* 676 */
/***/ (function(module, exports, __webpack_require__) {

var baseFlatten = __webpack_require__(20);

/** Used as references for various `Number` constants. */
var INFINITY = 1 / 0;

/**
 * Recursively flattens `array`.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Array
 * @param {Array} array The array to flatten.
 * @returns {Array} Returns the new flattened array.
 * @example
 *
 * _.flattenDeep([1, [2, [3, [4]], 5]]);
 * // => [1, 2, 3, 4, 5]
 */
function flattenDeep(array) {
  var length = array == null ? 0 : array.length;
  return length ? baseFlatten(array, INFINITY) : [];
}

module.exports = flattenDeep;


/***/ }),
/* 677 */
/***/ (function(module, exports, __webpack_require__) {

var baseFlatten = __webpack_require__(20),
    toInteger = __webpack_require__(18);

/**
 * Recursively flatten `array` up to `depth` times.
 *
 * @static
 * @memberOf _
 * @since 4.4.0
 * @category Array
 * @param {Array} array The array to flatten.
 * @param {number} [depth=1] The maximum recursion depth.
 * @returns {Array} Returns the new flattened array.
 * @example
 *
 * var array = [1, [2, [3, [4]], 5]];
 *
 * _.flattenDepth(array, 1);
 * // => [1, 2, [3, [4]], 5]
 *
 * _.flattenDepth(array, 2);
 * // => [1, 2, 3, [4], 5]
 */
function flattenDepth(array, depth) {
  var length = array == null ? 0 : array.length;
  if (!length) {
    return [];
  }
  depth = depth === undefined ? 1 : toInteger(depth);
  return baseFlatten(array, depth);
}

module.exports = flattenDepth;


/***/ }),
/* 678 */
/***/ (function(module, exports) {

/**
 * The inverse of `_.toPairs`; this method returns an object composed
 * from key-value `pairs`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} pairs The key-value pairs.
 * @returns {Object} Returns the new object.
 * @example
 *
 * _.fromPairs([['a', 1], ['b', 2]]);
 * // => { 'a': 1, 'b': 2 }
 */
function fromPairs(pairs) {
  var index = -1,
      length = pairs == null ? 0 : pairs.length,
      result = {};

  while (++index < length) {
    var pair = pairs[index];
    result[pair[0]] = pair[1];
  }
  return result;
}

module.exports = fromPairs;


/***/ }),
/* 679 */
/***/ (function(module, exports, __webpack_require__) {

var baseAssignValue = __webpack_require__(114),
    createAggregator = __webpack_require__(121);

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Creates an object composed of keys generated from the results of running
 * each element of `collection` thru `iteratee`. The order of grouped values
 * is determined by the order they occur in `collection`. The corresponding
 * value of each key is an array of elements responsible for generating the
 * key. The iteratee is invoked with one argument: (value).
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} [iteratee=_.identity] The iteratee to transform keys.
 * @returns {Object} Returns the composed aggregate object.
 * @example
 *
 * _.groupBy([6.1, 4.2, 6.3], Math.floor);
 * // => { '4': [4.2], '6': [6.1, 6.3] }
 *
 * // The `_.property` iteratee shorthand.
 * _.groupBy(['one', 'two', 'three'], 'length');
 * // => { '3': ['one', 'two'], '5': ['three'] }
 */
var groupBy = createAggregator(function(result, value, key) {
  if (hasOwnProperty.call(result, key)) {
    result[key].push(value);
  } else {
    baseAssignValue(result, key, [value]);
  }
});

module.exports = groupBy;


/***/ }),
/* 680 */
/***/ (function(module, exports, __webpack_require__) {

var baseHasIn = __webpack_require__(578),
    hasPath = __webpack_require__(611);

/**
 * Checks if `path` is a direct or inherited property of `object`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Object
 * @param {Object} object The object to query.
 * @param {Array|string} path The path to check.
 * @returns {boolean} Returns `true` if `path` exists, else `false`.
 * @example
 *
 * var object = _.create({ 'a': _.create({ 'b': 2 }) });
 *
 * _.hasIn(object, 'a');
 * // => true
 *
 * _.hasIn(object, 'a.b');
 * // => true
 *
 * _.hasIn(object, ['a', 'b']);
 * // => true
 *
 * _.hasIn(object, 'b');
 * // => false
 */
function hasIn(object, path) {
  return object != null && hasPath(object, path, baseHasIn);
}

module.exports = hasIn;


/***/ }),
/* 681 */
/***/ (function(module, exports, __webpack_require__) {

var baseIndexOf = __webpack_require__(116),
    isArrayLike = __webpack_require__(47),
    isString = __webpack_require__(266),
    toInteger = __webpack_require__(18),
    values = __webpack_require__(126);

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max;

/**
 * Checks if `value` is in `collection`. If `collection` is a string, it's
 * checked for a substring of `value`, otherwise
 * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * is used for equality comparisons. If `fromIndex` is negative, it's used as
 * the offset from the end of `collection`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Collection
 * @param {Array|Object|string} collection The collection to inspect.
 * @param {*} value The value to search for.
 * @param {number} [fromIndex=0] The index to search from.
 * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.
 * @returns {boolean} Returns `true` if `value` is found, else `false`.
 * @example
 *
 * _.includes([1, 2, 3], 1);
 * // => true
 *
 * _.includes([1, 2, 3], 1, 2);
 * // => false
 *
 * _.includes({ 'a': 1, 'b': 2 }, 1);
 * // => true
 *
 * _.includes('abcd', 'bc');
 * // => true
 */
function includes(collection, value, fromIndex, guard) {
  collection = isArrayLike(collection) ? collection : values(collection);
  fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;

  var length = collection.length;
  if (fromIndex < 0) {
    fromIndex = nativeMax(length + fromIndex, 0);
  }
  return isString(collection)
    ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)
    : (!!length && baseIndexOf(collection, value, fromIndex) > -1);
}

module.exports = includes;


/***/ }),
/* 682 */
/***/ (function(module, exports, __webpack_require__) {

var baseIndexOf = __webpack_require__(116),
    toInteger = __webpack_require__(18);

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max;

/**
 * Gets the index at which the first occurrence of `value` is found in `array`
 * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * for equality comparisons. If `fromIndex` is negative, it's used as the
 * offset from the end of `array`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Array
 * @param {Array} array The array to inspect.
 * @param {*} value The value to search for.
 * @param {number} [fromIndex=0] The index to search from.
 * @returns {number} Returns the index of the matched value, else `-1`.
 * @example
 *
 * _.indexOf([1, 2, 1, 2], 2);
 * // => 1
 *
 * // Search from the `fromIndex`.
 * _.indexOf([1, 2, 1, 2], 2, 2);
 * // => 3
 */
function indexOf(array, value, fromIndex) {
  var length = array == null ? 0 : array.length;
  if (!length) {
    return -1;
  }
  var index = fromIndex == null ? 0 : toInteger(fromIndex);
  if (index < 0) {
    index = nativeMax(length + index, 0);
  }
  return baseIndexOf(array, value, index);
}

module.exports = indexOf;


/***/ }),
/* 683 */
/***/ (function(module, exports, __webpack_require__) {

var baseSlice = __webpack_require__(43);

/**
 * Gets all but the last element of `array`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Array
 * @param {Array} array The array to query.
 * @returns {Array} Returns the slice of `array`.
 * @example
 *
 * _.initial([1, 2, 3]);
 * // => [1, 2]
 */
function initial(array) {
  var length = array == null ? 0 : array.length;
  return length ? baseSlice(array, 0, -1) : [];
}

module.exports = initial;


/***/ }),
/* 684 */
/***/ (function(module, exports, __webpack_require__) {

var arrayMap = __webpack_require__(27),
    baseIntersection = __webpack_require__(165),
    baseRest = __webpack_require__(17),
    castArrayLikeObject = __webpack_require__(170);

/**
 * Creates an array of unique values that are included in all given arrays
 * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * for equality comparisons. The order and references of result values are
 * determined by the first array.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Array
 * @param {...Array} [arrays] The arrays to inspect.
 * @returns {Array} Returns the new array of intersecting values.
 * @example
 *
 * _.intersection([2, 1], [2, 3]);
 * // => [2]
 */
var intersection = baseRest(function(arrays) {
  var mapped = arrayMap(arrays, castArrayLikeObject);
  return (mapped.length && mapped[0] === arrays[0])
    ? baseIntersection(mapped)
    : [];
});

module.exports = intersection;


/***/ }),
/* 685 */
/***/ (function(module, exports, __webpack_require__) {

var arrayMap = __webpack_require__(27),
    baseIntersection = __webpack_require__(165),
    baseIteratee = __webpack_require__(8),
    baseRest = __webpack_require__(17),
    castArrayLikeObject = __webpack_require__(170),
    last = __webpack_require__(34);

/**
 * This method is like `_.intersection` except that it accepts `iteratee`
 * which is invoked for each element of each `arrays` to generate the criterion
 * by which they're compared. The order and references of result values are
 * determined by the first array. The iteratee is invoked with one argument:
 * (value).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {...Array} [arrays] The arrays to inspect.
 * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
 * @returns {Array} Returns the new array of intersecting values.
 * @example
 *
 * _.intersectionBy([2.1, 1.2], [2.3, 3.4], Math.floor);
 * // => [2.1]
 *
 * // The `_.property` iteratee shorthand.
 * _.intersectionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');
 * // => [{ 'x': 1 }]
 */
var intersectionBy = baseRest(function(arrays) {
  var iteratee = last(arrays),
      mapped = arrayMap(arrays, castArrayLikeObject);

  if (iteratee === last(mapped)) {
    iteratee = undefined;
  } else {
    mapped.pop();
  }
  return (mapped.length && mapped[0] === arrays[0])
    ? baseIntersection(mapped, baseIteratee(iteratee, 2))
    : [];
});

module.exports = intersectionBy;


/***/ }),
/* 686 */
/***/ (function(module, exports, __webpack_require__) {

var arrayMap = __webpack_require__(27),
    baseIntersection = __webpack_require__(165),
    baseRest = __webpack_require__(17),
    castArrayLikeObject = __webpack_require__(170),
    last = __webpack_require__(34);

/**
 * This method is like `_.intersection` except that it accepts `comparator`
 * which is invoked to compare elements of `arrays`. The order and references
 * of result values are determined by the first array. The comparator is
 * invoked with two arguments: (arrVal, othVal).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {...Array} [arrays] The arrays to inspect.
 * @param {Function} [comparator] The comparator invoked per element.
 * @returns {Array} Returns the new array of intersecting values.
 * @example
 *
 * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];
 * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];
 *
 * _.intersectionWith(objects, others, _.isEqual);
 * // => [{ 'x': 1, 'y': 2 }]
 */
var intersectionWith = baseRest(function(arrays) {
  var comparator = last(arrays),
      mapped = arrayMap(arrays, castArrayLikeObject);

  comparator = typeof comparator == 'function' ? comparator : undefined;
  if (comparator) {
    mapped.pop();
  }
  return (mapped.length && mapped[0] === arrays[0])
    ? baseIntersection(mapped, undefined, comparator)
    : [];
});

module.exports = intersectionWith;


/***/ }),
/* 687 */
/***/ (function(module, exports, __webpack_require__) {

var apply = __webpack_require__(112),
    baseEach = __webpack_require__(52),
    baseInvoke = __webpack_require__(580),
    baseRest = __webpack_require__(17),
    isArrayLike = __webpack_require__(47);

/**
 * Invokes the method at `path` of each element in `collection`, returning
 * an array of the results of each invoked method. Any additional arguments
 * are provided to each invoked method. If `path` is a function, it's invoked
 * for, and `this` bound to, each element in `collection`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Array|Function|string} path The path of the method to invoke or
 *  the function invoked per iteration.
 * @param {...*} [args] The arguments to invoke each method with.
 * @returns {Array} Returns the array of results.
 * @example
 *
 * _.invokeMap([[5, 1, 7], [3, 2, 1]], 'sort');
 * // => [[1, 5, 7], [1, 2, 3]]
 *
 * _.invokeMap([123, 456], String.prototype.split, '');
 * // => [['1', '2', '3'], ['4', '5', '6']]
 */
var invokeMap = baseRest(function(collection, path, args) {
  var index = -1,
      isFunc = typeof path == 'function',
      result = isArrayLike(collection) ? Array(collection.length) : [];

  baseEach(collection, function(value) {
    result[++index] = isFunc ? apply(path, value, args) : baseInvoke(value, path, args);
  });
  return result;
});

module.exports = invokeMap;


/***/ }),
/* 688 */
/***/ (function(module, exports) {

/** Used for built-in method references. */
var arrayProto = Array.prototype;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeJoin = arrayProto.join;

/**
 * Converts all elements in `array` into a string separated by `separator`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} array The array to convert.
 * @param {string} [separator=','] The element separator.
 * @returns {string} Returns the joined string.
 * @example
 *
 * _.join(['a', 'b', 'c'], '~');
 * // => 'a~b~c'
 */
function join(array, separator) {
  return array == null ? '' : nativeJoin.call(array, separator);
}

module.exports = join;


/***/ }),
/* 689 */
/***/ (function(module, exports, __webpack_require__) {

var baseAssignValue = __webpack_require__(114),
    createAggregator = __webpack_require__(121);

/**
 * Creates an object composed of keys generated from the results of running
 * each element of `collection` thru `iteratee`. The corresponding value of
 * each key is the last element responsible for generating the key. The
 * iteratee is invoked with one argument: (value).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} [iteratee=_.identity] The iteratee to transform keys.
 * @returns {Object} Returns the composed aggregate object.
 * @example
 *
 * var array = [
 *   { 'dir': 'left', 'code': 97 },
 *   { 'dir': 'right', 'code': 100 }
 * ];
 *
 * _.keyBy(array, function(o) {
 *   return String.fromCharCode(o.code);
 * });
 * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }
 *
 * _.keyBy(array, 'dir');
 * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }
 */
var keyBy = createAggregator(function(result, value, key) {
  baseAssignValue(result, key, value);
});

module.exports = keyBy;


/***/ }),
/* 690 */
/***/ (function(module, exports, __webpack_require__) {

var baseFindIndex = __webpack_require__(115),
    baseIsNaN = __webpack_require__(233),
    strictLastIndexOf = __webpack_require__(647),
    toInteger = __webpack_require__(18);

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max,
    nativeMin = Math.min;

/**
 * This method is like `_.indexOf` except that it iterates over elements of
 * `array` from right to left.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Array
 * @param {Array} array The array to inspect.
 * @param {*} value The value to search for.
 * @param {number} [fromIndex=array.length-1] The index to search from.
 * @returns {number} Returns the index of the matched value, else `-1`.
 * @example
 *
 * _.lastIndexOf([1, 2, 1, 2], 2);
 * // => 3
 *
 * // Search from the `fromIndex`.
 * _.lastIndexOf([1, 2, 1, 2], 2, 2);
 * // => 1
 */
function lastIndexOf(array, value, fromIndex) {
  var length = array == null ? 0 : array.length;
  if (!length) {
    return -1;
  }
  var index = length;
  if (fromIndex !== undefined) {
    index = toInteger(fromIndex);
    index = index < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);
  }
  return value === value
    ? strictLastIndexOf(array, value, index)
    : baseFindIndex(array, baseIsNaN, index, true);
}

module.exports = lastIndexOf;


/***/ }),
/* 691 */
/***/ (function(module, exports, __webpack_require__) {

var MapCache = __webpack_require__(159);

/** Error message constants. */
var FUNC_ERROR_TEXT = 'Expected a function';

/**
 * Creates a function that memoizes the result of `func`. If `resolver` is
 * provided, it determines the cache key for storing the result based on the
 * arguments provided to the memoized function. By default, the first argument
 * provided to the memoized function is used as the map cache key. The `func`
 * is invoked with the `this` binding of the memoized function.
 *
 * **Note:** The cache is exposed as the `cache` property on the memoized
 * function. Its creation may be customized by replacing the `_.memoize.Cache`
 * constructor with one whose instances implement the
 * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)
 * method interface of `clear`, `delete`, `get`, `has`, and `set`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to have its output memoized.
 * @param {Function} [resolver] The function to resolve the cache key.
 * @returns {Function} Returns the new memoized function.
 * @example
 *
 * var object = { 'a': 1, 'b': 2 };
 * var other = { 'c': 3, 'd': 4 };
 *
 * var values = _.memoize(_.values);
 * values(object);
 * // => [1, 2]
 *
 * values(other);
 * // => [3, 4]
 *
 * object.a = 2;
 * values(object);
 * // => [1, 2]
 *
 * // Modify the result cache.
 * values.cache.set(object, ['a', 'b']);
 * values(object);
 * // => ['a', 'b']
 *
 * // Replace `_.memoize.Cache`.
 * _.memoize.Cache = WeakMap;
 */
function memoize(func, resolver) {
  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  var memoized = function() {
    var args = arguments,
        key = resolver ? resolver.apply(this, args) : args[0],
        cache = memoized.cache;

    if (cache.has(key)) {
      return cache.get(key);
    }
    var result = func.apply(this, args);
    memoized.cache = cache.set(key, result) || cache;
    return result;
  };
  memoized.cache = new (memoize.Cache || MapCache);
  return memoized;
}

// Expose `MapCache`.
memoize.Cache = MapCache;

module.exports = memoize;


/***/ }),
/* 692 */
/***/ (function(module, exports) {

/** Error message constants. */
var FUNC_ERROR_TEXT = 'Expected a function';

/**
 * Creates a function that negates the result of the predicate `func`. The
 * `func` predicate is invoked with the `this` binding and arguments of the
 * created function.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Function
 * @param {Function} predicate The predicate to negate.
 * @returns {Function} Returns the new negated function.
 * @example
 *
 * function isEven(n) {
 *   return n % 2 == 0;
 * }
 *
 * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));
 * // => [1, 3, 5]
 */
function negate(predicate) {
  if (typeof predicate != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  return function() {
    var args = arguments;
    switch (args.length) {
      case 0: return !predicate.call(this);
      case 1: return !predicate.call(this, args[0]);
      case 2: return !predicate.call(this, args[0], args[1]);
      case 3: return !predicate.call(this, args[0], args[1], args[2]);
    }
    return !predicate.apply(this, args);
  };
}

module.exports = negate;


/***/ }),
/* 693 */
/***/ (function(module, exports) {

/**
 * This method returns `undefined`.
 *
 * @static
 * @memberOf _
 * @since 2.3.0
 * @category Util
 * @example
 *
 * _.times(2, _.noop);
 * // => [undefined, undefined]
 */
function noop() {
  // No operation performed.
}

module.exports = noop;


/***/ }),
/* 694 */
/***/ (function(module, exports, __webpack_require__) {

var baseNth = __webpack_require__(588),
    toInteger = __webpack_require__(18);

/**
 * Gets the element at index `n` of `array`. If `n` is negative, the nth
 * element from the end is returned.
 *
 * @static
 * @memberOf _
 * @since 4.11.0
 * @category Array
 * @param {Array} array The array to query.
 * @param {number} [n=0] The index of the element to return.
 * @returns {*} Returns the nth element of `array`.
 * @example
 *
 * var array = ['a', 'b', 'c', 'd'];
 *
 * _.nth(array, 1);
 * // => 'b'
 *
 * _.nth(array, -2);
 * // => 'c';
 */
function nth(array, n) {
  return (array && array.length) ? baseNth(array, toInteger(n)) : undefined;
}

module.exports = nth;


/***/ }),
/* 695 */
/***/ (function(module, exports, __webpack_require__) {

var baseOrderBy = __webpack_require__(236),
    isArray = __webpack_require__(10);

/**
 * This method is like `_.sortBy` except that it allows specifying the sort
 * orders of the iteratees to sort by. If `orders` is unspecified, all values
 * are sorted in ascending order. Otherwise, specify an order of "desc" for
 * descending or "asc" for ascending sort order of corresponding values.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Array[]|Function[]|Object[]|string[]} [iteratees=[_.identity]]
 *  The iteratees to sort by.
 * @param {string[]} [orders] The sort orders of `iteratees`.
 * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.
 * @returns {Array} Returns the new sorted array.
 * @example
 *
 * var users = [
 *   { 'user': 'fred',   'age': 48 },
 *   { 'user': 'barney', 'age': 34 },
 *   { 'user': 'fred',   'age': 40 },
 *   { 'user': 'barney', 'age': 36 }
 * ];
 *
 * // Sort by `user` in ascending order and by `age` in descending order.
 * _.orderBy(users, ['user', 'age'], ['asc', 'desc']);
 * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]
 */
function orderBy(collection, iteratees, orders, guard) {
  if (collection == null) {
    return [];
  }
  if (!isArray(iteratees)) {
    iteratees = iteratees == null ? [] : [iteratees];
  }
  orders = guard ? undefined : orders;
  if (!isArray(orders)) {
    orders = orders == null ? [] : [orders];
  }
  return baseOrderBy(collection, iteratees, orders);
}

module.exports = orderBy;


/***/ }),
/* 696 */
/***/ (function(module, exports, __webpack_require__) {

var createAggregator = __webpack_require__(121);

/**
 * Creates an array of elements split into two groups, the first of which
 * contains elements `predicate` returns truthy for, the second of which
 * contains elements `predicate` returns falsey for. The predicate is
 * invoked with one argument: (value).
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} [predicate=_.identity] The function invoked per iteration.
 * @returns {Array} Returns the array of grouped elements.
 * @example
 *
 * var users = [
 *   { 'user': 'barney',  'age': 36, 'active': false },
 *   { 'user': 'fred',    'age': 40, 'active': true },
 *   { 'user': 'pebbles', 'age': 1,  'active': false }
 * ];
 *
 * _.partition(users, function(o) { return o.active; });
 * // => objects for [['fred'], ['barney', 'pebbles']]
 *
 * // The `_.matches` iteratee shorthand.
 * _.partition(users, { 'age': 1, 'active': false });
 * // => objects for [['pebbles'], ['barney', 'fred']]
 *
 * // The `_.matchesProperty` iteratee shorthand.
 * _.partition(users, ['active', false]);
 * // => objects for [['barney', 'pebbles'], ['fred']]
 *
 * // The `_.property` iteratee shorthand.
 * _.partition(users, 'active');
 * // => objects for [['fred'], ['barney', 'pebbles']]
 */
var partition = createAggregator(function(result, value, key) {
  result[key ? 0 : 1].push(value);
}, function() { return [[], []]; });

module.exports = partition;


/***/ }),
/* 697 */
/***/ (function(module, exports, __webpack_require__) {

var baseProperty = __webpack_require__(166),
    basePropertyDeep = __webpack_require__(589),
    isKey = __webpack_require__(171),
    toKey = __webpack_require__(69);

/**
 * Creates a function that returns the value at `path` of a given object.
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Util
 * @param {Array|string} path The path of the property to get.
 * @returns {Function} Returns the new accessor function.
 * @example
 *
 * var objects = [
 *   { 'a': { 'b': 2 } },
 *   { 'a': { 'b': 1 } }
 * ];
 *
 * _.map(objects, _.property('a.b'));
 * // => [2, 1]
 *
 * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');
 * // => [1, 2]
 */
function property(path) {
  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);
}

module.exports = property;


/***/ }),
/* 698 */
/***/ (function(module, exports, __webpack_require__) {

var baseRest = __webpack_require__(17),
    pullAll = __webpack_require__(268);

/**
 * Removes all given values from `array` using
 * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * for equality comparisons.
 *
 * **Note:** Unlike `_.without`, this method mutates `array`. Use `_.remove`
 * to remove elements from an array by predicate.
 *
 * @static
 * @memberOf _
 * @since 2.0.0
 * @category Array
 * @param {Array} array The array to modify.
 * @param {...*} [values] The values to remove.
 * @returns {Array} Returns `array`.
 * @example
 *
 * var array = ['a', 'b', 'c', 'a', 'b', 'c'];
 *
 * _.pull(array, 'a', 'c');
 * console.log(array);
 * // => ['b', 'b']
 */
var pull = baseRest(pullAll);

module.exports = pull;


/***/ }),
/* 699 */
/***/ (function(module, exports, __webpack_require__) {

var baseIteratee = __webpack_require__(8),
    basePullAll = __webpack_require__(167);

/**
 * This method is like `_.pullAll` except that it accepts `iteratee` which is
 * invoked for each element of `array` and `values` to generate the criterion
 * by which they're compared. The iteratee is invoked with one argument: (value).
 *
 * **Note:** Unlike `_.differenceBy`, this method mutates `array`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} array The array to modify.
 * @param {Array} values The values to remove.
 * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
 * @returns {Array} Returns `array`.
 * @example
 *
 * var array = [{ 'x': 1 }, { 'x': 2 }, { 'x': 3 }, { 'x': 1 }];
 *
 * _.pullAllBy(array, [{ 'x': 1 }, { 'x': 3 }], 'x');
 * console.log(array);
 * // => [{ 'x': 2 }]
 */
function pullAllBy(array, values, iteratee) {
  return (array && array.length && values && values.length)
    ? basePullAll(array, values, baseIteratee(iteratee, 2))
    : array;
}

module.exports = pullAllBy;


/***/ }),
/* 700 */
/***/ (function(module, exports, __webpack_require__) {

var basePullAll = __webpack_require__(167);

/**
 * This method is like `_.pullAll` except that it accepts `comparator` which
 * is invoked to compare elements of `array` to `values`. The comparator is
 * invoked with two arguments: (arrVal, othVal).
 *
 * **Note:** Unlike `_.differenceWith`, this method mutates `array`.
 *
 * @static
 * @memberOf _
 * @since 4.6.0
 * @category Array
 * @param {Array} array The array to modify.
 * @param {Array} values The values to remove.
 * @param {Function} [comparator] The comparator invoked per element.
 * @returns {Array} Returns `array`.
 * @example
 *
 * var array = [{ 'x': 1, 'y': 2 }, { 'x': 3, 'y': 4 }, { 'x': 5, 'y': 6 }];
 *
 * _.pullAllWith(array, [{ 'x': 3, 'y': 4 }], _.isEqual);
 * console.log(array);
 * // => [{ 'x': 1, 'y': 2 }, { 'x': 5, 'y': 6 }]
 */
function pullAllWith(array, values, comparator) {
  return (array && array.length && values && values.length)
    ? basePullAll(array, values, undefined, comparator)
    : array;
}

module.exports = pullAllWith;


/***/ }),
/* 701 */
/***/ (function(module, exports, __webpack_require__) {

var arrayMap = __webpack_require__(27),
    baseAt = __webpack_require__(570),
    basePullAt = __webpack_require__(237),
    compareAscending = __webpack_require__(244),
    flatRest = __webpack_require__(605),
    isIndex = __webpack_require__(67);

/**
 * Removes elements from `array` corresponding to `indexes` and returns an
 * array of removed elements.
 *
 * **Note:** Unlike `_.at`, this method mutates `array`.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Array
 * @param {Array} array The array to modify.
 * @param {...(number|number[])} [indexes] The indexes of elements to remove.
 * @returns {Array} Returns the new array of removed elements.
 * @example
 *
 * var array = ['a', 'b', 'c', 'd'];
 * var pulled = _.pullAt(array, [1, 3]);
 *
 * console.log(array);
 * // => ['a', 'c']
 *
 * console.log(pulled);
 * // => ['b', 'd']
 */
var pullAt = flatRest(function(array, indexes) {
  var length = array == null ? 0 : array.length,
      result = baseAt(array, indexes);

  basePullAt(array, arrayMap(indexes, function(index) {
    return isIndex(index, length) ? +index : index;
  }).sort(compareAscending));

  return result;
});

module.exports = pullAt;


/***/ }),
/* 702 */
/***/ (function(module, exports, __webpack_require__) {

var arrayReduce = __webpack_require__(564),
    baseEach = __webpack_require__(52),
    baseIteratee = __webpack_require__(8),
    baseReduce = __webpack_require__(239),
    isArray = __webpack_require__(10);

/**
 * Reduces `collection` to a value which is the accumulated result of running
 * each element in `collection` thru `iteratee`, where each successive
 * invocation is supplied the return value of the previous. If `accumulator`
 * is not given, the first element of `collection` is used as the initial
 * value. The iteratee is invoked with four arguments:
 * (accumulator, value, index|key, collection).
 *
 * Many lodash methods are guarded to work as iteratees for methods like
 * `_.reduce`, `_.reduceRight`, and `_.transform`.
 *
 * The guarded methods are:
 * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,
 * and `sortBy`
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} [iteratee=_.identity] The function invoked per iteration.
 * @param {*} [accumulator] The initial value.
 * @returns {*} Returns the accumulated value.
 * @see _.reduceRight
 * @example
 *
 * _.reduce([1, 2], function(sum, n) {
 *   return sum + n;
 * }, 0);
 * // => 3
 *
 * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {
 *   (result[value] || (result[value] = [])).push(key);
 *   return result;
 * }, {});
 * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)
 */
function reduce(collection, iteratee, accumulator) {
  var func = isArray(collection) ? arrayReduce : baseReduce,
      initAccum = arguments.length < 3;

  return func(collection, baseIteratee(iteratee, 4), accumulator, initAccum, baseEach);
}

module.exports = reduce;


/***/ }),
/* 703 */
/***/ (function(module, exports, __webpack_require__) {

var arrayReduceRight = __webpack_require__(565),
    baseEachRight = __webpack_require__(230),
    baseIteratee = __webpack_require__(8),
    baseReduce = __webpack_require__(239),
    isArray = __webpack_require__(10);

/**
 * This method is like `_.reduce` except that it iterates over elements of
 * `collection` from right to left.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} [iteratee=_.identity] The function invoked per iteration.
 * @param {*} [accumulator] The initial value.
 * @returns {*} Returns the accumulated value.
 * @see _.reduce
 * @example
 *
 * var array = [[0, 1], [2, 3], [4, 5]];
 *
 * _.reduceRight(array, function(flattened, other) {
 *   return flattened.concat(other);
 * }, []);
 * // => [4, 5, 2, 3, 0, 1]
 */
function reduceRight(collection, iteratee, accumulator) {
  var func = isArray(collection) ? arrayReduceRight : baseReduce,
      initAccum = arguments.length < 3;

  return func(collection, baseIteratee(iteratee, 4), accumulator, initAccum, baseEachRight);
}

module.exports = reduceRight;


/***/ }),
/* 704 */
/***/ (function(module, exports, __webpack_require__) {

var arrayFilter = __webpack_require__(64),
    baseFilter = __webpack_require__(231),
    baseIteratee = __webpack_require__(8),
    isArray = __webpack_require__(10),
    negate = __webpack_require__(692);

/**
 * The opposite of `_.filter`; this method returns the elements of `collection`
 * that `predicate` does **not** return truthy for.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} [predicate=_.identity] The function invoked per iteration.
 * @returns {Array} Returns the new filtered array.
 * @see _.filter
 * @example
 *
 * var users = [
 *   { 'user': 'barney', 'age': 36, 'active': false },
 *   { 'user': 'fred',   'age': 40, 'active': true }
 * ];
 *
 * _.reject(users, function(o) { return !o.active; });
 * // => objects for ['fred']
 *
 * // The `_.matches` iteratee shorthand.
 * _.reject(users, { 'age': 40, 'active': true });
 * // => objects for ['barney']
 *
 * // The `_.matchesProperty` iteratee shorthand.
 * _.reject(users, ['active', false]);
 * // => objects for ['fred']
 *
 * // The `_.property` iteratee shorthand.
 * _.reject(users, 'active');
 * // => objects for ['barney']
 */
function reject(collection, predicate) {
  var func = isArray(collection) ? arrayFilter : baseFilter;
  return func(collection, negate(baseIteratee(predicate, 3)));
}

module.exports = reject;


/***/ }),
/* 705 */
/***/ (function(module, exports, __webpack_require__) {

var baseIteratee = __webpack_require__(8),
    basePullAt = __webpack_require__(237);

/**
 * Removes all elements from `array` that `predicate` returns truthy for
 * and returns an array of the removed elements. The predicate is invoked
 * with three arguments: (value, index, array).
 *
 * **Note:** Unlike `_.filter`, this method mutates `array`. Use `_.pull`
 * to pull elements from an array by value.
 *
 * @static
 * @memberOf _
 * @since 2.0.0
 * @category Array
 * @param {Array} array The array to modify.
 * @param {Function} [predicate=_.identity] The function invoked per iteration.
 * @returns {Array} Returns the new array of removed elements.
 * @example
 *
 * var array = [1, 2, 3, 4];
 * var evens = _.remove(array, function(n) {
 *   return n % 2 == 0;
 * });
 *
 * console.log(array);
 * // => [1, 3]
 *
 * console.log(evens);
 * // => [2, 4]
 */
function remove(array, predicate) {
  var result = [];
  if (!(array && array.length)) {
    return result;
  }
  var index = -1,
      indexes = [],
      length = array.length;

  predicate = baseIteratee(predicate, 3);
  while (++index < length) {
    var value = array[index];
    if (predicate(value, index, array)) {
      result.push(value);
      indexes.push(index);
    }
  }
  basePullAt(array, indexes);
  return result;
}

module.exports = remove;


/***/ }),
/* 706 */
/***/ (function(module, exports) {

/** Used for built-in method references. */
var arrayProto = Array.prototype;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeReverse = arrayProto.reverse;

/**
 * Reverses `array` so that the first element becomes the last, the second
 * element becomes the second to last, and so on.
 *
 * **Note:** This method mutates `array` and is based on
 * [`Array#reverse`](https://mdn.io/Array/reverse).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} array The array to modify.
 * @returns {Array} Returns `array`.
 * @example
 *
 * var array = [1, 2, 3];
 *
 * _.reverse(array);
 * // => [3, 2, 1]
 *
 * console.log(array);
 * // => [3, 2, 1]
 */
function reverse(array) {
  return array == null ? array : nativeReverse.call(array);
}

module.exports = reverse;


/***/ }),
/* 707 */
/***/ (function(module, exports, __webpack_require__) {

var arraySample = __webpack_require__(227),
    baseSample = __webpack_require__(590),
    isArray = __webpack_require__(10);

/**
 * Gets a random element from `collection`.
 *
 * @static
 * @memberOf _
 * @since 2.0.0
 * @category Collection
 * @param {Array|Object} collection The collection to sample.
 * @returns {*} Returns the random element.
 * @example
 *
 * _.sample([1, 2, 3, 4]);
 * // => 2
 */
function sample(collection) {
  var func = isArray(collection) ? arraySample : baseSample;
  return func(collection);
}

module.exports = sample;


/***/ }),
/* 708 */
/***/ (function(module, exports, __webpack_require__) {

var arraySampleSize = __webpack_require__(566),
    baseSampleSize = __webpack_require__(591),
    isArray = __webpack_require__(10),
    isIterateeCall = __webpack_require__(68),
    toInteger = __webpack_require__(18);

/**
 * Gets `n` random elements at unique keys from `collection` up to the
 * size of `collection`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Collection
 * @param {Array|Object} collection The collection to sample.
 * @param {number} [n=1] The number of elements to sample.
 * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
 * @returns {Array} Returns the random elements.
 * @example
 *
 * _.sampleSize([1, 2, 3], 2);
 * // => [3, 1]
 *
 * _.sampleSize([1, 2, 3], 4);
 * // => [2, 3, 1]
 */
function sampleSize(collection, n, guard) {
  if ((guard ? isIterateeCall(collection, n, guard) : n === undefined)) {
    n = 1;
  } else {
    n = toInteger(n);
  }
  var func = isArray(collection) ? arraySampleSize : baseSampleSize;
  return func(collection, n);
}

module.exports = sampleSize;


/***/ }),
/* 709 */
/***/ (function(module, exports, __webpack_require__) {

var arrayShuffle = __webpack_require__(567),
    baseShuffle = __webpack_require__(594),
    isArray = __webpack_require__(10);

/**
 * Creates an array of shuffled values, using a version of the
 * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Collection
 * @param {Array|Object} collection The collection to shuffle.
 * @returns {Array} Returns the new shuffled array.
 * @example
 *
 * _.shuffle([1, 2, 3, 4]);
 * // => [4, 1, 3, 2]
 */
function shuffle(collection) {
  var func = isArray(collection) ? arrayShuffle : baseShuffle;
  return func(collection);
}

module.exports = shuffle;


/***/ }),
/* 710 */
/***/ (function(module, exports, __webpack_require__) {

var baseKeys = __webpack_require__(234),
    getTag = __webpack_require__(251),
    isArrayLike = __webpack_require__(47),
    isString = __webpack_require__(266),
    stringSize = __webpack_require__(648);

/** `Object#toString` result references. */
var mapTag = '[object Map]',
    setTag = '[object Set]';

/**
 * Gets the size of `collection` by returning its length for array-like
 * values or the number of own enumerable string keyed properties for objects.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Collection
 * @param {Array|Object|string} collection The collection to inspect.
 * @returns {number} Returns the collection size.
 * @example
 *
 * _.size([1, 2, 3]);
 * // => 3
 *
 * _.size({ 'a': 1, 'b': 2 });
 * // => 2
 *
 * _.size('pebbles');
 * // => 7
 */
function size(collection) {
  if (collection == null) {
    return 0;
  }
  if (isArrayLike(collection)) {
    return isString(collection) ? stringSize(collection) : collection.length;
  }
  var tag = getTag(collection);
  if (tag == mapTag || tag == setTag) {
    return collection.size;
  }
  return baseKeys(collection).length;
}

module.exports = size;


/***/ }),
/* 711 */
/***/ (function(module, exports, __webpack_require__) {

var baseSlice = __webpack_require__(43),
    isIterateeCall = __webpack_require__(68),
    toInteger = __webpack_require__(18);

/**
 * Creates a slice of `array` from `start` up to, but not including, `end`.
 *
 * **Note:** This method is used instead of
 * [`Array#slice`](https://mdn.io/Array/slice) to ensure dense arrays are
 * returned.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Array
 * @param {Array} array The array to slice.
 * @param {number} [start=0] The start position.
 * @param {number} [end=array.length] The end position.
 * @returns {Array} Returns the slice of `array`.
 */
function slice(array, start, end) {
  var length = array == null ? 0 : array.length;
  if (!length) {
    return [];
  }
  if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {
    start = 0;
    end = length;
  }
  else {
    start = start == null ? 0 : toInteger(start);
    end = end === undefined ? length : toInteger(end);
  }
  return baseSlice(array, start, end);
}

module.exports = slice;


/***/ }),
/* 712 */
/***/ (function(module, exports, __webpack_require__) {

var arraySome = __webpack_require__(228),
    baseIteratee = __webpack_require__(8),
    baseSome = __webpack_require__(595),
    isArray = __webpack_require__(10),
    isIterateeCall = __webpack_require__(68);

/**
 * Checks if `predicate` returns truthy for **any** element of `collection`.
 * Iteration is stopped once `predicate` returns truthy. The predicate is
 * invoked with three arguments: (value, index|key, collection).
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Collection
 * @param {Array|Object} collection The collection to iterate over.
 * @param {Function} [predicate=_.identity] The function invoked per iteration.
 * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
 * @returns {boolean} Returns `true` if any element passes the predicate check,
 *  else `false`.
 * @example
 *
 * _.some([null, 0, 'yes', false], Boolean);
 * // => true
 *
 * var users = [
 *   { 'user': 'barney', 'active': true },
 *   { 'user': 'fred',   'active': false }
 * ];
 *
 * // The `_.matches` iteratee shorthand.
 * _.some(users, { 'user': 'barney', 'active': false });
 * // => false
 *
 * // The `_.matchesProperty` iteratee shorthand.
 * _.some(users, ['active', false]);
 * // => true
 *
 * // The `_.property` iteratee shorthand.
 * _.some(users, 'active');
 * // => true
 */
function some(collection, predicate, guard) {
  var func = isArray(collection) ? arraySome : baseSome;
  if (guard && isIterateeCall(collection, predicate, guard)) {
    predicate = undefined;
  }
  return func(collection, baseIteratee(predicate, 3));
}

module.exports = some;


/***/ }),
/* 713 */
/***/ (function(module, exports, __webpack_require__) {

var baseSortedIndex = __webpack_require__(117);

/**
 * Uses a binary search to determine the lowest index at which `value`
 * should be inserted into `array` in order to maintain its sort order.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Array
 * @param {Array} array The sorted array to inspect.
 * @param {*} value The value to evaluate.
 * @returns {number} Returns the index at which `value` should be inserted
 *  into `array`.
 * @example
 *
 * _.sortedIndex([30, 50], 40);
 * // => 1
 */
function sortedIndex(array, value) {
  return baseSortedIndex(array, value);
}

module.exports = sortedIndex;


/***/ }),
/* 714 */
/***/ (function(module, exports, __webpack_require__) {

var baseIteratee = __webpack_require__(8),
    baseSortedIndexBy = __webpack_require__(168);

/**
 * This method is like `_.sortedIndex` except that it accepts `iteratee`
 * which is invoked for `value` and each element of `array` to compute their
 * sort ranking. The iteratee is invoked with one argument: (value).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} array The sorted array to inspect.
 * @param {*} value The value to evaluate.
 * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
 * @returns {number} Returns the index at which `value` should be inserted
 *  into `array`.
 * @example
 *
 * var objects = [{ 'x': 4 }, { 'x': 5 }];
 *
 * _.sortedIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });
 * // => 0
 *
 * // The `_.property` iteratee shorthand.
 * _.sortedIndexBy(objects, { 'x': 4 }, 'x');
 * // => 0
 */
function sortedIndexBy(array, value, iteratee) {
  return baseSortedIndexBy(array, value, baseIteratee(iteratee, 2));
}

module.exports = sortedIndexBy;


/***/ }),
/* 715 */
/***/ (function(module, exports, __webpack_require__) {

var baseSortedIndex = __webpack_require__(117),
    eq = __webpack_require__(70);

/**
 * This method is like `_.indexOf` except that it performs a binary
 * search on a sorted `array`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} array The array to inspect.
 * @param {*} value The value to search for.
 * @returns {number} Returns the index of the matched value, else `-1`.
 * @example
 *
 * _.sortedIndexOf([4, 5, 5, 5, 6], 5);
 * // => 1
 */
function sortedIndexOf(array, value) {
  var length = array == null ? 0 : array.length;
  if (length) {
    var index = baseSortedIndex(array, value);
    if (index < length && eq(array[index], value)) {
      return index;
    }
  }
  return -1;
}

module.exports = sortedIndexOf;


/***/ }),
/* 716 */
/***/ (function(module, exports, __webpack_require__) {

var baseSortedIndex = __webpack_require__(117);

/**
 * This method is like `_.sortedIndex` except that it returns the highest
 * index at which `value` should be inserted into `array` in order to
 * maintain its sort order.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Array
 * @param {Array} array The sorted array to inspect.
 * @param {*} value The value to evaluate.
 * @returns {number} Returns the index at which `value` should be inserted
 *  into `array`.
 * @example
 *
 * _.sortedLastIndex([4, 5, 5, 5, 6], 5);
 * // => 4
 */
function sortedLastIndex(array, value) {
  return baseSortedIndex(array, value, true);
}

module.exports = sortedLastIndex;


/***/ }),
/* 717 */
/***/ (function(module, exports, __webpack_require__) {

var baseIteratee = __webpack_require__(8),
    baseSortedIndexBy = __webpack_require__(168);

/**
 * This method is like `_.sortedLastIndex` except that it accepts `iteratee`
 * which is invoked for `value` and each element of `array` to compute their
 * sort ranking. The iteratee is invoked with one argument: (value).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} array The sorted array to inspect.
 * @param {*} value The value to evaluate.
 * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
 * @returns {number} Returns the index at which `value` should be inserted
 *  into `array`.
 * @example
 *
 * var objects = [{ 'x': 4 }, { 'x': 5 }];
 *
 * _.sortedLastIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });
 * // => 1
 *
 * // The `_.property` iteratee shorthand.
 * _.sortedLastIndexBy(objects, { 'x': 4 }, 'x');
 * // => 1
 */
function sortedLastIndexBy(array, value, iteratee) {
  return baseSortedIndexBy(array, value, baseIteratee(iteratee, 2), true);
}

module.exports = sortedLastIndexBy;


/***/ }),
/* 718 */
/***/ (function(module, exports, __webpack_require__) {

var baseSortedIndex = __webpack_require__(117),
    eq = __webpack_require__(70);

/**
 * This method is like `_.lastIndexOf` except that it performs a binary
 * search on a sorted `array`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} array The array to inspect.
 * @param {*} value The value to search for.
 * @returns {number} Returns the index of the matched value, else `-1`.
 * @example
 *
 * _.sortedLastIndexOf([4, 5, 5, 5, 6], 5);
 * // => 3
 */
function sortedLastIndexOf(array, value) {
  var length = array == null ? 0 : array.length;
  if (length) {
    var index = baseSortedIndex(array, value, true) - 1;
    if (eq(array[index], value)) {
      return index;
    }
  }
  return -1;
}

module.exports = sortedLastIndexOf;


/***/ }),
/* 719 */
/***/ (function(module, exports, __webpack_require__) {

var baseSortedUniq = __webpack_require__(240);

/**
 * This method is like `_.uniq` except that it's designed and optimized
 * for sorted arrays.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} array The array to inspect.
 * @returns {Array} Returns the new duplicate free array.
 * @example
 *
 * _.sortedUniq([1, 1, 2]);
 * // => [1, 2]
 */
function sortedUniq(array) {
  return (array && array.length)
    ? baseSortedUniq(array)
    : [];
}

module.exports = sortedUniq;


/***/ }),
/* 720 */
/***/ (function(module, exports, __webpack_require__) {

var baseIteratee = __webpack_require__(8),
    baseSortedUniq = __webpack_require__(240);

/**
 * This method is like `_.uniqBy` except that it's designed and optimized
 * for sorted arrays.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} array The array to inspect.
 * @param {Function} [iteratee] The iteratee invoked per element.
 * @returns {Array} Returns the new duplicate free array.
 * @example
 *
 * _.sortedUniqBy([1.1, 1.2, 2.3, 2.4], Math.floor);
 * // => [1.1, 2.3]
 */
function sortedUniqBy(array, iteratee) {
  return (array && array.length)
    ? baseSortedUniq(array, baseIteratee(iteratee, 2))
    : [];
}

module.exports = sortedUniqBy;


/***/ }),
/* 721 */
/***/ (function(module, exports) {

/**
 * This method returns a new empty array.
 *
 * @static
 * @memberOf _
 * @since 4.13.0
 * @category Util
 * @returns {Array} Returns the new empty array.
 * @example
 *
 * var arrays = _.times(2, _.stubArray);
 *
 * console.log(arrays);
 * // => [[], []]
 *
 * console.log(arrays[0] === arrays[1]);
 * // => false
 */
function stubArray() {
  return [];
}

module.exports = stubArray;


/***/ }),
/* 722 */
/***/ (function(module, exports) {

/**
 * This method returns `false`.
 *
 * @static
 * @memberOf _
 * @since 4.13.0
 * @category Util
 * @returns {boolean} Returns `false`.
 * @example
 *
 * _.times(2, _.stubFalse);
 * // => [false, false]
 */
function stubFalse() {
  return false;
}

module.exports = stubFalse;


/***/ }),
/* 723 */
/***/ (function(module, exports, __webpack_require__) {

var baseSlice = __webpack_require__(43);

/**
 * Gets all but the first element of `array`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} array The array to query.
 * @returns {Array} Returns the slice of `array`.
 * @example
 *
 * _.tail([1, 2, 3]);
 * // => [2, 3]
 */
function tail(array) {
  var length = array == null ? 0 : array.length;
  return length ? baseSlice(array, 1, length) : [];
}

module.exports = tail;


/***/ }),
/* 724 */
/***/ (function(module, exports, __webpack_require__) {

var baseSlice = __webpack_require__(43),
    toInteger = __webpack_require__(18);

/**
 * Creates a slice of `array` with `n` elements taken from the beginning.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Array
 * @param {Array} array The array to query.
 * @param {number} [n=1] The number of elements to take.
 * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
 * @returns {Array} Returns the slice of `array`.
 * @example
 *
 * _.take([1, 2, 3]);
 * // => [1]
 *
 * _.take([1, 2, 3], 2);
 * // => [1, 2]
 *
 * _.take([1, 2, 3], 5);
 * // => [1, 2, 3]
 *
 * _.take([1, 2, 3], 0);
 * // => []
 */
function take(array, n, guard) {
  if (!(array && array.length)) {
    return [];
  }
  n = (guard || n === undefined) ? 1 : toInteger(n);
  return baseSlice(array, 0, n < 0 ? 0 : n);
}

module.exports = take;


/***/ }),
/* 725 */
/***/ (function(module, exports, __webpack_require__) {

var baseSlice = __webpack_require__(43),
    toInteger = __webpack_require__(18);

/**
 * Creates a slice of `array` with `n` elements taken from the end.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Array
 * @param {Array} array The array to query.
 * @param {number} [n=1] The number of elements to take.
 * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.
 * @returns {Array} Returns the slice of `array`.
 * @example
 *
 * _.takeRight([1, 2, 3]);
 * // => [3]
 *
 * _.takeRight([1, 2, 3], 2);
 * // => [2, 3]
 *
 * _.takeRight([1, 2, 3], 5);
 * // => [1, 2, 3]
 *
 * _.takeRight([1, 2, 3], 0);
 * // => []
 */
function takeRight(array, n, guard) {
  var length = array == null ? 0 : array.length;
  if (!length) {
    return [];
  }
  n = (guard || n === undefined) ? 1 : toInteger(n);
  n = length - n;
  return baseSlice(array, n < 0 ? 0 : n, length);
}

module.exports = takeRight;


/***/ }),
/* 726 */
/***/ (function(module, exports, __webpack_require__) {

var baseIteratee = __webpack_require__(8),
    baseWhile = __webpack_require__(118);

/**
 * Creates a slice of `array` with elements taken from the end. Elements are
 * taken until `predicate` returns falsey. The predicate is invoked with
 * three arguments: (value, index, array).
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Array
 * @param {Array} array The array to query.
 * @param {Function} [predicate=_.identity] The function invoked per iteration.
 * @returns {Array} Returns the slice of `array`.
 * @example
 *
 * var users = [
 *   { 'user': 'barney',  'active': true },
 *   { 'user': 'fred',    'active': false },
 *   { 'user': 'pebbles', 'active': false }
 * ];
 *
 * _.takeRightWhile(users, function(o) { return !o.active; });
 * // => objects for ['fred', 'pebbles']
 *
 * // The `_.matches` iteratee shorthand.
 * _.takeRightWhile(users, { 'user': 'pebbles', 'active': false });
 * // => objects for ['pebbles']
 *
 * // The `_.matchesProperty` iteratee shorthand.
 * _.takeRightWhile(users, ['active', false]);
 * // => objects for ['fred', 'pebbles']
 *
 * // The `_.property` iteratee shorthand.
 * _.takeRightWhile(users, 'active');
 * // => []
 */
function takeRightWhile(array, predicate) {
  return (array && array.length)
    ? baseWhile(array, baseIteratee(predicate, 3), false, true)
    : [];
}

module.exports = takeRightWhile;


/***/ }),
/* 727 */
/***/ (function(module, exports, __webpack_require__) {

var baseIteratee = __webpack_require__(8),
    baseWhile = __webpack_require__(118);

/**
 * Creates a slice of `array` with elements taken from the beginning. Elements
 * are taken until `predicate` returns falsey. The predicate is invoked with
 * three arguments: (value, index, array).
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Array
 * @param {Array} array The array to query.
 * @param {Function} [predicate=_.identity] The function invoked per iteration.
 * @returns {Array} Returns the slice of `array`.
 * @example
 *
 * var users = [
 *   { 'user': 'barney',  'active': false },
 *   { 'user': 'fred',    'active': false },
 *   { 'user': 'pebbles', 'active': true }
 * ];
 *
 * _.takeWhile(users, function(o) { return !o.active; });
 * // => objects for ['barney', 'fred']
 *
 * // The `_.matches` iteratee shorthand.
 * _.takeWhile(users, { 'user': 'barney', 'active': false });
 * // => objects for ['barney']
 *
 * // The `_.matchesProperty` iteratee shorthand.
 * _.takeWhile(users, ['active', false]);
 * // => objects for ['barney', 'fred']
 *
 * // The `_.property` iteratee shorthand.
 * _.takeWhile(users, 'active');
 * // => []
 */
function takeWhile(array, predicate) {
  return (array && array.length)
    ? baseWhile(array, baseIteratee(predicate, 3))
    : [];
}

module.exports = takeWhile;


/***/ }),
/* 728 */
/***/ (function(module, exports, __webpack_require__) {

var toNumber = __webpack_require__(730);

/** Used as references for various `Number` constants. */
var INFINITY = 1 / 0,
    MAX_INTEGER = 1.7976931348623157e+308;

/**
 * Converts `value` to a finite number.
 *
 * @static
 * @memberOf _
 * @since 4.12.0
 * @category Lang
 * @param {*} value The value to convert.
 * @returns {number} Returns the converted number.
 * @example
 *
 * _.toFinite(3.2);
 * // => 3.2
 *
 * _.toFinite(Number.MIN_VALUE);
 * // => 5e-324
 *
 * _.toFinite(Infinity);
 * // => 1.7976931348623157e+308
 *
 * _.toFinite('3.2');
 * // => 3.2
 */
function toFinite(value) {
  if (!value) {
    return value === 0 ? value : 0;
  }
  value = toNumber(value);
  if (value === INFINITY || value === -INFINITY) {
    var sign = (value < 0 ? -1 : 1);
    return sign * MAX_INTEGER;
  }
  return value === value ? value : 0;
}

module.exports = toFinite;


/***/ }),
/* 729 */
/***/ (function(module, exports, __webpack_require__) {

var baseClamp = __webpack_require__(163),
    toInteger = __webpack_require__(18);

/** Used as references for the maximum length and index of an array. */
var MAX_ARRAY_LENGTH = 4294967295;

/**
 * Converts `value` to an integer suitable for use as the length of an
 * array-like object.
 *
 * **Note:** This method is based on
 * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to convert.
 * @returns {number} Returns the converted integer.
 * @example
 *
 * _.toLength(3.2);
 * // => 3
 *
 * _.toLength(Number.MIN_VALUE);
 * // => 0
 *
 * _.toLength(Infinity);
 * // => 4294967295
 *
 * _.toLength('3.2');
 * // => 3
 */
function toLength(value) {
  return value ? baseClamp(toInteger(value), 0, MAX_ARRAY_LENGTH) : 0;
}

module.exports = toLength;


/***/ }),
/* 730 */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(80),
    isSymbol = __webpack_require__(72);

/** Used as references for various `Number` constants. */
var NAN = 0 / 0;

/** Used to match leading and trailing whitespace. */
var reTrim = /^\s+|\s+$/g;

/** Used to detect bad signed hexadecimal string values. */
var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;

/** Used to detect binary string values. */
var reIsBinary = /^0b[01]+$/i;

/** Used to detect octal string values. */
var reIsOctal = /^0o[0-7]+$/i;

/** Built-in method references without a dependency on `root`. */
var freeParseInt = parseInt;

/**
 * Converts `value` to a number.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to process.
 * @returns {number} Returns the number.
 * @example
 *
 * _.toNumber(3.2);
 * // => 3.2
 *
 * _.toNumber(Number.MIN_VALUE);
 * // => 5e-324
 *
 * _.toNumber(Infinity);
 * // => Infinity
 *
 * _.toNumber('3.2');
 * // => 3.2
 */
function toNumber(value) {
  if (typeof value == 'number') {
    return value;
  }
  if (isSymbol(value)) {
    return NAN;
  }
  if (isObject(value)) {
    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
    value = isObject(other) ? (other + '') : other;
  }
  if (typeof value != 'string') {
    return value === 0 ? value : +value;
  }
  value = value.replace(reTrim, '');
  var isBinary = reIsBinary.test(value);
  return (isBinary || reIsOctal.test(value))
    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)
    : (reIsBadHex.test(value) ? NAN : +value);
}

module.exports = toNumber;


/***/ }),
/* 731 */
/***/ (function(module, exports, __webpack_require__) {

var baseToString = __webpack_require__(597);

/**
 * Converts `value` to a string. An empty string is returned for `null`
 * and `undefined` values. The sign of `-0` is preserved.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to convert.
 * @returns {string} Returns the converted string.
 * @example
 *
 * _.toString(null);
 * // => ''
 *
 * _.toString(-0);
 * // => '-0'
 *
 * _.toString([1, 2, 3]);
 * // => '1,2,3'
 */
function toString(value) {
  return value == null ? '' : baseToString(value);
}

module.exports = toString;


/***/ }),
/* 732 */
/***/ (function(module, exports, __webpack_require__) {

var baseFlatten = __webpack_require__(20),
    baseRest = __webpack_require__(17),
    baseUniq = __webpack_require__(65),
    isArrayLikeObject = __webpack_require__(30);

/**
 * Creates an array of unique values, in order, from all given arrays using
 * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * for equality comparisons.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Array
 * @param {...Array} [arrays] The arrays to inspect.
 * @returns {Array} Returns the new array of combined values.
 * @example
 *
 * _.union([2], [1, 2]);
 * // => [2, 1]
 */
var union = baseRest(function(arrays) {
  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));
});

module.exports = union;


/***/ }),
/* 733 */
/***/ (function(module, exports, __webpack_require__) {

var baseFlatten = __webpack_require__(20),
    baseIteratee = __webpack_require__(8),
    baseRest = __webpack_require__(17),
    baseUniq = __webpack_require__(65),
    isArrayLikeObject = __webpack_require__(30),
    last = __webpack_require__(34);

/**
 * This method is like `_.union` except that it accepts `iteratee` which is
 * invoked for each element of each `arrays` to generate the criterion by
 * which uniqueness is computed. Result values are chosen from the first
 * array in which the value occurs. The iteratee is invoked with one argument:
 * (value).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {...Array} [arrays] The arrays to inspect.
 * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
 * @returns {Array} Returns the new array of combined values.
 * @example
 *
 * _.unionBy([2.1], [1.2, 2.3], Math.floor);
 * // => [2.1, 1.2]
 *
 * // The `_.property` iteratee shorthand.
 * _.unionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');
 * // => [{ 'x': 1 }, { 'x': 2 }]
 */
var unionBy = baseRest(function(arrays) {
  var iteratee = last(arrays);
  if (isArrayLikeObject(iteratee)) {
    iteratee = undefined;
  }
  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), baseIteratee(iteratee, 2));
});

module.exports = unionBy;


/***/ }),
/* 734 */
/***/ (function(module, exports, __webpack_require__) {

var baseFlatten = __webpack_require__(20),
    baseRest = __webpack_require__(17),
    baseUniq = __webpack_require__(65),
    isArrayLikeObject = __webpack_require__(30),
    last = __webpack_require__(34);

/**
 * This method is like `_.union` except that it accepts `comparator` which
 * is invoked to compare elements of `arrays`. Result values are chosen from
 * the first array in which the value occurs. The comparator is invoked
 * with two arguments: (arrVal, othVal).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {...Array} [arrays] The arrays to inspect.
 * @param {Function} [comparator] The comparator invoked per element.
 * @returns {Array} Returns the new array of combined values.
 * @example
 *
 * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];
 * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];
 *
 * _.unionWith(objects, others, _.isEqual);
 * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]
 */
var unionWith = baseRest(function(arrays) {
  var comparator = last(arrays);
  comparator = typeof comparator == 'function' ? comparator : undefined;
  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), undefined, comparator);
});

module.exports = unionWith;


/***/ }),
/* 735 */
/***/ (function(module, exports, __webpack_require__) {

var baseIteratee = __webpack_require__(8),
    baseUniq = __webpack_require__(65);

/**
 * This method is like `_.uniq` except that it accepts `iteratee` which is
 * invoked for each element in `array` to generate the criterion by which
 * uniqueness is computed. The order of result values is determined by the
 * order they occur in the array. The iteratee is invoked with one argument:
 * (value).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} array The array to inspect.
 * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
 * @returns {Array} Returns the new duplicate free array.
 * @example
 *
 * _.uniqBy([2.1, 1.2, 2.3], Math.floor);
 * // => [2.1, 1.2]
 *
 * // The `_.property` iteratee shorthand.
 * _.uniqBy([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');
 * // => [{ 'x': 1 }, { 'x': 2 }]
 */
function uniqBy(array, iteratee) {
  return (array && array.length) ? baseUniq(array, baseIteratee(iteratee, 2)) : [];
}

module.exports = uniqBy;


/***/ }),
/* 736 */
/***/ (function(module, exports, __webpack_require__) {

var baseUniq = __webpack_require__(65);

/**
 * This method is like `_.uniq` except that it accepts `comparator` which
 * is invoked to compare elements of `array`. The order of result values is
 * determined by the order they occur in the array.The comparator is invoked
 * with two arguments: (arrVal, othVal).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {Array} array The array to inspect.
 * @param {Function} [comparator] The comparator invoked per element.
 * @returns {Array} Returns the new duplicate free array.
 * @example
 *
 * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 2 }];
 *
 * _.uniqWith(objects, _.isEqual);
 * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }]
 */
function uniqWith(array, comparator) {
  comparator = typeof comparator == 'function' ? comparator : undefined;
  return (array && array.length) ? baseUniq(array, undefined, comparator) : [];
}

module.exports = uniqWith;


/***/ }),
/* 737 */
/***/ (function(module, exports, __webpack_require__) {

var baseDifference = __webpack_require__(88),
    baseRest = __webpack_require__(17),
    isArrayLikeObject = __webpack_require__(30);

/**
 * Creates an array excluding all given values using
 * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * for equality comparisons.
 *
 * **Note:** Unlike `_.pull`, this method returns a new array.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Array
 * @param {Array} array The array to inspect.
 * @param {...*} [values] The values to exclude.
 * @returns {Array} Returns the new array of filtered values.
 * @see _.difference, _.xor
 * @example
 *
 * _.without([2, 1, 2, 3], 1, 2);
 * // => [3]
 */
var without = baseRest(function(array, values) {
  return isArrayLikeObject(array)
    ? baseDifference(array, values)
    : [];
});

module.exports = without;


/***/ }),
/* 738 */
/***/ (function(module, exports, __webpack_require__) {

var arrayFilter = __webpack_require__(64),
    baseRest = __webpack_require__(17),
    baseXor = __webpack_require__(169),
    isArrayLikeObject = __webpack_require__(30);

/**
 * Creates an array of unique values that is the
 * [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)
 * of the given arrays. The order of result values is determined by the order
 * they occur in the arrays.
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Array
 * @param {...Array} [arrays] The arrays to inspect.
 * @returns {Array} Returns the new array of filtered values.
 * @see _.difference, _.without
 * @example
 *
 * _.xor([2, 1], [2, 3]);
 * // => [1, 3]
 */
var xor = baseRest(function(arrays) {
  return baseXor(arrayFilter(arrays, isArrayLikeObject));
});

module.exports = xor;


/***/ }),
/* 739 */
/***/ (function(module, exports, __webpack_require__) {

var arrayFilter = __webpack_require__(64),
    baseIteratee = __webpack_require__(8),
    baseRest = __webpack_require__(17),
    baseXor = __webpack_require__(169),
    isArrayLikeObject = __webpack_require__(30),
    last = __webpack_require__(34);

/**
 * This method is like `_.xor` except that it accepts `iteratee` which is
 * invoked for each element of each `arrays` to generate the criterion by
 * which by which they're compared. The order of result values is determined
 * by the order they occur in the arrays. The iteratee is invoked with one
 * argument: (value).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {...Array} [arrays] The arrays to inspect.
 * @param {Function} [iteratee=_.identity] The iteratee invoked per element.
 * @returns {Array} Returns the new array of filtered values.
 * @example
 *
 * _.xorBy([2.1, 1.2], [2.3, 3.4], Math.floor);
 * // => [1.2, 3.4]
 *
 * // The `_.property` iteratee shorthand.
 * _.xorBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');
 * // => [{ 'x': 2 }]
 */
var xorBy = baseRest(function(arrays) {
  var iteratee = last(arrays);
  if (isArrayLikeObject(iteratee)) {
    iteratee = undefined;
  }
  return baseXor(arrayFilter(arrays, isArrayLikeObject), baseIteratee(iteratee, 2));
});

module.exports = xorBy;


/***/ }),
/* 740 */
/***/ (function(module, exports, __webpack_require__) {

var arrayFilter = __webpack_require__(64),
    baseRest = __webpack_require__(17),
    baseXor = __webpack_require__(169),
    isArrayLikeObject = __webpack_require__(30),
    last = __webpack_require__(34);

/**
 * This method is like `_.xor` except that it accepts `comparator` which is
 * invoked to compare elements of `arrays`. The order of result values is
 * determined by the order they occur in the arrays. The comparator is invoked
 * with two arguments: (arrVal, othVal).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Array
 * @param {...Array} [arrays] The arrays to inspect.
 * @param {Function} [comparator] The comparator invoked per element.
 * @returns {Array} Returns the new array of filtered values.
 * @example
 *
 * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];
 * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];
 *
 * _.xorWith(objects, others, _.isEqual);
 * // => [{ 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]
 */
var xorWith = baseRest(function(arrays) {
  var comparator = last(arrays);
  comparator = typeof comparator == 'function' ? comparator : undefined;
  return baseXor(arrayFilter(arrays, isArrayLikeObject), undefined, comparator);
});

module.exports = xorWith;


/***/ }),
/* 741 */
/***/ (function(module, exports, __webpack_require__) {

var baseRest = __webpack_require__(17),
    unzip = __webpack_require__(176);

/**
 * Creates an array of grouped elements, the first of which contains the
 * first elements of the given arrays, the second of which contains the
 * second elements of the given arrays, and so on.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Array
 * @param {...Array} [arrays] The arrays to process.
 * @returns {Array} Returns the new array of grouped elements.
 * @example
 *
 * _.zip(['a', 'b'], [1, 2], [true, false]);
 * // => [['a', 1, true], ['b', 2, false]]
 */
var zip = baseRest(unzip);

module.exports = zip;


/***/ }),
/* 742 */
/***/ (function(module, exports, __webpack_require__) {

var assignValue = __webpack_require__(229),
    baseZipObject = __webpack_require__(242);

/**
 * This method is like `_.fromPairs` except that it accepts two arrays,
 * one of property identifiers and one of corresponding values.
 *
 * @static
 * @memberOf _
 * @since 0.4.0
 * @category Array
 * @param {Array} [props=[]] The property identifiers.
 * @param {Array} [values=[]] The property values.
 * @returns {Object} Returns the new object.
 * @example
 *
 * _.zipObject(['a', 'b'], [1, 2]);
 * // => { 'a': 1, 'b': 2 }
 */
function zipObject(props, values) {
  return baseZipObject(props || [], values || [], assignValue);
}

module.exports = zipObject;


/***/ }),
/* 743 */
/***/ (function(module, exports, __webpack_require__) {

var baseSet = __webpack_require__(592),
    baseZipObject = __webpack_require__(242);

/**
 * This method is like `_.zipObject` except that it supports property paths.
 *
 * @static
 * @memberOf _
 * @since 4.1.0
 * @category Array
 * @param {Array} [props=[]] The property identifiers.
 * @param {Array} [values=[]] The property values.
 * @returns {Object} Returns the new object.
 * @example
 *
 * _.zipObjectDeep(['a.b[0].c', 'a.b[1].d'], [1, 2]);
 * // => { 'a': { 'b': [{ 'c': 1 }, { 'd': 2 }] } }
 */
function zipObjectDeep(props, values) {
  return baseZipObject(props || [], values || [], baseSet);
}

module.exports = zipObjectDeep;


/***/ }),
/* 744 */
/***/ (function(module, exports, __webpack_require__) {

var baseRest = __webpack_require__(17),
    unzipWith = __webpack_require__(271);

/**
 * This method is like `_.zip` except that it accepts `iteratee` to specify
 * how grouped values should be combined. The iteratee is invoked with the
 * elements of each group: (...group).
 *
 * @static
 * @memberOf _
 * @since 3.8.0
 * @category Array
 * @param {...Array} [arrays] The arrays to process.
 * @param {Function} [iteratee=_.identity] The function to combine
 *  grouped values.
 * @returns {Array} Returns the new array of grouped elements.
 * @example
 *
 * _.zipWith([1, 2], [10, 20], [100, 200], function(a, b, c) {
 *   return a + b + c;
 * });
 * // => [111, 222]
 */
var zipWith = baseRest(function(arrays) {
  var length = arrays.length,
      iteratee = length > 1 ? arrays[length - 1] : undefined;

  iteratee = typeof iteratee == 'function' ? (arrays.pop(), iteratee) : undefined;
  return unzipWith(arrays, iteratee);
});

module.exports = zipWith;


/***/ }),
/* 745 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* Notify.js - http://notifyjs.com/ Copyright (c) 2015 MIT */
(function (factory) {
	// UMD start
	// https://github.com/umdjs/umd/blob/master/jqueryPluginCommonjs.js
	if (true) {
		// AMD. Register as an anonymous module.
		!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(1)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	} else if (typeof module === 'object' && module.exports) {
		// Node/CommonJS
		module.exports = function( root, jQuery ) {
			if ( jQuery === undefined ) {
				// require('jQuery') returns a factory that requires window to
				// build a jQuery instance, we normalize how we use modules
				// that require this pattern but the window provided is a noop
				// if it's defined (how jquery works)
				if ( typeof window !== 'undefined' ) {
					jQuery = require('jquery');
				}
				else {
					jQuery = require('jquery')(root);
				}
			}
			factory(jQuery);
			return jQuery;
		};
	} else {
		// Browser globals
		factory(jQuery);
	}
}(function ($) {
	//IE8 indexOf polyfill
	var indexOf = [].indexOf || function(item) {
		for (var i = 0, l = this.length; i < l; i++) {
			if (i in this && this[i] === item) {
				return i;
			}
		}
		return -1;
	};

	var pluginName = "notify";
	var pluginClassName = pluginName + "js";
	var blankFieldName = pluginName + "!blank";

	var positions = {
		t: "top",
		m: "middle",
		b: "bottom",
		l: "left",
		c: "center",
		r: "right"
	};
	var hAligns = ["l", "c", "r"];
	var vAligns = ["t", "m", "b"];
	var mainPositions = ["t", "b", "l", "r"];
	var opposites = {
		t: "b",
		m: null,
		b: "t",
		l: "r",
		c: null,
		r: "l"
	};

	var parsePosition = function(str) {
		var pos;
		pos = [];
		$.each(str.split(/\W+/), function(i, word) {
			var w;
			w = word.toLowerCase().charAt(0);
			if (positions[w]) {
				return pos.push(w);
			}
		});
		return pos;
	};

	var styles = {};

	var coreStyle = {
		name: "core",
		html: "<div class=\"" + pluginClassName + "-wrapper\">\n	<div class=\"" + pluginClassName + "-arrow\"></div>\n	<div class=\"" + pluginClassName + "-container\"></div>\n</div>",
		css: "." + pluginClassName + "-corner {\n	position: fixed;\n	margin: 5px;\n	z-index: 1050;\n}\n\n." + pluginClassName + "-corner ." + pluginClassName + "-wrapper,\n." + pluginClassName + "-corner ." + pluginClassName + "-container {\n	position: relative;\n	display: block;\n	height: inherit;\n	width: inherit;\n	margin: 3px;\n}\n\n." + pluginClassName + "-wrapper {\n	z-index: 1;\n	position: absolute;\n	display: inline-block;\n	height: 0;\n	width: 0;\n}\n\n." + pluginClassName + "-container {\n	display: none;\n	z-index: 1;\n	position: absolute;\n}\n\n." + pluginClassName + "-hidable {\n	cursor: pointer;\n}\n\n[data-notify-text],[data-notify-html] {\n	position: relative;\n}\n\n." + pluginClassName + "-arrow {\n	position: absolute;\n	z-index: 2;\n	width: 0;\n	height: 0;\n}"
	};

	var stylePrefixes = {
		"border-radius": ["-webkit-", "-moz-"]
	};

	var getStyle = function(name) {
		return styles[name];
	};

	var addStyle = function(name, def) {
		if (!name) {
			throw "Missing Style name";
		}
		if (!def) {
			throw "Missing Style definition";
		}
		if (!def.html) {
			throw "Missing Style HTML";
		}
		//remove existing style
		var existing = styles[name];
		if (existing && existing.cssElem) {
			if (window.console) {
				console.warn(pluginName + ": overwriting style '" + name + "'");
			}
			styles[name].cssElem.remove();
		}
		def.name = name;
		styles[name] = def;
		var cssText = "";
		if (def.classes) {
			$.each(def.classes, function(className, props) {
				cssText += "." + pluginClassName + "-" + def.name + "-" + className + " {\n";
				$.each(props, function(name, val) {
					if (stylePrefixes[name]) {
						$.each(stylePrefixes[name], function(i, prefix) {
							return cssText += "	" + prefix + name + ": " + val + ";\n";
						});
					}
					return cssText += "	" + name + ": " + val + ";\n";
				});
				return cssText += "}\n";
			});
		}
		if (def.css) {
			cssText += "/* styles for " + def.name + " */\n" + def.css;
		}
		if (cssText) {
			def.cssElem = insertCSS(cssText);
			def.cssElem.attr("id", "notify-" + def.name);
		}
		var fields = {};
		var elem = $(def.html);
		findFields("html", elem, fields);
		findFields("text", elem, fields);
		def.fields = fields;
	};

	var insertCSS = function(cssText) {
		var e, elem, error;
		elem = createElem("style");
		elem.attr("type", 'text/css');
		$("head").append(elem);
		try {
			elem.html(cssText);
		} catch (_) {
			elem[0].styleSheet.cssText = cssText;
		}
		return elem;
	};

	var findFields = function(type, elem, fields) {
		var attr;
		if (type !== "html") {
			type = "text";
		}
		attr = "data-notify-" + type;
		return find(elem, "[" + attr + "]").each(function() {
			var name;
			name = $(this).attr(attr);
			if (!name) {
				name = blankFieldName;
			}
			fields[name] = type;
		});
	};

	var find = function(elem, selector) {
		if (elem.is(selector)) {
			return elem;
		} else {
			return elem.find(selector);
		}
	};

	var pluginOptions = {
		clickToHide: true,
		autoHide: true,
		autoHideDelay: 5000,
		arrowShow: true,
		arrowSize: 5,
		breakNewLines: true,
		elementPosition: "bottom",
		globalPosition: "top right",
		style: "bootstrap",
		className: "error",
		showAnimation: "slideDown",
		showDuration: 400,
		hideAnimation: "slideUp",
		hideDuration: 200,
		gap: 5
	};

	var inherit = function(a, b) {
		var F;
		F = function() {};
		F.prototype = a;
		return $.extend(true, new F(), b);
	};

	var defaults = function(opts) {
		return $.extend(pluginOptions, opts);
	};

	var createElem = function(tag) {
		return $("<" + tag + "></" + tag + ">");
	};

	var globalAnchors = {};

	var getAnchorElement = function(element) {
		var radios;
		if (element.is('[type=radio]')) {
			radios = element.parents('form:first').find('[type=radio]').filter(function(i, e) {
				return $(e).attr("name") === element.attr("name");
			});
			element = radios.first();
		}
		return element;
	};

	var incr = function(obj, pos, val) {
		var opp, temp;
		if (typeof val === "string") {
			val = parseInt(val, 10);
		} else if (typeof val !== "number") {
			return;
		}
		if (isNaN(val)) {
			return;
		}
		opp = positions[opposites[pos.charAt(0)]];
		temp = pos;
		if (obj[opp] !== undefined) {
			pos = positions[opp.charAt(0)];
			val = -val;
		}
		if (obj[pos] === undefined) {
			obj[pos] = val;
		} else {
			obj[pos] += val;
		}
		return null;
	};

	var realign = function(alignment, inner, outer) {
		if (alignment === "l" || alignment === "t") {
			return 0;
		} else if (alignment === "c" || alignment === "m") {
			return outer / 2 - inner / 2;
		} else if (alignment === "r" || alignment === "b") {
			return outer - inner;
		}
		throw "Invalid alignment";
	};

	var encode = function(text) {
		encode.e = encode.e || createElem("div");
		return encode.e.text(text).html();
	};

	function Notification(elem, data, options) {
		if (typeof options === "string") {
			options = {
				className: options
			};
		}
		this.options = inherit(pluginOptions, $.isPlainObject(options) ? options : {});
		this.loadHTML();
		this.wrapper = $(coreStyle.html);
		if (this.options.clickToHide) {
			this.wrapper.addClass(pluginClassName + "-hidable");
		}
		this.wrapper.data(pluginClassName, this);
		this.arrow = this.wrapper.find("." + pluginClassName + "-arrow");
		this.container = this.wrapper.find("." + pluginClassName + "-container");
		this.container.append(this.userContainer);
		if (elem && elem.length) {
			this.elementType = elem.attr("type");
			this.originalElement = elem;
			this.elem = getAnchorElement(elem);
			this.elem.data(pluginClassName, this);
			this.elem.before(this.wrapper);
		}
		this.container.hide();
		this.run(data);
	}

	Notification.prototype.loadHTML = function() {
		var style;
		style = this.getStyle();
		this.userContainer = $(style.html);
		this.userFields = style.fields;
	};

	Notification.prototype.show = function(show, userCallback) {
		var args, callback, elems, fn, hidden;
		callback = (function(_this) {
			return function() {
				if (!show && !_this.elem) {
					_this.destroy();
				}
				if (userCallback) {
					return userCallback();
				}
			};
		})(this);
		hidden = this.container.parent().parents(':hidden').length > 0;
		elems = this.container.add(this.arrow);
		args = [];
		if (hidden && show) {
			fn = "show";
		} else if (hidden && !show) {
			fn = "hide";
		} else if (!hidden && show) {
			fn = this.options.showAnimation;
			args.push(this.options.showDuration);
		} else if (!hidden && !show) {
			fn = this.options.hideAnimation;
			args.push(this.options.hideDuration);
		} else {
			return callback();
		}
		args.push(callback);
		return elems[fn].apply(elems, args);
	};

	Notification.prototype.setGlobalPosition = function() {
		var p = this.getPosition();
		var pMain = p[0];
		var pAlign = p[1];
		var main = positions[pMain];
		var align = positions[pAlign];
		var key = pMain + "|" + pAlign;
		var anchor = globalAnchors[key];
		if (!anchor) {
			anchor = globalAnchors[key] = createElem("div");
			var css = {};
			css[main] = 0;
			if (align === "middle") {
				css.top = '45%';
			} else if (align === "center") {
				css.left = '45%';
			} else {
				css[align] = 0;
			}
			anchor.css(css).addClass(pluginClassName + "-corner");
			$("body").append(anchor);
		}
		return anchor.prepend(this.wrapper);
	};

	Notification.prototype.setElementPosition = function() {
		var arrowColor, arrowCss, arrowSize, color, contH, contW, css, elemH, elemIH, elemIW, elemPos, elemW, gap, j, k, len, len1, mainFull, margin, opp, oppFull, pAlign, pArrow, pMain, pos, posFull, position, ref, wrapPos;
		position = this.getPosition();
		pMain = position[0];
		pAlign = position[1];
		pArrow = position[2];
		elemPos = this.elem.position();
		elemH = this.elem.outerHeight();
		elemW = this.elem.outerWidth();
		elemIH = this.elem.innerHeight();
		elemIW = this.elem.innerWidth();
		wrapPos = this.wrapper.position();
		contH = this.container.height();
		contW = this.container.width();
		mainFull = positions[pMain];
		opp = opposites[pMain];
		oppFull = positions[opp];
		css = {};
		css[oppFull] = pMain === "b" ? elemH : pMain === "r" ? elemW : 0;
		incr(css, "top", elemPos.top - wrapPos.top);
		incr(css, "left", elemPos.left - wrapPos.left);
		ref = ["top", "left"];
		for (j = 0, len = ref.length; j < len; j++) {
			pos = ref[j];
			margin = parseInt(this.elem.css("margin-" + pos), 10);
			if (margin) {
				incr(css, pos, margin);
			}
		}
		gap = Math.max(0, this.options.gap - (this.options.arrowShow ? arrowSize : 0));
		incr(css, oppFull, gap);
		if (!this.options.arrowShow) {
			this.arrow.hide();
		} else {
			arrowSize = this.options.arrowSize;
			arrowCss = $.extend({}, css);
			arrowColor = this.userContainer.css("border-color") || this.userContainer.css("border-top-color") || this.userContainer.css("background-color") || "white";
			for (k = 0, len1 = mainPositions.length; k < len1; k++) {
				pos = mainPositions[k];
				posFull = positions[pos];
				if (pos === opp) {
					continue;
				}
				color = posFull === mainFull ? arrowColor : "transparent";
				arrowCss["border-" + posFull] = arrowSize + "px solid " + color;
			}
			incr(css, positions[opp], arrowSize);
			if (indexOf.call(mainPositions, pAlign) >= 0) {
				incr(arrowCss, positions[pAlign], arrowSize * 2);
			}
		}
		if (indexOf.call(vAligns, pMain) >= 0) {
			incr(css, "left", realign(pAlign, contW, elemW));
			if (arrowCss) {
				incr(arrowCss, "left", realign(pAlign, arrowSize, elemIW));
			}
		} else if (indexOf.call(hAligns, pMain) >= 0) {
			incr(css, "top", realign(pAlign, contH, elemH));
			if (arrowCss) {
				incr(arrowCss, "top", realign(pAlign, arrowSize, elemIH));
			}
		}
		if (this.container.is(":visible")) {
			css.display = "block";
		}
		this.container.removeAttr("style").css(css);
		if (arrowCss) {
			return this.arrow.removeAttr("style").css(arrowCss);
		}
	};

	Notification.prototype.getPosition = function() {
		var pos, ref, ref1, ref2, ref3, ref4, ref5, text;
		text = this.options.position || (this.elem ? this.options.elementPosition : this.options.globalPosition);
		pos = parsePosition(text);
		if (pos.length === 0) {
			pos[0] = "b";
		}
		if (ref = pos[0], indexOf.call(mainPositions, ref) < 0) {
			throw "Must be one of [" + mainPositions + "]";
		}
		if (pos.length === 1 || ((ref1 = pos[0], indexOf.call(vAligns, ref1) >= 0) && (ref2 = pos[1], indexOf.call(hAligns, ref2) < 0)) || ((ref3 = pos[0], indexOf.call(hAligns, ref3) >= 0) && (ref4 = pos[1], indexOf.call(vAligns, ref4) < 0))) {
			pos[1] = (ref5 = pos[0], indexOf.call(hAligns, ref5) >= 0) ? "m" : "l";
		}
		if (pos.length === 2) {
			pos[2] = pos[1];
		}
		return pos;
	};

	Notification.prototype.getStyle = function(name) {
		var style;
		if (!name) {
			name = this.options.style;
		}
		if (!name) {
			name = "default";
		}
		style = styles[name];
		if (!style) {
			throw "Missing style: " + name;
		}
		return style;
	};

	Notification.prototype.updateClasses = function() {
		var classes, style;
		classes = ["base"];
		if ($.isArray(this.options.className)) {
			classes = classes.concat(this.options.className);
		} else if (this.options.className) {
			classes.push(this.options.className);
		}
		style = this.getStyle();
		classes = $.map(classes, function(n) {
			return pluginClassName + "-" + style.name + "-" + n;
		}).join(" ");
		return this.userContainer.attr("class", classes);
	};

	Notification.prototype.run = function(data, options) {
		var d, datas, name, type, value;
		if ($.isPlainObject(options)) {
			$.extend(this.options, options);
		} else if ($.type(options) === "string") {
			this.options.className = options;
		}
		if (this.container && !data) {
			this.show(false);
			return;
		} else if (!this.container && !data) {
			return;
		}
		datas = {};
		if ($.isPlainObject(data)) {
			datas = data;
		} else {
			datas[blankFieldName] = data;
		}
		for (name in datas) {
			d = datas[name];
			type = this.userFields[name];
			if (!type) {
				continue;
			}
			if (type === "text") {
				d = encode(d);
				if (this.options.breakNewLines) {
					d = d.replace(/\n/g, '<br/>');
				}
			}
			value = name === blankFieldName ? '' : '=' + name;
			find(this.userContainer, "[data-notify-" + type + value + "]").html(d);
		}
		this.updateClasses();
		if (this.elem) {
			this.setElementPosition();
		} else {
			this.setGlobalPosition();
		}
		this.show(true);
		if (this.options.autoHide) {
			clearTimeout(this.autohideTimer);
			this.autohideTimer = setTimeout(this.show.bind(this, false), this.options.autoHideDelay);
		}
	};

	Notification.prototype.destroy = function() {
		this.wrapper.data(pluginClassName, null);
		this.wrapper.remove();
	};

	$[pluginName] = function(elem, data, options) {
		if ((elem && elem.nodeName) || elem.jquery) {
			$(elem)[pluginName](data, options);
		} else {
			options = data;
			data = elem;
			new Notification(null, data, options);
		}
		return elem;
	};

	$.fn[pluginName] = function(data, options) {
		$(this).each(function() {
			var prev = getAnchorElement($(this)).data(pluginClassName);
			if (prev) {
				prev.destroy();
			}
			var curr = new Notification($(this), data, options);
		});
		return this;
	};

	$.extend($[pluginName], {
		defaults: defaults,
		addStyle: addStyle,
		pluginOptions: pluginOptions,
		getStyle: getStyle,
		insertCSS: insertCSS
	});

	//always include the default bootstrap style
	addStyle("bootstrap", {
		html: "<div>\n<span data-notify-text></span>\n</div>",
		classes: {
			base: {
				"font-weight": "bold",
				"padding": "8px 15px 8px 14px",
				"text-shadow": "0 1px 0 rgba(255, 255, 255, 0.5)",
				"background-color": "#fcf8e3",
				"border": "1px solid #fbeed5",
				"border-radius": "4px",
				"white-space": "nowrap",
				"padding-left": "25px",
				"background-repeat": "no-repeat",
				"background-position": "3px 7px"
			},
			error: {
				"color": "#B94A48",
				"background-color": "#F2DEDE",
				"border-color": "#EED3D7",
				"background-image": "url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAtRJREFUeNqkVc1u00AQHq+dOD+0poIQfkIjalW0SEGqRMuRnHos3DjwAH0ArlyQeANOOSMeAA5VjyBxKBQhgSpVUKKQNGloFdw4cWw2jtfMOna6JOUArDTazXi/b3dm55socPqQhFka++aHBsI8GsopRJERNFlY88FCEk9Yiwf8RhgRyaHFQpPHCDmZG5oX2ui2yilkcTT1AcDsbYC1NMAyOi7zTX2Agx7A9luAl88BauiiQ/cJaZQfIpAlngDcvZZMrl8vFPK5+XktrWlx3/ehZ5r9+t6e+WVnp1pxnNIjgBe4/6dAysQc8dsmHwPcW9C0h3fW1hans1ltwJhy0GxK7XZbUlMp5Ww2eyan6+ft/f2FAqXGK4CvQk5HueFz7D6GOZtIrK+srupdx1GRBBqNBtzc2AiMr7nPplRdKhb1q6q6zjFhrklEFOUutoQ50xcX86ZlqaZpQrfbBdu2R6/G19zX6XSgh6RX5ubyHCM8nqSID6ICrGiZjGYYxojEsiw4PDwMSL5VKsC8Yf4VRYFzMzMaxwjlJSlCyAQ9l0CW44PBADzXhe7xMdi9HtTrdYjFYkDQL0cn4Xdq2/EAE+InCnvADTf2eah4Sx9vExQjkqXT6aAERICMewd/UAp/IeYANM2joxt+q5VI+ieq2i0Wg3l6DNzHwTERPgo1ko7XBXj3vdlsT2F+UuhIhYkp7u7CarkcrFOCtR3H5JiwbAIeImjT/YQKKBtGjRFCU5IUgFRe7fF4cCNVIPMYo3VKqxwjyNAXNepuopyqnld602qVsfRpEkkz+GFL1wPj6ySXBpJtWVa5xlhpcyhBNwpZHmtX8AGgfIExo0ZpzkWVTBGiXCSEaHh62/PoR0p/vHaczxXGnj4bSo+G78lELU80h1uogBwWLf5YlsPmgDEd4M236xjm+8nm4IuE/9u+/PH2JXZfbwz4zw1WbO+SQPpXfwG/BBgAhCNZiSb/pOQAAAAASUVORK5CYII=)"
			},
			success: {
				"color": "#468847",
				"background-color": "#DFF0D8",
				"border-color": "#D6E9C6",
				"background-image": "url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAutJREFUeNq0lctPE0Ecx38zu/RFS1EryqtgJFA08YCiMZIAQQ4eRG8eDGdPJiYeTIwHTfwPiAcvXIwXLwoXPaDxkWgQ6islKlJLSQWLUraPLTv7Gme32zoF9KSTfLO7v53vZ3d/M7/fIth+IO6INt2jjoA7bjHCJoAlzCRw59YwHYjBnfMPqAKWQYKjGkfCJqAF0xwZjipQtA3MxeSG87VhOOYegVrUCy7UZM9S6TLIdAamySTclZdYhFhRHloGYg7mgZv1Zzztvgud7V1tbQ2twYA34LJmF4p5dXF1KTufnE+SxeJtuCZNsLDCQU0+RyKTF27Unw101l8e6hns3u0PBalORVVVkcaEKBJDgV3+cGM4tKKmI+ohlIGnygKX00rSBfszz/n2uXv81wd6+rt1orsZCHRdr1Imk2F2Kob3hutSxW8thsd8AXNaln9D7CTfA6O+0UgkMuwVvEFFUbbAcrkcTA8+AtOk8E6KiQiDmMFSDqZItAzEVQviRkdDdaFgPp8HSZKAEAL5Qh7Sq2lIJBJwv2scUqkUnKoZgNhcDKhKg5aH+1IkcouCAdFGAQsuWZYhOjwFHQ96oagWgRoUov1T9kRBEODAwxM2QtEUl+Wp+Ln9VRo6BcMw4ErHRYjH4/B26AlQoQQTRdHWwcd9AH57+UAXddvDD37DmrBBV34WfqiXPl61g+vr6xA9zsGeM9gOdsNXkgpEtTwVvwOklXLKm6+/p5ezwk4B+j6droBs2CsGa/gNs6RIxazl4Tc25mpTgw/apPR1LYlNRFAzgsOxkyXYLIM1V8NMwyAkJSctD1eGVKiq5wWjSPdjmeTkiKvVW4f2YPHWl3GAVq6ymcyCTgovM3FzyRiDe2TaKcEKsLpJvNHjZgPNqEtyi6mZIm4SRFyLMUsONSSdkPeFtY1n0mczoY3BHTLhwPRy9/lzcziCw9ACI+yql0VLzcGAZbYSM5CCSZg1/9oc/nn7+i8N9p/8An4JMADxhH+xHfuiKwAAAABJRU5ErkJggg==)"
			},
			info: {
				"color": "#3A87AD",
				"background-color": "#D9EDF7",
				"border-color": "#BCE8F1",
				"background-image": "url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QYFAhkSsdes/QAAA8dJREFUOMvVlGtMW2UYx//POaWHXg6lLaW0ypAtw1UCgbniNOLcVOLmAjHZolOYlxmTGXVZdAnRfXQm+7SoU4mXaOaiZsEpC9FkiQs6Z6bdCnNYruM6KNBw6YWewzl9z+sHImEWv+vz7XmT95f/+3/+7wP814v+efDOV3/SoX3lHAA+6ODeUFfMfjOWMADgdk+eEKz0pF7aQdMAcOKLLjrcVMVX3xdWN29/GhYP7SvnP0cWfS8caSkfHZsPE9Fgnt02JNutQ0QYHB2dDz9/pKX8QjjuO9xUxd/66HdxTeCHZ3rojQObGQBcuNjfplkD3b19Y/6MrimSaKgSMmpGU5WevmE/swa6Oy73tQHA0Rdr2Mmv/6A1n9w9suQ7097Z9lM4FlTgTDrzZTu4StXVfpiI48rVcUDM5cmEksrFnHxfpTtU/3BFQzCQF/2bYVoNbH7zmItbSoMj40JSzmMyX5qDvriA7QdrIIpA+3cdsMpu0nXI8cV0MtKXCPZev+gCEM1S2NHPvWfP/hL+7FSr3+0p5RBEyhEN5JCKYr8XnASMT0xBNyzQGQeI8fjsGD39RMPk7se2bd5ZtTyoFYXftF6y37gx7NeUtJJOTFlAHDZLDuILU3j3+H5oOrD3yWbIztugaAzgnBKJuBLpGfQrS8wO4FZgV+c1IxaLgWVU0tMLEETCos4xMzEIv9cJXQcyagIwigDGwJgOAtHAwAhisQUjy0ORGERiELgG4iakkzo4MYAxcM5hAMi1WWG1yYCJIcMUaBkVRLdGeSU2995TLWzcUAzONJ7J6FBVBYIggMzmFbvdBV44Corg8vjhzC+EJEl8U1kJtgYrhCzgc/vvTwXKSib1paRFVRVORDAJAsw5FuTaJEhWM2SHB3mOAlhkNxwuLzeJsGwqWzf5TFNdKgtY5qHp6ZFf67Y/sAVadCaVY5YACDDb3Oi4NIjLnWMw2QthCBIsVhsUTU9tvXsjeq9+X1d75/KEs4LNOfcdf/+HthMnvwxOD0wmHaXr7ZItn2wuH2SnBzbZAbPJwpPx+VQuzcm7dgRCB57a1uBzUDRL4bfnI0RE0eaXd9W89mpjqHZnUI5Hh2l2dkZZUhOqpi2qSmpOmZ64Tuu9qlz/SEXo6MEHa3wOip46F1n7633eekV8ds8Wxjn37Wl63VVa+ej5oeEZ/82ZBETJjpJ1Rbij2D3Z/1trXUvLsblCK0XfOx0SX2kMsn9dX+d+7Kf6h8o4AIykuffjT8L20LU+w4AZd5VvEPY+XpWqLV327HR7DzXuDnD8r+ovkBehJ8i+y8YAAAAASUVORK5CYII=)"
			},
			warn: {
				"color": "#C09853",
				"background-color": "#FCF8E3",
				"border-color": "#FBEED5",
				"background-image": "url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABJlBMVEXr6eb/2oD/wi7/xjr/0mP/ykf/tQD/vBj/3o7/uQ//vyL/twebhgD/4pzX1K3z8e349vK6tHCilCWbiQymn0jGworr6dXQza3HxcKkn1vWvV/5uRfk4dXZ1bD18+/52YebiAmyr5S9mhCzrWq5t6ufjRH54aLs0oS+qD751XqPhAybhwXsujG3sm+Zk0PTwG6Shg+PhhObhwOPgQL4zV2nlyrf27uLfgCPhRHu7OmLgAafkyiWkD3l49ibiAfTs0C+lgCniwD4sgDJxqOilzDWowWFfAH08uebig6qpFHBvH/aw26FfQTQzsvy8OyEfz20r3jAvaKbhgG9q0nc2LbZxXanoUu/u5WSggCtp1anpJKdmFz/zlX/1nGJiYmuq5Dx7+sAAADoPUZSAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfdBgUBGhh4aah5AAAAlklEQVQY02NgoBIIE8EUcwn1FkIXM1Tj5dDUQhPU502Mi7XXQxGz5uVIjGOJUUUW81HnYEyMi2HVcUOICQZzMMYmxrEyMylJwgUt5BljWRLjmJm4pI1hYp5SQLGYxDgmLnZOVxuooClIDKgXKMbN5ggV1ACLJcaBxNgcoiGCBiZwdWxOETBDrTyEFey0jYJ4eHjMGWgEAIpRFRCUt08qAAAAAElFTkSuQmCC)"
			}
		}
	});

	$(function() {
		insertCSS(coreStyle.css).attr("id", "core-notify");
		$(document).on("click", "." + pluginClassName + "-hidable", function(e) {
			$(this).trigger("notify-hide");
		});
		$(document).on("notify-hide", "." + pluginClassName + "-wrapper", function(e) {
			var elem = $(this).data(pluginClassName);
			if(elem) {
				elem.show(false);
			}
		});
	});

}));


/***/ }),
/* 746 */
/***/ (function(module, exports) {

!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.proj4=b()}(this,function(){"use strict";function a(a,b){if(a[b])return a[b];for(var c,d,e=Object.keys(a),f=b.toLowerCase().replace(Ob,""),g=-1;++g<e.length;)if(c=e[g],d=c.toLowerCase().replace(Ob,""),d===f)return a[c]}function b(a){if("string"!=typeof a)throw new Error("not a string");this.text=a.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Qb}function c(a){var c=new b(a);return c.output()}function d(a,b,c){Array.isArray(b)&&(c.unshift(b),b=null);var d=b?{}:a,f=c.reduce(function(a,b){return e(b,a),a},d);b&&(a[b]=f)}function e(a,b){if(!Array.isArray(a))return void(b[a]=!0);var c=a.shift();if("PARAMETER"===c&&(c=a.shift()),1===a.length)return Array.isArray(a[0])?(b[c]={},void e(a[0],b[c])):void(b[c]=a[0]);if(!a.length)return void(b[c]=!0);if("TOWGS84"===c)return void(b[c]=a);Array.isArray(c)||(b[c]={});var f;switch(c){case"UNIT":case"PRIMEM":case"VERT_DATUM":return b[c]={name:a[0].toLowerCase(),convert:a[1]},void(3===a.length&&e(a[2],b[c]));case"SPHEROID":case"ELLIPSOID":return b[c]={name:a[0],a:a[1],rf:a[2]},void(4===a.length&&e(a[3],b[c]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return a[0]=["name",a[0]],void d(b,c,a);default:for(f=-1;++f<a.length;)if(!Array.isArray(a[f]))return e(a,b[c]);return d(b,c,a)}}function f(a,b){var c=b[0],d=b[1];!(c in a)&&d in a&&(a[c]=a[d],3===b.length&&(a[c]=b[2](a[c])))}function g(a){return a*_b}function h(a){function b(b){var c=a.to_meter||1;return b*c}"GEOGCS"===a.type?a.projName="longlat":"LOCAL_CS"===a.type?(a.projName="identity",a.local=!0):"object"==typeof a.PROJECTION?a.projName=Object.keys(a.PROJECTION)[0]:a.projName=a.PROJECTION,a.UNIT&&(a.units=a.UNIT.name.toLowerCase(),"metre"===a.units&&(a.units="meter"),a.UNIT.convert&&("GEOGCS"===a.type?a.DATUM&&a.DATUM.SPHEROID&&(a.to_meter=a.UNIT.convert*a.DATUM.SPHEROID.a):(a.to_meter=a.UNIT.convert,10)));var c=a.GEOGCS;"GEOGCS"===a.type&&(c=a),c&&(c.DATUM?a.datumCode=c.DATUM.name.toLowerCase():a.datumCode=c.name.toLowerCase(),"d_"===a.datumCode.slice(0,2)&&(a.datumCode=a.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==a.datumCode&&"new_zealand_1949"!==a.datumCode||(a.datumCode="nzgd49"),"wgs_1984"===a.datumCode&&("Mercator_Auxiliary_Sphere"===a.PROJECTION&&(a.sphere=!0),a.datumCode="wgs84"),"_ferro"===a.datumCode.slice(-6)&&(a.datumCode=a.datumCode.slice(0,-6)),"_jakarta"===a.datumCode.slice(-8)&&(a.datumCode=a.datumCode.slice(0,-8)),~a.datumCode.indexOf("belge")&&(a.datumCode="rnb72"),c.DATUM&&c.DATUM.SPHEROID&&(a.ellps=c.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===a.ellps.toLowerCase().slice(0,13)&&(a.ellps="intl"),a.a=c.DATUM.SPHEROID.a,a.rf=parseFloat(c.DATUM.SPHEROID.rf,10)),~a.datumCode.indexOf("osgb_1936")&&(a.datumCode="osgb36")),a.b&&!isFinite(a.b)&&(a.b=a.a);var d=function(b){return f(a,b)},e=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",g],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",g],["x0","false_easting",b],["y0","false_northing",b],["long0","central_meridian",g],["lat0","latitude_of_origin",g],["lat0","standard_parallel_1",g],["lat1","standard_parallel_1",g],["lat2","standard_parallel_2",g],["alpha","azimuth",g],["srsCode","name"]];e.forEach(d),a.long0||!a.longc||"Albers_Conic_Equal_Area"!==a.projName&&"Lambert_Azimuthal_Equal_Area"!==a.projName||(a.long0=a.longc),a.lat_ts||!a.lat1||"Stereographic_South_Pole"!==a.projName&&"Polar Stereographic (variant B)"!==a.projName||(a.lat0=g(a.lat1>0?90:-90),a.lat_ts=a.lat1)}function i(a){var b=this;if(2===arguments.length){var c=arguments[1];"string"==typeof c?"+"===c.charAt(0)?i[a]=Pb(arguments[1]):i[a]=ac(arguments[1]):i[a]=c}else if(1===arguments.length){if(Array.isArray(a))return a.map(function(a){Array.isArray(a)?i.apply(b,a):i(a)});if("string"==typeof a){if(a in i)return i[a]}else"EPSG"in a?i["EPSG:"+a.EPSG]=a:"ESRI"in a?i["ESRI:"+a.ESRI]=a:"IAU2000"in a?i["IAU2000:"+a.IAU2000]=a:console.log(a);return}}function j(a){return"string"==typeof a}function k(a){return a in i}function l(a){return bc.some(function(b){return a.indexOf(b)>-1})}function m(a){return"+"===a[0]}function n(a){return j(a)?k(a)?i[a]:l(a)?ac(a):m(a)?Pb(a):void 0:a}function o(){var a=this.b/this.a;this.es=1-a*a,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=dc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function p(a){var b=a.x,c=a.y;if(c*Ib>90&&c*Ib<-90&&b*Ib>180&&b*Ib<-180)return null;var d,e;if(Math.abs(Math.abs(c)-Cb)<=Gb)return null;if(this.sphere)d=this.x0+this.a*this.k0*fc(b-this.long0),e=this.y0+this.a*this.k0*Math.log(Math.tan(Jb+.5*c));else{var f=Math.sin(c),g=gc(this.e,c,f);d=this.x0+this.a*this.k0*fc(b-this.long0),e=this.y0-this.a*this.k0*Math.log(g)}return a.x=d,a.y=e,a}function q(a){var b,c,d=a.x-this.x0,e=a.y-this.y0;if(this.sphere)c=Cb-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var f=Math.exp(-e/(this.a*this.k0));if(c=hc(this.e,f),c===-9999)return null}return b=fc(this.long0+d/(this.a*this.k0)),a.x=b,a.y=c,a}function r(){}function s(a){return a}function t(a,b){var c=oc.length;return a.names?(oc[c]=a,a.names.forEach(function(a){nc[a.toLowerCase()]=c}),this):(console.log(b),!0)}function u(a){if(!a)return!1;var b=a.toLowerCase();return"undefined"!=typeof nc[b]&&oc[nc[b]]?oc[nc[b]]:void 0}function v(){mc.forEach(t)}function w(a,b,c,d){var e=a*a,f=b*b,g=(e-f)/e,h=0;d?(a*=1-g*(Db+g*(Eb+g*Fb)),e=a*a,g=0):h=Math.sqrt(g);var i=(e-f)/f;return{es:g,e:h,ep2:i}}function x(b,c,d,e,f){if(!b){var g=a(qc,e);g||(g=rc),b=g.a,c=g.b,d=g.rf}return d&&!c&&(c=(1-1/d)*b),(0===d||Math.abs(b-c)<Gb)&&(f=!0,c=b),{a:b,b:c,rf:d,sphere:f}}function y(a,b,c,d,e,f){var g={};return void 0===a||"none"===a?g.datum_type=Ab:g.datum_type=zb,b&&(g.datum_params=b.map(parseFloat),0===g.datum_params[0]&&0===g.datum_params[1]&&0===g.datum_params[2]||(g.datum_type=xb),g.datum_params.length>3&&(0===g.datum_params[3]&&0===g.datum_params[4]&&0===g.datum_params[5]&&0===g.datum_params[6]||(g.datum_type=yb,g.datum_params[3]*=Bb,g.datum_params[4]*=Bb,g.datum_params[5]*=Bb,g.datum_params[6]=g.datum_params[6]/1e6+1))),g.a=c,g.b=d,g.es=e,g.ep2=f,g}function z(b,c){if(!(this instanceof z))return new z(b);c=c||function(a){if(a)throw a};var d=n(b);if("object"!=typeof d)return void c(b);var e=z.projections.get(d.projName);if(!e)return void c(b);if(d.datumCode&&"none"!==d.datumCode){var f=a(sc,d.datumCode);f&&(d.datum_params=f.towgs84?f.towgs84.split(","):null,d.ellps=f.ellipse,d.datumName=f.datumName?f.datumName:d.datumCode)}d.k0=d.k0||1,d.axis=d.axis||"enu",d.ellps=d.ellps||"wgs84";var g=x(d.a,d.b,d.rf,d.ellps,d.sphere),h=w(g.a,g.b,g.rf,d.R_A),i=d.datum||y(d.datumCode,d.datum_params,g.a,g.b,h.es,h.ep2);cc(this,d),cc(this,e),this.a=g.a,this.b=g.b,this.rf=g.rf,this.sphere=g.sphere,this.es=h.es,this.e=h.e,this.ep2=h.ep2,this.datum=i,this.init(),c(null,this)}function A(a,b){return a.datum_type===b.datum_type&&(!(a.a!==b.a||Math.abs(a.es-b.es)>5e-11)&&(a.datum_type===xb?a.datum_params[0]===b.datum_params[0]&&a.datum_params[1]===b.datum_params[1]&&a.datum_params[2]===b.datum_params[2]:a.datum_type!==yb||a.datum_params[0]===b.datum_params[0]&&a.datum_params[1]===b.datum_params[1]&&a.datum_params[2]===b.datum_params[2]&&a.datum_params[3]===b.datum_params[3]&&a.datum_params[4]===b.datum_params[4]&&a.datum_params[5]===b.datum_params[5]&&a.datum_params[6]===b.datum_params[6]))}function B(a,b,c){var d,e,f,g,h=a.x,i=a.y,j=a.z?a.z:0;if(i<-Cb&&i>-1.001*Cb)i=-Cb;else if(i>Cb&&i<1.001*Cb)i=Cb;else if(i<-Cb||i>Cb)return null;return h>Math.PI&&(h-=2*Math.PI),e=Math.sin(i),g=Math.cos(i),f=e*e,d=c/Math.sqrt(1-b*f),{x:(d+j)*g*Math.cos(h),y:(d+j)*g*Math.sin(h),z:(d*(1-b)+j)*e}}function C(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=1e-12,v=u*u,w=30,x=a.x,y=a.y,z=a.z?a.z:0;if(e=Math.sqrt(x*x+y*y),f=Math.sqrt(x*x+y*y+z*z),e/c<u){if(r=0,f/c<u)return s=Cb,t=-d,{x:a.x,y:a.y,z:a.z}}else r=Math.atan2(y,x);g=z/f,h=e/f,i=1/Math.sqrt(1-b*(2-b)*h*h),l=h*(1-b)*i,m=g*i,q=0;do q++,k=c/Math.sqrt(1-b*m*m),t=e*l+z*m-k*(1-b*m*m),j=b*k/(k+t),i=1/Math.sqrt(1-j*(2-j)*h*h),n=h*(1-j)*i,o=g*i,p=o*l-n*m,l=n,m=o;while(p*p>v&&q<w);return s=Math.atan(o/Math.abs(n)),{x:r,y:s,z:t}}function D(a,b,c){if(b===xb)return{x:a.x+c[0],y:a.y+c[1],z:a.z+c[2]};if(b===yb){var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=c[5],j=c[6];return{x:j*(a.x-i*a.y+h*a.z)+d,y:j*(i*a.x+a.y-g*a.z)+e,z:j*(-h*a.x+g*a.y+a.z)+f}}}function E(a,b,c){if(b===xb)return{x:a.x-c[0],y:a.y-c[1],z:a.z-c[2]};if(b===yb){var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=c[5],j=c[6],k=(a.x-d)/j,l=(a.y-e)/j,m=(a.z-f)/j;return{x:k+i*l-h*m,y:-i*k+l+g*m,z:h*k-g*l+m}}}function F(a){return a===xb||a===yb}function G(a,b){return(a.datum.datum_type===xb||a.datum.datum_type===yb)&&"WGS84"!==b.datumCode||(b.datum.datum_type===xb||b.datum.datum_type===yb)&&"WGS84"!==a.datumCode}function H(a,b,c){var d;return Array.isArray(c)&&(c=vc(c)),a.datum&&b.datum&&G(a,b)&&(d=new z("WGS84"),c=H(a,d,c),a=d),"enu"!==a.axis&&(c=uc(a,!1,c)),"longlat"===a.projName?c={x:c.x*Hb,y:c.y*Hb}:(a.to_meter&&(c={x:c.x*a.to_meter,y:c.y*a.to_meter}),c=a.inverse(c)),a.from_greenwich&&(c.x+=a.from_greenwich),c=tc(a.datum,b.datum,c),b.from_greenwich&&(c={x:c.x-b.from_greenwich,y:c.y}),"longlat"===b.projName?c={x:c.x*Ib,y:c.y*Ib}:(c=b.forward(c),b.to_meter&&(c={x:c.x/b.to_meter,y:c.y/b.to_meter})),"enu"!==b.axis?uc(b,!0,c):c}function I(a,b,c){var d;return Array.isArray(c)?(d=H(a,b,c),3===c.length?[d.x,d.y,d.z]:[d.x,d.y]):H(a,b,c)}function J(a){return a instanceof z?a:a.oProj?a.oProj:z(a)}function K(a,b,c){a=J(a);var d,e=!1;return"undefined"==typeof b?(b=a,a=wc,e=!0):("undefined"!=typeof b.x||Array.isArray(b))&&(c=b,b=a,a=wc,e=!0),b=J(b),c?I(a,b,c):(d={forward:function(c){return I(a,b,c)},inverse:function(c){return I(b,a,c)}},e&&(d.oProj=b),d)}function L(a,b){return b=b||5,T(Q({lat:a[1],lon:a[0]}),b)}function M(a){var b=R(X(a.toUpperCase()));return b.lat&&b.lon?[b.lon,b.lat,b.lon,b.lat]:[b.left,b.bottom,b.right,b.top]}function N(a){var b=R(X(a.toUpperCase()));return b.lat&&b.lon?[b.lon,b.lat]:[(b.left+b.right)/2,(b.top+b.bottom)/2]}function O(a){return a*(Math.PI/180)}function P(a){return 180*(a/Math.PI)}function Q(a){var b,c,d,e,f,g,h,i,j,k=a.lat,l=a.lon,m=6378137,n=.00669438,o=.9996,p=O(k),q=O(l);j=Math.floor((l+180)/6)+1,180===l&&(j=60),k>=56&&k<64&&l>=3&&l<12&&(j=32),k>=72&&k<84&&(l>=0&&l<9?j=31:l>=9&&l<21?j=33:l>=21&&l<33?j=35:l>=33&&l<42&&(j=37)),b=6*(j-1)-180+3,i=O(b),c=n/(1-n),d=m/Math.sqrt(1-n*Math.sin(p)*Math.sin(p)),e=Math.tan(p)*Math.tan(p),f=c*Math.cos(p)*Math.cos(p),g=Math.cos(p)*(q-i),h=m*((1-n/4-3*n*n/64-5*n*n*n/256)*p-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*p)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*p)-35*n*n*n/3072*Math.sin(6*p));var r=o*d*(g+(1-e+f)*g*g*g/6+(5-18*e+e*e+72*f-58*c)*g*g*g*g*g/120)+5e5,s=o*(h+d*Math.tan(p)*(g*g/2+(5-e+9*f+4*f*f)*g*g*g*g/24+(61-58*e+e*e+600*f-330*c)*g*g*g*g*g*g/720));return k<0&&(s+=1e7),{northing:Math.round(s),easting:Math.round(r),zoneNumber:j,zoneLetter:S(k)}}function R(a){var b=a.northing,c=a.easting,d=a.zoneLetter,e=a.zoneNumber;if(e<0||e>60)return null;var f,g,h,i,j,k,l,m,n,o,p=.9996,q=6378137,r=.00669438,s=(1-Math.sqrt(1-r))/(1+Math.sqrt(1-r)),t=c-5e5,u=b;d<"N"&&(u-=1e7),m=6*(e-1)-180+3,f=r/(1-r),l=u/p,n=l/(q*(1-r/4-3*r*r/64-5*r*r*r/256)),o=n+(3*s/2-27*s*s*s/32)*Math.sin(2*n)+(21*s*s/16-55*s*s*s*s/32)*Math.sin(4*n)+151*s*s*s/96*Math.sin(6*n),g=q/Math.sqrt(1-r*Math.sin(o)*Math.sin(o)),h=Math.tan(o)*Math.tan(o),i=f*Math.cos(o)*Math.cos(o),j=q*(1-r)/Math.pow(1-r*Math.sin(o)*Math.sin(o),1.5),k=t/(g*p);var v=o-g*Math.tan(o)/j*(k*k/2-(5+3*h+10*i-4*i*i-9*f)*k*k*k*k/24+(61+90*h+298*i+45*h*h-252*f-3*i*i)*k*k*k*k*k*k/720);v=P(v);var w=(k-(1+2*h+i)*k*k*k/6+(5-2*i+28*h-3*i*i+8*f+24*h*h)*k*k*k*k*k/120)/Math.cos(o);w=m+P(w);var x;if(a.accuracy){var y=R({northing:a.northing+a.accuracy,easting:a.easting+a.accuracy,zoneLetter:a.zoneLetter,zoneNumber:a.zoneNumber});x={top:y.lat,right:y.lon,bottom:v,left:w}}else x={lat:v,lon:w};return x}function S(a){var b="Z";return 84>=a&&a>=72?b="X":72>a&&a>=64?b="W":64>a&&a>=56?b="V":56>a&&a>=48?b="U":48>a&&a>=40?b="T":40>a&&a>=32?b="S":32>a&&a>=24?b="R":24>a&&a>=16?b="Q":16>a&&a>=8?b="P":8>a&&a>=0?b="N":0>a&&a>=-8?b="M":-8>a&&a>=-16?b="L":-16>a&&a>=-24?b="K":-24>a&&a>=-32?b="J":-32>a&&a>=-40?b="H":-40>a&&a>=-48?b="G":-48>a&&a>=-56?b="F":-56>a&&a>=-64?b="E":-64>a&&a>=-72?b="D":-72>a&&a>=-80&&(b="C"),b}function T(a,b){var c="00000"+a.easting,d="00000"+a.northing;return a.zoneNumber+a.zoneLetter+U(a.easting,a.northing,a.zoneNumber)+c.substr(c.length-5,b)+d.substr(d.length-5,b)}function U(a,b,c){var d=V(c),e=Math.floor(a/1e5),f=Math.floor(b/1e5)%20;return W(e,f,d)}function V(a){var b=a%xc;return 0===b&&(b=xc),b}function W(a,b,c){var d=c-1,e=yc.charCodeAt(d),f=zc.charCodeAt(d),g=e+a-1,h=f+b,i=!1;g>Ec&&(g=g-Ec+Ac-1,i=!0),(g===Bc||e<Bc&&g>Bc||(g>Bc||e<Bc)&&i)&&g++,(g===Cc||e<Cc&&g>Cc||(g>Cc||e<Cc)&&i)&&(g++,g===Bc&&g++),g>Ec&&(g=g-Ec+Ac-1),h>Dc?(h=h-Dc+Ac-1,i=!0):i=!1,(h===Bc||f<Bc&&h>Bc||(h>Bc||f<Bc)&&i)&&h++,(h===Cc||f<Cc&&h>Cc||(h>Cc||f<Cc)&&i)&&(h++,h===Bc&&h++),h>Dc&&(h=h-Dc+Ac-1);var j=String.fromCharCode(g)+String.fromCharCode(h);return j}function X(a){if(a&&0===a.length)throw"MGRSPoint coverting from nothing";for(var b,c=a.length,d=null,e="",f=0;!/[A-Z]/.test(b=a.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+a;e+=b,f++}var g=parseInt(e,10);if(0===f||f+3>c)throw"MGRSPoint bad conversion from: "+a;var h=a.charAt(f++);if(h<="A"||"B"===h||"Y"===h||h>="Z"||"I"===h||"O"===h)throw"MGRSPoint zone letter "+h+" not handled: "+a;d=a.substring(f,f+=2);for(var i=V(g),j=Y(d.charAt(0),i),k=Z(d.charAt(1),i);k<$(h);)k+=2e6;var l=c-f;if(l%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+a;var m,n,o,p,q,r=l/2,s=0,t=0;return r>0&&(m=1e5/Math.pow(10,r),n=a.substring(f,f+r),s=parseFloat(n)*m,o=a.substring(f+r),t=parseFloat(o)*m),p=s+j,q=t+k,{easting:p,northing:q,zoneLetter:h,zoneNumber:g,accuracy:m}}function Y(a,b){for(var c=yc.charCodeAt(b-1),d=1e5,e=!1;c!==a.charCodeAt(0);){if(c++,c===Bc&&c++,c===Cc&&c++,c>Ec){if(e)throw"Bad character: "+a;c=Ac,e=!0}d+=1e5}return d}function Z(a,b){if(a>"V")throw"MGRSPoint given invalid Northing "+a;for(var c=zc.charCodeAt(b-1),d=0,e=!1;c!==a.charCodeAt(0);){if(c++,c===Bc&&c++,c===Cc&&c++,c>Dc){if(e)throw"Bad character: "+a;c=Ac,e=!0}d+=1e5}return d}function $(a){var b;switch(a){case"C":b=11e5;break;case"D":b=2e6;break;case"E":b=28e5;break;case"F":b=37e5;break;case"G":b=46e5;break;case"H":b=55e5;break;case"J":b=64e5;break;case"K":b=73e5;break;case"L":b=82e5;break;case"M":b=91e5;break;case"N":b=0;break;case"P":b=8e5;break;case"Q":b=17e5;break;case"R":b=26e5;break;case"S":b=35e5;break;case"T":b=44e5;break;case"U":b=53e5;break;case"V":b=62e5;break;case"W":b=7e6;break;case"X":b=79e5;break;default:b=-1}if(b>=0)return b;throw"Invalid zone letter: "+a}function Point(a,b,c){if(!(this instanceof Point))return new Point(a,b,c);if(Array.isArray(a))this.x=a[0],this.y=a[1],this.z=a[2]||0;else if("object"==typeof a)this.x=a.x,this.y=a.y,this.z=a.z||0;else if("string"==typeof a&&"undefined"==typeof b){var d=a.split(",");this.x=parseFloat(d[0],10),this.y=parseFloat(d[1],10),this.z=parseFloat(d[2],10)||0}else this.x=a,this.y=b,this.z=c||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function _(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Tc(this.es),this.ml0=Uc(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function aa(a){var b,c,d,e=a.x,f=a.y,g=fc(e-this.long0),h=Math.sin(f),i=Math.cos(f);if(this.es){var j=i*g,k=Math.pow(j,2),l=this.ep2*Math.pow(i,2),m=Math.pow(l,2),n=Math.abs(i)>Gb?Math.tan(f):0,o=Math.pow(n,2),p=Math.pow(o,2);b=1-this.es*Math.pow(h,2),j/=Math.sqrt(b);var q=Uc(f,h,i,this.en);c=this.a*(this.k0*j*(1+k/6*(1-o+l+k/20*(5-18*o+p+14*l-58*o*l+k/42*(61+179*p-p*o-479*o)))))+this.x0,d=this.a*(this.k0*(q-this.ml0+h*g*j/2*(1+k/12*(5-o+9*l+4*m+k/30*(61+p-58*o+270*l-330*o*l+k/56*(1385+543*p-p*o-3111*o))))))+this.y0}else{var r=i*Math.sin(g);if(Math.abs(Math.abs(r)-1)<Gb)return 93;if(c=.5*this.a*this.k0*Math.log((1+r)/(1-r))+this.x0,d=i*Math.cos(g)/Math.sqrt(1-Math.pow(r,2)),r=Math.abs(d),r>=1){if(r-1>Gb)return 93;d=0}else d=Math.acos(d);f<0&&(d=-d),d=this.a*this.k0*(d-this.lat0)+this.y0}return a.x=c,a.y=d,a}function ba(a){var b,c,d,e,f=(a.x-this.x0)*(1/this.a),g=(a.y-this.y0)*(1/this.a);if(this.es)if(b=this.ml0+g/this.k0,c=Wc(b,this.es,this.en),Math.abs(c)<Cb){var h=Math.sin(c),i=Math.cos(c),j=Math.abs(i)>Gb?Math.tan(c):0,k=this.ep2*Math.pow(i,2),l=Math.pow(k,2),m=Math.pow(j,2),n=Math.pow(m,2);b=1-this.es*Math.pow(h,2);var o=f*Math.sqrt(b)/this.k0,p=Math.pow(o,2);b*=j,d=c-b*p/(1-this.es)*.5*(1-p/12*(5+3*m-9*k*m+k-4*l-p/30*(61+90*m-252*k*m+45*n+46*k-p/56*(1385+3633*m+4095*n+1574*n*m)))),e=fc(this.long0+o*(1-p/6*(1+2*m+k-p/20*(5+28*m+24*n+8*k*m+6*k-p/42*(61+662*m+1320*n+720*n*m))))/i)}else d=Cb*ec(g),e=0;else{var q=Math.exp(f/this.k0),r=.5*(q-1/q),s=this.lat0+g/this.k0,t=Math.cos(s);b=Math.sqrt((1-Math.pow(t,2))/(1+Math.pow(r,2))),d=Math.asin(b),g<0&&(d=-d),e=0===r&&0===t?0:fc(Math.atan2(r,t)+this.long0)}return a.x=e,a.y=d,a}function ca(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var a=this.es/(1+Math.sqrt(1-this.es)),b=a/(2-a),c=b;this.cgb[0]=b*(2+b*(-2/3+b*(-2+b*(116/45+b*(26/45+b*(-2854/675)))))),this.cbg[0]=b*(-2+b*(2/3+b*(4/3+b*(-82/45+b*(32/45+b*(4642/4725)))))),c*=b,this.cgb[1]=c*(7/3+b*(-1.6+b*(-227/45+b*(2704/315+b*(2323/945))))),this.cbg[1]=c*(5/3+b*(-16/15+b*(-13/9+b*(904/315+b*(-1522/945))))),c*=b,this.cgb[2]=c*(56/15+b*(-136/35+b*(-1262/105+b*(73814/2835)))),this.cbg[2]=c*(-26/15+b*(34/21+b*(1.6+b*(-12686/2835)))),c*=b,this.cgb[3]=c*(4279/630+b*(-332/35+b*(-399572/14175))),this.cbg[3]=c*(1237/630+b*(-2.4+b*(-24832/14175))),c*=b,this.cgb[4]=c*(4174/315+b*(-144838/6237)),this.cbg[4]=c*(-734/315+b*(109598/31185)),c*=b,this.cgb[5]=c*(601676/22275),this.cbg[5]=c*(444337/155925),c=Math.pow(b,2),this.Qn=this.k0/(1+b)*(1+c*(.25+c*(1/64+c/256))),this.utg[0]=b*(-.5+b*(2/3+b*(-37/96+b*(1/360+b*(81/512+b*(-96199/604800)))))),this.gtu[0]=b*(.5+b*(-2/3+b*(5/16+b*(41/180+b*(-127/288+b*(7891/37800)))))),this.utg[1]=c*(-1/48+b*(-1/15+b*(437/1440+b*(-46/105+b*(1118711/3870720))))),this.gtu[1]=c*(13/48+b*(-.6+b*(557/1440+b*(281/630+b*(-1983433/1935360))))),c*=b,this.utg[2]=c*(-17/480+b*(37/840+b*(209/4480+b*(-5569/90720)))),this.gtu[2]=c*(61/240+b*(-103/140+b*(15061/26880+b*(167603/181440)))),c*=b,this.utg[3]=c*(-4397/161280+b*(11/504+b*(830251/7257600))),this.gtu[3]=c*(49561/161280+b*(-179/168+b*(6601661/7257600))),c*=b,this.utg[4]=c*(-4583/161280+b*(108847/3991680)),this.gtu[4]=c*(34729/80640+b*(-3418889/1995840)),c*=b,this.utg[5]=c*-.03233083094085698,this.gtu[5]=.6650675310896665*c;var d=bd(this.cbg,this.lat0);this.Zb=-this.Qn*(d+cd(this.gtu,2*d))}function da(a){var b=fc(a.x-this.long0),c=a.y;c=bd(this.cbg,c);var d=Math.sin(c),e=Math.cos(c),f=Math.sin(b),g=Math.cos(b);c=Math.atan2(d,g*e),b=Math.atan2(f*e,$c(d,e*g)),b=ad(Math.tan(b));var h=ed(this.gtu,2*c,2*b);c+=h[0],b+=h[1];var i,j;return Math.abs(b)<=2.623395162778?(i=this.a*(this.Qn*b)+this.x0,j=this.a*(this.Qn*c+this.Zb)+this.y0):(i=1/0,j=1/0),a.x=i,a.y=j,a}function ea(a){var b=(a.x-this.x0)*(1/this.a),c=(a.y-this.y0)*(1/this.a);c=(c-this.Zb)/this.Qn,b/=this.Qn;var d,e;if(Math.abs(b)<=2.623395162778){var f=ed(this.utg,2*c,2*b);c+=f[0],b+=f[1],b=Math.atan(Zc(b));var g=Math.sin(c),h=Math.cos(c),i=Math.sin(b),j=Math.cos(b);c=Math.atan2(g*j,$c(i,j*h)),b=Math.atan2(i,j*h),d=fc(b+this.long0),e=bd(this.cgb,c)}else d=1/0,e=1/0;return a.x=d,a.y=e,a}function fa(){var a=hd(this.zone,this.long0);if(void 0===a)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(a)-183)*Hb,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,gd.init.apply(this),this.forward=gd.forward,this.inverse=gd.inverse}function ga(){var a=Math.sin(this.lat0),b=Math.cos(this.lat0);b*=b,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*b*b/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Jb)/(Math.pow(Math.tan(.5*this.lat0+Jb),this.C)*ld(this.e*a,this.ratexp))}function ha(a){var b=a.x,c=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*c+Jb),this.C)*ld(this.e*Math.sin(c),this.ratexp))-Cb,a.x=this.C*b,a}function ia(a){for(var b=1e-14,c=a.x/this.C,d=a.y,e=Math.pow(Math.tan(.5*d+Jb)/this.K,1/this.C),f=md;f>0&&(d=2*Math.atan(e*ld(this.e*Math.sin(a.y),-.5*this.e))-Cb,!(Math.abs(d-a.y)<b));--f)a.y=d;return f?(a.x=c,a.y=d,a):null}function ja(){od.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function ka(a){var b,c,d,e;return a.x=fc(a.x-this.long0),od.forward.apply(this,[a]),b=Math.sin(a.y),c=Math.cos(a.y),d=Math.cos(a.x),e=this.k0*this.R2/(1+this.sinc0*b+this.cosc0*c*d),a.x=e*c*Math.sin(a.x),a.y=e*(this.cosc0*b-this.sinc0*c*d),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a}function la(a){var b,c,d,e,f;if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,f=Math.sqrt(a.x*a.x+a.y*a.y)){var g=2*Math.atan2(f,this.R2);b=Math.sin(g),c=Math.cos(g),e=Math.asin(c*this.sinc0+a.y*b*this.cosc0/f),d=Math.atan2(a.x*b,f*this.cosc0*c-a.y*this.sinc0*b)}else e=this.phic0,d=0;return a.x=d,a.y=e,od.inverse.apply(this,[a]),a.x=fc(a.x+this.long0),a}function ma(a,b,c){return b*=c,Math.tan(.5*(Cb+a))*Math.pow((1-b)/(1+b),.5*c)}function na(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Gb&&(this.k0=.5*(1+ec(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Gb&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Gb&&(this.k0=.5*this.cons*dc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/gc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=dc(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Cb,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function oa(a){var b,c,d,e,f,g,h=a.x,i=a.y,j=Math.sin(i),k=Math.cos(i),l=fc(h-this.long0);return Math.abs(Math.abs(h-this.long0)-Math.PI)<=Gb&&Math.abs(i+this.lat0)<=Gb?(a.x=NaN,a.y=NaN,a):this.sphere?(b=2*this.k0/(1+this.sinlat0*j+this.coslat0*k*Math.cos(l)),a.x=this.a*b*k*Math.sin(l)+this.x0,a.y=this.a*b*(this.coslat0*j-this.sinlat0*k*Math.cos(l))+this.y0,a):(c=2*Math.atan(this.ssfn_(i,j,this.e))-Cb,e=Math.cos(c),d=Math.sin(c),Math.abs(this.coslat0)<=Gb?(f=gc(this.e,i*this.con,this.con*j),g=2*this.a*this.k0*f/this.cons,a.x=this.x0+g*Math.sin(h-this.long0),a.y=this.y0-this.con*g*Math.cos(h-this.long0),a):(Math.abs(this.sinlat0)<Gb?(b=2*this.a*this.k0/(1+e*Math.cos(l)),a.y=b*d):(b=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*d+this.cosX0*e*Math.cos(l))),a.y=b*(this.cosX0*d-this.sinX0*e*Math.cos(l))+this.y0),a.x=b*e*Math.sin(l)+this.x0,a))}function pa(a){a.x-=this.x0,a.y-=this.y0;var b,c,d,e,f,g=Math.sqrt(a.x*a.x+a.y*a.y);if(this.sphere){var h=2*Math.atan(g/(.5*this.a*this.k0));return b=this.long0,c=this.lat0,g<=Gb?(a.x=b,a.y=c,a):(c=Math.asin(Math.cos(h)*this.sinlat0+a.y*Math.sin(h)*this.coslat0/g),b=fc(Math.abs(this.coslat0)<Gb?this.lat0>0?this.long0+Math.atan2(a.x,-1*a.y):this.long0+Math.atan2(a.x,a.y):this.long0+Math.atan2(a.x*Math.sin(h),g*this.coslat0*Math.cos(h)-a.y*this.sinlat0*Math.sin(h))),a.x=b,a.y=c,a)}if(Math.abs(this.coslat0)<=Gb){if(g<=Gb)return c=this.lat0,b=this.long0,a.x=b,a.y=c,a;a.x*=this.con,a.y*=this.con,d=g*this.cons/(2*this.a*this.k0),c=this.con*hc(this.e,d),b=this.con*fc(this.con*this.long0+Math.atan2(a.x,-1*a.y))}else e=2*Math.atan(g*this.cosX0/(2*this.a*this.k0*this.ms1)),b=this.long0,g<=Gb?f=this.X0:(f=Math.asin(Math.cos(e)*this.sinX0+a.y*Math.sin(e)*this.cosX0/g),b=fc(this.long0+Math.atan2(a.x*Math.sin(e),g*this.cosX0*Math.cos(e)-a.y*this.sinX0*Math.sin(e)))),c=-1*hc(this.e,Math.tan(.5*(Cb+f)));return a.x=b,a.y=c,a}function qa(){var a=this.lat0;this.lambda0=this.long0;var b=Math.sin(a),c=this.a,d=this.rf,e=1/d,f=2*e-Math.pow(e,2),g=this.e=Math.sqrt(f);this.R=this.k0*c*Math.sqrt(1-f)/(1-f*Math.pow(b,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(a),4)),this.b0=Math.asin(b/this.alpha);var h=Math.log(Math.tan(Math.PI/4+this.b0/2)),i=Math.log(Math.tan(Math.PI/4+a/2)),j=Math.log((1+g*b)/(1-g*b));this.K=h-this.alpha*i+this.alpha*g/2*j}function ra(a){var b=Math.log(Math.tan(Math.PI/4-a.y/2)),c=this.e/2*Math.log((1+this.e*Math.sin(a.y))/(1-this.e*Math.sin(a.y))),d=-this.alpha*(b+c)+this.K,e=2*(Math.atan(Math.exp(d))-Math.PI/4),f=this.alpha*(a.x-this.lambda0),g=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(e)+Math.cos(this.b0)*Math.cos(f))),h=Math.asin(Math.cos(this.b0)*Math.sin(e)-Math.sin(this.b0)*Math.cos(e)*Math.cos(f));return a.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,a.x=this.R*g+this.x0,a}function sa(a){for(var b=a.x-this.x0,c=a.y-this.y0,d=b/this.R,e=2*(Math.atan(Math.exp(c/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(e)+Math.sin(this.b0)*Math.cos(e)*Math.cos(d)),g=Math.atan(Math.sin(d)/(Math.cos(this.b0)*Math.cos(d)-Math.sin(this.b0)*Math.tan(e))),h=this.lambda0+g/this.alpha,i=0,j=f,k=-1e3,l=0;Math.abs(j-k)>1e-7;){if(++l>20)return;i=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(j))/2)),k=j,j=2*Math.atan(Math.exp(i))-Math.PI/2}return a.x=h,a.y=j,a}function ta(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var a=Math.sin(this.lat0),b=Math.cos(this.lat0),c=this.e*a;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(b,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-c*c);var d=gc(this.e,this.lat0,a),e=this.bl/b*Math.sqrt((1-this.es)/(1-c*c));e*e<1&&(e=1);var f,g;if(isNaN(this.longc)){var h=gc(this.e,this.lat1,Math.sin(this.lat1)),i=gc(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(e+Math.sqrt(e*e-1))*Math.pow(d,this.bl):this.el=(e-Math.sqrt(e*e-1))*Math.pow(d,this.bl);var j=Math.pow(h,this.bl),k=Math.pow(i,this.bl);f=this.el/j,g=.5*(f-1/f);var l=(this.el*this.el-k*j)/(this.el*this.el+k*j),m=(k-j)/(k+j),n=fc(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(l*Math.tan(.5*this.bl*n)/m)/this.bl,this.long0=fc(this.long0);var o=fc(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*o)/g),this.alpha=Math.asin(e*Math.sin(this.gamma0))}else f=this.lat0>=0?e+Math.sqrt(e*e-1):e-Math.sqrt(e*e-1),this.el=f*Math.pow(d,this.bl),g=.5*(f-1/f),this.gamma0=Math.asin(Math.sin(this.alpha)/e),this.long0=this.longc-Math.asin(g*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(e*e-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(e*e-1),Math.cos(this.alpha))}function ua(a){var b,c,d,e=a.x,f=a.y,g=fc(e-this.long0);if(Math.abs(Math.abs(f)-Cb)<=Gb)d=f>0?-1:1,c=this.al/this.bl*Math.log(Math.tan(Jb+d*this.gamma0*.5)),b=-1*d*Cb*this.al/this.bl;else{var h=gc(this.e,f,Math.sin(f)),i=this.el/Math.pow(h,this.bl),j=.5*(i-1/i),k=.5*(i+1/i),l=Math.sin(this.bl*g),m=(j*Math.sin(this.gamma0)-l*Math.cos(this.gamma0))/k;c=Math.abs(Math.abs(m)-1)<=Gb?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-m)/(1+m))/this.bl,b=Math.abs(Math.cos(this.bl*g))<=Gb?this.al*this.bl*g:this.al*Math.atan2(j*Math.cos(this.gamma0)+l*Math.sin(this.gamma0),Math.cos(this.bl*g))/this.bl}return this.no_rot?(a.x=this.x0+b,a.y=this.y0+c):(b-=this.uc,a.x=this.x0+c*Math.cos(this.alpha)+b*Math.sin(this.alpha),a.y=this.y0+b*Math.cos(this.alpha)-c*Math.sin(this.alpha)),a}function va(a){var b,c;this.no_rot?(c=a.y-this.y0,b=a.x-this.x0):(c=(a.x-this.x0)*Math.cos(this.alpha)-(a.y-this.y0)*Math.sin(this.alpha),b=(a.y-this.y0)*Math.cos(this.alpha)+(a.x-this.x0)*Math.sin(this.alpha),b+=this.uc);var d=Math.exp(-1*this.bl*c/this.al),e=.5*(d-1/d),f=.5*(d+1/d),g=Math.sin(this.bl*b/this.al),h=(g*Math.cos(this.gamma0)+e*Math.sin(this.gamma0))/f,i=Math.pow(this.el/Math.sqrt((1+h)/(1-h)),1/this.bl);return Math.abs(h-1)<Gb?(a.x=this.long0,a.y=Cb):Math.abs(h+1)<Gb?(a.x=this.long0,a.y=-1*Cb):(a.y=hc(this.e,i),a.x=fc(this.long0-Math.atan2(e*Math.cos(this.gamma0)-g*Math.sin(this.gamma0),Math.cos(this.bl*b/this.al))/this.bl)),a}function wa(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Gb)){var a=this.b/this.a;this.e=Math.sqrt(1-a*a);var b=Math.sin(this.lat1),c=Math.cos(this.lat1),d=dc(this.e,b,c),e=gc(this.e,this.lat1,b),f=Math.sin(this.lat2),g=Math.cos(this.lat2),h=dc(this.e,f,g),i=gc(this.e,this.lat2,f),j=gc(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Gb?this.ns=Math.log(d/h)/Math.log(e/i):this.ns=b,isNaN(this.ns)&&(this.ns=b),this.f0=d/(this.ns*Math.pow(e,this.ns)),this.rh=this.a*this.f0*Math.pow(j,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function xa(a){var b=a.x,c=a.y;Math.abs(2*Math.abs(c)-Math.PI)<=Gb&&(c=ec(c)*(Cb-2*Gb));var d,e,f=Math.abs(Math.abs(c)-Cb);if(f>Gb)d=gc(this.e,c,Math.sin(c)),e=this.a*this.f0*Math.pow(d,this.ns);else{if(f=c*this.ns,f<=0)return null;e=0}var g=this.ns*fc(b-this.long0);return a.x=this.k0*(e*Math.sin(g))+this.x0,a.y=this.k0*(this.rh-e*Math.cos(g))+this.y0,a}function ya(a){var b,c,d,e,f,g=(a.x-this.x0)/this.k0,h=this.rh-(a.y-this.y0)/this.k0;this.ns>0?(b=Math.sqrt(g*g+h*h),c=1):(b=-Math.sqrt(g*g+h*h),c=-1);var i=0;if(0!==b&&(i=Math.atan2(c*g,c*h)),0!==b||this.ns>0){if(c=1/this.ns,d=Math.pow(b/(this.a*this.f0),c),e=hc(this.e,d),e===-9999)return null}else e=-Cb;return f=fc(i/this.ns+this.long0),a.x=f,a.y=e,a}function za(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Aa(a){var b,c,d,e,f,g,h,i=a.x,j=a.y,k=fc(i-this.long0);return b=Math.pow((1+this.e*Math.sin(j))/(1-this.e*Math.sin(j)),this.alfa*this.e/2),c=2*(Math.atan(this.k*Math.pow(Math.tan(j/2+this.s45),this.alfa)/b)-this.s45),d=-k*this.alfa,
e=Math.asin(Math.cos(this.ad)*Math.sin(c)+Math.sin(this.ad)*Math.cos(c)*Math.cos(d)),f=Math.asin(Math.cos(c)*Math.sin(d)/Math.cos(e)),g=this.n*f,h=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(e/2+this.s45),this.n),a.y=h*Math.cos(g)/1,a.x=h*Math.sin(g)/1,this.czech||(a.y*=-1,a.x*=-1),a}function Ba(a){var b,c,d,e,f,g,h,i,j=a.x;a.x=a.y,a.y=j,this.czech||(a.y*=-1,a.x*=-1),g=Math.sqrt(a.x*a.x+a.y*a.y),f=Math.atan2(a.y,a.x),e=f/Math.sin(this.s0),d=2*(Math.atan(Math.pow(this.ro0/g,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),b=Math.asin(Math.cos(this.ad)*Math.sin(d)-Math.sin(this.ad)*Math.cos(d)*Math.cos(e)),c=Math.asin(Math.cos(d)*Math.sin(e)/Math.cos(b)),a.x=this.long0-c/this.alfa,h=b,i=0;var k=0;do a.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(b/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.e/2))-this.s45),Math.abs(h-a.y)<1e-10&&(i=1),h=a.y,k+=1;while(0===i&&k<15);return k>=15?null:a}function Ca(){this.sphere||(this.e0=Cd(this.es),this.e1=Dd(this.es),this.e2=Ed(this.es),this.e3=Fd(this.es),this.ml0=this.a*Bd(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Da(a){var b,c,d=a.x,e=a.y;if(d=fc(d-this.long0),this.sphere)b=this.a*Math.asin(Math.cos(e)*Math.sin(d)),c=this.a*(Math.atan2(Math.tan(e),Math.cos(d))-this.lat0);else{var f=Math.sin(e),g=Math.cos(e),h=Gd(this.a,this.e,f),i=Math.tan(e)*Math.tan(e),j=d*Math.cos(e),k=j*j,l=this.es*g*g/(1-this.es),m=this.a*Bd(this.e0,this.e1,this.e2,this.e3,e);b=h*j*(1-k*i*(1/6-(8-i+8*l)*k/120)),c=m-this.ml0+h*f/g*k*(.5+(5-i+6*l)*k/24)}return a.x=b+this.x0,a.y=c+this.y0,a}function Ea(a){a.x-=this.x0,a.y-=this.y0;var b,c,d=a.x/this.a,e=a.y/this.a;if(this.sphere){var f=e+this.lat0;b=Math.asin(Math.sin(f)*Math.cos(d)),c=Math.atan2(Math.tan(d),Math.cos(f))}else{var g=this.ml0/this.a+e,h=Id(g,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(h)-Cb)<=Gb)return a.x=this.long0,a.y=Cb,e<0&&(a.y*=-1),a;var i=Gd(this.a,this.e,Math.sin(h)),j=i*i*i/this.a/this.a*(1-this.es),k=Math.pow(Math.tan(h),2),l=d*this.a/i,m=l*l;b=h-i*Math.tan(h)/j*l*l*(.5-(1+3*k)*l*l/24),c=l*(1-m*(k/3+(1+3*k)*k*m/15))/Math.cos(h)}return a.x=fc(c+this.long0),a.y=Hd(b),a}function Fa(){var a=Math.abs(this.lat0);if(Math.abs(a-Cb)<Gb?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(a)<Gb?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var b;switch(this.qp=Ld(this.e,1),this.mmf=.5/(1-this.es),this.apa=Ia(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),b=Math.sin(this.lat0),this.sinb1=Ld(this.e,b)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*b*b)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Ga(a){var b,c,d,e,f,g,h,i,j,k,l=a.x,m=a.y;if(l=fc(l-this.long0),this.sphere){if(f=Math.sin(m),k=Math.cos(m),d=Math.cos(l),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c=this.mode===this.EQUIT?1+k*d:1+this.sinph0*f+this.cosph0*k*d,c<=Gb)return null;c=Math.sqrt(2/c),b=c*k*Math.sin(l),c*=this.mode===this.EQUIT?f:this.cosph0*f-this.sinph0*k*d}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(d=-d),Math.abs(m+this.phi0)<Gb)return null;c=Jb-.5*m,c=2*(this.mode===this.S_POLE?Math.cos(c):Math.sin(c)),b=c*Math.sin(l),c*=d}}else{switch(h=0,i=0,j=0,d=Math.cos(l),e=Math.sin(l),f=Math.sin(m),g=Ld(this.e,f),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(h=g/this.qp,i=Math.sqrt(1-h*h)),this.mode){case this.OBLIQ:j=1+this.sinb1*h+this.cosb1*i*d;break;case this.EQUIT:j=1+i*d;break;case this.N_POLE:j=Cb+m,g=this.qp-g;break;case this.S_POLE:j=m-Cb,g=this.qp+g}if(Math.abs(j)<Gb)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:j=Math.sqrt(2/j),c=this.mode===this.OBLIQ?this.ymf*j*(this.cosb1*h-this.sinb1*i*d):(j=Math.sqrt(2/(1+i*d)))*h*this.ymf,b=this.xmf*j*i*e;break;case this.N_POLE:case this.S_POLE:g>=0?(b=(j=Math.sqrt(g))*e,c=d*(this.mode===this.S_POLE?j:-j)):b=c=0}}return a.x=this.a*b+this.x0,a.y=this.a*c+this.y0,a}function Ha(a){a.x-=this.x0,a.y-=this.y0;var b,c,d,e,f,g,h,i=a.x/this.a,j=a.y/this.a;if(this.sphere){var k,l=0,m=0;if(k=Math.sqrt(i*i+j*j),c=.5*k,c>1)return null;switch(c=2*Math.asin(c),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(m=Math.sin(c),l=Math.cos(c)),this.mode){case this.EQUIT:c=Math.abs(k)<=Gb?0:Math.asin(j*m/k),i*=m,j=l*k;break;case this.OBLIQ:c=Math.abs(k)<=Gb?this.phi0:Math.asin(l*this.sinph0+j*m*this.cosph0/k),i*=m*this.cosph0,j=(l-Math.sin(c)*this.sinph0)*k;break;case this.N_POLE:j=-j,c=Cb-c;break;case this.S_POLE:c-=Cb}b=0!==j||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(i,j):0}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i/=this.dd,j*=this.dd,g=Math.sqrt(i*i+j*j),g<Gb)return a.x=0,a.y=this.phi0,a;e=2*Math.asin(.5*g/this.rq),d=Math.cos(e),i*=e=Math.sin(e),this.mode===this.OBLIQ?(h=d*this.sinb1+j*e*this.cosb1/g,f=this.qp*h,j=g*this.cosb1*d-j*this.sinb1*e):(h=j*e/g,f=this.qp*h,j=g*d)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(j=-j),f=i*i+j*j,!f)return a.x=0,a.y=this.phi0,a;h=1-f/this.qp,this.mode===this.S_POLE&&(h=-h)}b=Math.atan2(i,j),c=Ja(Math.asin(h),this.apa)}return a.x=fc(this.long0+b),a.y=c,a}function Ia(a){var b,c=[];return c[0]=a*Qd,b=a*a,c[0]+=b*Rd,c[1]=b*Td,b*=a,c[0]+=b*Sd,c[1]+=b*Ud,c[2]=b*Vd,c}function Ja(a,b){var c=a+a;return a+b[0]*Math.sin(c)+b[1]*Math.sin(c+c)+b[2]*Math.sin(c+c+c)}function Ka(){Math.abs(this.lat1+this.lat2)<Gb||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=dc(this.e3,this.sin_po,this.cos_po),this.qs1=Ld(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=dc(this.e3,this.sin_po,this.cos_po),this.qs2=Ld(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Ld(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>Gb?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function La(a){var b=a.x,c=a.y;this.sin_phi=Math.sin(c),this.cos_phi=Math.cos(c);var d=Ld(this.e3,this.sin_phi,this.cos_phi),e=this.a*Math.sqrt(this.c-this.ns0*d)/this.ns0,f=this.ns0*fc(b-this.long0),g=e*Math.sin(f)+this.x0,h=this.rh-e*Math.cos(f)+this.y0;return a.x=g,a.y=h,a}function Ma(a){var b,c,d,e,f,g;return a.x-=this.x0,a.y=this.rh-a.y+this.y0,this.ns0>=0?(b=Math.sqrt(a.x*a.x+a.y*a.y),d=1):(b=-Math.sqrt(a.x*a.x+a.y*a.y),d=-1),e=0,0!==b&&(e=Math.atan2(d*a.x,d*a.y)),d=b*this.ns0/this.a,this.sphere?g=Math.asin((this.c-d*d)/(2*this.ns0)):(c=(this.c-d*d)/this.ns0,g=this.phi1z(this.e3,c)),f=fc(e/this.ns0+this.long0),a.x=f,a.y=g,a}function Na(a,b){var c,d,e,f,g,h=Yd(.5*b);if(a<Gb)return h;for(var i=a*a,j=1;j<=25;j++)if(c=Math.sin(h),d=Math.cos(h),e=a*c,f=1-e*e,g=.5*f*f/d*(b/(1-i)-c/f+.5/a*Math.log((1-e)/(1+e))),h+=g,Math.abs(g)<=1e-7)return h;return null}function Oa(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Pa(a){var b,c,d,e,f,g,h,i,j=a.x,k=a.y;return d=fc(j-this.long0),b=Math.sin(k),c=Math.cos(k),e=Math.cos(d),g=this.sin_p14*b+this.cos_p14*c*e,f=1,g>0||Math.abs(g)<=Gb?(h=this.x0+this.a*f*c*Math.sin(d)/g,i=this.y0+this.a*f*(this.cos_p14*b-this.sin_p14*c*e)/g):(h=this.x0+this.infinity_dist*c*Math.sin(d),i=this.y0+this.infinity_dist*(this.cos_p14*b-this.sin_p14*c*e)),a.x=h,a.y=i,a}function Qa(a){var b,c,d,e,f,g;return a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,(b=Math.sqrt(a.x*a.x+a.y*a.y))?(e=Math.atan2(b,this.rc),c=Math.sin(e),d=Math.cos(e),g=Yd(d*this.sin_p14+a.y*c*this.cos_p14/b),f=Math.atan2(a.x*c,b*this.cos_p14*d-a.y*this.sin_p14*c),f=fc(this.long0+f)):(g=this.phic0,f=0),a.x=f,a.y=g,a}function Ra(){this.sphere||(this.k0=dc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Sa(a){var b,c,d=a.x,e=a.y,f=fc(d-this.long0);if(this.sphere)b=this.x0+this.a*f*Math.cos(this.lat_ts),c=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var g=Ld(this.e,Math.sin(e));b=this.x0+this.a*this.k0*f,c=this.y0+this.a*g*.5/this.k0}return a.x=b,a.y=c,a}function Ta(a){a.x-=this.x0,a.y-=this.y0;var b,c;return this.sphere?(b=fc(this.long0+a.x/this.a/Math.cos(this.lat_ts)),c=Math.asin(a.y/this.a*Math.cos(this.lat_ts))):(c=be(this.e,2*a.y*this.k0/this.a),b=fc(this.long0+a.x/(this.a*this.k0))),a.x=b,a.y=c,a}function Ua(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Va(a){var b=a.x,c=a.y,d=fc(b-this.long0),e=Hd(c-this.lat0);return a.x=this.x0+this.a*d*this.rc,a.y=this.y0+this.a*e,a}function Wa(a){var b=a.x,c=a.y;return a.x=fc(this.long0+(b-this.x0)/(this.a*this.rc)),a.y=Hd(this.lat0+(c-this.y0)/this.a),a}function Xa(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Cd(this.es),this.e1=Dd(this.es),this.e2=Ed(this.es),this.e3=Fd(this.es),this.ml0=this.a*Bd(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Ya(a){var b,c,d,e=a.x,f=a.y,g=fc(e-this.long0);if(d=g*Math.sin(f),this.sphere)Math.abs(f)<=Gb?(b=this.a*g,c=-1*this.a*this.lat0):(b=this.a*Math.sin(d)/Math.tan(f),c=this.a*(Hd(f-this.lat0)+(1-Math.cos(d))/Math.tan(f)));else if(Math.abs(f)<=Gb)b=this.a*g,c=-1*this.ml0;else{var h=Gd(this.a,this.e,Math.sin(f))/Math.tan(f);b=h*Math.sin(d),c=this.a*Bd(this.e0,this.e1,this.e2,this.e3,f)-this.ml0+h*(1-Math.cos(d))}return a.x=b+this.x0,a.y=c+this.y0,a}function Za(a){var b,c,d,e,f,g,h,i,j;if(d=a.x-this.x0,e=a.y-this.y0,this.sphere)if(Math.abs(e+this.a*this.lat0)<=Gb)b=fc(d/this.a+this.long0),c=0;else{g=this.lat0+e/this.a,h=d*d/this.a/this.a+g*g,i=g;var k;for(f=ge;f;--f)if(k=Math.tan(i),j=-1*(g*(i*k+1)-i-.5*(i*i+h)*k)/((i-g)/k-1),i+=j,Math.abs(j)<=Gb){c=i;break}b=fc(this.long0+Math.asin(d*Math.tan(i)/this.a)/Math.sin(c))}else if(Math.abs(e+this.ml0)<=Gb)c=0,b=fc(this.long0+d/this.a);else{g=(this.ml0+e)/this.a,h=d*d/this.a/this.a+g*g,i=g;var l,m,n,o,p;for(f=ge;f;--f)if(p=this.e*Math.sin(i),l=Math.sqrt(1-p*p)*Math.tan(i),m=this.a*Bd(this.e0,this.e1,this.e2,this.e3,i),n=this.e0-2*this.e1*Math.cos(2*i)+4*this.e2*Math.cos(4*i)-6*this.e3*Math.cos(6*i),o=m/this.a,j=(g*(l*o+1)-o-.5*l*(o*o+h))/(this.es*Math.sin(2*i)*(o*o+h-2*g*o)/(4*l)+(g-o)*(l*n-2/Math.sin(2*i))-n),i-=j,Math.abs(j)<=Gb){c=i;break}l=Math.sqrt(1-this.es*Math.pow(Math.sin(c),2))*Math.tan(c),b=fc(this.long0+Math.asin(d*l/this.a)/Math.sin(c))}return a.x=b,a.y=c,a}function $a(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function _a(a){var b,c=a.x,d=a.y,e=d-this.lat0,f=c-this.long0,g=e/Bb*1e-5,h=f,i=1,j=0;for(b=1;b<=10;b++)i*=g,j+=this.A[b]*i;var k,l,m=j,n=h,o=1,p=0,q=0,r=0;for(b=1;b<=6;b++)k=o*m-p*n,l=p*m+o*n,o=k,p=l,q=q+this.B_re[b]*o-this.B_im[b]*p,r=r+this.B_im[b]*o+this.B_re[b]*p;return a.x=r*this.a+this.x0,a.y=q*this.a+this.y0,a}function ab(a){var b,c,d,e=a.x,f=a.y,g=e-this.x0,h=f-this.y0,i=h/this.a,j=g/this.a,k=1,l=0,m=0,n=0;for(b=1;b<=6;b++)c=k*i-l*j,d=l*i+k*j,k=c,l=d,m=m+this.C_re[b]*k-this.C_im[b]*l,n=n+this.C_im[b]*k+this.C_re[b]*l;for(var o=0;o<this.iterations;o++){var p,q,r=m,s=n,t=i,u=j;for(b=2;b<=6;b++)p=r*m-s*n,q=s*m+r*n,r=p,s=q,t+=(b-1)*(this.B_re[b]*r-this.B_im[b]*s),u+=(b-1)*(this.B_im[b]*r+this.B_re[b]*s);r=1,s=0;var v=this.B_re[1],w=this.B_im[1];for(b=2;b<=6;b++)p=r*m-s*n,q=s*m+r*n,r=p,s=q,v+=b*(this.B_re[b]*r-this.B_im[b]*s),w+=b*(this.B_im[b]*r+this.B_re[b]*s);var x=v*v+w*w;m=(t*v+u*w)/x,n=(u*v-t*w)/x}var y=m,z=n,A=1,B=0;for(b=1;b<=9;b++)A*=y,B+=this.D[b]*A;var C=this.lat0+B*Bb*1e5,D=this.long0+z;return a.x=D,a.y=C,a}function bb(){}function cb(a){var b=a.x,c=a.y,d=fc(b-this.long0),e=this.x0+this.a*d,f=this.y0+this.a*Math.log(Math.tan(Math.PI/4+c/2.5))*1.25;return a.x=e,a.y=f,a}function db(a){a.x-=this.x0,a.y-=this.y0;var b=fc(this.long0+a.x/this.a),c=2.5*(Math.atan(Math.exp(.8*a.y/this.a))-Math.PI/4);return a.x=b,a.y=c,a}function eb(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Tc(this.es)}function fb(a){var b,c,d=a.x,e=a.y;if(d=fc(d-this.long0),this.sphere){if(this.m)for(var f=this.n*Math.sin(e),g=ne;g;--g){var h=(this.m*e+Math.sin(e)-f)/(this.m+Math.cos(e));if(e-=h,Math.abs(h)<Gb)break}else e=1!==this.n?Math.asin(this.n*Math.sin(e)):e;b=this.a*this.C_x*d*(this.m+Math.cos(e)),c=this.a*this.C_y*e}else{var i=Math.sin(e),j=Math.cos(e);c=this.a*Uc(e,i,j,this.en),b=this.a*d*j/Math.sqrt(1-this.es*i*i)}return a.x=b,a.y=c,a}function gb(a){var b,c,d,e;return a.x-=this.x0,d=a.x/this.a,a.y-=this.y0,b=a.y/this.a,this.sphere?(b/=this.C_y,d/=this.C_x*(this.m+Math.cos(b)),this.m?b=Yd((this.m*b+Math.sin(b))/this.n):1!==this.n&&(b=Yd(Math.sin(b)/this.n)),d=fc(d+this.long0),b=Hd(b)):(b=Wc(a.y/this.a,this.es,this.en),e=Math.abs(b),e<Cb?(e=Math.sin(b),c=this.long0+a.x*Math.sqrt(1-this.es*e*e)/(this.a*Math.cos(b)),d=fc(c)):e-Gb<Cb&&(d=this.long0)),a.x=d,a.y=b,a}function hb(){}function ib(a){for(var b=a.x,c=a.y,d=fc(b-this.long0),e=c,f=Math.PI*Math.sin(c),g=0;!0;g++){var h=-(e+Math.sin(e)-f)/(1+Math.cos(e));if(e+=h,Math.abs(h)<Gb)break}e/=2,Math.PI/2-Math.abs(c)<Gb&&(d=0);var i=.900316316158*this.a*d*Math.cos(e)+this.x0,j=1.4142135623731*this.a*Math.sin(e)+this.y0;return a.x=i,a.y=j,a}function jb(a){var b,c;a.x-=this.x0,a.y-=this.y0,c=a.y/(1.4142135623731*this.a),Math.abs(c)>.999999999999&&(c=.999999999999),b=Math.asin(c);var d=fc(this.long0+a.x/(.900316316158*this.a*Math.cos(b)));d<-Math.PI&&(d=-Math.PI),d>Math.PI&&(d=Math.PI),c=(2*b+Math.sin(2*b))/Math.PI,Math.abs(c)>1&&(c=1);var e=Math.asin(c);return a.x=d,a.y=e,a}function kb(){Math.abs(this.lat1+this.lat2)<Gb||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Cd(this.es),this.e1=Dd(this.es),this.e2=Ed(this.es),this.e3=Fd(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=dc(this.e,this.sinphi,this.cosphi),this.ml1=Bd(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Gb?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=dc(this.e,this.sinphi,this.cosphi),this.ml2=Bd(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Bd(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function lb(a){var b,c=a.x,d=a.y;if(this.sphere)b=this.a*(this.g-d);else{var e=Bd(this.e0,this.e1,this.e2,this.e3,d);b=this.a*(this.g-e)}var f=this.ns*fc(c-this.long0),g=this.x0+b*Math.sin(f),h=this.y0+this.rh-b*Math.cos(f);return a.x=g,a.y=h,a}function mb(a){a.x-=this.x0,a.y=this.rh-a.y+this.y0;var b,c,d,e;this.ns>=0?(c=Math.sqrt(a.x*a.x+a.y*a.y),b=1):(c=-Math.sqrt(a.x*a.x+a.y*a.y),b=-1);var f=0;if(0!==c&&(f=Math.atan2(b*a.x,b*a.y)),this.sphere)return e=fc(this.long0+f/this.ns),d=Hd(this.g-c/this.a),a.x=e,a.y=d,a;var g=this.g-c/this.a;return d=Id(g,this.e0,this.e1,this.e2,this.e3),e=fc(this.long0+f/this.ns),a.x=e,a.y=d,a}function nb(){this.R=this.a}function ob(a){var b,c,d=a.x,e=a.y,f=fc(d-this.long0);Math.abs(e)<=Gb&&(b=this.x0+this.R*f,c=this.y0);var g=Yd(2*Math.abs(e/Math.PI));(Math.abs(f)<=Gb||Math.abs(Math.abs(e)-Cb)<=Gb)&&(b=this.x0,c=e>=0?this.y0+Math.PI*this.R*Math.tan(.5*g):this.y0+Math.PI*this.R*-Math.tan(.5*g));var h=.5*Math.abs(Math.PI/f-f/Math.PI),i=h*h,j=Math.sin(g),k=Math.cos(g),l=k/(j+k-1),m=l*l,n=l*(2/j-1),o=n*n,p=Math.PI*this.R*(h*(l-o)+Math.sqrt(i*(l-o)*(l-o)-(o+i)*(m-o)))/(o+i);f<0&&(p=-p),b=this.x0+p;var q=i+l;return p=Math.PI*this.R*(n*q-h*Math.sqrt((o+i)*(i+1)-q*q))/(o+i),c=e>=0?this.y0+p:this.y0-p,a.x=b,a.y=c,a}function pb(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;return a.x-=this.x0,a.y-=this.y0,l=Math.PI*this.R,d=a.x/l,e=a.y/l,f=d*d+e*e,g=-Math.abs(e)*(1+f),h=g-2*e*e+d*d,i=-2*g+1+2*e*e+f*f,n=e*e/i+(2*h*h*h/i/i/i-9*g*h/i/i)/27,j=(g-h*h/3/i)/i,k=2*Math.sqrt(-j/3),l=3*n/j/k,Math.abs(l)>1&&(l=l>=0?1:-1),m=Math.acos(l)/3,c=a.y>=0?(-k*Math.cos(m+Math.PI/3)-h/3/i)*Math.PI:-(-k*Math.cos(m+Math.PI/3)-h/3/i)*Math.PI,b=Math.abs(d)<Gb?this.long0:fc(this.long0+Math.PI*(f-1+Math.sqrt(1+2*(d*d-e*e)+f*f))/2/d),a.x=b,a.y=c,a}function qb(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function rb(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=a.x,z=a.y,A=Math.sin(a.y),B=Math.cos(a.y),C=fc(y-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=Gb?(a.x=this.x0+this.a*(Cb-z)*Math.sin(C),a.y=this.y0-this.a*(Cb-z)*Math.cos(C),a):Math.abs(this.sin_p12+1)<=Gb?(a.x=this.x0+this.a*(Cb+z)*Math.sin(C),a.y=this.y0+this.a*(Cb+z)*Math.cos(C),a):(s=this.sin_p12*A+this.cos_p12*B*Math.cos(C),q=Math.acos(s),r=q/Math.sin(q),a.x=this.x0+this.a*r*B*Math.sin(C),a.y=this.y0+this.a*r*(this.cos_p12*A-this.sin_p12*B*Math.cos(C)),a):(b=Cd(this.es),c=Dd(this.es),d=Ed(this.es),e=Fd(this.es),Math.abs(this.sin_p12-1)<=Gb?(f=this.a*Bd(b,c,d,e,Cb),g=this.a*Bd(b,c,d,e,z),a.x=this.x0+(f-g)*Math.sin(C),a.y=this.y0-(f-g)*Math.cos(C),a):Math.abs(this.sin_p12+1)<=Gb?(f=this.a*Bd(b,c,d,e,Cb),g=this.a*Bd(b,c,d,e,z),a.x=this.x0+(f+g)*Math.sin(C),a.y=this.y0+(f+g)*Math.cos(C),a):(h=A/B,i=Gd(this.a,this.e,this.sin_p12),j=Gd(this.a,this.e,A),k=Math.atan((1-this.es)*h+this.es*i*this.sin_p12/(j*B)),l=Math.atan2(Math.sin(C),this.cos_p12*Math.tan(k)-this.sin_p12*Math.cos(C)),t=0===l?Math.asin(this.cos_p12*Math.sin(k)-this.sin_p12*Math.cos(k)):Math.abs(Math.abs(l)-Math.PI)<=Gb?-Math.asin(this.cos_p12*Math.sin(k)-this.sin_p12*Math.cos(k)):Math.asin(Math.sin(C)*Math.cos(k)/Math.sin(l)),m=this.e*this.sin_p12/Math.sqrt(1-this.es),n=this.e*this.cos_p12*Math.cos(l)/Math.sqrt(1-this.es),o=m*n,p=n*n,u=t*t,v=u*t,w=v*t,x=w*t,q=i*t*(1-u*p*(1-p)/6+v/8*o*(1-2*p)+w/120*(p*(4-7*p)-3*m*m*(1-7*p))-x/48*o),a.x=this.x0+q*Math.sin(l),a.y=this.y0+q*Math.cos(l),a))}function sb(a){a.x-=this.x0,a.y-=this.y0;var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;if(this.sphere){if(b=Math.sqrt(a.x*a.x+a.y*a.y),b>2*Cb*this.a)return;return c=b/this.a,d=Math.sin(c),e=Math.cos(c),f=this.long0,Math.abs(b)<=Gb?g=this.lat0:(g=Yd(e*this.sin_p12+a.y*d*this.cos_p12/b),h=Math.abs(this.lat0)-Cb,f=fc(Math.abs(h)<=Gb?this.lat0>=0?this.long0+Math.atan2(a.x,-a.y):this.long0-Math.atan2(-a.x,a.y):this.long0+Math.atan2(a.x*d,b*this.cos_p12*e-a.y*this.sin_p12*d))),a.x=f,a.y=g,a}return i=Cd(this.es),j=Dd(this.es),k=Ed(this.es),l=Fd(this.es),Math.abs(this.sin_p12-1)<=Gb?(m=this.a*Bd(i,j,k,l,Cb),b=Math.sqrt(a.x*a.x+a.y*a.y),n=m-b,g=Id(n/this.a,i,j,k,l),f=fc(this.long0+Math.atan2(a.x,-1*a.y)),a.x=f,a.y=g,a):Math.abs(this.sin_p12+1)<=Gb?(m=this.a*Bd(i,j,k,l,Cb),b=Math.sqrt(a.x*a.x+a.y*a.y),n=b-m,g=Id(n/this.a,i,j,k,l),f=fc(this.long0+Math.atan2(a.x,a.y)),a.x=f,a.y=g,a):(b=Math.sqrt(a.x*a.x+a.y*a.y),q=Math.atan2(a.x,a.y),o=Gd(this.a,this.e,this.sin_p12),r=Math.cos(q),s=this.e*this.cos_p12*r,t=-s*s/(1-this.es),u=3*this.es*(1-t)*this.sin_p12*this.cos_p12*r/(1-this.es),v=b/o,w=v-t*(1+t)*Math.pow(v,3)/6-u*(1+3*t)*Math.pow(v,4)/24,x=1-t*w*w/2-v*w*w*w/6,p=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*r),f=fc(this.long0+Math.asin(Math.sin(q)*Math.sin(w)/Math.cos(p))),g=Math.atan((1-this.es*x*this.sin_p12/Math.sin(p))*Math.tan(p)/(1-this.es)),a.x=f,a.y=g,a)}function tb(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function ub(a){var b,c,d,e,f,g,h,i,j=a.x,k=a.y;return d=fc(j-this.long0),b=Math.sin(k),c=Math.cos(k),e=Math.cos(d),g=this.sin_p14*b+this.cos_p14*c*e,f=1,(g>0||Math.abs(g)<=Gb)&&(h=this.a*f*c*Math.sin(d),i=this.y0+this.a*f*(this.cos_p14*b-this.sin_p14*c*e)),a.x=h,a.y=i,a}function vb(a){var b,c,d,e,f,g,h;return a.x-=this.x0,a.y-=this.y0,b=Math.sqrt(a.x*a.x+a.y*a.y),c=Yd(b/this.a),d=Math.sin(c),e=Math.cos(c),g=this.long0,Math.abs(b)<=Gb?(h=this.lat0,a.x=g,a.y=h,a):(h=Yd(e*this.sin_p14+a.y*d*this.cos_p14/b),f=Math.abs(this.lat0)-Cb,Math.abs(f)<=Gb?(g=fc(this.lat0>=0?this.long0+Math.atan2(a.x,-a.y):this.long0-Math.atan2(-a.x,a.y)),a.x=g,a.y=h,a):(g=fc(this.long0+Math.atan2(a.x*d,b*this.cos_p14*e-a.y*this.sin_p14*d)),a.x=g,a.y=h,a))}var wb=function(a){a("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),a("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),a("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),a.WGS84=a["EPSG:4326"],a["EPSG:3785"]=a["EPSG:3857"],a.GOOGLE=a["EPSG:3857"],a["EPSG:900913"]=a["EPSG:3857"],a["EPSG:102113"]=a["EPSG:3857"]},xb=1,yb=2,zb=4,Ab=5,Bb=484813681109536e-20,Cb=Math.PI/2,Db=.16666666666666666,Eb=.04722222222222222,Fb=.022156084656084655,Gb="undefined"==typeof Number.EPSILON?1e-10:Number.EPSILON,Hb=.017453292519943295,Ib=57.29577951308232,Jb=Math.PI/4,Kb=2*Math.PI,Lb=3.14159265359,Mb={};Mb.greenwich=0,Mb.lisbon=-9.131906111111,Mb.paris=2.337229166667,Mb.bogota=-74.080916666667,Mb.madrid=-3.687938888889,Mb.rome=12.452333333333,Mb.bern=7.439583333333,Mb.jakarta=106.807719444444,Mb.ferro=-17.666666666667,Mb.brussels=4.367975,Mb.stockholm=18.058277777778,Mb.athens=23.7163375,Mb.oslo=10.722916666667;var Nb={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Ob=/[\s_\-\/\(\)]/g,Pb=function(b){var c,d,e,f={},g=b.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,b){var c=b.split("=");return c.push(!0),a[c[0].toLowerCase()]=c[1],a},{}),h={proj:"projName",datum:"datumCode",rf:function(a){f.rf=parseFloat(a)},lat_0:function(a){f.lat0=a*Hb},lat_1:function(a){f.lat1=a*Hb},lat_2:function(a){f.lat2=a*Hb},lat_ts:function(a){f.lat_ts=a*Hb},lon_0:function(a){f.long0=a*Hb},lon_1:function(a){f.long1=a*Hb},lon_2:function(a){f.long2=a*Hb},alpha:function(a){f.alpha=parseFloat(a)*Hb},lonc:function(a){f.longc=a*Hb},x_0:function(a){f.x0=parseFloat(a)},y_0:function(a){f.y0=parseFloat(a)},k_0:function(a){f.k0=parseFloat(a)},k:function(a){f.k0=parseFloat(a)},a:function(a){f.a=parseFloat(a)},b:function(a){f.b=parseFloat(a)},r_a:function(){f.R_A=!0},zone:function(a){f.zone=parseInt(a,10)},south:function(){f.utmSouth=!0},towgs84:function(a){f.datum_params=a.split(",").map(function(a){return parseFloat(a)})},to_meter:function(a){f.to_meter=parseFloat(a)},units:function(b){f.units=b;var c=a(Nb,b);c&&(f.to_meter=c.to_meter)},from_greenwich:function(a){f.from_greenwich=a*Hb},pm:function(b){var c=a(Mb,b);f.from_greenwich=(c?c:parseFloat(b))*Hb},nadgrids:function(a){"@null"===a?f.datumCode="none":f.nadgrids=a},axis:function(a){var b="ewnsud";3===a.length&&b.indexOf(a.substr(0,1))!==-1&&b.indexOf(a.substr(1,1))!==-1&&b.indexOf(a.substr(2,1))!==-1&&(f.axis=a)}};for(c in g)d=g[c],c in h?(e=h[c],"function"==typeof e?e(d):f[e]=d):f[c]=d;return"string"==typeof f.datumCode&&"WGS84"!==f.datumCode&&(f.datumCode=f.datumCode.toLowerCase()),f},Qb=1,Rb=2,Sb=3,Tb=4,Ub=5,Vb=-1,Wb=/\s/,Xb=/[A-Za-z]/,Yb=/[A-Za-z84]/,Zb=/[,\]]/,$b=/[\d\.E\-\+]/;b.prototype.readCharicter=function(){var a=this.text[this.place++];if(this.state!==Tb)for(;Wb.test(a);){if(this.place>=this.text.length)return;a=this.text[this.place++]}switch(this.state){case Qb:return this.neutral(a);case Rb:return this.keyword(a);case Tb:return this.quoted(a);case Ub:return this.afterquote(a);case Sb:return this.number(a);case Vb:return}},b.prototype.afterquote=function(a){if('"'===a)return this.word+='"',void(this.state=Tb);if(Zb.test(a))return this.word=this.word.trim(),void this.afterItem(a);throw new Error("havn't handled \""+a+'" in afterquote yet, index '+this.place)},b.prototype.afterItem=function(a){return","===a?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=Qb)):"]"===a?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=Qb,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=Vb))):void 0},b.prototype.number=function(a){if($b.test(a))return void(this.word+=a);if(Zb.test(a))return this.word=parseFloat(this.word),void this.afterItem(a);throw new Error("havn't handled \""+a+'" in number yet, index '+this.place)},b.prototype.quoted=function(a){return'"'===a?void(this.state=Ub):void(this.word+=a)},b.prototype.keyword=function(a){if(Yb.test(a))return void(this.word+=a);if("["===a){var b=[];return b.push(this.word),this.level++,null===this.root?this.root=b:this.currentObject.push(b),this.stack.push(this.currentObject),this.currentObject=b,void(this.state=Qb)}if(Zb.test(a))return void this.afterItem(a);throw new Error("havn't handled \""+a+'" in keyword yet, index '+this.place)},b.prototype.neutral=function(a){if(Xb.test(a))return this.word=a,void(this.state=Rb);if('"'===a)return this.word="",void(this.state=Tb);if($b.test(a))return this.word=a,void(this.state=Sb);if(Zb.test(a))return void this.afterItem(a);throw new Error("havn't handled \""+a+'" in neutral yet, index '+this.place)},b.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Vb)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var _b=.017453292519943295,ac=function(a){var b=c(a),d=b.shift(),f=b.shift();b.unshift(["name",f]),b.unshift(["type",d]);var g={};return e(b,g),h(g),g};wb(i);var bc=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],cc=function(a,b){a=a||{};var c,d;if(!b)return a;for(d in b)c=b[d],void 0!==c&&(a[d]=c);return a},dc=function(a,b,c){var d=a*b;return c/Math.sqrt(1-d*d)},ec=function(a){return a<0?-1:1},fc=function(a){return Math.abs(a)<=Lb?a:a-ec(a)*Kb},gc=function(a,b,c){var d=a*c,e=.5*a;return d=Math.pow((1-d)/(1+d),e),Math.tan(.5*(Cb-b))/d},hc=function(a,b){for(var c,d,e=.5*a,f=Cb-2*Math.atan(b),g=0;g<=15;g++)if(c=a*Math.sin(f),d=Cb-2*Math.atan(b*Math.pow((1-c)/(1+c),e))-f,f+=d,Math.abs(d)<=1e-10)return f;return-9999},ic=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],jc={init:o,forward:p,inverse:q,names:ic},kc=["longlat","identity"],lc={init:r,forward:s,inverse:s,names:kc},mc=[jc,lc],nc={},oc=[],pc={start:v,add:t,get:u},qc={};qc.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},qc.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},qc.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},qc.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},qc.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},qc.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},qc.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},qc.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},qc.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},qc.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},qc.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},qc.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},qc.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},qc.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},qc.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},qc.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},qc.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},qc.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},qc.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},qc.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},qc.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},qc.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},qc.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},qc.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},qc.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},qc.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},qc.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},qc.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},qc.hough={a:6378270,rf:297,ellipseName:"Hough"},qc.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},qc.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},qc.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},qc.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},qc.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},qc.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},qc.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},qc.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},qc.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},qc.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},qc.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},qc.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var rc=qc.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};qc.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var sc={};sc.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},sc.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},sc.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},sc.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},sc.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},sc.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},sc.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},sc.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},sc.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},sc.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},sc.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},sc.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},sc.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},sc.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},sc.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},sc.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},z.projections=pc,z.projections.start();
var tc=function(a,b,c){return A(a,b)?c:a.datum_type===Ab||b.datum_type===Ab?c:a.es!==b.es||a.a!==b.a||F(a.datum_type)||F(b.datum_type)?(c=B(c,a.es,a.a),F(a.datum_type)&&(c=D(c,a.datum_type,a.datum_params)),F(b.datum_type)&&(c=E(c,b.datum_type,b.datum_params)),C(c,b.es,b.a,b.b)):c},uc=function(a,b,c){var d,e,f,g=c.x,h=c.y,i=c.z||0,j={};for(f=0;f<3;f++)if(!b||2!==f||void 0!==c.z)switch(0===f?(d=g,e="x"):1===f?(d=h,e="y"):(d=i,e="z"),a.axis[f]){case"e":j[e]=d;break;case"w":j[e]=-d;break;case"n":j[e]=d;break;case"s":j[e]=-d;break;case"u":void 0!==c[e]&&(j.z=d);break;case"d":void 0!==c[e]&&(j.z=-d);break;default:return null}return j},vc=function(a){var b={x:a[0],y:a[1]};return a.length>2&&(b.z=a[2]),a.length>3&&(b.m=a[3]),b},wc=z("WGS84"),xc=6,yc="AJSAJS",zc="AFAFAF",Ac=65,Bc=73,Cc=79,Dc=86,Ec=90,Fc={forward:L,inverse:M,toPoint:N};Point.fromMGRS=function(a){return new Point(N(a))},Point.prototype.toMGRS=function(a){return L([this.x,this.y],a)};var Gc="2.4.3",Hc=1,Ic=.25,Jc=.046875,Kc=.01953125,Lc=.01068115234375,Mc=.75,Nc=.46875,Oc=.013020833333333334,Pc=.007120768229166667,Qc=.3645833333333333,Rc=.005696614583333333,Sc=.3076171875,Tc=function(a){var b=[];b[0]=Hc-a*(Ic+a*(Jc+a*(Kc+a*Lc))),b[1]=a*(Mc-a*(Jc+a*(Kc+a*Lc)));var c=a*a;return b[2]=c*(Nc-a*(Oc+a*Pc)),c*=a,b[3]=c*(Qc-a*Rc),b[4]=c*a*Sc,b},Uc=function(a,b,c,d){return c*=b,b*=b,d[0]*a-c*(d[1]+b*(d[2]+b*(d[3]+b*d[4])))},Vc=20,Wc=function(a,b,c){for(var d=1/(1-b),e=a,f=Vc;f;--f){var g=Math.sin(e),h=1-b*g*g;if(h=(Uc(e,g,Math.cos(e),c)-a)*(h*Math.sqrt(h))*d,e-=h,Math.abs(h)<Gb)return e}return e},Xc=["Transverse_Mercator","Transverse Mercator","tmerc"],Yc={init:_,forward:aa,inverse:ba,names:Xc},Zc=function(a){var b=Math.exp(a);return b=(b-1/b)/2},$c=function(a,b){a=Math.abs(a),b=Math.abs(b);var c=Math.max(a,b),d=Math.min(a,b)/(c?c:1);return c*Math.sqrt(1+Math.pow(d,2))},_c=function(a){var b=1+a,c=b-1;return 0===c?a:a*Math.log(b)/c},ad=function(a){var b=Math.abs(a);return b=_c(b*(1+b/($c(1,b)+1))),a<0?-b:b},bd=function(a,b){for(var c,d=2*Math.cos(2*b),e=a.length-1,f=a[e],g=0;--e>=0;)c=-g+d*f+a[e],g=f,f=c;return b+c*Math.sin(2*b)},cd=function(a,b){for(var c,d=2*Math.cos(b),e=a.length-1,f=a[e],g=0;--e>=0;)c=-g+d*f+a[e],g=f,f=c;return Math.sin(b)*c},dd=function(a){var b=Math.exp(a);return b=(b+1/b)/2},ed=function(a,b,c){for(var d,e,f=Math.sin(b),g=Math.cos(b),h=Zc(c),i=dd(c),j=2*g*i,k=-2*f*h,l=a.length-1,m=a[l],n=0,o=0,p=0;--l>=0;)d=o,e=n,o=m,n=p,m=-d+j*o-k*n+a[l],p=-e+k*o+j*n;return j=f*i,k=g*h,[j*m-k*p,j*p+k*m]},fd=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"],gd={init:ca,forward:da,inverse:ea,names:fd},hd=function(a,b){if(void 0===a){if(a=Math.floor(30*(fc(b)+Math.PI)/Math.PI)+1,a<0)return 0;if(a>60)return 60}return a},id="etmerc",jd=["Universal Transverse Mercator System","utm"],kd={init:fa,names:jd,dependsOn:id},ld=function(a,b){return Math.pow((1-a)/(1+a),b)},md=20,nd=["gauss"],od={init:ga,forward:ha,inverse:ia,names:nd},pd=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"],qd={init:ja,forward:ka,inverse:la,names:pd},rd=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],sd={init:na,forward:oa,inverse:pa,names:rd,ssfn_:ma},td=["somerc"],ud={init:qa,forward:ra,inverse:sa,names:td},vd=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"],wd={init:ta,forward:ua,inverse:va,names:vd},xd=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"],yd={init:wa,forward:xa,inverse:ya,names:xd},zd=["Krovak","krovak"],Ad={init:za,forward:Aa,inverse:Ba,names:zd},Bd=function(a,b,c,d,e){return a*e-b*Math.sin(2*e)+c*Math.sin(4*e)-d*Math.sin(6*e)},Cd=function(a){return 1-.25*a*(1+a/16*(3+1.25*a))},Dd=function(a){return.375*a*(1+.25*a*(1+.46875*a))},Ed=function(a){return.05859375*a*a*(1+.75*a)},Fd=function(a){return a*a*a*(35/3072)},Gd=function(a,b,c){var d=b*c;return a/Math.sqrt(1-d*d)},Hd=function(a){return Math.abs(a)<Cb?a:a-ec(a)*Math.PI},Id=function(a,b,c,d,e){var f,g;f=a/b;for(var h=0;h<15;h++)if(g=(a-(b*f-c*Math.sin(2*f)+d*Math.sin(4*f)-e*Math.sin(6*f)))/(b-2*c*Math.cos(2*f)+4*d*Math.cos(4*f)-6*e*Math.cos(6*f)),f+=g,Math.abs(g)<=1e-10)return f;return NaN},Jd=["Cassini","Cassini_Soldner","cass"],Kd={init:Ca,forward:Da,inverse:Ea,names:Jd},Ld=function(a,b){var c;return a>1e-7?(c=a*b,(1-a*a)*(b/(1-c*c)-.5/a*Math.log((1-c)/(1+c)))):2*b},Md=1,Nd=2,Od=3,Pd=4,Qd=.3333333333333333,Rd=.17222222222222222,Sd=.10257936507936508,Td=.06388888888888888,Ud=.0664021164021164,Vd=.016415012942191543,Wd=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],Xd={init:Fa,forward:Ga,inverse:Ha,names:Wd,S_POLE:Md,N_POLE:Nd,EQUIT:Od,OBLIQ:Pd},Yd=function(a){return Math.abs(a)>1&&(a=a>1?1:-1),Math.asin(a)},Zd=["Albers_Conic_Equal_Area","Albers","aea"],$d={init:Ka,forward:La,inverse:Ma,names:Zd,phi1z:Na},_d=["gnom"],ae={init:Oa,forward:Pa,inverse:Qa,names:_d},be=function(a,b){var c=1-(1-a*a)/(2*a)*Math.log((1-a)/(1+a));if(Math.abs(Math.abs(b)-c)<1e-6)return b<0?-1*Cb:Cb;for(var d,e,f,g,h=Math.asin(.5*b),i=0;i<30;i++)if(e=Math.sin(h),f=Math.cos(h),g=a*e,d=Math.pow(1-g*g,2)/(2*f)*(b/(1-a*a)-e/(1-g*g)+.5/a*Math.log((1-g)/(1+g))),h+=d,Math.abs(d)<=1e-10)return h;return NaN},ce=["cea"],de={init:Ra,forward:Sa,inverse:Ta,names:ce},ee=["Equirectangular","Equidistant_Cylindrical","eqc"],fe={init:Ua,forward:Va,inverse:Wa,names:ee},ge=20,he=["Polyconic","poly"],ie={init:Xa,forward:Ya,inverse:Za,names:he},je=["New_Zealand_Map_Grid","nzmg"],ke={init:$a,forward:_a,inverse:ab,names:je},le=["Miller_Cylindrical","mill"],me={init:bb,forward:cb,inverse:db,names:le},ne=20,oe=["Sinusoidal","sinu"],pe={init:eb,forward:fb,inverse:gb,names:oe},qe=["Mollweide","moll"],re={init:hb,forward:ib,inverse:jb,names:qe},se=["Equidistant_Conic","eqdc"],te={init:kb,forward:lb,inverse:mb,names:se},ue=["Van_der_Grinten_I","VanDerGrinten","vandg"],ve={init:nb,forward:ob,inverse:pb,names:ue},we=["Azimuthal_Equidistant","aeqd"],xe={init:qb,forward:rb,inverse:sb,names:we},ye=["ortho"],ze={init:tb,forward:ub,inverse:vb,names:ye},Ae=function(proj4){proj4.Proj.projections.add(Yc),proj4.Proj.projections.add(gd),proj4.Proj.projections.add(kd),proj4.Proj.projections.add(qd),proj4.Proj.projections.add(sd),proj4.Proj.projections.add(ud),proj4.Proj.projections.add(wd),proj4.Proj.projections.add(yd),proj4.Proj.projections.add(Ad),proj4.Proj.projections.add(Kd),proj4.Proj.projections.add(Xd),proj4.Proj.projections.add($d),proj4.Proj.projections.add(ae),proj4.Proj.projections.add(de),proj4.Proj.projections.add(fe),proj4.Proj.projections.add(ie),proj4.Proj.projections.add(ke),proj4.Proj.projections.add(me),proj4.Proj.projections.add(pe),proj4.Proj.projections.add(re),proj4.Proj.projections.add(te),proj4.Proj.projections.add(ve),proj4.Proj.projections.add(xe),proj4.Proj.projections.add(ze)};return K.defaultDatum="WGS84",K.Proj=z,K.WGS84=new K.Proj("WGS84"),K.Point=Point,K.toPoint=vc,K.defs=i,K.transform=H,K.mgrs=Fc,K.version=Gc,Ae(K),K});

/***/ }),
/* 747 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {/**
 * Copyright (c) 2014, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * https://raw.github.com/facebook/regenerator/master/LICENSE file. An
 * additional grant of patent rights can be found in the PATENTS file in
 * the same directory.
 */

!(function(global) {
  "use strict";

  var Op = Object.prototype;
  var hasOwn = Op.hasOwnProperty;
  var undefined; // More compressible than void 0.
  var $Symbol = typeof Symbol === "function" ? Symbol : {};
  var iteratorSymbol = $Symbol.iterator || "@@iterator";
  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";
  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";

  var inModule = typeof module === "object";
  var runtime = global.regeneratorRuntime;
  if (runtime) {
    if (inModule) {
      // If regeneratorRuntime is defined globally and we're in a module,
      // make the exports object identical to regeneratorRuntime.
      module.exports = runtime;
    }
    // Don't bother evaluating the rest of this file if the runtime was
    // already defined globally.
    return;
  }

  // Define the runtime globally (as expected by generated code) as either
  // module.exports (if we're in a module) or a new, empty object.
  runtime = global.regeneratorRuntime = inModule ? module.exports : {};

  function wrap(innerFn, outerFn, self, tryLocsList) {
    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.
    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;
    var generator = Object.create(protoGenerator.prototype);
    var context = new Context(tryLocsList || []);

    // The ._invoke method unifies the implementations of the .next,
    // .throw, and .return methods.
    generator._invoke = makeInvokeMethod(innerFn, self, context);

    return generator;
  }
  runtime.wrap = wrap;

  // Try/catch helper to minimize deoptimizations. Returns a completion
  // record like context.tryEntries[i].completion. This interface could
  // have been (and was previously) designed to take a closure to be
  // invoked without arguments, but in all the cases we care about we
  // already have an existing method we want to call, so there's no need
  // to create a new function object. We can even get away with assuming
  // the method takes exactly one argument, since that happens to be true
  // in every case, so we don't have to touch the arguments object. The
  // only additional allocation required is the completion record, which
  // has a stable shape and so hopefully should be cheap to allocate.
  function tryCatch(fn, obj, arg) {
    try {
      return { type: "normal", arg: fn.call(obj, arg) };
    } catch (err) {
      return { type: "throw", arg: err };
    }
  }

  var GenStateSuspendedStart = "suspendedStart";
  var GenStateSuspendedYield = "suspendedYield";
  var GenStateExecuting = "executing";
  var GenStateCompleted = "completed";

  // Returning this object from the innerFn has the same effect as
  // breaking out of the dispatch switch statement.
  var ContinueSentinel = {};

  // Dummy constructor functions that we use as the .constructor and
  // .constructor.prototype properties for functions that return Generator
  // objects. For full spec compliance, you may wish to configure your
  // minifier not to mangle the names of these two functions.
  function Generator() {}
  function GeneratorFunction() {}
  function GeneratorFunctionPrototype() {}

  // This is a polyfill for %IteratorPrototype% for environments that
  // don't natively support it.
  var IteratorPrototype = {};
  IteratorPrototype[iteratorSymbol] = function () {
    return this;
  };

  var getProto = Object.getPrototypeOf;
  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));
  if (NativeIteratorPrototype &&
      NativeIteratorPrototype !== Op &&
      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {
    // This environment has a native %IteratorPrototype%; use it instead
    // of the polyfill.
    IteratorPrototype = NativeIteratorPrototype;
  }

  var Gp = GeneratorFunctionPrototype.prototype =
    Generator.prototype = Object.create(IteratorPrototype);
  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;
  GeneratorFunctionPrototype.constructor = GeneratorFunction;
  GeneratorFunctionPrototype[toStringTagSymbol] =
    GeneratorFunction.displayName = "GeneratorFunction";

  // Helper for defining the .next, .throw, and .return methods of the
  // Iterator interface in terms of a single ._invoke method.
  function defineIteratorMethods(prototype) {
    ["next", "throw", "return"].forEach(function(method) {
      prototype[method] = function(arg) {
        return this._invoke(method, arg);
      };
    });
  }

  runtime.isGeneratorFunction = function(genFun) {
    var ctor = typeof genFun === "function" && genFun.constructor;
    return ctor
      ? ctor === GeneratorFunction ||
        // For the native GeneratorFunction constructor, the best we can
        // do is to check its .name property.
        (ctor.displayName || ctor.name) === "GeneratorFunction"
      : false;
  };

  runtime.mark = function(genFun) {
    if (Object.setPrototypeOf) {
      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
    } else {
      genFun.__proto__ = GeneratorFunctionPrototype;
      if (!(toStringTagSymbol in genFun)) {
        genFun[toStringTagSymbol] = "GeneratorFunction";
      }
    }
    genFun.prototype = Object.create(Gp);
    return genFun;
  };

  // Within the body of any async function, `await x` is transformed to
  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test
  // `hasOwn.call(value, "__await")` to determine if the yielded value is
  // meant to be awaited.
  runtime.awrap = function(arg) {
    return { __await: arg };
  };

  function AsyncIterator(generator) {
    function invoke(method, arg, resolve, reject) {
      var record = tryCatch(generator[method], generator, arg);
      if (record.type === "throw") {
        reject(record.arg);
      } else {
        var result = record.arg;
        var value = result.value;
        if (value &&
            typeof value === "object" &&
            hasOwn.call(value, "__await")) {
          return Promise.resolve(value.__await).then(function(value) {
            invoke("next", value, resolve, reject);
          }, function(err) {
            invoke("throw", err, resolve, reject);
          });
        }

        return Promise.resolve(value).then(function(unwrapped) {
          // When a yielded Promise is resolved, its final value becomes
          // the .value of the Promise<{value,done}> result for the
          // current iteration. If the Promise is rejected, however, the
          // result for this iteration will be rejected with the same
          // reason. Note that rejections of yielded Promises are not
          // thrown back into the generator function, as is the case
          // when an awaited Promise is rejected. This difference in
          // behavior between yield and await is important, because it
          // allows the consumer to decide what to do with the yielded
          // rejection (swallow it and continue, manually .throw it back
          // into the generator, abandon iteration, whatever). With
          // await, by contrast, there is no opportunity to examine the
          // rejection reason outside the generator function, so the
          // only option is to throw it from the await expression, and
          // let the generator function handle the exception.
          result.value = unwrapped;
          resolve(result);
        }, reject);
      }
    }

    if (typeof global.process === "object" && global.process.domain) {
      invoke = global.process.domain.bind(invoke);
    }

    var previousPromise;

    function enqueue(method, arg) {
      function callInvokeWithMethodAndArg() {
        return new Promise(function(resolve, reject) {
          invoke(method, arg, resolve, reject);
        });
      }

      return previousPromise =
        // If enqueue has been called before, then we want to wait until
        // all previous Promises have been resolved before calling invoke,
        // so that results are always delivered in the correct order. If
        // enqueue has not been called before, then it is important to
        // call invoke immediately, without waiting on a callback to fire,
        // so that the async generator function has the opportunity to do
        // any necessary setup in a predictable way. This predictability
        // is why the Promise constructor synchronously invokes its
        // executor callback, and why async functions synchronously
        // execute code before the first await. Since we implement simple
        // async functions in terms of async generators, it is especially
        // important to get this right, even though it requires care.
        previousPromise ? previousPromise.then(
          callInvokeWithMethodAndArg,
          // Avoid propagating failures to Promises returned by later
          // invocations of the iterator.
          callInvokeWithMethodAndArg
        ) : callInvokeWithMethodAndArg();
    }

    // Define the unified helper method that is used to implement .next,
    // .throw, and .return (see defineIteratorMethods).
    this._invoke = enqueue;
  }

  defineIteratorMethods(AsyncIterator.prototype);
  AsyncIterator.prototype[asyncIteratorSymbol] = function () {
    return this;
  };
  runtime.AsyncIterator = AsyncIterator;

  // Note that simple async functions are implemented on top of
  // AsyncIterator objects; they just return a Promise for the value of
  // the final result produced by the iterator.
  runtime.async = function(innerFn, outerFn, self, tryLocsList) {
    var iter = new AsyncIterator(
      wrap(innerFn, outerFn, self, tryLocsList)
    );

    return runtime.isGeneratorFunction(outerFn)
      ? iter // If outerFn is a generator, return the full iterator.
      : iter.next().then(function(result) {
          return result.done ? result.value : iter.next();
        });
  };

  function makeInvokeMethod(innerFn, self, context) {
    var state = GenStateSuspendedStart;

    return function invoke(method, arg) {
      if (state === GenStateExecuting) {
        throw new Error("Generator is already running");
      }

      if (state === GenStateCompleted) {
        if (method === "throw") {
          throw arg;
        }

        // Be forgiving, per 25.3.3.3.3 of the spec:
        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume
        return doneResult();
      }

      context.method = method;
      context.arg = arg;

      while (true) {
        var delegate = context.delegate;
        if (delegate) {
          var delegateResult = maybeInvokeDelegate(delegate, context);
          if (delegateResult) {
            if (delegateResult === ContinueSentinel) continue;
            return delegateResult;
          }
        }

        if (context.method === "next") {
          // Setting context._sent for legacy support of Babel's
          // function.sent implementation.
          context.sent = context._sent = context.arg;

        } else if (context.method === "throw") {
          if (state === GenStateSuspendedStart) {
            state = GenStateCompleted;
            throw context.arg;
          }

          context.dispatchException(context.arg);

        } else if (context.method === "return") {
          context.abrupt("return", context.arg);
        }

        state = GenStateExecuting;

        var record = tryCatch(innerFn, self, context);
        if (record.type === "normal") {
          // If an exception is thrown from innerFn, we leave state ===
          // GenStateExecuting and loop back for another invocation.
          state = context.done
            ? GenStateCompleted
            : GenStateSuspendedYield;

          if (record.arg === ContinueSentinel) {
            continue;
          }

          return {
            value: record.arg,
            done: context.done
          };

        } else if (record.type === "throw") {
          state = GenStateCompleted;
          // Dispatch the exception by looping back around to the
          // context.dispatchException(context.arg) call above.
          context.method = "throw";
          context.arg = record.arg;
        }
      }
    };
  }

  // Call delegate.iterator[context.method](context.arg) and handle the
  // result, either by returning a { value, done } result from the
  // delegate iterator, or by modifying context.method and context.arg,
  // setting context.delegate to null, and returning the ContinueSentinel.
  function maybeInvokeDelegate(delegate, context) {
    var method = delegate.iterator[context.method];
    if (method === undefined) {
      // A .throw or .return when the delegate iterator has no .throw
      // method always terminates the yield* loop.
      context.delegate = null;

      if (context.method === "throw") {
        if (delegate.iterator.return) {
          // If the delegate iterator has a return method, give it a
          // chance to clean up.
          context.method = "return";
          context.arg = undefined;
          maybeInvokeDelegate(delegate, context);

          if (context.method === "throw") {
            // If maybeInvokeDelegate(context) changed context.method from
            // "return" to "throw", let that override the TypeError below.
            return ContinueSentinel;
          }
        }

        context.method = "throw";
        context.arg = new TypeError(
          "The iterator does not provide a 'throw' method");
      }

      return ContinueSentinel;
    }

    var record = tryCatch(method, delegate.iterator, context.arg);

    if (record.type === "throw") {
      context.method = "throw";
      context.arg = record.arg;
      context.delegate = null;
      return ContinueSentinel;
    }

    var info = record.arg;

    if (! info) {
      context.method = "throw";
      context.arg = new TypeError("iterator result is not an object");
      context.delegate = null;
      return ContinueSentinel;
    }

    if (info.done) {
      // Assign the result of the finished delegate to the temporary
      // variable specified by delegate.resultName (see delegateYield).
      context[delegate.resultName] = info.value;

      // Resume execution at the desired location (see delegateYield).
      context.next = delegate.nextLoc;

      // If context.method was "throw" but the delegate handled the
      // exception, let the outer generator proceed normally. If
      // context.method was "next", forget context.arg since it has been
      // "consumed" by the delegate iterator. If context.method was
      // "return", allow the original .return call to continue in the
      // outer generator.
      if (context.method !== "return") {
        context.method = "next";
        context.arg = undefined;
      }

    } else {
      // Re-yield the result returned by the delegate method.
      return info;
    }

    // The delegate iterator is finished, so forget it and continue with
    // the outer generator.
    context.delegate = null;
    return ContinueSentinel;
  }

  // Define Generator.prototype.{next,throw,return} in terms of the
  // unified ._invoke helper method.
  defineIteratorMethods(Gp);

  Gp[toStringTagSymbol] = "Generator";

  // A Generator should always return itself as the iterator object when the
  // @@iterator function is called on it. Some browsers' implementations of the
  // iterator prototype chain incorrectly implement this, causing the Generator
  // object to not be returned from this call. This ensures that doesn't happen.
  // See https://github.com/facebook/regenerator/issues/274 for more details.
  Gp[iteratorSymbol] = function() {
    return this;
  };

  Gp.toString = function() {
    return "[object Generator]";
  };

  function pushTryEntry(locs) {
    var entry = { tryLoc: locs[0] };

    if (1 in locs) {
      entry.catchLoc = locs[1];
    }

    if (2 in locs) {
      entry.finallyLoc = locs[2];
      entry.afterLoc = locs[3];
    }

    this.tryEntries.push(entry);
  }

  function resetTryEntry(entry) {
    var record = entry.completion || {};
    record.type = "normal";
    delete record.arg;
    entry.completion = record;
  }

  function Context(tryLocsList) {
    // The root entry object (effectively a try statement without a catch
    // or a finally block) gives us a place to store values thrown from
    // locations where there is no enclosing try statement.
    this.tryEntries = [{ tryLoc: "root" }];
    tryLocsList.forEach(pushTryEntry, this);
    this.reset(true);
  }

  runtime.keys = function(object) {
    var keys = [];
    for (var key in object) {
      keys.push(key);
    }
    keys.reverse();

    // Rather than returning an object with a next method, we keep
    // things simple and return the next function itself.
    return function next() {
      while (keys.length) {
        var key = keys.pop();
        if (key in object) {
          next.value = key;
          next.done = false;
          return next;
        }
      }

      // To avoid creating an additional object, we just hang the .value
      // and .done properties off the next function object itself. This
      // also ensures that the minifier will not anonymize the function.
      next.done = true;
      return next;
    };
  };

  function values(iterable) {
    if (iterable) {
      var iteratorMethod = iterable[iteratorSymbol];
      if (iteratorMethod) {
        return iteratorMethod.call(iterable);
      }

      if (typeof iterable.next === "function") {
        return iterable;
      }

      if (!isNaN(iterable.length)) {
        var i = -1, next = function next() {
          while (++i < iterable.length) {
            if (hasOwn.call(iterable, i)) {
              next.value = iterable[i];
              next.done = false;
              return next;
            }
          }

          next.value = undefined;
          next.done = true;

          return next;
        };

        return next.next = next;
      }
    }

    // Return an iterator with no values.
    return { next: doneResult };
  }
  runtime.values = values;

  function doneResult() {
    return { value: undefined, done: true };
  }

  Context.prototype = {
    constructor: Context,

    reset: function(skipTempReset) {
      this.prev = 0;
      this.next = 0;
      // Resetting context._sent for legacy support of Babel's
      // function.sent implementation.
      this.sent = this._sent = undefined;
      this.done = false;
      this.delegate = null;

      this.method = "next";
      this.arg = undefined;

      this.tryEntries.forEach(resetTryEntry);

      if (!skipTempReset) {
        for (var name in this) {
          // Not sure about the optimal order of these conditions:
          if (name.charAt(0) === "t" &&
              hasOwn.call(this, name) &&
              !isNaN(+name.slice(1))) {
            this[name] = undefined;
          }
        }
      }
    },

    stop: function() {
      this.done = true;

      var rootEntry = this.tryEntries[0];
      var rootRecord = rootEntry.completion;
      if (rootRecord.type === "throw") {
        throw rootRecord.arg;
      }

      return this.rval;
    },

    dispatchException: function(exception) {
      if (this.done) {
        throw exception;
      }

      var context = this;
      function handle(loc, caught) {
        record.type = "throw";
        record.arg = exception;
        context.next = loc;

        if (caught) {
          // If the dispatched exception was caught by a catch block,
          // then let that catch block handle the exception normally.
          context.method = "next";
          context.arg = undefined;
        }

        return !! caught;
      }

      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        var record = entry.completion;

        if (entry.tryLoc === "root") {
          // Exception thrown outside of any try block that could handle
          // it, so set the completion value of the entire function to
          // throw the exception.
          return handle("end");
        }

        if (entry.tryLoc <= this.prev) {
          var hasCatch = hasOwn.call(entry, "catchLoc");
          var hasFinally = hasOwn.call(entry, "finallyLoc");

          if (hasCatch && hasFinally) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            } else if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else if (hasCatch) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            }

          } else if (hasFinally) {
            if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else {
            throw new Error("try statement without catch or finally");
          }
        }
      }
    },

    abrupt: function(type, arg) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc <= this.prev &&
            hasOwn.call(entry, "finallyLoc") &&
            this.prev < entry.finallyLoc) {
          var finallyEntry = entry;
          break;
        }
      }

      if (finallyEntry &&
          (type === "break" ||
           type === "continue") &&
          finallyEntry.tryLoc <= arg &&
          arg <= finallyEntry.finallyLoc) {
        // Ignore the finally entry if control is not jumping to a
        // location outside the try/catch block.
        finallyEntry = null;
      }

      var record = finallyEntry ? finallyEntry.completion : {};
      record.type = type;
      record.arg = arg;

      if (finallyEntry) {
        this.method = "next";
        this.next = finallyEntry.finallyLoc;
        return ContinueSentinel;
      }

      return this.complete(record);
    },

    complete: function(record, afterLoc) {
      if (record.type === "throw") {
        throw record.arg;
      }

      if (record.type === "break" ||
          record.type === "continue") {
        this.next = record.arg;
      } else if (record.type === "return") {
        this.rval = this.arg = record.arg;
        this.method = "return";
        this.next = "end";
      } else if (record.type === "normal" && afterLoc) {
        this.next = afterLoc;
      }

      return ContinueSentinel;
    },

    finish: function(finallyLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.finallyLoc === finallyLoc) {
          this.complete(entry.completion, entry.afterLoc);
          resetTryEntry(entry);
          return ContinueSentinel;
        }
      }
    },

    "catch": function(tryLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc === tryLoc) {
          var record = entry.completion;
          if (record.type === "throw") {
            var thrown = record.arg;
            resetTryEntry(entry);
          }
          return thrown;
        }
      }

      // The context.catch method must only be called with a location
      // argument that corresponds to a known catch block.
      throw new Error("illegal catch attempt");
    },

    delegateYield: function(iterable, resultName, nextLoc) {
      this.delegate = {
        iterator: values(iterable),
        resultName: resultName,
        nextLoc: nextLoc
      };

      if (this.method === "next") {
        // Deliberately forget the last sent value so that we don't
        // accidentally pass it on to the delegate.
        this.arg = undefined;
      }

      return ContinueSentinel;
    }
  };
})(
  // Among the various tricks for obtaining a reference to the global
  // object, this seems to be the most reliable technique that does not
  // use indirect eval (which violates Content Security Policy).
  typeof global === "object" ? global :
  typeof window === "object" ? window :
  typeof self === "object" ? self : this
);

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(178)))

/***/ }),
/* 748 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(274);
module.exports = __webpack_require__(273);


/***/ })
/******/ ]);
});